/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/_error";
exports.ids = ["pages/_error"];
exports.modules = {

/***/ "./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=private-next-pages%2F_error&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=private-next-pages%2F_error&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages/module.compiled */ \"./node_modules/next/dist/server/future/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"./node_modules/next/dist/pages/_document.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./pages/_app.jsx\");\n/* harmony import */ var private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! private-next-pages/_error */ \"./node_modules/next/dist/pages/_error.js\");\n/* harmony import */ var private_next_pages_error__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__]);\nprivate_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"default\"));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"getStaticProps\");\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"getStaticPaths\");\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"getServerSideProps\");\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"config\");\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"reportWebVitals\");\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticProps\");\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticPaths\");\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticParams\");\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerProps\");\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerSideProps\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/_error\",\n        pathname: \"/_error\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    components: {\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: (private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default())\n    },\n    userland: private_next_pages_error__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTJnBhZ2U9JTJGX2Vycm9yJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD1wcml2YXRlLW5leHQtcGFnZXMlMkZfZXJyb3ImYWJzb2x1dGVBcHBQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9hcHAmYWJzb2x1dGVEb2N1bWVudFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2RvY3VtZW50Jm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDaEM7QUFDTDtBQUMxRDtBQUNvRDtBQUNWO0FBQzFDO0FBQ3NEO0FBQ3REO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxxREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyx1QkFBdUIsd0VBQUssQ0FBQyxxREFBUTtBQUNyQyx1QkFBdUIsd0VBQUssQ0FBQyxxREFBUTtBQUNyQywyQkFBMkIsd0VBQUssQ0FBQyxxREFBUTtBQUN6QyxlQUFlLHdFQUFLLENBQUMscURBQVE7QUFDN0Isd0JBQXdCLHdFQUFLLENBQUMscURBQVE7QUFDN0M7QUFDTyxnQ0FBZ0Msd0VBQUssQ0FBQyxxREFBUTtBQUM5QyxnQ0FBZ0Msd0VBQUssQ0FBQyxxREFBUTtBQUM5QyxpQ0FBaUMsd0VBQUssQ0FBQyxxREFBUTtBQUMvQyxnQ0FBZ0Msd0VBQUssQ0FBQyxxREFBUTtBQUM5QyxvQ0FBb0Msd0VBQUssQ0FBQyxxREFBUTtBQUN6RDtBQUNPLHdCQUF3Qix5R0FBZ0I7QUFDL0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxXQUFXO0FBQ1gsZ0JBQWdCO0FBQ2hCLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxpQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ZvbnQtZ2F1bnRsZXQtY2xvbmUvPzQwMGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSBhcHAgYW5kIGRvY3VtZW50IG1vZHVsZXMuXG5pbXBvcnQgRG9jdW1lbnQgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fZG9jdW1lbnRcIjtcbmltcG9ydCBBcHAgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fYXBwXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19lcnJvclwiO1xuLy8gUmUtZXhwb3J0IHRoZSBjb21wb25lbnQgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsIFwiZ2V0U3RhdGljUHJvcHNcIik7XG5leHBvcnQgY29uc3QgZ2V0U3RhdGljUGF0aHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTdGF0aWNQYXRoc1wiKTtcbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTZXJ2ZXJTaWRlUHJvcHNcIik7XG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuZXhwb3J0IGNvbnN0IHJlcG9ydFdlYlZpdGFscyA9IGhvaXN0KHVzZXJsYW5kLCBcInJlcG9ydFdlYlZpdGFsc1wiKTtcbi8vIFJlLWV4cG9ydCBsZWdhY3kgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFN0YXRpY1Byb3BzXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUGF0aHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U3RhdGljUGFyYW1zID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUGFyYW1zXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U2VydmVyUHJvcHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVMsXG4gICAgICAgIHBhZ2U6IFwiL19lcnJvclwiLFxuICAgICAgICBwYXRobmFtZTogXCIvX2Vycm9yXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgQXBwLFxuICAgICAgICBEb2N1bWVudFxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=private-next-pages%2F_error&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./contexts/FontContext.js":
/*!*********************************!*\
  !*** ./contexts/FontContext.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FontProvider: () => (/* binding */ FontProvider),\n/* harmony export */   useFontContext: () => (/* binding */ useFontContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _hooks_useFontManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../hooks/useFontManager */ \"./hooks/useFontManager.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_hooks_useFontManager__WEBPACK_IMPORTED_MODULE_2__]);\n_hooks_useFontManager__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// 1. Создаем контекст\nconst FontContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\n// 2. Создаем провайдер\nconst FontProvider = ({ children })=>{\n    // Вызываем хук useFontManager один раз здесь\n    const fontManagerData = (0,_hooks_useFontManager__WEBPACK_IMPORTED_MODULE_2__.useFontManager)();\n    // Передаем все возвращаемые значения хука через value провайдера\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(FontContext.Provider, {\n        value: fontManagerData,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/igormocalov/Desktop/Font/contexts/FontContext.js\",\n        lineNumber: 14,\n        columnNumber: 5\n    }, undefined);\n};\n// 3. Создаем кастомный хук для удобного доступа к контексту\nconst useFontContext = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(FontContext);\n    if (!context) {\n        // Эта ошибка сработает, если компонент, использующий useFontContext,\n        // не будет обернут в FontProvider\n        throw new Error(\"useFontContext must be used within a FontProvider\");\n    }\n    return context;\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb250ZXh0cy9Gb250Q29udGV4dC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUF5RDtBQUNBO0FBRXpELHNCQUFzQjtBQUN0QixNQUFNSSw0QkFBY0gsb0RBQWFBLENBQUM7QUFFbEMsdUJBQXVCO0FBQ2hCLE1BQU1JLGVBQWUsQ0FBQyxFQUFFQyxRQUFRLEVBQUU7SUFDdkMsNkNBQTZDO0lBQzdDLE1BQU1DLGtCQUFrQkoscUVBQWNBO0lBRXRDLGlFQUFpRTtJQUNqRSxxQkFDRSw4REFBQ0MsWUFBWUksUUFBUTtRQUFDQyxPQUFPRjtrQkFDMUJEOzs7Ozs7QUFHUCxFQUFFO0FBRUYsNERBQTREO0FBQ3JELE1BQU1JLGlCQUFpQjtJQUM1QixNQUFNQyxVQUFVVCxpREFBVUEsQ0FBQ0U7SUFDM0IsSUFBSSxDQUFDTyxTQUFTO1FBQ1oscUVBQXFFO1FBQ3JFLGtDQUFrQztRQUNsQyxNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFDQSxPQUFPRDtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb250LWdhdW50bGV0LWNsb25lLy4vY29udGV4dHMvRm9udENvbnRleHQuanM/NDJkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUZvbnRNYW5hZ2VyIH0gZnJvbSAnLi4vaG9va3MvdXNlRm9udE1hbmFnZXInO1xuXG4vLyAxLiDQodC+0LfQtNCw0LXQvCDQutC+0L3RgtC10LrRgdGCXG5jb25zdCBGb250Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQobnVsbCk7XG5cbi8vIDIuINCh0L7Qt9C00LDQtdC8INC/0YDQvtCy0LDQudC00LXRgFxuZXhwb3J0IGNvbnN0IEZvbnRQcm92aWRlciA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgLy8g0JLRi9C30YvQstCw0LXQvCDRhdGD0LogdXNlRm9udE1hbmFnZXIg0L7QtNC40L0g0YDQsNC3INC30LTQtdGB0YxcbiAgY29uc3QgZm9udE1hbmFnZXJEYXRhID0gdXNlRm9udE1hbmFnZXIoKTtcblxuICAvLyDQn9C10YDQtdC00LDQtdC8INCy0YHQtSDQstC+0LfQstGA0LDRidCw0LXQvNGL0LUg0LfQvdCw0YfQtdC90LjRjyDRhdGD0LrQsCDRh9C10YDQtdC3IHZhbHVlINC/0YDQvtCy0LDQudC00LXRgNCwXG4gIHJldHVybiAoXG4gICAgPEZvbnRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtmb250TWFuYWdlckRhdGF9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvRm9udENvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59O1xuXG4vLyAzLiDQodC+0LfQtNCw0LXQvCDQutCw0YHRgtC+0LzQvdGL0Lkg0YXRg9C6INC00LvRjyDRg9C00L7QsdC90L7Qs9C+INC00L7RgdGC0YPQv9CwINC6INC60L7QvdGC0LXQutGB0YLRg1xuZXhwb3J0IGNvbnN0IHVzZUZvbnRDb250ZXh0ID0gKCkgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChGb250Q29udGV4dCk7XG4gIGlmICghY29udGV4dCkge1xuICAgIC8vINCt0YLQsCDQvtGI0LjQsdC60LAg0YHRgNCw0LHQvtGC0LDQtdGCLCDQtdGB0LvQuCDQutC+0LzQv9C+0L3QtdC90YIsINC40YHQv9C+0LvRjNC30YPRjtGJ0LjQuSB1c2VGb250Q29udGV4dCxcbiAgICAvLyDQvdC1INCx0YPQtNC10YIg0L7QsdC10YDQvdGD0YIg0LIgRm9udFByb3ZpZGVyXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VGb250Q29udGV4dCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgRm9udFByb3ZpZGVyJyk7XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQ7XG59OyAiXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZUZvbnRNYW5hZ2VyIiwiRm9udENvbnRleHQiLCJGb250UHJvdmlkZXIiLCJjaGlsZHJlbiIsImZvbnRNYW5hZ2VyRGF0YSIsIlByb3ZpZGVyIiwidmFsdWUiLCJ1c2VGb250Q29udGV4dCIsImNvbnRleHQiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./contexts/FontContext.js\n");

/***/ }),

/***/ "./contexts/SettingsContext.js":
/*!*************************************!*\
  !*** ./contexts/SettingsContext.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SettingsProvider: () => (/* binding */ SettingsProvider),\n/* harmony export */   useSettings: () => (/* binding */ useSettings)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Создаем контекст\nconst SettingsContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)();\n// <<< Ключи для localStorage >>>\nconst LOCAL_STORAGE_KEYS = {\n    BACKGROUND_COLOR: \"backgroundColor\",\n    TEXT_COLOR: \"textColor\",\n    FONT_SIZE: \"fontSize\",\n    LINE_HEIGHT: \"lineHeight\",\n    LETTER_SPACING: \"letterSpacing\",\n    VIEW_MODE: \"viewMode\",\n    TEXT_DIRECTION: \"textDirection\",\n    TEXT_ALIGNMENT: \"textAlignment\",\n    TEXT_CASE: \"textCase\",\n    TEXT_CENTER: \"textCenter\",\n    TEXT_FILL: \"textFill\"\n};\n// <<< Дефолтные значения >>>\nconst DEFAULT_SETTINGS = {\n    TEXT: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",\n    FONT_SIZE: 150,\n    LINE_HEIGHT: 1.05,\n    LETTER_SPACING: 0,\n    TEXT_COLOR: \"#000000\",\n    BACKGROUND_COLOR: \"#FFFFFF\",\n    VIEW_MODE: \"plain\",\n    TEXT_DIRECTION: \"ltr\",\n    TEXT_ALIGNMENT: \"left\",\n    TEXT_CASE: \"uppercase\",\n    TEXT_CENTER: false,\n    TEXT_FILL: false\n};\n// <<< Функция для безопасного чтения из localStorage >>>\nconst getLocalStorageItem = (key, defaultValue)=>{\n    if (false) {} else {\n        return defaultValue;\n    }\n};\n// <<< Функция для безопасной записи в localStorage >>>\nconst setLocalStorageItem = (key, value)=>{\n    if (false) {}\n};\n// Создаем провайдер контекста\nconst SettingsProvider = ({ children })=>{\n    // Состояние для отслеживания клиентской стороны (предотвращение гидратации)\n    const [isClient, setIsClient] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Переносим состояния из pages/index.jsx\n    const [text, setText] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.TEXT); // Текст не храним в LS пока\n    const [fontSize, setFontSize] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.FONT_SIZE); // Инициализируем дефолтом\n    const [lineHeight, setLineHeight] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.LINE_HEIGHT);\n    const [letterSpacing, setLetterSpacing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.LETTER_SPACING);\n    const [textColor, setTextColor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.TEXT_COLOR);\n    const [backgroundColor, setBackgroundColor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.BACKGROUND_COLOR);\n    const [viewMode, setViewMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.VIEW_MODE);\n    const [textDirection, setTextDirection] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.TEXT_DIRECTION);\n    const [textAlignment, setTextAlignment] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.TEXT_ALIGNMENT);\n    const [textCase, setTextCase] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.TEXT_CASE);\n    const [textCenter, setTextCenter] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.TEXT_CENTER);\n    const [textFill, setTextFill] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(DEFAULT_SETTINGS.TEXT_FILL);\n    // Эффект для инициализации клиентской стороны и загрузки из localStorage\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setIsClient(true);\n        // Загружаем значения из localStorage только на клиенте\n        setFontSize(getLocalStorageItem(LOCAL_STORAGE_KEYS.FONT_SIZE, DEFAULT_SETTINGS.FONT_SIZE));\n        setLineHeight(getLocalStorageItem(LOCAL_STORAGE_KEYS.LINE_HEIGHT, DEFAULT_SETTINGS.LINE_HEIGHT));\n        setLetterSpacing(getLocalStorageItem(LOCAL_STORAGE_KEYS.LETTER_SPACING, DEFAULT_SETTINGS.LETTER_SPACING));\n        setTextColor(getLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_COLOR, DEFAULT_SETTINGS.TEXT_COLOR));\n        setBackgroundColor(getLocalStorageItem(LOCAL_STORAGE_KEYS.BACKGROUND_COLOR, DEFAULT_SETTINGS.BACKGROUND_COLOR));\n        setViewMode(getLocalStorageItem(LOCAL_STORAGE_KEYS.VIEW_MODE, DEFAULT_SETTINGS.VIEW_MODE));\n        setTextDirection(getLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_DIRECTION, DEFAULT_SETTINGS.TEXT_DIRECTION));\n        setTextAlignment(getLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_ALIGNMENT, DEFAULT_SETTINGS.TEXT_ALIGNMENT));\n        setTextCase(getLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_CASE, DEFAULT_SETTINGS.TEXT_CASE));\n        setTextCenter(getLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_CENTER, DEFAULT_SETTINGS.TEXT_CENTER));\n        setTextFill(getLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_FILL, DEFAULT_SETTINGS.TEXT_FILL));\n    }, []);\n    // <<< useEffects для сохранения в localStorage (только после клиентской инициализации) >>>\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.BACKGROUND_COLOR, backgroundColor);\n    }, [\n        backgroundColor,\n        isClient\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_COLOR, textColor);\n    }, [\n        textColor,\n        isClient\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.FONT_SIZE, fontSize);\n    }, [\n        fontSize,\n        isClient\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.LINE_HEIGHT, lineHeight);\n    }, [\n        lineHeight,\n        isClient\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.LETTER_SPACING, letterSpacing);\n    }, [\n        letterSpacing,\n        isClient\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.VIEW_MODE, viewMode);\n    }, [\n        viewMode,\n        isClient\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_DIRECTION, textDirection);\n    }, [\n        textDirection,\n        isClient\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_ALIGNMENT, textAlignment);\n    }, [\n        textAlignment,\n        isClient\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_CASE, textCase);\n    }, [\n        textCase,\n        isClient\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_CENTER, textCenter);\n    }, [\n        textCenter,\n        isClient\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isClient) setLocalStorageItem(LOCAL_STORAGE_KEYS.TEXT_FILL, textFill);\n    }, [\n        textFill,\n        isClient\n    ]);\n    // <<< Функция сброса настроек >>>\n    const resetSettings = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setText(DEFAULT_SETTINGS.TEXT);\n        setFontSize(DEFAULT_SETTINGS.FONT_SIZE);\n        setLineHeight(DEFAULT_SETTINGS.LINE_HEIGHT);\n        setLetterSpacing(DEFAULT_SETTINGS.LETTER_SPACING);\n        setTextColor(DEFAULT_SETTINGS.TEXT_COLOR);\n        setBackgroundColor(DEFAULT_SETTINGS.BACKGROUND_COLOR);\n        setViewMode(DEFAULT_SETTINGS.VIEW_MODE);\n        setTextDirection(DEFAULT_SETTINGS.TEXT_DIRECTION);\n        setTextAlignment(DEFAULT_SETTINGS.TEXT_ALIGNMENT);\n        setTextCase(DEFAULT_SETTINGS.TEXT_CASE);\n        setTextCenter(DEFAULT_SETTINGS.TEXT_CENTER);\n        setTextFill(DEFAULT_SETTINGS.TEXT_FILL);\n        // Очищаем localStorage\n        Object.values(LOCAL_STORAGE_KEYS).forEach((key)=>{\n            if (false) {}\n        });\n        console.log(\"[SettingsContext] Настройки сброшены к дефолтным и localStorage очищен.\");\n    }, []); // Нет зависимостей, т.к. используем только сеттеры и константы\n    // Значение, которое будет передано через контекст\n    const value = {\n        text,\n        setText,\n        fontSize,\n        setFontSize,\n        lineHeight,\n        setLineHeight,\n        letterSpacing,\n        setLetterSpacing,\n        textColor,\n        setTextColor,\n        backgroundColor,\n        setBackgroundColor,\n        viewMode,\n        setViewMode,\n        textDirection,\n        setTextDirection,\n        textAlignment,\n        setTextAlignment,\n        textCase,\n        setTextCase,\n        textCenter,\n        setTextCenter,\n        textFill,\n        setTextFill,\n        resetSettings\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SettingsContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/igormocalov/Desktop/Font/contexts/SettingsContext.js\",\n        lineNumber: 166,\n        columnNumber: 5\n    }, undefined);\n};\n// Хук для удобного использования контекста\nconst useSettings = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(SettingsContext);\n    if (context === undefined) {\n        throw new Error(\"useSettings must be used within a SettingsProvider\");\n    }\n    return context;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb250ZXh0cy9TZXR0aW5nc0NvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEyRjtBQUUzRixtQkFBbUI7QUFDbkIsTUFBTU0sZ0NBQWtCTCxvREFBYUE7QUFFckMsaUNBQWlDO0FBQ2pDLE1BQU1NLHFCQUFxQjtJQUN6QkMsa0JBQWtCO0lBQ2xCQyxZQUFZO0lBQ1pDLFdBQVc7SUFDWEMsYUFBYTtJQUNiQyxnQkFBZ0I7SUFDaEJDLFdBQVc7SUFDWEMsZ0JBQWdCO0lBQ2hCQyxnQkFBZ0I7SUFDaEJDLFdBQVc7SUFDWEMsYUFBYTtJQUNiQyxXQUFXO0FBRWI7QUFFQSw2QkFBNkI7QUFDN0IsTUFBTUMsbUJBQW1CO0lBQ3ZCQyxNQUFNO0lBQ05WLFdBQVc7SUFDWEMsYUFBYTtJQUNiQyxnQkFBZ0I7SUFDaEJILFlBQVk7SUFDWkQsa0JBQWtCO0lBQ2xCSyxXQUFXO0lBQ1hDLGdCQUFnQjtJQUNoQkMsZ0JBQWdCO0lBQ2hCQyxXQUFXO0lBQ1hDLGFBQWE7SUFDYkMsV0FBVztBQUNiO0FBRUEseURBQXlEO0FBQ3pELE1BQU1HLHNCQUFzQixDQUFDQyxLQUFLQztJQUNoQyxJQUFJLEtBQWtCLEVBQWEsRUFRbEMsTUFBTTtRQUNILE9BQU9BO0lBQ1g7QUFDRjtBQUVBLHVEQUF1RDtBQUN2RCxNQUFNUSxzQkFBc0IsQ0FBQ1QsS0FBS1U7SUFDL0IsSUFBSSxLQUFrQixFQUFhLEVBTWxDO0FBQ0o7QUFFQSw4QkFBOEI7QUFDdkIsTUFBTUcsbUJBQW1CLENBQUMsRUFBRUMsUUFBUSxFQUFFO0lBQzNDLDRFQUE0RTtJQUM1RSxNQUFNLENBQUNDLFVBQVVDLFlBQVksR0FBR3BDLCtDQUFRQSxDQUFDO0lBRXpDLHlDQUF5QztJQUN6QyxNQUFNLENBQUNxQyxNQUFNQyxRQUFRLEdBQUd0QywrQ0FBUUEsQ0FBQ2lCLGlCQUFpQkMsSUFBSSxHQUFHLDRCQUE0QjtJQUNyRixNQUFNLENBQUNxQixVQUFVQyxZQUFZLEdBQUd4QywrQ0FBUUEsQ0FBQ2lCLGlCQUFpQlQsU0FBUyxHQUFHLDBCQUEwQjtJQUNoRyxNQUFNLENBQUNpQyxZQUFZQyxjQUFjLEdBQUcxQywrQ0FBUUEsQ0FBQ2lCLGlCQUFpQlIsV0FBVztJQUN6RSxNQUFNLENBQUNrQyxlQUFlQyxpQkFBaUIsR0FBRzVDLCtDQUFRQSxDQUFDaUIsaUJBQWlCUCxjQUFjO0lBQ2xGLE1BQU0sQ0FBQ21DLFdBQVdDLGFBQWEsR0FBRzlDLCtDQUFRQSxDQUFDaUIsaUJBQWlCVixVQUFVO0lBQ3RFLE1BQU0sQ0FBQ3dDLGlCQUFpQkMsbUJBQW1CLEdBQUdoRCwrQ0FBUUEsQ0FBQ2lCLGlCQUFpQlgsZ0JBQWdCO0lBQ3hGLE1BQU0sQ0FBQzJDLFVBQVVDLFlBQVksR0FBR2xELCtDQUFRQSxDQUFDaUIsaUJBQWlCTixTQUFTO0lBQ25FLE1BQU0sQ0FBQ3dDLGVBQWVDLGlCQUFpQixHQUFHcEQsK0NBQVFBLENBQUNpQixpQkFBaUJMLGNBQWM7SUFDbEYsTUFBTSxDQUFDeUMsZUFBZUMsaUJBQWlCLEdBQUd0RCwrQ0FBUUEsQ0FBQ2lCLGlCQUFpQkosY0FBYztJQUNsRixNQUFNLENBQUMwQyxVQUFVQyxZQUFZLEdBQUd4RCwrQ0FBUUEsQ0FBQ2lCLGlCQUFpQkgsU0FBUztJQUNuRSxNQUFNLENBQUMyQyxZQUFZQyxjQUFjLEdBQUcxRCwrQ0FBUUEsQ0FBQ2lCLGlCQUFpQkYsV0FBVztJQUN6RSxNQUFNLENBQUM0QyxVQUFVQyxZQUFZLEdBQUc1RCwrQ0FBUUEsQ0FBQ2lCLGlCQUFpQkQsU0FBUztJQUVuRSx5RUFBeUU7SUFDekVkLGdEQUFTQSxDQUFDO1FBQ1JrQyxZQUFZO1FBRVosdURBQXVEO1FBQ3ZESSxZQUFZckIsb0JBQW9CZCxtQkFBbUJHLFNBQVMsRUFBRVMsaUJBQWlCVCxTQUFTO1FBQ3hGa0MsY0FBY3ZCLG9CQUFvQmQsbUJBQW1CSSxXQUFXLEVBQUVRLGlCQUFpQlIsV0FBVztRQUM5Rm1DLGlCQUFpQnpCLG9CQUFvQmQsbUJBQW1CSyxjQUFjLEVBQUVPLGlCQUFpQlAsY0FBYztRQUN2R29DLGFBQWEzQixvQkFBb0JkLG1CQUFtQkUsVUFBVSxFQUFFVSxpQkFBaUJWLFVBQVU7UUFDM0Z5QyxtQkFBbUI3QixvQkFBb0JkLG1CQUFtQkMsZ0JBQWdCLEVBQUVXLGlCQUFpQlgsZ0JBQWdCO1FBQzdHNEMsWUFBWS9CLG9CQUFvQmQsbUJBQW1CTSxTQUFTLEVBQUVNLGlCQUFpQk4sU0FBUztRQUN4RnlDLGlCQUFpQmpDLG9CQUFvQmQsbUJBQW1CTyxjQUFjLEVBQUVLLGlCQUFpQkwsY0FBYztRQUN2RzBDLGlCQUFpQm5DLG9CQUFvQmQsbUJBQW1CUSxjQUFjLEVBQUVJLGlCQUFpQkosY0FBYztRQUN2RzJDLFlBQVlyQyxvQkFBb0JkLG1CQUFtQlMsU0FBUyxFQUFFRyxpQkFBaUJILFNBQVM7UUFDeEY0QyxjQUFjdkMsb0JBQW9CZCxtQkFBbUJVLFdBQVcsRUFBRUUsaUJBQWlCRixXQUFXO1FBQzlGNkMsWUFBWXpDLG9CQUFvQmQsbUJBQW1CVyxTQUFTLEVBQUVDLGlCQUFpQkQsU0FBUztJQUMxRixHQUFHLEVBQUU7SUFFTCwyRkFBMkY7SUFDM0ZkLGdEQUFTQSxDQUFDO1FBQVEsSUFBSWlDLFVBQVVOLG9CQUFvQnhCLG1CQUFtQkMsZ0JBQWdCLEVBQUV5QztJQUFrQixHQUFHO1FBQUNBO1FBQWlCWjtLQUFTO0lBQ3pJakMsZ0RBQVNBLENBQUM7UUFBUSxJQUFJaUMsVUFBVU4sb0JBQW9CeEIsbUJBQW1CRSxVQUFVLEVBQUVzQztJQUFZLEdBQUc7UUFBQ0E7UUFBV1Y7S0FBUztJQUN2SGpDLGdEQUFTQSxDQUFDO1FBQVEsSUFBSWlDLFVBQVVOLG9CQUFvQnhCLG1CQUFtQkcsU0FBUyxFQUFFK0I7SUFBVyxHQUFHO1FBQUNBO1FBQVVKO0tBQVM7SUFDcEhqQyxnREFBU0EsQ0FBQztRQUFRLElBQUlpQyxVQUFVTixvQkFBb0J4QixtQkFBbUJJLFdBQVcsRUFBRWdDO0lBQWEsR0FBRztRQUFDQTtRQUFZTjtLQUFTO0lBQzFIakMsZ0RBQVNBLENBQUM7UUFBUSxJQUFJaUMsVUFBVU4sb0JBQW9CeEIsbUJBQW1CSyxjQUFjLEVBQUVpQztJQUFnQixHQUFHO1FBQUNBO1FBQWVSO0tBQVM7SUFDbklqQyxnREFBU0EsQ0FBQztRQUFRLElBQUlpQyxVQUFVTixvQkFBb0J4QixtQkFBbUJNLFNBQVMsRUFBRXNDO0lBQVcsR0FBRztRQUFDQTtRQUFVZDtLQUFTO0lBQ3BIakMsZ0RBQVNBLENBQUM7UUFBUSxJQUFJaUMsVUFBVU4sb0JBQW9CeEIsbUJBQW1CTyxjQUFjLEVBQUV1QztJQUFnQixHQUFHO1FBQUNBO1FBQWVoQjtLQUFTO0lBQ25JakMsZ0RBQVNBLENBQUM7UUFBUSxJQUFJaUMsVUFBVU4sb0JBQW9CeEIsbUJBQW1CUSxjQUFjLEVBQUV3QztJQUFnQixHQUFHO1FBQUNBO1FBQWVsQjtLQUFTO0lBQ25JakMsZ0RBQVNBLENBQUM7UUFBUSxJQUFJaUMsVUFBVU4sb0JBQW9CeEIsbUJBQW1CUyxTQUFTLEVBQUV5QztJQUFXLEdBQUc7UUFBQ0E7UUFBVXBCO0tBQVM7SUFDcEhqQyxnREFBU0EsQ0FBQztRQUFRLElBQUlpQyxVQUFVTixvQkFBb0J4QixtQkFBbUJVLFdBQVcsRUFBRTBDO0lBQWEsR0FBRztRQUFDQTtRQUFZdEI7S0FBUztJQUMxSGpDLGdEQUFTQSxDQUFDO1FBQVEsSUFBSWlDLFVBQVVOLG9CQUFvQnhCLG1CQUFtQlcsU0FBUyxFQUFFMkM7SUFBVyxHQUFHO1FBQUNBO1FBQVV4QjtLQUFTO0lBRXBILGtDQUFrQztJQUNsQyxNQUFNMEIsZ0JBQWdCMUQsa0RBQVdBLENBQUM7UUFDaENtQyxRQUFRckIsaUJBQWlCQyxJQUFJO1FBQzdCc0IsWUFBWXZCLGlCQUFpQlQsU0FBUztRQUN0Q2tDLGNBQWN6QixpQkFBaUJSLFdBQVc7UUFDMUNtQyxpQkFBaUIzQixpQkFBaUJQLGNBQWM7UUFDaERvQyxhQUFhN0IsaUJBQWlCVixVQUFVO1FBQ3hDeUMsbUJBQW1CL0IsaUJBQWlCWCxnQkFBZ0I7UUFDcEQ0QyxZQUFZakMsaUJBQWlCTixTQUFTO1FBQ3RDeUMsaUJBQWlCbkMsaUJBQWlCTCxjQUFjO1FBQ2hEMEMsaUJBQWlCckMsaUJBQWlCSixjQUFjO1FBQ2hEMkMsWUFBWXZDLGlCQUFpQkgsU0FBUztRQUN0QzRDLGNBQWN6QyxpQkFBaUJGLFdBQVc7UUFDMUM2QyxZQUFZM0MsaUJBQWlCRCxTQUFTO1FBRXRDLHVCQUF1QjtRQUN2QjhDLE9BQU9DLE1BQU0sQ0FBQzFELG9CQUFvQjJELE9BQU8sQ0FBQzVDLENBQUFBO1lBQ3hDLElBQUksS0FBa0IsRUFBYUcsRUFBNkJIO1FBQ2xFO1FBQ0FRLFFBQVFzQyxHQUFHLENBQUM7SUFDZCxHQUFHLEVBQUUsR0FBRywrREFBK0Q7SUFFdkUsa0RBQWtEO0lBQ2xELE1BQU1wQyxRQUFRO1FBQ1pPO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO1FBQ0FDO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQ3pELGdCQUFnQitELFFBQVE7UUFBQ3JDLE9BQU9BO2tCQUM5Qkk7Ozs7OztBQUdQLEVBQUU7QUFFRiwyQ0FBMkM7QUFDcEMsTUFBTWtDLGNBQWM7SUFDekIsTUFBTUMsVUFBVXBFLGlEQUFVQSxDQUFDRztJQUMzQixJQUFJaUUsWUFBWUMsV0FBVztRQUN6QixNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFDQSxPQUFPRjtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb250LWdhdW50bGV0LWNsb25lLy4vY29udGV4dHMvU2V0dGluZ3NDb250ZXh0LmpzP2RhZDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuXG4vLyDQodC+0LfQtNCw0LXQvCDQutC+0L3RgtC10LrRgdGCXG5jb25zdCBTZXR0aW5nc0NvbnRleHQgPSBjcmVhdGVDb250ZXh0KCk7XG5cbi8vIDw8PCDQmtC70Y7Rh9C4INC00LvRjyBsb2NhbFN0b3JhZ2UgPj4+XG5jb25zdCBMT0NBTF9TVE9SQUdFX0tFWVMgPSB7XG4gIEJBQ0tHUk9VTkRfQ09MT1I6ICdiYWNrZ3JvdW5kQ29sb3InLFxuICBURVhUX0NPTE9SOiAndGV4dENvbG9yJyxcbiAgRk9OVF9TSVpFOiAnZm9udFNpemUnLFxuICBMSU5FX0hFSUdIVDogJ2xpbmVIZWlnaHQnLFxuICBMRVRURVJfU1BBQ0lORzogJ2xldHRlclNwYWNpbmcnLFxuICBWSUVXX01PREU6ICd2aWV3TW9kZScsXG4gIFRFWFRfRElSRUNUSU9OOiAndGV4dERpcmVjdGlvbicsXG4gIFRFWFRfQUxJR05NRU5UOiAndGV4dEFsaWdubWVudCcsXG4gIFRFWFRfQ0FTRTogJ3RleHRDYXNlJyxcbiAgVEVYVF9DRU5URVI6ICd0ZXh0Q2VudGVyJyxcbiAgVEVYVF9GSUxMOiAndGV4dEZpbGwnXG4gIC8vINCU0L7QsdCw0LLRjNGC0LUg0LTRgNGD0LPQuNC1INC60LvRjtGH0Lgg0L/RgNC4INC90LXQvtCx0YXQvtC00LjQvNC+0YHRgtC4XG59O1xuXG4vLyA8PDwg0JTQtdGE0L7Qu9GC0L3Ri9C1INC30L3QsNGH0LXQvdC40Y8gPj4+XG5jb25zdCBERUZBVUxUX1NFVFRJTkdTID0ge1xuICBURVhUOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknLFxuICBGT05UX1NJWkU6IDE1MCxcbiAgTElORV9IRUlHSFQ6IDEuMDUsXG4gIExFVFRFUl9TUEFDSU5HOiAwLFxuICBURVhUX0NPTE9SOiAnIzAwMDAwMCcsXG4gIEJBQ0tHUk9VTkRfQ09MT1I6ICcjRkZGRkZGJyxcbiAgVklFV19NT0RFOiAncGxhaW4nLFxuICBURVhUX0RJUkVDVElPTjogJ2x0cicsXG4gIFRFWFRfQUxJR05NRU5UOiAnbGVmdCcsXG4gIFRFWFRfQ0FTRTogJ3VwcGVyY2FzZScsXG4gIFRFWFRfQ0VOVEVSOiBmYWxzZSxcbiAgVEVYVF9GSUxMOiBmYWxzZVxufTtcblxuLy8gPDw8INCk0YPQvdC60YbQuNGPINC00LvRjyDQsdC10LfQvtC/0LDRgdC90L7Qs9C+INGH0YLQtdC90LjRjyDQuNC3IGxvY2FsU3RvcmFnZSA+Pj5cbmNvbnN0IGdldExvY2FsU3RvcmFnZUl0ZW0gPSAoa2V5LCBkZWZhdWx0VmFsdWUpID0+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7IC8vINCj0LHQtdC00LjQvNGB0Y8sINGH0YLQviBsb2NhbFN0b3JhZ2Ug0LTQvtGB0YLRg9C/0LXQvSAo0L3QtSDQvdCwINGB0LXRgNCy0LXRgNC1KVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgIHJldHVybiBpdGVtID8gSlNPTi5wYXJzZShpdGVtKSA6IGRlZmF1bHRWYWx1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINGH0YLQtdC90LjRjyBsb2NhbFN0b3JhZ2Ug0LTQu9GPINC60LvRjtGH0LAgJHtrZXl9OmAsIGVycm9yKTtcbiAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgfVxufTtcblxuLy8gPDw8INCk0YPQvdC60YbQuNGPINC00LvRjyDQsdC10LfQvtC/0LDRgdC90L7QuSDQt9Cw0L/QuNGB0Lgg0LIgbG9jYWxTdG9yYWdlID4+PlxuY29uc3Qgc2V0TG9jYWxTdG9yYWdlSXRlbSA9IChrZXksIHZhbHVlKSA9PiB7XG4gICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICB0cnkge1xuICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINC30LDQv9C40YHQuCDQsiBsb2NhbFN0b3JhZ2Ug0LTQu9GPINC60LvRjtGH0LAgJHtrZXl9OmAsIGVycm9yKTtcbiAgICAgICB9XG4gICB9XG59O1xuXG4vLyDQodC+0LfQtNCw0LXQvCDQv9GA0L7QstCw0LnQtNC10YAg0LrQvtC90YLQtdC60YHRgtCwXG5leHBvcnQgY29uc3QgU2V0dGluZ3NQcm92aWRlciA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgLy8g0KHQvtGB0YLQvtGP0L3QuNC1INC00LvRjyDQvtGC0YHQu9C10LbQuNCy0LDQvdC40Y8g0LrQu9C40LXQvdGC0YHQutC+0Lkg0YHRgtC+0YDQvtC90YsgKNC/0YDQtdC00L7RgtCy0YDQsNGJ0LXQvdC40LUg0LPQuNC00YDQsNGC0LDRhtC40LgpXG4gIGNvbnN0IFtpc0NsaWVudCwgc2V0SXNDbGllbnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBcbiAgLy8g0J/QtdGA0LXQvdC+0YHQuNC8INGB0L7RgdGC0L7Rj9C90LjRjyDQuNC3IHBhZ2VzL2luZGV4LmpzeFxuICBjb25zdCBbdGV4dCwgc2V0VGV4dF0gPSB1c2VTdGF0ZShERUZBVUxUX1NFVFRJTkdTLlRFWFQpOyAvLyDQotC10LrRgdGCINC90LUg0YXRgNCw0L3QuNC8INCyIExTINC/0L7QutCwXG4gIGNvbnN0IFtmb250U2l6ZSwgc2V0Rm9udFNpemVdID0gdXNlU3RhdGUoREVGQVVMVF9TRVRUSU5HUy5GT05UX1NJWkUpOyAvLyDQmNC90LjRhtC40LDQu9C40LfQuNGA0YPQtdC8INC00LXRhNC+0LvRgtC+0LxcbiAgY29uc3QgW2xpbmVIZWlnaHQsIHNldExpbmVIZWlnaHRdID0gdXNlU3RhdGUoREVGQVVMVF9TRVRUSU5HUy5MSU5FX0hFSUdIVCk7XG4gIGNvbnN0IFtsZXR0ZXJTcGFjaW5nLCBzZXRMZXR0ZXJTcGFjaW5nXSA9IHVzZVN0YXRlKERFRkFVTFRfU0VUVElOR1MuTEVUVEVSX1NQQUNJTkcpO1xuICBjb25zdCBbdGV4dENvbG9yLCBzZXRUZXh0Q29sb3JdID0gdXNlU3RhdGUoREVGQVVMVF9TRVRUSU5HUy5URVhUX0NPTE9SKTtcbiAgY29uc3QgW2JhY2tncm91bmRDb2xvciwgc2V0QmFja2dyb3VuZENvbG9yXSA9IHVzZVN0YXRlKERFRkFVTFRfU0VUVElOR1MuQkFDS0dST1VORF9DT0xPUik7XG4gIGNvbnN0IFt2aWV3TW9kZSwgc2V0Vmlld01vZGVdID0gdXNlU3RhdGUoREVGQVVMVF9TRVRUSU5HUy5WSUVXX01PREUpO1xuICBjb25zdCBbdGV4dERpcmVjdGlvbiwgc2V0VGV4dERpcmVjdGlvbl0gPSB1c2VTdGF0ZShERUZBVUxUX1NFVFRJTkdTLlRFWFRfRElSRUNUSU9OKTtcbiAgY29uc3QgW3RleHRBbGlnbm1lbnQsIHNldFRleHRBbGlnbm1lbnRdID0gdXNlU3RhdGUoREVGQVVMVF9TRVRUSU5HUy5URVhUX0FMSUdOTUVOVCk7XG4gIGNvbnN0IFt0ZXh0Q2FzZSwgc2V0VGV4dENhc2VdID0gdXNlU3RhdGUoREVGQVVMVF9TRVRUSU5HUy5URVhUX0NBU0UpO1xuICBjb25zdCBbdGV4dENlbnRlciwgc2V0VGV4dENlbnRlcl0gPSB1c2VTdGF0ZShERUZBVUxUX1NFVFRJTkdTLlRFWFRfQ0VOVEVSKTtcbiAgY29uc3QgW3RleHRGaWxsLCBzZXRUZXh0RmlsbF0gPSB1c2VTdGF0ZShERUZBVUxUX1NFVFRJTkdTLlRFWFRfRklMTCk7XG4gIFxuICAvLyDQrdGE0YTQtdC60YIg0LTQu9GPINC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4INC60LvQuNC10L3RgtGB0LrQvtC5INGB0YLQvtGA0L7QvdGLINC4INC30LDQs9GA0YPQt9C60Lgg0LjQtyBsb2NhbFN0b3JhZ2VcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRJc0NsaWVudCh0cnVlKTtcbiAgICBcbiAgICAvLyDQl9Cw0LPRgNGD0LbQsNC10Lwg0LfQvdCw0YfQtdC90LjRjyDQuNC3IGxvY2FsU3RvcmFnZSDRgtC+0LvRjNC60L4g0L3QsCDQutC70LjQtdC90YLQtVxuICAgIHNldEZvbnRTaXplKGdldExvY2FsU3RvcmFnZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVlTLkZPTlRfU0laRSwgREVGQVVMVF9TRVRUSU5HUy5GT05UX1NJWkUpKTtcbiAgICBzZXRMaW5lSGVpZ2h0KGdldExvY2FsU3RvcmFnZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVlTLkxJTkVfSEVJR0hULCBERUZBVUxUX1NFVFRJTkdTLkxJTkVfSEVJR0hUKSk7XG4gICAgc2V0TGV0dGVyU3BhY2luZyhnZXRMb2NhbFN0b3JhZ2VJdGVtKExPQ0FMX1NUT1JBR0VfS0VZUy5MRVRURVJfU1BBQ0lORywgREVGQVVMVF9TRVRUSU5HUy5MRVRURVJfU1BBQ0lORykpO1xuICAgIHNldFRleHRDb2xvcihnZXRMb2NhbFN0b3JhZ2VJdGVtKExPQ0FMX1NUT1JBR0VfS0VZUy5URVhUX0NPTE9SLCBERUZBVUxUX1NFVFRJTkdTLlRFWFRfQ09MT1IpKTtcbiAgICBzZXRCYWNrZ3JvdW5kQ29sb3IoZ2V0TG9jYWxTdG9yYWdlSXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuQkFDS0dST1VORF9DT0xPUiwgREVGQVVMVF9TRVRUSU5HUy5CQUNLR1JPVU5EX0NPTE9SKSk7XG4gICAgc2V0Vmlld01vZGUoZ2V0TG9jYWxTdG9yYWdlSXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuVklFV19NT0RFLCBERUZBVUxUX1NFVFRJTkdTLlZJRVdfTU9ERSkpO1xuICAgIHNldFRleHREaXJlY3Rpb24oZ2V0TG9jYWxTdG9yYWdlSXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuVEVYVF9ESVJFQ1RJT04sIERFRkFVTFRfU0VUVElOR1MuVEVYVF9ESVJFQ1RJT04pKTtcbiAgICBzZXRUZXh0QWxpZ25tZW50KGdldExvY2FsU3RvcmFnZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVlTLlRFWFRfQUxJR05NRU5ULCBERUZBVUxUX1NFVFRJTkdTLlRFWFRfQUxJR05NRU5UKSk7XG4gICAgc2V0VGV4dENhc2UoZ2V0TG9jYWxTdG9yYWdlSXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuVEVYVF9DQVNFLCBERUZBVUxUX1NFVFRJTkdTLlRFWFRfQ0FTRSkpO1xuICAgIHNldFRleHRDZW50ZXIoZ2V0TG9jYWxTdG9yYWdlSXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuVEVYVF9DRU5URVIsIERFRkFVTFRfU0VUVElOR1MuVEVYVF9DRU5URVIpKTtcbiAgICBzZXRUZXh0RmlsbChnZXRMb2NhbFN0b3JhZ2VJdGVtKExPQ0FMX1NUT1JBR0VfS0VZUy5URVhUX0ZJTEwsIERFRkFVTFRfU0VUVElOR1MuVEVYVF9GSUxMKSk7XG4gIH0sIFtdKTtcblxuICAvLyA8PDwgdXNlRWZmZWN0cyDQtNC70Y8g0YHQvtGF0YDQsNC90LXQvdC40Y8g0LIgbG9jYWxTdG9yYWdlICjRgtC+0LvRjNC60L4g0L/QvtGB0LvQtSDQutC70LjQtdC90YLRgdC60L7QuSDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuCkgPj4+XG4gIHVzZUVmZmVjdCgoKSA9PiB7IGlmIChpc0NsaWVudCkgc2V0TG9jYWxTdG9yYWdlSXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuQkFDS0dST1VORF9DT0xPUiwgYmFja2dyb3VuZENvbG9yKTsgfSwgW2JhY2tncm91bmRDb2xvciwgaXNDbGllbnRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHsgaWYgKGlzQ2xpZW50KSBzZXRMb2NhbFN0b3JhZ2VJdGVtKExPQ0FMX1NUT1JBR0VfS0VZUy5URVhUX0NPTE9SLCB0ZXh0Q29sb3IpOyB9LCBbdGV4dENvbG9yLCBpc0NsaWVudF0pO1xuICB1c2VFZmZlY3QoKCkgPT4geyBpZiAoaXNDbGllbnQpIHNldExvY2FsU3RvcmFnZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVlTLkZPTlRfU0laRSwgZm9udFNpemUpOyB9LCBbZm9udFNpemUsIGlzQ2xpZW50XSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7IGlmIChpc0NsaWVudCkgc2V0TG9jYWxTdG9yYWdlSXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuTElORV9IRUlHSFQsIGxpbmVIZWlnaHQpOyB9LCBbbGluZUhlaWdodCwgaXNDbGllbnRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHsgaWYgKGlzQ2xpZW50KSBzZXRMb2NhbFN0b3JhZ2VJdGVtKExPQ0FMX1NUT1JBR0VfS0VZUy5MRVRURVJfU1BBQ0lORywgbGV0dGVyU3BhY2luZyk7IH0sIFtsZXR0ZXJTcGFjaW5nLCBpc0NsaWVudF0pO1xuICB1c2VFZmZlY3QoKCkgPT4geyBpZiAoaXNDbGllbnQpIHNldExvY2FsU3RvcmFnZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVlTLlZJRVdfTU9ERSwgdmlld01vZGUpOyB9LCBbdmlld01vZGUsIGlzQ2xpZW50XSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7IGlmIChpc0NsaWVudCkgc2V0TG9jYWxTdG9yYWdlSXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuVEVYVF9ESVJFQ1RJT04sIHRleHREaXJlY3Rpb24pOyB9LCBbdGV4dERpcmVjdGlvbiwgaXNDbGllbnRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHsgaWYgKGlzQ2xpZW50KSBzZXRMb2NhbFN0b3JhZ2VJdGVtKExPQ0FMX1NUT1JBR0VfS0VZUy5URVhUX0FMSUdOTUVOVCwgdGV4dEFsaWdubWVudCk7IH0sIFt0ZXh0QWxpZ25tZW50LCBpc0NsaWVudF0pO1xuICB1c2VFZmZlY3QoKCkgPT4geyBpZiAoaXNDbGllbnQpIHNldExvY2FsU3RvcmFnZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVlTLlRFWFRfQ0FTRSwgdGV4dENhc2UpOyB9LCBbdGV4dENhc2UsIGlzQ2xpZW50XSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7IGlmIChpc0NsaWVudCkgc2V0TG9jYWxTdG9yYWdlSXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuVEVYVF9DRU5URVIsIHRleHRDZW50ZXIpOyB9LCBbdGV4dENlbnRlciwgaXNDbGllbnRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHsgaWYgKGlzQ2xpZW50KSBzZXRMb2NhbFN0b3JhZ2VJdGVtKExPQ0FMX1NUT1JBR0VfS0VZUy5URVhUX0ZJTEwsIHRleHRGaWxsKTsgfSwgW3RleHRGaWxsLCBpc0NsaWVudF0pO1xuXG4gIC8vIDw8PCDQpNGD0L3QutGG0LjRjyDRgdCx0YDQvtGB0LAg0L3QsNGB0YLRgNC+0LXQuiA+Pj5cbiAgY29uc3QgcmVzZXRTZXR0aW5ncyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRUZXh0KERFRkFVTFRfU0VUVElOR1MuVEVYVCk7XG4gICAgc2V0Rm9udFNpemUoREVGQVVMVF9TRVRUSU5HUy5GT05UX1NJWkUpO1xuICAgIHNldExpbmVIZWlnaHQoREVGQVVMVF9TRVRUSU5HUy5MSU5FX0hFSUdIVCk7XG4gICAgc2V0TGV0dGVyU3BhY2luZyhERUZBVUxUX1NFVFRJTkdTLkxFVFRFUl9TUEFDSU5HKTtcbiAgICBzZXRUZXh0Q29sb3IoREVGQVVMVF9TRVRUSU5HUy5URVhUX0NPTE9SKTtcbiAgICBzZXRCYWNrZ3JvdW5kQ29sb3IoREVGQVVMVF9TRVRUSU5HUy5CQUNLR1JPVU5EX0NPTE9SKTtcbiAgICBzZXRWaWV3TW9kZShERUZBVUxUX1NFVFRJTkdTLlZJRVdfTU9ERSk7XG4gICAgc2V0VGV4dERpcmVjdGlvbihERUZBVUxUX1NFVFRJTkdTLlRFWFRfRElSRUNUSU9OKTtcbiAgICBzZXRUZXh0QWxpZ25tZW50KERFRkFVTFRfU0VUVElOR1MuVEVYVF9BTElHTk1FTlQpO1xuICAgIHNldFRleHRDYXNlKERFRkFVTFRfU0VUVElOR1MuVEVYVF9DQVNFKTtcbiAgICBzZXRUZXh0Q2VudGVyKERFRkFVTFRfU0VUVElOR1MuVEVYVF9DRU5URVIpO1xuICAgIHNldFRleHRGaWxsKERFRkFVTFRfU0VUVElOR1MuVEVYVF9GSUxMKTtcblxuICAgIC8vINCe0YfQuNGJ0LDQtdC8IGxvY2FsU3RvcmFnZVxuICAgIE9iamVjdC52YWx1ZXMoTE9DQUxfU1RPUkFHRV9LRVlTKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ1tTZXR0aW5nc0NvbnRleHRdINCd0LDRgdGC0YDQvtC50LrQuCDRgdCx0YDQvtGI0LXQvdGLINC6INC00LXRhNC+0LvRgtC90YvQvCDQuCBsb2NhbFN0b3JhZ2Ug0L7Rh9C40YnQtdC9LicpO1xuICB9LCBbXSk7IC8vINCd0LXRgiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC10LksINGCLtC6LiDQuNGB0L/QvtC70YzQt9GD0LXQvCDRgtC+0LvRjNC60L4g0YHQtdGC0YLQtdGA0Ysg0Lgg0LrQvtC90YHRgtCw0L3RgtGLXG5cbiAgLy8g0JfQvdCw0YfQtdC90LjQtSwg0LrQvtGC0L7RgNC+0LUg0LHRg9C00LXRgiDQv9C10YDQtdC00LDQvdC+INGH0LXRgNC10Lcg0LrQvtC90YLQtdC60YHRglxuICBjb25zdCB2YWx1ZSA9IHtcbiAgICB0ZXh0LFxuICAgIHNldFRleHQsXG4gICAgZm9udFNpemUsXG4gICAgc2V0Rm9udFNpemUsXG4gICAgbGluZUhlaWdodCxcbiAgICBzZXRMaW5lSGVpZ2h0LFxuICAgIGxldHRlclNwYWNpbmcsXG4gICAgc2V0TGV0dGVyU3BhY2luZyxcbiAgICB0ZXh0Q29sb3IsXG4gICAgc2V0VGV4dENvbG9yLFxuICAgIGJhY2tncm91bmRDb2xvcixcbiAgICBzZXRCYWNrZ3JvdW5kQ29sb3IsXG4gICAgdmlld01vZGUsXG4gICAgc2V0Vmlld01vZGUsXG4gICAgdGV4dERpcmVjdGlvbixcbiAgICBzZXRUZXh0RGlyZWN0aW9uLFxuICAgIHRleHRBbGlnbm1lbnQsXG4gICAgc2V0VGV4dEFsaWdubWVudCxcbiAgICB0ZXh0Q2FzZSxcbiAgICBzZXRUZXh0Q2FzZSxcbiAgICB0ZXh0Q2VudGVyLFxuICAgIHNldFRleHRDZW50ZXIsXG4gICAgdGV4dEZpbGwsXG4gICAgc2V0VGV4dEZpbGwsXG4gICAgcmVzZXRTZXR0aW5ncyxcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxTZXR0aW5nc0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3ZhbHVlfT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L1NldHRpbmdzQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn07XG5cbi8vINCl0YPQuiDQtNC70Y8g0YPQtNC+0LHQvdC+0LPQviDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjRjyDQutC+0L3RgtC10LrRgdGC0LBcbmV4cG9ydCBjb25zdCB1c2VTZXR0aW5ncyA9ICgpID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoU2V0dGluZ3NDb250ZXh0KTtcbiAgaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlU2V0dGluZ3MgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFNldHRpbmdzUHJvdmlkZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn07ICJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUNvbnRleHQiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsIlNldHRpbmdzQ29udGV4dCIsIkxPQ0FMX1NUT1JBR0VfS0VZUyIsIkJBQ0tHUk9VTkRfQ09MT1IiLCJURVhUX0NPTE9SIiwiRk9OVF9TSVpFIiwiTElORV9IRUlHSFQiLCJMRVRURVJfU1BBQ0lORyIsIlZJRVdfTU9ERSIsIlRFWFRfRElSRUNUSU9OIiwiVEVYVF9BTElHTk1FTlQiLCJURVhUX0NBU0UiLCJURVhUX0NFTlRFUiIsIlRFWFRfRklMTCIsIkRFRkFVTFRfU0VUVElOR1MiLCJURVhUIiwiZ2V0TG9jYWxTdG9yYWdlSXRlbSIsImtleSIsImRlZmF1bHRWYWx1ZSIsIml0ZW0iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwiZXJyb3IiLCJjb25zb2xlIiwic2V0TG9jYWxTdG9yYWdlSXRlbSIsInZhbHVlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsIlNldHRpbmdzUHJvdmlkZXIiLCJjaGlsZHJlbiIsImlzQ2xpZW50Iiwic2V0SXNDbGllbnQiLCJ0ZXh0Iiwic2V0VGV4dCIsImZvbnRTaXplIiwic2V0Rm9udFNpemUiLCJsaW5lSGVpZ2h0Iiwic2V0TGluZUhlaWdodCIsImxldHRlclNwYWNpbmciLCJzZXRMZXR0ZXJTcGFjaW5nIiwidGV4dENvbG9yIiwic2V0VGV4dENvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwic2V0QmFja2dyb3VuZENvbG9yIiwidmlld01vZGUiLCJzZXRWaWV3TW9kZSIsInRleHREaXJlY3Rpb24iLCJzZXRUZXh0RGlyZWN0aW9uIiwidGV4dEFsaWdubWVudCIsInNldFRleHRBbGlnbm1lbnQiLCJ0ZXh0Q2FzZSIsInNldFRleHRDYXNlIiwidGV4dENlbnRlciIsInNldFRleHRDZW50ZXIiLCJ0ZXh0RmlsbCIsInNldFRleHRGaWxsIiwicmVzZXRTZXR0aW5ncyIsIk9iamVjdCIsInZhbHVlcyIsImZvckVhY2giLCJyZW1vdmVJdGVtIiwibG9nIiwiUHJvdmlkZXIiLCJ1c2VTZXR0aW5ncyIsImNvbnRleHQiLCJ1bmRlZmluZWQiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./contexts/SettingsContext.js\n");

/***/ }),

/***/ "./hooks/useFontCss.js":
/*!*****************************!*\
  !*** ./hooks/useFontCss.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFontCss: () => (/* binding */ useFontCss)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var _utils_cssGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/cssGenerator */ \"./utils/cssGenerator.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_1__, _utils_cssGenerator__WEBPACK_IMPORTED_MODULE_2__]);\n([react_toastify__WEBPACK_IMPORTED_MODULE_1__, _utils_cssGenerator__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n/**\n * Хук для управления CSS стилями шрифтов.\n * \n * @param {Object} selectedFont - Текущий выбранный объект шрифта.\n * @param {Object} variableSettings - Текущие настройки вариативных осей.\n * @param {boolean} isSelectedFontVariable - Флаг, является ли выбранный шрифт вариативным.\n * @returns {Object} - Объект с CSS функциями и свойствами.\n */ function useFontCss(selectedFont, variableSettings, isSelectedFontVariable) {\n    /**\n   * Возвращает строку font-family для текущего или указанного шрифта.\n   * (Перенесено из useFontManager)\n   * \n   * @param {Object|null} font - Шрифт для получения font-family (по умолчанию selectedFont).\n   * @returns {string} - Строка font-family для CSS.\n   */ const getFontFamily = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((font = null)=>{\n        const targetFont = font || selectedFont;\n        if (!targetFont) return \"inherit\";\n        // Используем fontFamily из объекта шрифта, если он есть\n        if (targetFont.fontFamily) {\n            return `\"${targetFont.fontFamily}\"`;\n        }\n        // Для Fontsource шрифтов генерируем имя на основе name\n        if (targetFont.source === \"fontsource\" && targetFont.name) {\n            return `\"${targetFont.name}\"`;\n        }\n        // Для локальных шрифтов используем name или filename\n        if (targetFont.name) {\n            return `\"${targetFont.name}\"`;\n        }\n        // Если есть filename (без расширения), используем его\n        if (targetFont.filename) {\n            const nameWithoutExt = targetFont.filename.replace(/\\.[^/.]+$/, \"\");\n            return `\"${nameWithoutExt}\"`;\n        }\n        // Если ничего не найдено, используем ID как fallback\n        if (targetFont.id) {\n            console.warn(\"getFontFamily: Возвращаем временное имя на основе ID, т.к. fontFamily еще не установлен.\");\n            return `\"Font_${targetFont.id}\"`;\n        }\n        return \"inherit\";\n    }, [\n        selectedFont\n    ]);\n    /**\n   * Возвращает строку font-variation-settings для текущего или указанного шрифта.\n   * (Перенесено из useFontManager)\n   * \n   * @param {Object|null} font - Шрифт для получения настроек (по умолчанию selectedFont).\n   * @param {Object|null} settings - Настройки осей (по умолчанию variableSettings).\n   * @returns {string} - Строка font-variation-settings для CSS.\n   */ const getVariationSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((font = null, settings = null)=>{\n        const targetFont = font || selectedFont;\n        const targetSettings = settings || variableSettings;\n        if (!targetFont || !targetFont.isVariableFont || !targetSettings) {\n            return \"normal\";\n        }\n        // Проверяем, что targetSettings - это объект с настройками\n        if (typeof targetSettings !== \"object\" || Object.keys(targetSettings).length === 0) {\n            return \"normal\";\n        }\n        // Генерируем строку font-variation-settings\n        const variationString = Object.entries(targetSettings).map(([tag, value])=>`\"${tag}\" ${value}`).join(\", \");\n        return variationString || \"normal\";\n    }, [\n        selectedFont,\n        variableSettings\n    ]);\n    /**\n   * Мемоизированные CSS свойства для текущего шрифта.\n   * (Перенесено из useFontManager)\n   */ const fontCssProperties = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\n        if (!selectedFont) {\n            return {\n                fontFamily: \"inherit\"\n            };\n        }\n        const properties = {\n            fontFamily: getFontFamily()\n        };\n        if (isSelectedFontVariable) {\n            const variationSettings = getVariationSettings();\n            if (variationSettings && variationSettings !== \"normal\") {\n                properties.fontVariationSettings = variationSettings;\n            }\n        } else {\n            // Для статических шрифтов добавляем weight и style\n            if (selectedFont.currentWeight) {\n                properties.fontWeight = selectedFont.currentWeight;\n            }\n            if (selectedFont.currentStyle && selectedFont.currentStyle !== \"normal\") {\n                properties.fontStyle = selectedFont.currentStyle;\n            }\n        }\n        console.log(`[fontCssProperties] Обновляем CSS для ${selectedFont.name}:`, properties);\n        return properties;\n    }, [\n        selectedFont,\n        selectedFont?.currentWeight,\n        selectedFont?.currentStyle,\n        isSelectedFontVariable,\n        getFontFamily,\n        getVariationSettings\n    ]);\n    /**\n   * Генерирует CSS свойства для применения к элементам.\n   * (Перенесено из useFontManager)\n   * \n   * @returns {Object} - Объект с CSS свойствами.\n   */ const generateCSS = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        return fontCssProperties;\n    }, [\n        fontCssProperties\n    ]);\n    /**\n   * Загружает шрифт с использованием FontFace API.\n   * (Перенесено из useFontManager)\n   * \n   * @param {Object} font - Объект шрифта для загрузки.\n   * @param {Object} settings - Настройки вариативных осей (опционально).\n   * @returns {Promise<FontFace|null>} - Промис с объектом FontFace или null.\n   */ const loadFontFace = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (font, settings = {})=>{\n        if (!font) return null;\n        try {\n            const fontFamily = getFontFamily(font);\n            const url = font.url;\n            if (!url) {\n                console.warn(\"Нет URL для загрузки шрифта:\", font);\n                return null;\n            }\n            const fontFace = await (0,_utils_cssGenerator__WEBPACK_IMPORTED_MODULE_2__.loadFontFaceIfNeeded)(fontFamily.replace(/\"/g, \"\"), url, settings);\n            return fontFace;\n        } catch (error) {\n            console.error(\"Ошибка при загрузке FontFace:\", error);\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Ошибка загрузки шрифта: ${error.message}`);\n            return null;\n        }\n    }, [\n        getFontFamily\n    ]);\n    /**\n   * Обновляет CSS для вариативного шрифта.\n   * (Перенесено из useFontManager)\n   * \n   * @param {Object} font - Объект шрифта.\n   * @param {Object} currentSettings - Текущие настройки осей.\n   * @param {Object} prevSettings - Предыдущие настройки осей.\n   */ const updateVariableFontCss = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((font, currentSettings, prevSettings = null)=>{\n        if (!font || !font.isVariableFont) return;\n        try {\n            (0,_utils_cssGenerator__WEBPACK_IMPORTED_MODULE_2__.updateVariableFontSettings)(font, currentSettings, prevSettings);\n        } catch (error) {\n            console.error(\"Ошибка при обновлении CSS вариативного шрифта:\", error);\n        }\n    }, []);\n    /**\n   * Debounced версия обновления CSS для вариативного шрифта.\n   * (Перенесено из useFontManager)\n   */ const debouncedUpdateVariableFontCss = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((font, currentSettings, prevSettings = null)=>{\n        if (!font || !font.isVariableFont) return;\n        try {\n            (0,_utils_cssGenerator__WEBPACK_IMPORTED_MODULE_2__.debouncedUpdateVariableFontSettings)(font, currentSettings, prevSettings);\n        } catch (error) {\n            console.error(\"Ошибка при debounced обновлении CSS вариативного шрифта:\", error);\n        }\n    }, []);\n    /**\n   * Генерирует CSS строку для экспорта.\n   * (Перенесено из useFontManager)\n   * \n   * @param {Object} font - Объект шрифта (по умолчанию selectedFont).\n   * @param {string} selectedFontName - Имя выбранного шрифта.\n   * @returns {string} - CSS строка для экспорта.\n   */ const exportToCSS = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((font = null, selectedFontName = \"\")=>{\n        const targetFont = font || selectedFont;\n        const targetFontName = selectedFontName || targetFont?.name || \"Unknown Font\";\n        if (!targetFont) {\n            return `/* Нет выбранного шрифта для экспорта */`;\n        }\n        const css = generateCSS(); // Получаем { fontFamily, fontVariationSettings?, fontWeight?, fontStyle? }\n        let cssString = `/* CSS для шрифта: ${targetFontName} */\\n`;\n        cssString += `.font-${targetFontName.replace(/\\s+/g, \"-\").toLowerCase()} {\\n`;\n        Object.entries(css).forEach(([property, value])=>{\n            // Конвертируем camelCase в kebab-case\n            const kebabProperty = property.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n            cssString += `  ${kebabProperty}: ${value};\\n`;\n        });\n        cssString += `}\\n`;\n        return cssString;\n    }, [\n        selectedFont,\n        generateCSS\n    ]);\n    return {\n        // CSS функции\n        getFontFamily,\n        getVariationSettings,\n        generateCSS,\n        // FontFace API\n        loadFontFace,\n        // Обновление CSS\n        updateVariableFontCss,\n        debouncedUpdateVariableFontCss,\n        // Экспорт\n        exportToCSS,\n        // Мемоизированные свойства\n        fontCssProperties\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ob29rcy91c2VGb250Q3NzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTZDO0FBQ047QUFDdUY7QUFFOUg7Ozs7Ozs7Q0FPQyxHQUNNLFNBQVNNLFdBQVdDLFlBQVksRUFBRUMsZ0JBQWdCLEVBQUVDLHNCQUFzQjtJQUUvRTs7Ozs7O0dBTUMsR0FDRCxNQUFNQyxnQkFBZ0JWLGtEQUFXQSxDQUFDLENBQUNXLE9BQU8sSUFBSTtRQUM1QyxNQUFNQyxhQUFhRCxRQUFRSjtRQUMzQixJQUFJLENBQUNLLFlBQVksT0FBTztRQUV4Qix3REFBd0Q7UUFDeEQsSUFBSUEsV0FBV0MsVUFBVSxFQUFFO1lBQ3pCLE9BQU8sQ0FBQyxDQUFDLEVBQUVELFdBQVdDLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDckM7UUFFQSx1REFBdUQ7UUFDdkQsSUFBSUQsV0FBV0UsTUFBTSxLQUFLLGdCQUFnQkYsV0FBV0csSUFBSSxFQUFFO1lBQ3pELE9BQU8sQ0FBQyxDQUFDLEVBQUVILFdBQVdHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDL0I7UUFFQSxxREFBcUQ7UUFDckQsSUFBSUgsV0FBV0csSUFBSSxFQUFFO1lBQ25CLE9BQU8sQ0FBQyxDQUFDLEVBQUVILFdBQVdHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDL0I7UUFFQSxzREFBc0Q7UUFDdEQsSUFBSUgsV0FBV0ksUUFBUSxFQUFFO1lBQ3ZCLE1BQU1DLGlCQUFpQkwsV0FBV0ksUUFBUSxDQUFDRSxPQUFPLENBQUMsYUFBYTtZQUNoRSxPQUFPLENBQUMsQ0FBQyxFQUFFRCxlQUFlLENBQUMsQ0FBQztRQUM5QjtRQUVBLHFEQUFxRDtRQUNyRCxJQUFJTCxXQUFXTyxFQUFFLEVBQUU7WUFDakJDLFFBQVFDLElBQUksQ0FBQztZQUNiLE9BQU8sQ0FBQyxNQUFNLEVBQUVULFdBQVdPLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbEM7UUFFQSxPQUFPO0lBQ1QsR0FBRztRQUFDWjtLQUFhO0lBRWpCOzs7Ozs7O0dBT0MsR0FDRCxNQUFNZSx1QkFBdUJ0QixrREFBV0EsQ0FBQyxDQUFDVyxPQUFPLElBQUksRUFBRVksV0FBVyxJQUFJO1FBQ3BFLE1BQU1YLGFBQWFELFFBQVFKO1FBQzNCLE1BQU1pQixpQkFBaUJELFlBQVlmO1FBRW5DLElBQUksQ0FBQ0ksY0FBYyxDQUFDQSxXQUFXYSxjQUFjLElBQUksQ0FBQ0QsZ0JBQWdCO1lBQ2hFLE9BQU87UUFDVDtRQUVBLDJEQUEyRDtRQUMzRCxJQUFJLE9BQU9BLG1CQUFtQixZQUFZRSxPQUFPQyxJQUFJLENBQUNILGdCQUFnQkksTUFBTSxLQUFLLEdBQUc7WUFDbEYsT0FBTztRQUNUO1FBRUEsNENBQTRDO1FBQzVDLE1BQU1DLGtCQUFrQkgsT0FBT0ksT0FBTyxDQUFDTixnQkFDcENPLEdBQUcsQ0FBQyxDQUFDLENBQUNDLEtBQUtDLE1BQU0sR0FBSyxDQUFDLENBQUMsRUFBRUQsSUFBSSxFQUFFLEVBQUVDLE1BQU0sQ0FBQyxFQUN6Q0MsSUFBSSxDQUFDO1FBRVIsT0FBT0wsbUJBQW1CO0lBQzVCLEdBQUc7UUFBQ3RCO1FBQWNDO0tBQWlCO0lBRW5DOzs7R0FHQyxHQUNELE1BQU0yQixvQkFBb0JsQyw4Q0FBT0EsQ0FBQztRQUNoQyxJQUFJLENBQUNNLGNBQWM7WUFDakIsT0FBTztnQkFBRU0sWUFBWTtZQUFVO1FBQ2pDO1FBRUEsTUFBTXVCLGFBQWE7WUFDakJ2QixZQUFZSDtRQUNkO1FBRUEsSUFBSUQsd0JBQXdCO1lBQzFCLE1BQU00QixvQkFBb0JmO1lBQzFCLElBQUllLHFCQUFxQkEsc0JBQXNCLFVBQVU7Z0JBQ3ZERCxXQUFXRSxxQkFBcUIsR0FBR0Q7WUFDckM7UUFDRixPQUFPO1lBQ0wsbURBQW1EO1lBQ25ELElBQUk5QixhQUFhZ0MsYUFBYSxFQUFFO2dCQUM5QkgsV0FBV0ksVUFBVSxHQUFHakMsYUFBYWdDLGFBQWE7WUFDcEQ7WUFDQSxJQUFJaEMsYUFBYWtDLFlBQVksSUFBSWxDLGFBQWFrQyxZQUFZLEtBQUssVUFBVTtnQkFDdkVMLFdBQVdNLFNBQVMsR0FBR25DLGFBQWFrQyxZQUFZO1lBQ2xEO1FBQ0Y7UUFFQXJCLFFBQVF1QixHQUFHLENBQUMsQ0FBQyxzQ0FBc0MsRUFBRXBDLGFBQWFRLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRXFCO1FBQzNFLE9BQU9BO0lBQ1QsR0FBRztRQUFDN0I7UUFBY0EsY0FBY2dDO1FBQWVoQyxjQUFja0M7UUFBY2hDO1FBQXdCQztRQUFlWTtLQUFxQjtJQUV2STs7Ozs7R0FLQyxHQUNELE1BQU1zQixjQUFjNUMsa0RBQVdBLENBQUM7UUFDOUIsT0FBT21DO0lBQ1QsR0FBRztRQUFDQTtLQUFrQjtJQUV0Qjs7Ozs7OztHQU9DLEdBQ0QsTUFBTVUsZUFBZTdDLGtEQUFXQSxDQUFDLE9BQU9XLE1BQU1ZLFdBQVcsQ0FBQyxDQUFDO1FBQ3pELElBQUksQ0FBQ1osTUFBTSxPQUFPO1FBRWxCLElBQUk7WUFDRixNQUFNRSxhQUFhSCxjQUFjQztZQUNqQyxNQUFNbUMsTUFBTW5DLEtBQUttQyxHQUFHO1lBRXBCLElBQUksQ0FBQ0EsS0FBSztnQkFDUjFCLFFBQVFDLElBQUksQ0FBQyxnQ0FBZ0NWO2dCQUM3QyxPQUFPO1lBQ1Q7WUFFQSxNQUFNb0MsV0FBVyxNQUFNNUMseUVBQW9CQSxDQUN6Q1UsV0FBV0ssT0FBTyxDQUFDLE1BQU0sS0FDekI0QixLQUNBdkI7WUFHRixPQUFPd0I7UUFDVCxFQUFFLE9BQU9DLE9BQU87WUFDZDVCLFFBQVE0QixLQUFLLENBQUMsaUNBQWlDQTtZQUMvQzlDLGlEQUFLQSxDQUFDOEMsS0FBSyxDQUFDLENBQUMsd0JBQXdCLEVBQUVBLE1BQU1DLE9BQU8sQ0FBQyxDQUFDO1lBQ3RELE9BQU87UUFDVDtJQUNGLEdBQUc7UUFBQ3ZDO0tBQWM7SUFFbEI7Ozs7Ozs7R0FPQyxHQUNELE1BQU13Qyx3QkFBd0JsRCxrREFBV0EsQ0FBQyxDQUFDVyxNQUFNd0MsaUJBQWlCQyxlQUFlLElBQUk7UUFDbkYsSUFBSSxDQUFDekMsUUFBUSxDQUFDQSxLQUFLYyxjQUFjLEVBQUU7UUFFbkMsSUFBSTtZQUNGckIsK0VBQTBCQSxDQUFDTyxNQUFNd0MsaUJBQWlCQztRQUNwRCxFQUFFLE9BQU9KLE9BQU87WUFDZDVCLFFBQVE0QixLQUFLLENBQUMsa0RBQWtEQTtRQUNsRTtJQUNGLEdBQUcsRUFBRTtJQUVMOzs7R0FHQyxHQUNELE1BQU1LLGlDQUFpQ3JELGtEQUFXQSxDQUFDLENBQUNXLE1BQU13QyxpQkFBaUJDLGVBQWUsSUFBSTtRQUM1RixJQUFJLENBQUN6QyxRQUFRLENBQUNBLEtBQUtjLGNBQWMsRUFBRTtRQUVuQyxJQUFJO1lBQ0ZwQix3RkFBbUNBLENBQUNNLE1BQU13QyxpQkFBaUJDO1FBQzdELEVBQUUsT0FBT0osT0FBTztZQUNkNUIsUUFBUTRCLEtBQUssQ0FBQyw0REFBNERBO1FBQzVFO0lBQ0YsR0FBRyxFQUFFO0lBRUw7Ozs7Ozs7R0FPQyxHQUNELE1BQU1NLGNBQWN0RCxrREFBV0EsQ0FBQyxDQUFDVyxPQUFPLElBQUksRUFBRTRDLG1CQUFtQixFQUFFO1FBQ2pFLE1BQU0zQyxhQUFhRCxRQUFRSjtRQUMzQixNQUFNaUQsaUJBQWlCRCxvQkFBb0IzQyxZQUFZRyxRQUFRO1FBRS9ELElBQUksQ0FBQ0gsWUFBWTtZQUNmLE9BQU8sQ0FBQyx3Q0FBd0MsQ0FBQztRQUNuRDtRQUVBLE1BQU02QyxNQUFNYixlQUFlLDJFQUEyRTtRQUV0RyxJQUFJYyxZQUFZLENBQUMsbUJBQW1CLEVBQUVGLGVBQWUsS0FBSyxDQUFDO1FBQzNERSxhQUFhLENBQUMsTUFBTSxFQUFFRixlQUFldEMsT0FBTyxDQUFDLFFBQVEsS0FBS3lDLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFFN0VqQyxPQUFPSSxPQUFPLENBQUMyQixLQUFLRyxPQUFPLENBQUMsQ0FBQyxDQUFDQyxVQUFVNUIsTUFBTTtZQUM1QyxzQ0FBc0M7WUFDdEMsTUFBTTZCLGdCQUFnQkQsU0FBUzNDLE9BQU8sQ0FBQyxZQUFZLE9BQU95QyxXQUFXO1lBQ3JFRCxhQUFhLENBQUMsRUFBRSxFQUFFSSxjQUFjLEVBQUUsRUFBRTdCLE1BQU0sR0FBRyxDQUFDO1FBQ2hEO1FBRUF5QixhQUFhLENBQUMsR0FBRyxDQUFDO1FBRWxCLE9BQU9BO0lBQ1QsR0FBRztRQUFDbkQ7UUFBY3FDO0tBQVk7SUFFOUIsT0FBTztRQUNMLGNBQWM7UUFDZGxDO1FBQ0FZO1FBQ0FzQjtRQUVBLGVBQWU7UUFDZkM7UUFFQSxpQkFBaUI7UUFDakJLO1FBQ0FHO1FBRUEsVUFBVTtRQUNWQztRQUVBLDJCQUEyQjtRQUMzQm5CO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZvbnQtZ2F1bnRsZXQtY2xvbmUvLi9ob29rcy91c2VGb250Q3NzLmpzP2IxMjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcbmltcG9ydCB7IGxvYWRGb250RmFjZUlmTmVlZGVkLCB1cGRhdGVWYXJpYWJsZUZvbnRTZXR0aW5ncywgZGVib3VuY2VkVXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3MgfSBmcm9tICcuLi91dGlscy9jc3NHZW5lcmF0b3InO1xuXG4vKipcbiAqINCl0YPQuiDQtNC70Y8g0YPQv9GA0LDQstC70LXQvdC40Y8gQ1NTINGB0YLQuNC70Y/QvNC4INGI0YDQuNGE0YLQvtCyLlxuICogXG4gKiBAcGFyYW0ge09iamVjdH0gc2VsZWN0ZWRGb250IC0g0KLQtdC60YPRidC40Lkg0LLRi9Cx0YDQsNC90L3Ri9C5INC+0LHRitC10LrRgiDRiNGA0LjRhNGC0LAuXG4gKiBAcGFyYW0ge09iamVjdH0gdmFyaWFibGVTZXR0aW5ncyAtINCi0LXQutGD0YnQuNC1INC90LDRgdGC0YDQvtC50LrQuCDQstCw0YDQuNCw0YLQuNCy0L3Ri9GFINC+0YHQtdC5LlxuICogQHBhcmFtIHtib29sZWFufSBpc1NlbGVjdGVkRm9udFZhcmlhYmxlIC0g0KTQu9Cw0LMsINGP0LLQu9GP0LXRgtGB0Y8g0LvQuCDQstGL0LHRgNCw0L3QvdGL0Lkg0YjRgNC40YTRgiDQstCw0YDQuNCw0YLQuNCy0L3Ri9C8LlxuICogQHJldHVybnMge09iamVjdH0gLSDQntCx0YrQtdC60YIg0YEgQ1NTINGE0YPQvdC60YbQuNGP0LzQuCDQuCDRgdCy0L7QudGB0YLQstCw0LzQuC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZvbnRDc3Moc2VsZWN0ZWRGb250LCB2YXJpYWJsZVNldHRpbmdzLCBpc1NlbGVjdGVkRm9udFZhcmlhYmxlKSB7XG5cbiAgLyoqXG4gICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINGB0YLRgNC+0LrRgyBmb250LWZhbWlseSDQtNC70Y8g0YLQtdC60YPRidC10LPQviDQuNC70Lgg0YPQutCw0LfQsNC90L3QvtCz0L4g0YjRgNC40YTRgtCwLlxuICAgKiAo0J/QtdGA0LXQvdC10YHQtdC90L4g0LjQtyB1c2VGb250TWFuYWdlcilcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fG51bGx9IGZvbnQgLSDQqNGA0LjRhNGCINC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8gZm9udC1mYW1pbHkgKNC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOIHNlbGVjdGVkRm9udCkuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IC0g0KHRgtGA0L7QutCwIGZvbnQtZmFtaWx5INC00LvRjyBDU1MuXG4gICAqL1xuICBjb25zdCBnZXRGb250RmFtaWx5ID0gdXNlQ2FsbGJhY2soKGZvbnQgPSBudWxsKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0Rm9udCA9IGZvbnQgfHwgc2VsZWN0ZWRGb250O1xuICAgIGlmICghdGFyZ2V0Rm9udCkgcmV0dXJuICdpbmhlcml0JztcblxuICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IGZvbnRGYW1pbHkg0LjQtyDQvtCx0YrQtdC60YLQsCDRiNGA0LjRhNGC0LAsINC10YHQu9C4INC+0L0g0LXRgdGC0YxcbiAgICBpZiAodGFyZ2V0Rm9udC5mb250RmFtaWx5KSB7XG4gICAgICByZXR1cm4gYFwiJHt0YXJnZXRGb250LmZvbnRGYW1pbHl9XCJgO1xuICAgIH1cblxuICAgIC8vINCU0LvRjyBGb250c291cmNlINGI0YDQuNGE0YLQvtCyINCz0LXQvdC10YDQuNGA0YPQtdC8INC40LzRjyDQvdCwINC+0YHQvdC+0LLQtSBuYW1lXG4gICAgaWYgKHRhcmdldEZvbnQuc291cmNlID09PSAnZm9udHNvdXJjZScgJiYgdGFyZ2V0Rm9udC5uYW1lKSB7XG4gICAgICByZXR1cm4gYFwiJHt0YXJnZXRGb250Lm5hbWV9XCJgO1xuICAgIH1cblxuICAgIC8vINCU0LvRjyDQu9C+0LrQsNC70YzQvdGL0YUg0YjRgNC40YTRgtC+0LIg0LjRgdC/0L7Qu9GM0LfRg9C10LwgbmFtZSDQuNC70LggZmlsZW5hbWVcbiAgICBpZiAodGFyZ2V0Rm9udC5uYW1lKSB7XG4gICAgICByZXR1cm4gYFwiJHt0YXJnZXRGb250Lm5hbWV9XCJgO1xuICAgIH1cblxuICAgIC8vINCV0YHQu9C4INC10YHRgtGMIGZpbGVuYW1lICjQsdC10Lcg0YDQsNGB0YjQuNGA0LXQvdC40Y8pLCDQuNGB0L/QvtC70YzQt9GD0LXQvCDQtdCz0L5cbiAgICBpZiAodGFyZ2V0Rm9udC5maWxlbmFtZSkge1xuICAgICAgY29uc3QgbmFtZVdpdGhvdXRFeHQgPSB0YXJnZXRGb250LmZpbGVuYW1lLnJlcGxhY2UoL1xcLlteLy5dKyQvLCAnJyk7XG4gICAgICByZXR1cm4gYFwiJHtuYW1lV2l0aG91dEV4dH1cImA7XG4gICAgfVxuXG4gICAgLy8g0JXRgdC70Lgg0L3QuNGH0LXQs9C+INC90LUg0L3QsNC50LTQtdC90L4sINC40YHQv9C+0LvRjNC30YPQtdC8IElEINC60LDQuiBmYWxsYmFja1xuICAgIGlmICh0YXJnZXRGb250LmlkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2dldEZvbnRGYW1pbHk6INCS0L7Qt9Cy0YDQsNGJ0LDQtdC8INCy0YDQtdC80LXQvdC90L7QtSDQuNC80Y8g0L3QsCDQvtGB0L3QvtCy0LUgSUQsINGCLtC6LiBmb250RmFtaWx5INC10YnQtSDQvdC1INGD0YHRgtCw0L3QvtCy0LvQtdC9LicpO1xuICAgICAgcmV0dXJuIGBcIkZvbnRfJHt0YXJnZXRGb250LmlkfVwiYDtcbiAgICB9XG5cbiAgICByZXR1cm4gJ2luaGVyaXQnO1xuICB9LCBbc2VsZWN0ZWRGb250XSk7XG5cbiAgLyoqXG4gICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINGB0YLRgNC+0LrRgyBmb250LXZhcmlhdGlvbi1zZXR0aW5ncyDQtNC70Y8g0YLQtdC60YPRidC10LPQviDQuNC70Lgg0YPQutCw0LfQsNC90L3QvtCz0L4g0YjRgNC40YTRgtCwLlxuICAgKiAo0J/QtdGA0LXQvdC10YHQtdC90L4g0LjQtyB1c2VGb250TWFuYWdlcilcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fG51bGx9IGZvbnQgLSDQqNGA0LjRhNGCINC00LvRjyDQv9C+0LvRg9GH0LXQvdC40Y8g0L3QsNGB0YLRgNC+0LXQuiAo0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4gc2VsZWN0ZWRGb250KS5cbiAgICogQHBhcmFtIHtPYmplY3R8bnVsbH0gc2V0dGluZ3MgLSDQndCw0YHRgtGA0L7QudC60Lgg0L7RgdC10LkgKNC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOIHZhcmlhYmxlU2V0dGluZ3MpLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSAtINCh0YLRgNC+0LrQsCBmb250LXZhcmlhdGlvbi1zZXR0aW5ncyDQtNC70Y8gQ1NTLlxuICAgKi9cbiAgY29uc3QgZ2V0VmFyaWF0aW9uU2V0dGluZ3MgPSB1c2VDYWxsYmFjaygoZm9udCA9IG51bGwsIHNldHRpbmdzID0gbnVsbCkgPT4ge1xuICAgIGNvbnN0IHRhcmdldEZvbnQgPSBmb250IHx8IHNlbGVjdGVkRm9udDtcbiAgICBjb25zdCB0YXJnZXRTZXR0aW5ncyA9IHNldHRpbmdzIHx8IHZhcmlhYmxlU2V0dGluZ3M7XG5cbiAgICBpZiAoIXRhcmdldEZvbnQgfHwgIXRhcmdldEZvbnQuaXNWYXJpYWJsZUZvbnQgfHwgIXRhcmdldFNldHRpbmdzKSB7XG4gICAgICByZXR1cm4gJ25vcm1hbCc7XG4gICAgfVxuXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDRh9GC0L4gdGFyZ2V0U2V0dGluZ3MgLSDRjdGC0L4g0L7QsdGK0LXQutGCINGBINC90LDRgdGC0YDQvtC50LrQsNC80LhcbiAgICBpZiAodHlwZW9mIHRhcmdldFNldHRpbmdzICE9PSAnb2JqZWN0JyB8fCBPYmplY3Qua2V5cyh0YXJnZXRTZXR0aW5ncykubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gJ25vcm1hbCc7XG4gICAgfVxuXG4gICAgLy8g0JPQtdC90LXRgNC40YDRg9C10Lwg0YHRgtGA0L7QutGDIGZvbnQtdmFyaWF0aW9uLXNldHRpbmdzXG4gICAgY29uc3QgdmFyaWF0aW9uU3RyaW5nID0gT2JqZWN0LmVudHJpZXModGFyZ2V0U2V0dGluZ3MpXG4gICAgICAubWFwKChbdGFnLCB2YWx1ZV0pID0+IGBcIiR7dGFnfVwiICR7dmFsdWV9YClcbiAgICAgIC5qb2luKCcsICcpO1xuXG4gICAgcmV0dXJuIHZhcmlhdGlvblN0cmluZyB8fCAnbm9ybWFsJztcbiAgfSwgW3NlbGVjdGVkRm9udCwgdmFyaWFibGVTZXR0aW5nc10pO1xuXG4gIC8qKlxuICAgKiDQnNC10LzQvtC40LfQuNGA0L7QstCw0L3QvdGL0LUgQ1NTINGB0LLQvtC50YHRgtCy0LAg0LTQu9GPINGC0LXQutGD0YnQtdCz0L4g0YjRgNC40YTRgtCwLlxuICAgKiAo0J/QtdGA0LXQvdC10YHQtdC90L4g0LjQtyB1c2VGb250TWFuYWdlcilcbiAgICovXG4gIGNvbnN0IGZvbnRDc3NQcm9wZXJ0aWVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKCFzZWxlY3RlZEZvbnQpIHtcbiAgICAgIHJldHVybiB7IGZvbnRGYW1pbHk6ICdpbmhlcml0JyB9O1xuICAgIH1cblxuICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7XG4gICAgICBmb250RmFtaWx5OiBnZXRGb250RmFtaWx5KClcbiAgICB9O1xuXG4gICAgaWYgKGlzU2VsZWN0ZWRGb250VmFyaWFibGUpIHtcbiAgICAgIGNvbnN0IHZhcmlhdGlvblNldHRpbmdzID0gZ2V0VmFyaWF0aW9uU2V0dGluZ3MoKTtcbiAgICAgIGlmICh2YXJpYXRpb25TZXR0aW5ncyAmJiB2YXJpYXRpb25TZXR0aW5ncyAhPT0gJ25vcm1hbCcpIHtcbiAgICAgICAgcHJvcGVydGllcy5mb250VmFyaWF0aW9uU2V0dGluZ3MgPSB2YXJpYXRpb25TZXR0aW5ncztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8g0JTQu9GPINGB0YLQsNGC0LjRh9C10YHQutC40YUg0YjRgNC40YTRgtC+0LIg0LTQvtCx0LDQstC70Y/QtdC8IHdlaWdodCDQuCBzdHlsZVxuICAgICAgaWYgKHNlbGVjdGVkRm9udC5jdXJyZW50V2VpZ2h0KSB7XG4gICAgICAgIHByb3BlcnRpZXMuZm9udFdlaWdodCA9IHNlbGVjdGVkRm9udC5jdXJyZW50V2VpZ2h0O1xuICAgICAgfVxuICAgICAgaWYgKHNlbGVjdGVkRm9udC5jdXJyZW50U3R5bGUgJiYgc2VsZWN0ZWRGb250LmN1cnJlbnRTdHlsZSAhPT0gJ25vcm1hbCcpIHtcbiAgICAgICAgcHJvcGVydGllcy5mb250U3R5bGUgPSBzZWxlY3RlZEZvbnQuY3VycmVudFN0eWxlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBbZm9udENzc1Byb3BlcnRpZXNdINCe0LHQvdC+0LLQu9GP0LXQvCBDU1Mg0LTQu9GPICR7c2VsZWN0ZWRGb250Lm5hbWV9OmAsIHByb3BlcnRpZXMpO1xuICAgIHJldHVybiBwcm9wZXJ0aWVzO1xuICB9LCBbc2VsZWN0ZWRGb250LCBzZWxlY3RlZEZvbnQ/LmN1cnJlbnRXZWlnaHQsIHNlbGVjdGVkRm9udD8uY3VycmVudFN0eWxlLCBpc1NlbGVjdGVkRm9udFZhcmlhYmxlLCBnZXRGb250RmFtaWx5LCBnZXRWYXJpYXRpb25TZXR0aW5nc10pO1xuXG4gIC8qKlxuICAgKiDQk9C10L3QtdGA0LjRgNGD0LXRgiBDU1Mg0YHQstC+0LnRgdGC0LLQsCDQtNC70Y8g0L/RgNC40LzQtdC90LXQvdC40Y8g0Log0Y3Qu9C10LzQtdC90YLQsNC8LlxuICAgKiAo0J/QtdGA0LXQvdC10YHQtdC90L4g0LjQtyB1c2VGb250TWFuYWdlcilcbiAgICogXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IC0g0J7QsdGK0LXQutGCINGBIENTUyDRgdCy0L7QudGB0YLQstCw0LzQuC5cbiAgICovXG4gIGNvbnN0IGdlbmVyYXRlQ1NTID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBmb250Q3NzUHJvcGVydGllcztcbiAgfSwgW2ZvbnRDc3NQcm9wZXJ0aWVzXSk7XG5cbiAgLyoqXG4gICAqINCX0LDQs9GA0YPQttCw0LXRgiDRiNGA0LjRhNGCINGBINC40YHQv9C+0LvRjNC30L7QstCw0L3QuNC10LwgRm9udEZhY2UgQVBJLlxuICAgKiAo0J/QtdGA0LXQvdC10YHQtdC90L4g0LjQtyB1c2VGb250TWFuYWdlcilcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmb250IC0g0J7QsdGK0LXQutGCINGI0YDQuNGE0YLQsCDQtNC70Y8g0LfQsNCz0YDRg9C30LrQuC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzIC0g0J3QsNGB0YLRgNC+0LnQutC4INCy0LDRgNC40LDRgtC40LLQvdGL0YUg0L7RgdC10LkgKNC+0L/RhtC40L7QvdCw0LvRjNC90L4pLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxGb250RmFjZXxudWxsPn0gLSDQn9GA0L7QvNC40YEg0YEg0L7QsdGK0LXQutGC0L7QvCBGb250RmFjZSDQuNC70LggbnVsbC5cbiAgICovXG4gIGNvbnN0IGxvYWRGb250RmFjZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChmb250LCBzZXR0aW5ncyA9IHt9KSA9PiB7XG4gICAgaWYgKCFmb250KSByZXR1cm4gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmb250RmFtaWx5ID0gZ2V0Rm9udEZhbWlseShmb250KTtcbiAgICAgIGNvbnN0IHVybCA9IGZvbnQudXJsO1xuXG4gICAgICBpZiAoIXVybCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ9Cd0LXRgiBVUkwg0LTQu9GPINC30LDQs9GA0YPQt9C60Lgg0YjRgNC40YTRgtCwOicsIGZvbnQpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZm9udEZhY2UgPSBhd2FpdCBsb2FkRm9udEZhY2VJZk5lZWRlZChcbiAgICAgICAgZm9udEZhbWlseS5yZXBsYWNlKC9cIi9nLCAnJyksIC8vINCj0LHQuNGA0LDQtdC8INC60LDQstGL0YfQutC4XG4gICAgICAgIHVybCxcbiAgICAgICAgc2V0dGluZ3NcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBmb250RmFjZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign0J7RiNC40LHQutCwINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1IEZvbnRGYWNlOicsIGVycm9yKTtcbiAgICAgIHRvYXN0LmVycm9yKGDQntGI0LjQsdC60LAg0LfQsNCz0YDRg9C30LrQuCDRiNGA0LjRhNGC0LA6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwgW2dldEZvbnRGYW1pbHldKTtcblxuICAvKipcbiAgICog0J7QsdC90L7QstC70Y/QtdGCIENTUyDQtNC70Y8g0LLQsNGA0LjQsNGC0LjQstC90L7Qs9C+INGI0YDQuNGE0YLQsC5cbiAgICogKNCf0LXRgNC10L3QtdGB0LXQvdC+INC40LcgdXNlRm9udE1hbmFnZXIpXG4gICAqIFxuICAgKiBAcGFyYW0ge09iamVjdH0gZm9udCAtINCe0LHRitC10LrRgiDRiNGA0LjRhNGC0LAuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjdXJyZW50U2V0dGluZ3MgLSDQotC10LrRg9GJ0LjQtSDQvdCw0YHRgtGA0L7QudC60Lgg0L7RgdC10LkuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcmV2U2V0dGluZ3MgLSDQn9GA0LXQtNGL0LTRg9GJ0LjQtSDQvdCw0YHRgtGA0L7QudC60Lgg0L7RgdC10LkuXG4gICAqL1xuICBjb25zdCB1cGRhdGVWYXJpYWJsZUZvbnRDc3MgPSB1c2VDYWxsYmFjaygoZm9udCwgY3VycmVudFNldHRpbmdzLCBwcmV2U2V0dGluZ3MgPSBudWxsKSA9PiB7XG4gICAgaWYgKCFmb250IHx8ICFmb250LmlzVmFyaWFibGVGb250KSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgdXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3MoZm9udCwgY3VycmVudFNldHRpbmdzLCBwcmV2U2V0dGluZ3MpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAg0L/RgNC4INC+0LHQvdC+0LLQu9C10L3QuNC4IENTUyDQstCw0YDQuNCw0YLQuNCy0L3QvtCz0L4g0YjRgNC40YTRgtCwOicsIGVycm9yKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICAvKipcbiAgICogRGVib3VuY2VkINCy0LXRgNGB0LjRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyBDU1Mg0LTQu9GPINCy0LDRgNC40LDRgtC40LLQvdC+0LPQviDRiNGA0LjRhNGC0LAuXG4gICAqICjQn9C10YDQtdC90LXRgdC10L3QviDQuNC3IHVzZUZvbnRNYW5hZ2VyKVxuICAgKi9cbiAgY29uc3QgZGVib3VuY2VkVXBkYXRlVmFyaWFibGVGb250Q3NzID0gdXNlQ2FsbGJhY2soKGZvbnQsIGN1cnJlbnRTZXR0aW5ncywgcHJldlNldHRpbmdzID0gbnVsbCkgPT4ge1xuICAgIGlmICghZm9udCB8fCAhZm9udC5pc1ZhcmlhYmxlRm9udCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGRlYm91bmNlZFVwZGF0ZVZhcmlhYmxlRm9udFNldHRpbmdzKGZvbnQsIGN1cnJlbnRTZXR0aW5ncywgcHJldlNldHRpbmdzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign0J7RiNC40LHQutCwINC/0YDQuCBkZWJvdW5jZWQg0L7QsdC90L7QstC70LXQvdC40LggQ1NTINCy0LDRgNC40LDRgtC40LLQvdC+0LPQviDRiNGA0LjRhNGC0LA6JywgZXJyb3IpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiDQk9C10L3QtdGA0LjRgNGD0LXRgiBDU1Mg0YHRgtGA0L7QutGDINC00LvRjyDRjdC60YHQv9C+0YDRgtCwLlxuICAgKiAo0J/QtdGA0LXQvdC10YHQtdC90L4g0LjQtyB1c2VGb250TWFuYWdlcilcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmb250IC0g0J7QsdGK0LXQutGCINGI0YDQuNGE0YLQsCAo0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4gc2VsZWN0ZWRGb250KS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdGVkRm9udE5hbWUgLSDQmNC80Y8g0LLRi9Cx0YDQsNC90L3QvtCz0L4g0YjRgNC40YTRgtCwLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSAtIENTUyDRgdGC0YDQvtC60LAg0LTQu9GPINGN0LrRgdC/0L7RgNGC0LAuXG4gICAqL1xuICBjb25zdCBleHBvcnRUb0NTUyA9IHVzZUNhbGxiYWNrKChmb250ID0gbnVsbCwgc2VsZWN0ZWRGb250TmFtZSA9ICcnKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0Rm9udCA9IGZvbnQgfHwgc2VsZWN0ZWRGb250O1xuICAgIGNvbnN0IHRhcmdldEZvbnROYW1lID0gc2VsZWN0ZWRGb250TmFtZSB8fCB0YXJnZXRGb250Py5uYW1lIHx8ICdVbmtub3duIEZvbnQnO1xuXG4gICAgaWYgKCF0YXJnZXRGb250KSB7XG4gICAgICByZXR1cm4gYC8qINCd0LXRgiDQstGL0LHRgNCw0L3QvdC+0LPQviDRiNGA0LjRhNGC0LAg0LTQu9GPINGN0LrRgdC/0L7RgNGC0LAgKi9gO1xuICAgIH1cblxuICAgIGNvbnN0IGNzcyA9IGdlbmVyYXRlQ1NTKCk7IC8vINCf0L7Qu9GD0YfQsNC10LwgeyBmb250RmFtaWx5LCBmb250VmFyaWF0aW9uU2V0dGluZ3M/LCBmb250V2VpZ2h0PywgZm9udFN0eWxlPyB9XG4gICAgXG4gICAgbGV0IGNzc1N0cmluZyA9IGAvKiBDU1Mg0LTQu9GPINGI0YDQuNGE0YLQsDogJHt0YXJnZXRGb250TmFtZX0gKi9cXG5gO1xuICAgIGNzc1N0cmluZyArPSBgLmZvbnQtJHt0YXJnZXRGb250TmFtZS5yZXBsYWNlKC9cXHMrL2csICctJykudG9Mb3dlckNhc2UoKX0ge1xcbmA7XG4gICAgXG4gICAgT2JqZWN0LmVudHJpZXMoY3NzKS5mb3JFYWNoKChbcHJvcGVydHksIHZhbHVlXSkgPT4ge1xuICAgICAgLy8g0JrQvtC90LLQtdGA0YLQuNGA0YPQtdC8IGNhbWVsQ2FzZSDQsiBrZWJhYi1jYXNlXG4gICAgICBjb25zdCBrZWJhYlByb3BlcnR5ID0gcHJvcGVydHkucmVwbGFjZSgvKFtBLVpdKS9nLCAnLSQxJykudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNzc1N0cmluZyArPSBgICAke2tlYmFiUHJvcGVydHl9OiAke3ZhbHVlfTtcXG5gO1xuICAgIH0pO1xuICAgIFxuICAgIGNzc1N0cmluZyArPSBgfVxcbmA7XG4gICAgXG4gICAgcmV0dXJuIGNzc1N0cmluZztcbiAgfSwgW3NlbGVjdGVkRm9udCwgZ2VuZXJhdGVDU1NdKTtcblxuICByZXR1cm4ge1xuICAgIC8vIENTUyDRhNGD0L3QutGG0LjQuFxuICAgIGdldEZvbnRGYW1pbHksXG4gICAgZ2V0VmFyaWF0aW9uU2V0dGluZ3MsXG4gICAgZ2VuZXJhdGVDU1MsXG4gICAgXG4gICAgLy8gRm9udEZhY2UgQVBJXG4gICAgbG9hZEZvbnRGYWNlLFxuICAgIFxuICAgIC8vINCe0LHQvdC+0LLQu9C10L3QuNC1IENTU1xuICAgIHVwZGF0ZVZhcmlhYmxlRm9udENzcyxcbiAgICBkZWJvdW5jZWRVcGRhdGVWYXJpYWJsZUZvbnRDc3MsXG4gICAgXG4gICAgLy8g0K3QutGB0L/QvtGA0YJcbiAgICBleHBvcnRUb0NTUyxcbiAgICBcbiAgICAvLyDQnNC10LzQvtC40LfQuNGA0L7QstCw0L3QvdGL0LUg0YHQstC+0LnRgdGC0LLQsFxuICAgIGZvbnRDc3NQcm9wZXJ0aWVzLFxuICB9O1xufSAiXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VNZW1vIiwidG9hc3QiLCJsb2FkRm9udEZhY2VJZk5lZWRlZCIsInVwZGF0ZVZhcmlhYmxlRm9udFNldHRpbmdzIiwiZGVib3VuY2VkVXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3MiLCJ1c2VGb250Q3NzIiwic2VsZWN0ZWRGb250IiwidmFyaWFibGVTZXR0aW5ncyIsImlzU2VsZWN0ZWRGb250VmFyaWFibGUiLCJnZXRGb250RmFtaWx5IiwiZm9udCIsInRhcmdldEZvbnQiLCJmb250RmFtaWx5Iiwic291cmNlIiwibmFtZSIsImZpbGVuYW1lIiwibmFtZVdpdGhvdXRFeHQiLCJyZXBsYWNlIiwiaWQiLCJjb25zb2xlIiwid2FybiIsImdldFZhcmlhdGlvblNldHRpbmdzIiwic2V0dGluZ3MiLCJ0YXJnZXRTZXR0aW5ncyIsImlzVmFyaWFibGVGb250IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInZhcmlhdGlvblN0cmluZyIsImVudHJpZXMiLCJtYXAiLCJ0YWciLCJ2YWx1ZSIsImpvaW4iLCJmb250Q3NzUHJvcGVydGllcyIsInByb3BlcnRpZXMiLCJ2YXJpYXRpb25TZXR0aW5ncyIsImZvbnRWYXJpYXRpb25TZXR0aW5ncyIsImN1cnJlbnRXZWlnaHQiLCJmb250V2VpZ2h0IiwiY3VycmVudFN0eWxlIiwiZm9udFN0eWxlIiwibG9nIiwiZ2VuZXJhdGVDU1MiLCJsb2FkRm9udEZhY2UiLCJ1cmwiLCJmb250RmFjZSIsImVycm9yIiwibWVzc2FnZSIsInVwZGF0ZVZhcmlhYmxlRm9udENzcyIsImN1cnJlbnRTZXR0aW5ncyIsInByZXZTZXR0aW5ncyIsImRlYm91bmNlZFVwZGF0ZVZhcmlhYmxlRm9udENzcyIsImV4cG9ydFRvQ1NTIiwic2VsZWN0ZWRGb250TmFtZSIsInRhcmdldEZvbnROYW1lIiwiY3NzIiwiY3NzU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJmb3JFYWNoIiwicHJvcGVydHkiLCJrZWJhYlByb3BlcnR5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./hooks/useFontCss.js\n");

/***/ }),

/***/ "./hooks/useFontExport.js":
/*!********************************!*\
  !*** ./hooks/useFontExport.js ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFontExport: () => (/* binding */ useFontExport)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var _utils_staticFontGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/staticFontGenerator */ \"./utils/staticFontGenerator.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_1__]);\nreact_toastify__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n/**\n * Хук для экспорта и скачивания шрифтов и CSS\n * \n * Включает в себя:\n * - Универсальную логику скачивания файлов\n * - Экспорт CSS с возможностью скачивания\n * - Создание статических версий вариативных шрифтов\n * - Подготовка к будущей логике генерации статических шрифтов\n * \n * @param {Function} exportToCSSFromHook - Функция генерации CSS из useFontCss\n * @returns {Object} Объект с методами экспорта\n */ function useFontExport(exportToCSSFromHook) {\n    /**\n   * Универсальная функция скачивания файлов\n   * \n   * @param {string|Blob} content - Содержимое файла (строка или Blob)\n   * @param {string} filename - Имя файла для скачивания\n   * @param {string} mimeType - MIME тип файла (игнорируется если content это Blob)\n   * @returns {boolean} Успешность операции\n   */ const downloadFile = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((content, filename, mimeType = \"text/plain\")=>{\n        try {\n            let blob;\n            if (content instanceof Blob) {\n                blob = content;\n            } else {\n                blob = new Blob([\n                    content\n                ], {\n                    type: mimeType\n                });\n            }\n            const url = URL.createObjectURL(blob);\n            const downloadLink = document.createElement(\"a\");\n            downloadLink.href = url;\n            downloadLink.download = filename;\n            document.body.appendChild(downloadLink);\n            downloadLink.click();\n            // Очищаем ресурсы\n            setTimeout(()=>{\n                document.body.removeChild(downloadLink);\n                URL.revokeObjectURL(url);\n            }, 100);\n            return true;\n        } catch (error) {\n            console.error(\"Ошибка скачивания файла:\", error);\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Не удалось скачать файл: ${error.message}`);\n            return false;\n        }\n    }, []);\n    /**\n   * Создает статическую версию вариативного шрифта с текущими настройками осей\n   * \n   * @param {Object} selectedFont - Выбранный шрифт\n   * @param {string} selectedFontName - Имя выбранного шрифта\n   * @param {Object} variableSettings - Настройки вариативных осей\n   * @param {Function} setExportedFont - Функция установки экспортированного шрифта\n   * @returns {Object|undefined} Объект статического шрифта или undefined\n   */ const createStaticFont = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((selectedFont, selectedFontName, variableSettings, setExportedFont)=>{\n        if (!selectedFont) {\n            return;\n        }\n        // Создаем новое имя для статической версии шрифта\n        const staticName = `${selectedFontName.replace(/\\.[^/.]+$/, \"\")}-static`;\n        // Определяем текущие настройки\n        const settings = {\n            ...variableSettings\n        };\n        // Создаем статический экспортированный шрифт\n        const newExportedFont = {\n            name: staticName,\n            settings: settings,\n            isStatic: true,\n            originalFont: selectedFontName,\n            createdAt: new Date().toISOString()\n        };\n        setExportedFont(newExportedFont);\n        react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.success(`Создана статическая версия шрифта: ${staticName}`);\n        return newExportedFont;\n    }, []);\n    /**\n   * Экспортирует текущие настройки шрифта в CSS с возможностью скачивания\n   * \n   * @param {Object} selectedFont - Выбранный шрифт\n   * @param {string} selectedFontName - Имя выбранного шрифта\n   * @param {boolean} download - Если true, автоматически скачивает CSS файл\n   * @returns {string} CSS-код для текущего шрифта с примененными настройками\n   */ const exportToCSS = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((selectedFont, selectedFontName, download = false)=>{\n        // Используем функцию из useFontCss для генерации CSS\n        const cssCode = exportToCSSFromHook(selectedFont, selectedFontName);\n        if (download && cssCode) {\n            const filename = `${selectedFontName.replace(/\\s+/g, \"-\").toLowerCase()}-styles.css`;\n            const success = downloadFile(cssCode, filename, \"text/css\");\n            if (success) {\n                react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.success(`CSS файл ${filename} скачан`);\n            }\n        }\n        return cssCode;\n    }, [\n        exportToCSSFromHook,\n        downloadFile\n    ]);\n    /**\n   * Генерирует статический шрифт из вариативного используя современные методы\n   * \n   * @param {Object} selectedFont - Вариативный шрифт\n   * @param {Object} variableSettings - Настройки осей\n   * @param {string} format - Формат выходного файла ('woff2', 'woff', 'ttf', 'otf')\n   * @returns {Promise<Blob|null>} Blob статического шрифта или null при ошибке\n   */ const generateStaticFontFile = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (selectedFont, variableSettings, format = \"woff2\")=>{\n        if (!selectedFont || !selectedFont.isVariableFont) {\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Выберите вариативный шрифт для создания статической версии\");\n            return null;\n        }\n        if (!selectedFont.url && !selectedFont.arrayBuffer) {\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Нет доступа к файлу шрифта для генерации\");\n            return null;\n        }\n        try {\n            // 1. Импортируем новую утилиту для генерации\n            const { generateStaticFont, checkGenerationCapabilities } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../utils/staticFontGenerator */ \"./utils/staticFontGenerator.js\"));\n            // 2. Проверяем доступные методы\n            const capabilities = await checkGenerationCapabilities();\n            // Показываем пользователю информацию о методе\n            if (capabilities.harfbuzz) {\n                react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Используется HarfBuzz для качественной генерации\");\n            } else if (capabilities.server) {\n                react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Используется серверная генерация\");\n            } else {\n                react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.warning(\"Используется псевдо-статический метод (ограниченная функциональность)\");\n            }\n            // 3. Получаем данные шрифта\n            let fontData;\n            if (selectedFont.arrayBuffer) {\n                fontData = selectedFont.arrayBuffer;\n            } else if (selectedFont.url) {\n                const response = await fetch(selectedFont.url);\n                if (!response.ok) {\n                    throw new Error(`Не удалось загрузить шрифт: ${response.status}`);\n                }\n                fontData = await response.arrayBuffer();\n            } else {\n                throw new Error(\"Нет доступных данных шрифта\");\n            }\n            // Проверяем что fontData это действительно ArrayBuffer\n            if (!fontData || !(fontData instanceof ArrayBuffer)) {\n                throw new Error(`Неправильный тип данных шрифта. Ожидается ArrayBuffer, получен: ${typeof fontData}`);\n            }\n            // 4. Генерируем статический шрифт с помощью новой утилиты\n            const result = await generateStaticFont(fontData, variableSettings, {\n                format,\n                fontName: selectedFont.name || \"VariableFont\"\n            });\n            // Показываем предупреждение если это псевдо-статический шрифт\n            if (result.warning) {\n                react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.warning(result.warning);\n            }\n            // Если есть CSS (для псевдо-статического), предлагаем его скачать\n            if (result.css) {\n                const downloadCSS = window.confirm(\"Создан псевдо-статический шрифт с CSS. Скачать CSS файл?\");\n                if (downloadCSS) {\n                    downloadFile(result.css, `${selectedFont.name}-static.css`, \"text/css\");\n                }\n            }\n            // Определяем MIME тип\n            let mimeType;\n            switch(format.toLowerCase()){\n                case \"ttf\":\n                    mimeType = \"font/ttf\";\n                    break;\n                case \"otf\":\n                    mimeType = \"font/otf\";\n                    break;\n                case \"woff\":\n                    mimeType = \"font/woff\";\n                    break;\n                case \"woff2\":\n                    mimeType = \"font/woff2\";\n                    break;\n                default:\n                    mimeType = \"font/ttf\";\n            }\n            // 5. Создаем Blob\n            const blob = new Blob([\n                result.buffer\n            ], {\n                type: mimeType\n            });\n            const statusMessage = result.isRealStatic ? `Настоящий статический шрифт сгенерирован (${(blob.size / 1024).toFixed(1)} KB)` : `Псевдо-статический шрифт создан (${(blob.size / 1024).toFixed(1)} KB)`;\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.success(statusMessage);\n            return blob;\n        } catch (error) {\n            console.error(\"[generateStaticFontFile] Ошибка при генерации:\", error);\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Ошибка генерации статического шрифта: ${error.message}`);\n            return null;\n        }\n    }, []);\n    /**\n   * Скачивает статический шрифт, сгенерированный из вариативного\n   * \n   * @param {Object} selectedFont - Вариативный шрифт\n   * @param {Object} variableSettings - Настройки осей\n   * @param {string} format - Формат файла\n   * @returns {Promise<boolean>} Успешность операции\n   */ const downloadStaticFont = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (selectedFont, variableSettings, format = \"ttf\")=>{\n        if (!selectedFont || !selectedFont.isVariableFont) {\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Выберите вариативный шрифт для создания статической версии\");\n            return false;\n        }\n        try {\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Генерируем статический шрифт...\", {\n                autoClose: 2000\n            });\n            const fontBlob = await generateStaticFontFile(selectedFont, variableSettings, format);\n            if (fontBlob) {\n                // Создаем описательное имя файла с настройками осей\n                const fontBaseName = (selectedFont.name || selectedFont.fontFamily || \"font\").replace(/\\s+/g, \"-\").toLowerCase().replace(/[^a-z0-9\\-]/g, \"\");\n                // Добавляем информацию об основных осях в имя файла\n                let axisInfo = \"\";\n                // Основные оси (стандартные)\n                if (variableSettings.wght && variableSettings.wght !== 400) {\n                    axisInfo += `_w${Math.round(variableSettings.wght)}`;\n                }\n                if (variableSettings.wdth && variableSettings.wdth !== 100) {\n                    axisInfo += `_wd${Math.round(variableSettings.wdth)}`;\n                }\n                if (variableSettings.slnt && variableSettings.slnt !== 0) {\n                    axisInfo += `_sl${Math.round(Math.abs(variableSettings.slnt))}`;\n                }\n                if (variableSettings.opsz && variableSettings.opsz !== 14) {\n                    axisInfo += `_opsz${Math.round(variableSettings.opsz)}`;\n                }\n                if (variableSettings.GRAD && variableSettings.GRAD !== 0) {\n                    axisInfo += `_grad${Math.round(variableSettings.GRAD)}`;\n                }\n                // Параметрические оси (если отличаются от дефолтных значений)\n                const parametricAxes = [\n                    \"XOPQ\",\n                    \"YOPQ\",\n                    \"XTRA\",\n                    \"YTUC\",\n                    \"YTLC\",\n                    \"YTAS\",\n                    \"YTDE\",\n                    \"YTFI\"\n                ];\n                parametricAxes.forEach((axis)=>{\n                    if (variableSettings[axis] !== undefined) {\n                        const value = Math.round(variableSettings[axis]);\n                        axisInfo += `_${axis.toLowerCase()}${value}`;\n                    }\n                });\n                // Ограничиваем длину имени файла (если слишком много осей)\n                if (axisInfo.length > 50) {\n                    axisInfo = axisInfo.substring(0, 47) + \"...\";\n                }\n                const filename = `${fontBaseName}${axisInfo}_static.${format}`;\n                const success = downloadFile(fontBlob, filename, `font/${format}`);\n                if (success) {\n                    react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.success(`Статический шрифт скачан: ${filename}`);\n                }\n                return success;\n            }\n            return false;\n        } catch (error) {\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Ошибка при создании статического шрифта: ${error.message}`);\n            return false;\n        }\n    }, [\n        generateStaticFontFile,\n        downloadFile\n    ]);\n    return {\n        // Универсальные функции\n        downloadFile,\n        // CSS экспорт\n        exportToCSS,\n        // Работа со статическими версиями\n        createStaticFont,\n        // Будущая функциональность генерации статических шрифтов\n        generateStaticFontFile,\n        downloadStaticFont\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxDQUFDLEtBQUssRUFBRTBDLE9BQU8sQ0FBQztnQkFFakUsSUFBSUwsU0FBUztvQkFDWDNDLGlEQUFLQSxDQUFDMkMsT0FBTyxDQUFDLENBQUMsMEJBQTBCLEVBQUVyQyxTQUFTLENBQUM7Z0JBQ3ZEO2dCQUVBLE9BQU9xQztZQUNUO1lBRUEsT0FBTztRQUNULEVBQUUsT0FBT2xCLE9BQU87WUFDZHpCLGlEQUFLQSxDQUFDeUIsS0FBSyxDQUFDLENBQUMseUNBQXlDLEVBQUVBLE1BQU1FLE9BQU8sQ0FBQyxDQUFDO1lBQ3ZFLE9BQU87UUFDVDtJQUNGLEdBQUc7UUFBQ29CO1FBQXdCM0M7S0FBYTtJQUV6QyxPQUFPO1FBQ0wsd0JBQXdCO1FBQ3hCQTtRQUVBLGNBQWM7UUFDZHdDO1FBRUEsa0NBQWtDO1FBQ2xDaEI7UUFFQSx5REFBeUQ7UUFDekRtQjtRQUNBNEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9udC1nYXVudGxldC1jbG9uZS8uL2hvb2tzL3VzZUZvbnRFeHBvcnQuanM/ZjczYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSAncmVhY3QtdG9hc3RpZnknO1xuaW1wb3J0IHsgZ2VuZXJhdGVTdGF0aWNGb250IH0gZnJvbSAnLi4vdXRpbHMvc3RhdGljRm9udEdlbmVyYXRvcic7XG5cbi8qKlxuICog0KXRg9C6INC00LvRjyDRjdC60YHQv9C+0YDRgtCwINC4INGB0LrQsNGH0LjQstCw0L3QuNGPINGI0YDQuNGE0YLQvtCyINC4IENTU1xuICogXG4gKiDQktC60LvRjtGH0LDQtdGCINCyINGB0LXQsdGPOlxuICogLSDQo9C90LjQstC10YDRgdCw0LvRjNC90YPRjiDQu9C+0LPQuNC60YMg0YHQutCw0YfQuNCy0LDQvdC40Y8g0YTQsNC50LvQvtCyXG4gKiAtINCt0LrRgdC/0L7RgNGCIENTUyDRgSDQstC+0LfQvNC+0LbQvdC+0YHRgtGM0Y4g0YHQutCw0YfQuNCy0LDQvdC40Y9cbiAqIC0g0KHQvtC30LTQsNC90LjQtSDRgdGC0LDRgtC40YfQtdGB0LrQuNGFINCy0LXRgNGB0LjQuSDQstCw0YDQuNCw0YLQuNCy0L3Ri9GFINGI0YDQuNGE0YLQvtCyXG4gKiAtINCf0L7QtNCz0L7RgtC+0LLQutCwINC6INCx0YPQtNGD0YnQtdC5INC70L7Qs9C40LrQtSDQs9C10L3QtdGA0LDRhtC40Lgg0YHRgtCw0YLQuNGH0LXRgdC60LjRhSDRiNGA0LjRhNGC0L7QslxuICogXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleHBvcnRUb0NTU0Zyb21Ib29rIC0g0KTRg9C90LrRhtC40Y8g0LPQtdC90LXRgNCw0YbQuNC4IENTUyDQuNC3IHVzZUZvbnRDc3NcbiAqIEByZXR1cm5zIHtPYmplY3R9INCe0LHRitC10LrRgiDRgSDQvNC10YLQvtC00LDQvNC4INGN0LrRgdC/0L7RgNGC0LBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZvbnRFeHBvcnQoZXhwb3J0VG9DU1NGcm9tSG9vaykge1xuICAvKipcbiAgICog0KPQvdC40LLQtdGA0YHQsNC70YzQvdCw0Y8g0YTRg9C90LrRhtC40Y8g0YHQutCw0YfQuNCy0LDQvdC40Y8g0YTQsNC50LvQvtCyXG4gICAqIFxuICAgKiBAcGFyYW0ge3N0cmluZ3xCbG9ifSBjb250ZW50IC0g0KHQvtC00LXRgNC20LjQvNC+0LUg0YTQsNC50LvQsCAo0YHRgtGA0L7QutCwINC40LvQuCBCbG9iKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZW5hbWUgLSDQmNC80Y8g0YTQsNC50LvQsCDQtNC70Y8g0YHQutCw0YfQuNCy0LDQvdC40Y9cbiAgICogQHBhcmFtIHtzdHJpbmd9IG1pbWVUeXBlIC0gTUlNRSDRgtC40L8g0YTQsNC50LvQsCAo0LjQs9C90L7RgNC40YDRg9C10YLRgdGPINC10YHQu9C4IGNvbnRlbnQg0Y3RgtC+IEJsb2IpXG4gICAqIEByZXR1cm5zIHtib29sZWFufSDQo9GB0L/QtdGI0L3QvtGB0YLRjCDQvtC/0LXRgNCw0YbQuNC4XG4gICAqL1xuICBjb25zdCBkb3dubG9hZEZpbGUgPSB1c2VDYWxsYmFjaygoY29udGVudCwgZmlsZW5hbWUsIG1pbWVUeXBlID0gJ3RleHQvcGxhaW4nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBibG9iO1xuICAgICAgaWYgKGNvbnRlbnQgaW5zdGFuY2VvZiBCbG9iKSB7XG4gICAgICAgIGJsb2IgPSBjb250ZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgIFxuICAgICAgY29uc3QgZG93bmxvYWRMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgZG93bmxvYWRMaW5rLmhyZWYgPSB1cmw7XG4gICAgICBkb3dubG9hZExpbmsuZG93bmxvYWQgPSBmaWxlbmFtZTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG93bmxvYWRMaW5rKTtcbiAgICAgIGRvd25sb2FkTGluay5jbGljaygpO1xuICAgICAgXG4gICAgICAvLyDQntGH0LjRidCw0LXQvCDRgNC10YHRg9GA0YHRi1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG93bmxvYWRMaW5rKTtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgfSwgMTAwKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDRgdC60LDRh9C40LLQsNC90LjRjyDRhNCw0LnQu9CwOicsIGVycm9yKTtcbiAgICAgIHRvYXN0LmVycm9yKGDQndC1INGD0LTQsNC70L7RgdGMINGB0LrQsNGH0LDRgtGMINGE0LDQudC7OiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLyoqXG4gICAqINCh0L7Qt9C00LDQtdGCINGB0YLQsNGC0LjRh9C10YHQutGD0Y4g0LLQtdGA0YHQuNGOINCy0LDRgNC40LDRgtC40LLQvdC+0LPQviDRiNGA0LjRhNGC0LAg0YEg0YLQtdC60YPRidC40LzQuCDQvdCw0YHRgtGA0L7QudC60LDQvNC4INC+0YHQtdC5XG4gICAqIFxuICAgKiBAcGFyYW0ge09iamVjdH0gc2VsZWN0ZWRGb250IC0g0JLRi9Cx0YDQsNC90L3Ri9C5INGI0YDQuNGE0YJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdGVkRm9udE5hbWUgLSDQmNC80Y8g0LLRi9Cx0YDQsNC90L3QvtCz0L4g0YjRgNC40YTRgtCwXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YXJpYWJsZVNldHRpbmdzIC0g0J3QsNGB0YLRgNC+0LnQutC4INCy0LDRgNC40LDRgtC40LLQvdGL0YUg0L7RgdC10LlcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0RXhwb3J0ZWRGb250IC0g0KTRg9C90LrRhtC40Y8g0YPRgdGC0LDQvdC+0LLQutC4INGN0LrRgdC/0L7RgNGC0LjRgNC+0LLQsNC90L3QvtCz0L4g0YjRgNC40YTRgtCwXG4gICAqIEByZXR1cm5zIHtPYmplY3R8dW5kZWZpbmVkfSDQntCx0YrQtdC60YIg0YHRgtCw0YLQuNGH0LXRgdC60L7Qs9C+INGI0YDQuNGE0YLQsCDQuNC70LggdW5kZWZpbmVkXG4gICAqL1xuICBjb25zdCBjcmVhdGVTdGF0aWNGb250ID0gdXNlQ2FsbGJhY2soKHNlbGVjdGVkRm9udCwgc2VsZWN0ZWRGb250TmFtZSwgdmFyaWFibGVTZXR0aW5ncywgc2V0RXhwb3J0ZWRGb250KSA9PiB7XG4gICAgaWYgKCFzZWxlY3RlZEZvbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8g0KHQvtC30LTQsNC10Lwg0L3QvtCy0L7QtSDQuNC80Y8g0LTQu9GPINGB0YLQsNGC0LjRh9C10YHQutC+0Lkg0LLQtdGA0YHQuNC4INGI0YDQuNGE0YLQsFxuICAgIGNvbnN0IHN0YXRpY05hbWUgPSBgJHtzZWxlY3RlZEZvbnROYW1lLnJlcGxhY2UoL1xcLlteLy5dKyQvLCAnJyl9LXN0YXRpY2A7XG4gICAgXG4gICAgLy8g0J7Qv9GA0LXQtNC10LvRj9C10Lwg0YLQtdC60YPRidC40LUg0L3QsNGB0YLRgNC+0LnQutC4XG4gICAgY29uc3Qgc2V0dGluZ3MgPSB7IC4uLnZhcmlhYmxlU2V0dGluZ3MgfTtcbiAgICBcbiAgICAvLyDQodC+0LfQtNCw0LXQvCDRgdGC0LDRgtC40YfQtdGB0LrQuNC5INGN0LrRgdC/0L7RgNGC0LjRgNC+0LLQsNC90L3Ri9C5INGI0YDQuNGE0YJcbiAgICBjb25zdCBuZXdFeHBvcnRlZEZvbnQgPSB7XG4gICAgICBuYW1lOiBzdGF0aWNOYW1lLFxuICAgICAgc2V0dGluZ3M6IHNldHRpbmdzLFxuICAgICAgaXNTdGF0aWM6IHRydWUsXG4gICAgICBvcmlnaW5hbEZvbnQ6IHNlbGVjdGVkRm9udE5hbWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gICAgXG4gICAgc2V0RXhwb3J0ZWRGb250KG5ld0V4cG9ydGVkRm9udCk7XG4gICAgXG4gICAgdG9hc3Quc3VjY2Vzcyhg0KHQvtC30LTQsNC90LAg0YHRgtCw0YLQuNGH0LXRgdC60LDRjyDQstC10YDRgdC40Y8g0YjRgNC40YTRgtCwOiAke3N0YXRpY05hbWV9YCk7XG4gICAgXG4gICAgcmV0dXJuIG5ld0V4cG9ydGVkRm9udDtcbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiDQrdC60YHQv9C+0YDRgtC40YDRg9C10YIg0YLQtdC60YPRidC40LUg0L3QsNGB0YLRgNC+0LnQutC4INGI0YDQuNGE0YLQsCDQsiBDU1Mg0YEg0LLQvtC30LzQvtC20L3QvtGB0YLRjNGOINGB0LrQsNGH0LjQstCw0L3QuNGPXG4gICAqIFxuICAgKiBAcGFyYW0ge09iamVjdH0gc2VsZWN0ZWRGb250IC0g0JLRi9Cx0YDQsNC90L3Ri9C5INGI0YDQuNGE0YJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdGVkRm9udE5hbWUgLSDQmNC80Y8g0LLRi9Cx0YDQsNC90L3QvtCz0L4g0YjRgNC40YTRgtCwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZG93bmxvYWQgLSDQldGB0LvQuCB0cnVlLCDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuCDRgdC60LDRh9C40LLQsNC10YIgQ1NTINGE0LDQudC7XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IENTUy3QutC+0LQg0LTQu9GPINGC0LXQutGD0YnQtdCz0L4g0YjRgNC40YTRgtCwINGBINC/0YDQuNC80LXQvdC10L3QvdGL0LzQuCDQvdCw0YHRgtGA0L7QudC60LDQvNC4XG4gICAqL1xuICBjb25zdCBleHBvcnRUb0NTUyA9IHVzZUNhbGxiYWNrKChzZWxlY3RlZEZvbnQsIHNlbGVjdGVkRm9udE5hbWUsIGRvd25sb2FkID0gZmFsc2UpID0+IHtcbiAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCDRhNGD0L3QutGG0LjRjiDQuNC3IHVzZUZvbnRDc3Mg0LTQu9GPINCz0LXQvdC10YDQsNGG0LjQuCBDU1NcbiAgICBjb25zdCBjc3NDb2RlID0gZXhwb3J0VG9DU1NGcm9tSG9vayhzZWxlY3RlZEZvbnQsIHNlbGVjdGVkRm9udE5hbWUpO1xuICAgIFxuICAgIGlmIChkb3dubG9hZCAmJiBjc3NDb2RlKSB7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGAke3NlbGVjdGVkRm9udE5hbWUucmVwbGFjZSgvXFxzKy9nLCAnLScpLnRvTG93ZXJDYXNlKCl9LXN0eWxlcy5jc3NgO1xuICAgICAgY29uc3Qgc3VjY2VzcyA9IGRvd25sb2FkRmlsZShjc3NDb2RlLCBmaWxlbmFtZSwgJ3RleHQvY3NzJyk7XG4gICAgICBcbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIHRvYXN0LnN1Y2Nlc3MoYENTUyDRhNCw0LnQuyAke2ZpbGVuYW1lfSDRgdC60LDRh9Cw0L1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNzc0NvZGU7XG4gIH0sIFtleHBvcnRUb0NTU0Zyb21Ib29rLCBkb3dubG9hZEZpbGVdKTtcblxuICAvKipcbiAgICog0JPQtdC90LXRgNC40YDRg9C10YIg0YHRgtCw0YLQuNGH0LXRgdC60LjQuSDRiNGA0LjRhNGCINC40Lcg0LLQsNGA0LjQsNGC0LjQstC90L7Qs9C+INC40YHQv9C+0LvRjNC30YPRjyDRgdC+0LLRgNC10LzQtdC90L3Ri9C1INC80LXRgtC+0LTRi1xuICAgKiBcbiAgICogQHBhcmFtIHtPYmplY3R9IHNlbGVjdGVkRm9udCAtINCS0LDRgNC40LDRgtC40LLQvdGL0Lkg0YjRgNC40YTRglxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFyaWFibGVTZXR0aW5ncyAtINCd0LDRgdGC0YDQvtC50LrQuCDQvtGB0LXQuVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0IC0g0KTQvtGA0LzQsNGCINCy0YvRhdC+0LTQvdC+0LPQviDRhNCw0LnQu9CwICgnd29mZjInLCAnd29mZicsICd0dGYnLCAnb3RmJylcbiAgICogQHJldHVybnMge1Byb21pc2U8QmxvYnxudWxsPn0gQmxvYiDRgdGC0LDRgtC40YfQtdGB0LrQvtCz0L4g0YjRgNC40YTRgtCwINC40LvQuCBudWxsINC/0YDQuCDQvtGI0LjQsdC60LVcbiAgICovXG4gIGNvbnN0IGdlbmVyYXRlU3RhdGljRm9udEZpbGUgPSB1c2VDYWxsYmFjayhhc3luYyAoc2VsZWN0ZWRGb250LCB2YXJpYWJsZVNldHRpbmdzLCBmb3JtYXQgPSAnd29mZjInKSA9PiB7XG4gICAgaWYgKCFzZWxlY3RlZEZvbnQgfHwgIXNlbGVjdGVkRm9udC5pc1ZhcmlhYmxlRm9udCkge1xuICAgICAgdG9hc3QuZXJyb3IoJ9CS0YvQsdC10YDQuNGC0LUg0LLQsNGA0LjQsNGC0LjQstC90YvQuSDRiNGA0LjRhNGCINC00LvRjyDRgdC+0LfQtNCw0L3QuNGPINGB0YLQsNGC0LjRh9C10YHQutC+0Lkg0LLQtdGA0YHQuNC4Jyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXNlbGVjdGVkRm9udC51cmwgJiYgIXNlbGVjdGVkRm9udC5hcnJheUJ1ZmZlcikge1xuICAgICAgdG9hc3QuZXJyb3IoJ9Cd0LXRgiDQtNC+0YHRgtGD0L/QsCDQuiDRhNCw0LnQu9GDINGI0YDQuNGE0YLQsCDQtNC70Y8g0LPQtdC90LXRgNCw0YbQuNC4Jyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gMS4g0JjQvNC/0L7RgNGC0LjRgNGD0LXQvCDQvdC+0LLRg9GOINGD0YLQuNC70LjRgtGDINC00LvRjyDQs9C10L3QtdGA0LDRhtC40LhcbiAgICAgIGNvbnN0IHsgZ2VuZXJhdGVTdGF0aWNGb250LCBjaGVja0dlbmVyYXRpb25DYXBhYmlsaXRpZXMgfSA9IGF3YWl0IGltcG9ydCgnLi4vdXRpbHMvc3RhdGljRm9udEdlbmVyYXRvcicpO1xuICAgICAgXG4gICAgICAvLyAyLiDQn9GA0L7QstC10YDRj9C10Lwg0LTQvtGB0YLRg9C/0L3Ri9C1INC80LXRgtC+0LTRi1xuICAgICAgY29uc3QgY2FwYWJpbGl0aWVzID0gYXdhaXQgY2hlY2tHZW5lcmF0aW9uQ2FwYWJpbGl0aWVzKCk7XG4gICAgICBcbiAgICAgIC8vINCf0L7QutCw0LfRi9Cy0LDQtdC8INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjiDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDQvNC10YLQvtC00LVcbiAgICAgIGlmIChjYXBhYmlsaXRpZXMuaGFyZmJ1enopIHtcbiAgICAgICAgdG9hc3QuaW5mbygn0JjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPIEhhcmZCdXp6INC00LvRjyDQutCw0YfQtdGB0YLQstC10L3QvdC+0Lkg0LPQtdC90LXRgNCw0YbQuNC4Jyk7XG4gICAgICB9IGVsc2UgaWYgKGNhcGFiaWxpdGllcy5zZXJ2ZXIpIHtcbiAgICAgICAgdG9hc3QuaW5mbygn0JjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINGB0LXRgNCy0LXRgNC90LDRjyDQs9C10L3QtdGA0LDRhtC40Y8nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRvYXN0Lndhcm5pbmcoJ9CY0YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQv9GB0LXQstC00L4t0YHRgtCw0YLQuNGH0LXRgdC60LjQuSDQvNC10YLQvtC0ICjQvtCz0YDQsNC90LjRh9C10L3QvdCw0Y8g0YTRg9C90LrRhtC40L7QvdCw0LvRjNC90L7RgdGC0YwpJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIDMuINCf0L7Qu9GD0YfQsNC10Lwg0LTQsNC90L3Ri9C1INGI0YDQuNGE0YLQsFxuICAgICAgbGV0IGZvbnREYXRhO1xuICAgICAgaWYgKHNlbGVjdGVkRm9udC5hcnJheUJ1ZmZlcikge1xuICAgICAgICBmb250RGF0YSA9IHNlbGVjdGVkRm9udC5hcnJheUJ1ZmZlcjtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRGb250LnVybCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHNlbGVjdGVkRm9udC51cmwpO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDQndC1INGD0LTQsNC70L7RgdGMINC30LDQs9GA0YPQt9C40YLRjCDRiNGA0LjRhNGCOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICBmb250RGF0YSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9Cd0LXRgiDQtNC+0YHRgtGD0L/QvdGL0YUg0LTQsNC90L3Ri9GFINGI0YDQuNGE0YLQsCcpO1xuICAgICAgfVxuXG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0YfRgtC+IGZvbnREYXRhINGN0YLQviDQtNC10LnRgdGC0LLQuNGC0LXQu9GM0L3QviBBcnJheUJ1ZmZlclxuICAgICAgaWYgKCFmb250RGF0YSB8fCAhKGZvbnREYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg0J3QtdC/0YDQsNCy0LjQu9GM0L3Ri9C5INGC0LjQvyDQtNCw0L3QvdGL0YUg0YjRgNC40YTRgtCwLiDQntC20LjQtNCw0LXRgtGB0Y8gQXJyYXlCdWZmZXIsINC/0L7Qu9GD0YfQtdC9OiAke3R5cGVvZiBmb250RGF0YX1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gNC4g0JPQtdC90LXRgNC40YDRg9C10Lwg0YHRgtCw0YLQuNGH0LXRgdC60LjQuSDRiNGA0LjRhNGCINGBINC/0L7QvNC+0YnRjNGOINC90L7QstC+0Lkg0YPRgtC40LvQuNGC0YtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbmVyYXRlU3RhdGljRm9udChmb250RGF0YSwgdmFyaWFibGVTZXR0aW5ncywge1xuICAgICAgICBmb3JtYXQsXG4gICAgICAgIGZvbnROYW1lOiBzZWxlY3RlZEZvbnQubmFtZSB8fCAnVmFyaWFibGVGb250J1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vINCf0L7QutCw0LfRi9Cy0LDQtdC8INC/0YDQtdC00YPQv9GA0LXQttC00LXQvdC40LUg0LXRgdC70Lgg0Y3RgtC+INC/0YHQtdCy0LTQvi3RgdGC0LDRgtC40YfQtdGB0LrQuNC5INGI0YDQuNGE0YJcbiAgICAgIGlmIChyZXN1bHQud2FybmluZykge1xuICAgICAgICB0b2FzdC53YXJuaW5nKHJlc3VsdC53YXJuaW5nKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8g0JXRgdC70Lgg0LXRgdGC0YwgQ1NTICjQtNC70Y8g0L/RgdC10LLQtNC+LdGB0YLQsNGC0LjRh9C10YHQutC+0LPQviksINC/0YDQtdC00LvQsNCz0LDQtdC8INC10LPQviDRgdC60LDRh9Cw0YLRjFxuICAgICAgaWYgKHJlc3VsdC5jc3MpIHtcbiAgICAgICAgY29uc3QgZG93bmxvYWRDU1MgPSB3aW5kb3cuY29uZmlybSgn0KHQvtC30LTQsNC9INC/0YHQtdCy0LTQvi3RgdGC0LDRgtC40YfQtdGB0LrQuNC5INGI0YDQuNGE0YIg0YEgQ1NTLiDQodC60LDRh9Cw0YLRjCBDU1Mg0YTQsNC50Ls/Jyk7XG4gICAgICAgIGlmIChkb3dubG9hZENTUykge1xuICAgICAgICAgIGRvd25sb2FkRmlsZShyZXN1bHQuY3NzLCBgJHtzZWxlY3RlZEZvbnQubmFtZX0tc3RhdGljLmNzc2AsICd0ZXh0L2NzcycpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vINCe0L/RgNC10LTQtdC70Y/QtdC8IE1JTUUg0YLQuNC/XG4gICAgICBsZXQgbWltZVR5cGU7XG4gICAgICBzd2l0Y2ggKGZvcm1hdC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgJ3R0Zic6XG4gICAgICAgICAgbWltZVR5cGUgPSAnZm9udC90dGYnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdvdGYnOlxuICAgICAgICAgIG1pbWVUeXBlID0gJ2ZvbnQvb3RmJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd29mZic6XG4gICAgICAgICAgbWltZVR5cGUgPSAnZm9udC93b2ZmJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd29mZjInOlxuICAgICAgICAgIG1pbWVUeXBlID0gJ2ZvbnQvd29mZjInO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIG1pbWVUeXBlID0gJ2ZvbnQvdHRmJztcbiAgICAgIH1cblxuICAgICAgLy8gNS4g0KHQvtC30LTQsNC10LwgQmxvYlxuICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtyZXN1bHQuYnVmZmVyXSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcblxuICAgICAgY29uc3Qgc3RhdHVzTWVzc2FnZSA9IHJlc3VsdC5pc1JlYWxTdGF0aWMgXG4gICAgICAgID8gYNCd0LDRgdGC0L7Rj9GJ0LjQuSDRgdGC0LDRgtC40YfQtdGB0LrQuNC5INGI0YDQuNGE0YIg0YHQs9C10L3QtdGA0LjRgNC+0LLQsNC9ICgkeyhibG9iLnNpemUgLyAxMDI0KS50b0ZpeGVkKDEpfSBLQilgXG4gICAgICAgIDogYNCf0YHQtdCy0LTQvi3RgdGC0LDRgtC40YfQtdGB0LrQuNC5INGI0YDQuNGE0YIg0YHQvtC30LTQsNC9ICgkeyhibG9iLnNpemUgLyAxMDI0KS50b0ZpeGVkKDEpfSBLQilgO1xuICAgICAgXG4gICAgICB0b2FzdC5zdWNjZXNzKHN0YXR1c01lc3NhZ2UpO1xuICAgICAgcmV0dXJuIGJsb2I7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW2dlbmVyYXRlU3RhdGljRm9udEZpbGVdINCe0YjQuNCx0LrQsCDQv9GA0Lgg0LPQtdC90LXRgNCw0YbQuNC4OicsIGVycm9yKTtcbiAgICAgIHRvYXN0LmVycm9yKGDQntGI0LjQsdC60LAg0LPQtdC90LXRgNCw0YbQuNC4INGB0YLQsNGC0LjRh9C10YHQutC+0LPQviDRiNGA0LjRhNGC0LA6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8qKlxuICAgKiDQodC60LDRh9C40LLQsNC10YIg0YHRgtCw0YLQuNGH0LXRgdC60LjQuSDRiNGA0LjRhNGCLCDRgdCz0LXQvdC10YDQuNGA0L7QstCw0L3QvdGL0Lkg0LjQtyDQstCw0YDQuNCw0YLQuNCy0L3QvtCz0L5cbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZWxlY3RlZEZvbnQgLSDQktCw0YDQuNCw0YLQuNCy0L3Ri9C5INGI0YDQuNGE0YJcbiAgICogQHBhcmFtIHtPYmplY3R9IHZhcmlhYmxlU2V0dGluZ3MgLSDQndCw0YHRgtGA0L7QudC60Lgg0L7RgdC10LlcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdCAtINCk0L7RgNC80LDRgiDRhNCw0LnQu9CwXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSDQo9GB0L/QtdGI0L3QvtGB0YLRjCDQvtC/0LXRgNCw0YbQuNC4XG4gICAqL1xuICBjb25zdCBkb3dubG9hZFN0YXRpY0ZvbnQgPSB1c2VDYWxsYmFjayhhc3luYyAoc2VsZWN0ZWRGb250LCB2YXJpYWJsZVNldHRpbmdzLCBmb3JtYXQgPSAndHRmJykgPT4ge1xuICAgIGlmICghc2VsZWN0ZWRGb250IHx8ICFzZWxlY3RlZEZvbnQuaXNWYXJpYWJsZUZvbnQpIHtcbiAgICAgIHRvYXN0LmVycm9yKCfQktGL0LHQtdGA0LjRgtC1INCy0LDRgNC40LDRgtC40LLQvdGL0Lkg0YjRgNC40YTRgiDQtNC70Y8g0YHQvtC30LTQsNC90LjRjyDRgdGC0LDRgtC40YfQtdGB0LrQvtC5INCy0LXRgNGB0LjQuCcpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICB0b2FzdC5pbmZvKCfQk9C10L3QtdGA0LjRgNGD0LXQvCDRgdGC0LDRgtC40YfQtdGB0LrQuNC5INGI0YDQuNGE0YIuLi4nLCB7IGF1dG9DbG9zZTogMjAwMCB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgZm9udEJsb2IgPSBhd2FpdCBnZW5lcmF0ZVN0YXRpY0ZvbnRGaWxlKHNlbGVjdGVkRm9udCwgdmFyaWFibGVTZXR0aW5ncywgZm9ybWF0KTtcbiAgICAgIFxuICAgICAgaWYgKGZvbnRCbG9iKSB7XG4gICAgICAgIC8vINCh0L7Qt9C00LDQtdC8INC+0L/QuNGB0LDRgtC10LvRjNC90L7QtSDQuNC80Y8g0YTQsNC50LvQsCDRgSDQvdCw0YHRgtGA0L7QudC60LDQvNC4INC+0YHQtdC5XG4gICAgICAgIGNvbnN0IGZvbnRCYXNlTmFtZSA9IChzZWxlY3RlZEZvbnQubmFtZSB8fCBzZWxlY3RlZEZvbnQuZm9udEZhbWlseSB8fCAnZm9udCcpXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJy0nKVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLnJlcGxhY2UoL1teYS16MC05XFwtXS9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L7QsSDQvtGB0L3QvtCy0L3Ri9GFINC+0YHRj9GFINCyINC40LzRjyDRhNCw0LnQu9CwXG4gICAgICAgIGxldCBheGlzSW5mbyA9ICcnO1xuICAgICAgICBcbiAgICAgICAgLy8g0J7RgdC90L7QstC90YvQtSDQvtGB0LggKNGB0YLQsNC90LTQsNGA0YLQvdGL0LUpXG4gICAgICAgIGlmICh2YXJpYWJsZVNldHRpbmdzLndnaHQgJiYgdmFyaWFibGVTZXR0aW5ncy53Z2h0ICE9PSA0MDApIHtcbiAgICAgICAgICBheGlzSW5mbyArPSBgX3cke01hdGgucm91bmQodmFyaWFibGVTZXR0aW5ncy53Z2h0KX1gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YXJpYWJsZVNldHRpbmdzLndkdGggJiYgdmFyaWFibGVTZXR0aW5ncy53ZHRoICE9PSAxMDApIHtcbiAgICAgICAgICBheGlzSW5mbyArPSBgX3dkJHtNYXRoLnJvdW5kKHZhcmlhYmxlU2V0dGluZ3Mud2R0aCl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFyaWFibGVTZXR0aW5ncy5zbG50ICYmIHZhcmlhYmxlU2V0dGluZ3Muc2xudCAhPT0gMCkge1xuICAgICAgICAgIGF4aXNJbmZvICs9IGBfc2wke01hdGgucm91bmQoTWF0aC5hYnModmFyaWFibGVTZXR0aW5ncy5zbG50KSl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFyaWFibGVTZXR0aW5ncy5vcHN6ICYmIHZhcmlhYmxlU2V0dGluZ3Mub3BzeiAhPT0gMTQpIHtcbiAgICAgICAgICBheGlzSW5mbyArPSBgX29wc3oke01hdGgucm91bmQodmFyaWFibGVTZXR0aW5ncy5vcHN6KX1gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YXJpYWJsZVNldHRpbmdzLkdSQUQgJiYgdmFyaWFibGVTZXR0aW5ncy5HUkFEICE9PSAwKSB7XG4gICAgICAgICAgYXhpc0luZm8gKz0gYF9ncmFkJHtNYXRoLnJvdW5kKHZhcmlhYmxlU2V0dGluZ3MuR1JBRCl9YDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g0J/QsNGA0LDQvNC10YLRgNC40YfQtdGB0LrQuNC1INC+0YHQuCAo0LXRgdC70Lgg0L7RgtC70LjRh9Cw0Y7RgtGB0Y8g0L7RgiDQtNC10YTQvtC70YLQvdGL0YUg0LfQvdCw0YfQtdC90LjQuSlcbiAgICAgICAgY29uc3QgcGFyYW1ldHJpY0F4ZXMgPSBbJ1hPUFEnLCAnWU9QUScsICdYVFJBJywgJ1lUVUMnLCAnWVRMQycsICdZVEFTJywgJ1lUREUnLCAnWVRGSSddO1xuICAgICAgICBwYXJhbWV0cmljQXhlcy5mb3JFYWNoKGF4aXMgPT4ge1xuICAgICAgICAgIGlmICh2YXJpYWJsZVNldHRpbmdzW2F4aXNdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gTWF0aC5yb3VuZCh2YXJpYWJsZVNldHRpbmdzW2F4aXNdKTtcbiAgICAgICAgICAgIGF4aXNJbmZvICs9IGBfJHtheGlzLnRvTG93ZXJDYXNlKCl9JHt2YWx1ZX1gO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyDQntCz0YDQsNC90LjRh9C40LLQsNC10Lwg0LTQu9C40L3RgyDQuNC80LXQvdC4INGE0LDQudC70LAgKNC10YHQu9C4INGB0LvQuNGI0LrQvtC8INC80L3QvtCz0L4g0L7RgdC10LkpXG4gICAgICAgIGlmIChheGlzSW5mby5sZW5ndGggPiA1MCkge1xuICAgICAgICAgIGF4aXNJbmZvID0gYXhpc0luZm8uc3Vic3RyaW5nKDAsIDQ3KSArICcuLi4nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGAke2ZvbnRCYXNlTmFtZX0ke2F4aXNJbmZvfV9zdGF0aWMuJHtmb3JtYXR9YDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBkb3dubG9hZEZpbGUoZm9udEJsb2IsIGZpbGVuYW1lLCBgZm9udC8ke2Zvcm1hdH1gKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgdG9hc3Quc3VjY2Vzcyhg0KHRgtCw0YLQuNGH0LXRgdC60LjQuSDRiNGA0LjRhNGCINGB0LrQsNGH0LDQvTogJHtmaWxlbmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdG9hc3QuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YHQvtC30LTQsNC90LjQuCDRgdGC0LDRgtC40YfQtdGB0LrQvtCz0L4g0YjRgNC40YTRgtCwOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LCBbZ2VuZXJhdGVTdGF0aWNGb250RmlsZSwgZG93bmxvYWRGaWxlXSk7XG5cbiAgcmV0dXJuIHtcbiAgICAvLyDQo9C90LjQstC10YDRgdCw0LvRjNC90YvQtSDRhNGD0L3QutGG0LjQuFxuICAgIGRvd25sb2FkRmlsZSxcbiAgICBcbiAgICAvLyBDU1Mg0Y3QutGB0L/QvtGA0YJcbiAgICBleHBvcnRUb0NTUyxcbiAgICBcbiAgICAvLyDQoNCw0LHQvtGC0LAg0YHQviDRgdGC0LDRgtC40YfQtdGB0LrQuNC80Lgg0LLQtdGA0YHQuNGP0LzQuFxuICAgIGNyZWF0ZVN0YXRpY0ZvbnQsXG4gICAgXG4gICAgLy8g0JHRg9C00YPRidCw0Y8g0YTRg9C90LrRhtC40L7QvdCw0LvRjNC90L7RgdGC0Ywg0LPQtdC90LXRgNCw0YbQuNC4INGB0YLQsNGC0LjRh9C10YHQutC40YUg0YjRgNC40YTRgtC+0LJcbiAgICBnZW5lcmF0ZVN0YXRpY0ZvbnRGaWxlLFxuICAgIGRvd25sb2FkU3RhdGljRm9udCxcbiAgfTtcbn0gIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidG9hc3QiLCJnZW5lcmF0ZVN0YXRpY0ZvbnQiLCJ1c2VGb250RXhwb3J0IiwiZXhwb3J0VG9DU1NGcm9tSG9vayIsImRvd25sb2FkRmlsZSIsImNvbnRlbnQiLCJmaWxlbmFtZSIsIm1pbWVUeXBlIiwiYmxvYiIsIkJsb2IiLCJ0eXBlIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiZG93bmxvYWRMaW5rIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsImRvd25sb2FkIiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2hpbGQiLCJyZXZva2VPYmplY3RVUkwiLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwiY3JlYXRlU3RhdGljRm9udCIsInNlbGVjdGVkRm9udCIsInNlbGVjdGVkRm9udE5hbWUiLCJ2YXJpYWJsZVNldHRpbmdzIiwic2V0RXhwb3J0ZWRGb250Iiwic3RhdGljTmFtZSIsInJlcGxhY2UiLCJzZXR0aW5ncyIsIm5ld0V4cG9ydGVkRm9udCIsIm5hbWUiLCJpc1N0YXRpYyIsIm9yaWdpbmFsRm9udCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInN1Y2Nlc3MiLCJleHBvcnRUb0NTUyIsImNzc0NvZGUiLCJ0b0xvd2VyQ2FzZSIsImdlbmVyYXRlU3RhdGljRm9udEZpbGUiLCJmb3JtYXQiLCJpc1ZhcmlhYmxlRm9udCIsImFycmF5QnVmZmVyIiwiY2hlY2tHZW5lcmF0aW9uQ2FwYWJpbGl0aWVzIiwiY2FwYWJpbGl0aWVzIiwiaGFyZmJ1enoiLCJpbmZvIiwic2VydmVyIiwid2FybmluZyIsImZvbnREYXRhIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJBcnJheUJ1ZmZlciIsInJlc3VsdCIsImZvbnROYW1lIiwiY3NzIiwiZG93bmxvYWRDU1MiLCJ3aW5kb3ciLCJjb25maXJtIiwiYnVmZmVyIiwic3RhdHVzTWVzc2FnZSIsImlzUmVhbFN0YXRpYyIsInNpemUiLCJ0b0ZpeGVkIiwiZG93bmxvYWRTdGF0aWNGb250IiwiYXV0b0Nsb3NlIiwiZm9udEJsb2IiLCJmb250QmFzZU5hbWUiLCJmb250RmFtaWx5IiwiYXhpc0luZm8iLCJ3Z2h0IiwiTWF0aCIsInJvdW5kIiwid2R0aCIsInNsbnQiLCJhYnMiLCJvcHN6IiwiR1JBRCIsInBhcmFtZXRyaWNBeGVzIiwiZm9yRWFjaCIsImF4aXMiLCJ1bmRlZmluZWQiLCJ2YWx1ZSIsImxlbmd0aCIsInN1YnN0cmluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./hooks/useFontExport.js\n");

/***/ }),

/***/ "./hooks/useFontLoader.js":
/*!********************************!*\
  !*** ./hooks/useFontLoader.js ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFontLoader: () => (/* binding */ useFontLoader)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/fontUtilsCommon */ \"./utils/fontUtilsCommon.js\");\n/* harmony import */ var _utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/localFontProcessor */ \"./utils/localFontProcessor.js\");\n/* harmony import */ var _utils_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/db */ \"./utils/db.js\");\n/* harmony import */ var _utils_fontManagerUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/fontManagerUtils */ \"./utils/fontManagerUtils.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_1__, _utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_3__]);\n([react_toastify__WEBPACK_IMPORTED_MODULE_1__, _utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n// Кэш для хранения загруженных файлов шрифтов (статических Fontsource)\nconst fontFaceCache = new Map();\n// Хеш-функция для создания уникальных ключей кэширования\nconst createCacheKey = (fontFamily, weight, style)=>`fontsource_${fontFamily}_${weight}_${style}`;\n/**\n * Хук для управления загрузкой шрифтов из различных источников.\n * @param {Function} setFonts - Функция для обновления состояния массива шрифтов.\n * @param {Function} setIsLoading - Функция для установки состояния загрузки.\n * @param {Function} safeSelectFont - Функция для безопасного выбора шрифта после загрузки.\n * @param {Array} currentFonts - Текущий массив шрифтов (для проверки дубликатов).\n */ function useFontLoader(setFonts, setIsLoading, safeSelectFont, currentFonts) {\n    // Вспомогательная функция для загрузки одного статического варианта стиля Fontsource\n    // (Перенесена из useFontManager)\n    const loadFontStyleVariant = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (fontFamily, weight, style, fontObj, returnBlob = false)=>{\n        // НЕ загружаем статические стили, если шрифт определен как вариативный\n        if (fontObj.isVariableFont) {\n            return returnBlob ? null : undefined;\n        }\n        const cacheKey = createCacheKey(fontFamily, weight, style);\n        if (!returnBlob && fontFaceCache.has(cacheKey)) {\n            console.log(`[FontLoader] Используем кэшированные данные для ${fontFamily} ${weight} ${style}`);\n            const cachedData = fontFaceCache.get(cacheKey);\n            if (fontObj.loadedStyles && !fontObj.loadedStyles.some((s)=>s.weight === weight && s.style === style)) {\n                fontObj.loadedStyles.push({\n                    weight,\n                    style,\n                    cached: true\n                });\n            }\n            return returnBlob ? null : undefined;\n        }\n        let blob = null;\n        let fontDataUrl = null;\n        try {\n            const fontFamilyName = fontObj.fontFamily || fontFamily;\n            const apiUrl = `/api/fontsource/${encodeURIComponent(fontFamily)}?weight=${weight}&style=${style}&subset=latin`;\n            console.log(`[FontLoader] Запрос к API: ${apiUrl}`);\n            const response = await fetch(apiUrl);\n            if (!response.ok) throw new Error(`Ошибка HTTP: ${response.status}`);\n            // Проверяем, что ответ содержит JSON\n            const contentType = response.headers.get(\"content-type\");\n            console.log(`[FontLoader] Content-Type ответа: ${contentType}`);\n            if (!contentType || !contentType.includes(\"application/json\")) {\n                throw new Error(`Неожиданный тип ответа: ${contentType}`);\n            }\n            const responseText = await response.text();\n            console.log(`[FontLoader] Ответ API (первые 100 символов): ${responseText.substring(0, 100)}`);\n            if (!responseText || responseText === \"undefined\") {\n                throw new Error(\"API вернул пустой или undefined ответ\");\n            }\n            const { fontBufferBase64, fileName } = JSON.parse(responseText);\n            if (!fontBufferBase64) throw new Error(\"Пустой буфер шрифта\");\n            const fontBuffer = (0,_utils_fontManagerUtils__WEBPACK_IMPORTED_MODULE_5__.base64ToArrayBuffer)(fontBufferBase64);\n            const mimeType = `font/${(0,_utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.getFormatFromExtension)(fileName || \".woff2\")}`;\n            blob = new Blob([\n                fontBuffer\n            ], {\n                type: mimeType\n            });\n            fontDataUrl = URL.createObjectURL(blob);\n            const fontFaceRule = `\n        @font-face {\n          font-family: '${fontFamilyName}';\n          src: url('${fontDataUrl}') format('woff2');\n          font-weight: ${weight};\n          font-style: ${style};\n          unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n        }\n      `;\n            const styleElement = document.createElement(\"style\");\n            styleElement.textContent = fontFaceRule;\n            document.head.appendChild(styleElement);\n            fontFaceCache.set(cacheKey, {\n                url: fontDataUrl,\n                styleElement,\n                weight,\n                style\n            });\n            const fontFace = new FontFace(fontFamilyName, `url(${fontDataUrl})`, {\n                weight: String(weight),\n                style\n            });\n            try {\n                await fontFace.load();\n                document.fonts.add(fontFace);\n                if (fontObj.loadedStyles && !fontObj.loadedStyles.some((s)=>s.weight === weight && s.style === style)) {\n                    fontObj.loadedStyles.push({\n                        weight,\n                        style,\n                        cached: false\n                    });\n                }\n                console.log(`[FontLoader] Загружен стиль ${fontFamily} ${weight} ${style}`);\n                return returnBlob ? blob : undefined;\n            } catch (loadError) {\n                console.warn(`Не удалось загрузить FontFace для ${fontFamily} ${weight} ${style}:`, loadError);\n                if (fontDataUrl) URL.revokeObjectURL(fontDataUrl);\n                return returnBlob ? null : undefined;\n            }\n        } catch (error) {\n            console.error(`Ошибка при загрузке стиля ${fontFamily} ${weight} ${style}:`, error);\n            if (fontDataUrl) URL.revokeObjectURL(fontDataUrl);\n            if (returnBlob) return null;\n            else throw error;\n        } finally{\n            if (!returnBlob && fontDataUrl) {\n                // URL.revokeObjectURL(fontDataUrl); // Пока не удаляем, чтобы стили не пропадали\n                console.warn(`[FontLoader] Blob URL ${fontDataUrl} для ${fontFamily} ${weight} ${style} НЕ удален (для стабильности стилей).`);\n            }\n        }\n    }, [\n        _utils_fontManagerUtils__WEBPACK_IMPORTED_MODULE_5__.base64ToArrayBuffer,\n        _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.getFormatFromExtension\n    ]); // Добавляем зависимости утилит\n    // Загружает все стили/вариативный файл для шрифта Fontsource\n    // (Перенесена из useFontManager)\n    const loadAllFontsourceStyles = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (fontFamily, forceVariableFont = false)=>{\n        try {\n            const metaApiUrl = `/api/fontsource/${encodeURIComponent(fontFamily)}?meta=true`;\n            console.log(`[FontLoader] Запрос метаданных к API: ${metaApiUrl}`);\n            const metaResponse = await fetch(metaApiUrl);\n            if (!metaResponse.ok) throw new Error(`Метаданные для ${fontFamily} не найдены (статус ${metaResponse.status})`);\n            // Проверяем, что ответ содержит JSON\n            const metaContentType = metaResponse.headers.get(\"content-type\");\n            console.log(`[FontLoader] Content-Type метаданных: ${metaContentType}`);\n            if (!metaContentType || !metaContentType.includes(\"application/json\")) {\n                throw new Error(`Неожиданный тип ответа от API метаданных: ${metaContentType}`);\n            }\n            const metaResponseText = await metaResponse.text();\n            console.log(`[FontLoader] Ответ API метаданных (первые 100 символов): ${metaResponseText.substring(0, 100)}`);\n            if (!metaResponseText || metaResponseText === \"undefined\") {\n                throw new Error(\"API метаданных вернул пустой или undefined ответ\");\n            }\n            const metadata = JSON.parse(metaResponseText);\n            const actualIsVariableFont = metadata?.metadata?.variable && forceVariableFont;\n            const displayName = actualIsVariableFont ? `${fontFamily} Variable` : fontFamily;\n            const fontId = `fontsource-${fontFamily}-${actualIsVariableFont ? \"variable\" : \"static\"}`;\n            const fontObj = {\n                id: fontId,\n                name: fontFamily,\n                displayName: displayName,\n                source: \"fontsource\",\n                fontFamily: `'${displayName}'`,\n                variableAxes: actualIsVariableFont ? metadata?.metadata?.axes : {},\n                isVariableFont: actualIsVariableFont,\n                availableStyles: [],\n                loadedStyles: [],\n                file: null,\n                url: null\n            };\n            if (actualIsVariableFont && metadata.variable && metadata.variable.url) {\n                console.log(`[FontLoader] Загружаем вариативный шрифт ${displayName} по URL: ${metadata.variable.url}`);\n                try {\n                    const fontFileResponse = await fetch(metadata.variable.url);\n                    if (!fontFileResponse.ok) throw new Error(`Не удалось загрузить файл вариативного шрифта (статус ${fontFileResponse.status})`);\n                    const fontBuffer = await fontFileResponse.arrayBuffer();\n                    const fileExtension = metadata.variable.url.split(\".\").pop()?.toLowerCase() || \"woff2\";\n                    const mimeType = `font/${fileExtension === \"ttf\" ? \"ttf\" : fileExtension === \"otf\" ? \"otf\" : fileExtension === \"woff\" ? \"woff\" : \"woff2\"}`;\n                    const blob = new Blob([\n                        fontBuffer\n                    ], {\n                        type: mimeType\n                    });\n                    fontObj.file = blob;\n                    fontObj.url = URL.createObjectURL(blob);\n                    console.log(`[FontLoader] Вариативный шрифт ${displayName} загружен, Blob создан, URL: ${fontObj.url}`);\n                    // TODO: Перенести логику добавления @font-face в useFontCss\n                    const fontFaceRule = `\n              @font-face {\n                  font-family: ${fontObj.fontFamily};\n                  src: url('${fontObj.url}') format('${fileExtension === \"ttf\" ? \"truetype\" : fileExtension === \"otf\" ? \"opentype\" : fileExtension}');\n                  font-display: swap;\n              }\n            `;\n                    const styleElement = document.createElement(\"style\");\n                    styleElement.textContent = fontFaceRule;\n                    document.head.appendChild(styleElement);\n                    console.log(`[FontLoader] Вариативный шрифт ${displayName} добавлен через <style> tag.`);\n                } catch (loadError) {\n                    console.error(`[FontLoader] Ошибка при загрузке/обработке вариативного файла ${displayName}:`, loadError);\n                    react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Ошибка загрузки вариативного шрифта ${displayName}`);\n                }\n            }\n            const weightsArray = Array.isArray(metadata?.metadata?.weights) ? metadata.metadata.weights : [];\n            const stylesArray = Array.isArray(metadata?.metadata?.styles) ? metadata.metadata.styles : [];\n            const availableStyles = weightsArray.flatMap((weight)=>{\n                return stylesArray.map((style)=>{\n                    const weightNum = parseInt(weight, 10) || 400;\n                    const styleInfo = (0,_utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.findStyleInfoByWeightAndStyle)(weightNum, style);\n                    return {\n                        name: styleInfo ? styleInfo.name : `${weight} ${style}`,\n                        weight: weightNum,\n                        style: style\n                    };\n                });\n            });\n            fontObj.availableStyles = availableStyles;\n            if (!actualIsVariableFont) {\n                const regularWeight = weightsArray.includes(\"400\") ? \"400\" : weightsArray[0] || \"400\";\n                const regularStyle = stylesArray.includes(\"normal\") ? \"normal\" : stylesArray[0] || \"normal\";\n                try {\n                    console.log(`[FontLoader] Загружаем основной статический стиль ${fontFamily} ${regularWeight} ${regularStyle}`);\n                    const mainStyleBlob = await loadFontStyleVariant(fontFamily, parseInt(regularWeight, 10), regularStyle, fontObj, true);\n                    if (mainStyleBlob instanceof Blob) {\n                        fontObj.file = mainStyleBlob;\n                        fontObj.url = URL.createObjectURL(mainStyleBlob);\n                        console.log(`[FontLoader] Основной статический стиль ${displayName} загружен, Blob сохранен, URL: ${fontObj.url}`);\n                    } else {\n                        console.warn(`[FontLoader] Не удалось получить Blob для основного стиля ${displayName}. Глифы могут быть недоступны.`);\n                    }\n                } catch (mainStyleError) {\n                    console.error(`[FontLoader] Критическая ошибка при загрузке основного стиля ${displayName}:`, mainStyleError);\n                    react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Ошибка загрузки основного стиля ${displayName}. Глифы будут недоступны.`);\n                }\n                // Загружаем остальные стили в фоне\n                setTimeout(async ()=>{\n                    const promises = [];\n                    for (const weight of weightsArray){\n                        for (const style of stylesArray){\n                            if (weight === regularWeight && style === regularStyle) continue;\n                            promises.push(loadFontStyleVariant(fontFamily, parseInt(weight, 10), style, fontObj, false).catch((error)=>console.error(`Ошибка фоновой загрузки стиля ${fontFamily} ${weight} ${style}:`, error)));\n                        }\n                    }\n                    await Promise.allSettled(promises);\n                    console.log(`[FontLoader] Фоновая загрузка всех стилей для ${fontFamily} завершена.`);\n                    setFonts((currentFonts)=>currentFonts.map((f)=>f.id === fontId ? {\n                                ...f\n                            } : f));\n                }, 100);\n            }\n            return fontObj;\n        } catch (error) {\n            console.error(`[FontLoader] Ошибка при загрузке всех стилей шрифта ${fontFamily}:`, error);\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Не удалось загрузить шрифт ${fontFamily}: ${error.message}`);\n            throw error; // Пробрасываем ошибку для обработки в вызывающей функции\n        }\n    }, [\n        setFonts,\n        loadFontStyleVariant,\n        _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.findStyleInfoByWeightAndStyle\n    ]); // Добавляем зависимости\n    // Обрабатывает загруженные локальные шрифты\n    // (Переименована из handleFontsUploaded)\n    const handleLocalFontsUpload = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (newFonts)=>{\n        console.log(\"[handleLocalFontsUpload] Начало обработки:\", newFonts);\n        if (!Array.isArray(newFonts) || newFonts.length === 0) {\n            console.log(\"[handleLocalFontsUpload] Ошибка: пустой массив или не массив\");\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Ошибка: Не указаны файлы шрифтов\");\n            return;\n        }\n        console.log(\"[handleLocalFontsUpload] Устанавливаем isLoading=true\");\n        setIsLoading(true); // Показываем индикатор загрузки\n        try {\n            const processedFonts = await Promise.all(newFonts.map(async (font)=>{\n                if (font.file instanceof Blob) {\n                    return await (0,_utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_3__.processLocalFont)(font); // processLocalFont ожидает { file: Blob, name: string, ... }\n                } else {\n                    console.warn(\"[FontLoader] Пропущен элемент в handleLocalFontsUpload, так как отсутствует Blob:\", font);\n                    return null;\n                }\n            }));\n            const validFonts = processedFonts.filter((font)=>font !== null);\n            if (validFonts.length > 0) {\n                // Определяем новые шрифты ДО вызова setFonts\n                const currentIds = new Set(currentFonts.map((f)=>f.id).filter(Boolean));\n                const trulyNewFonts = validFonts.filter((f)=>!f.id || !currentIds.has(f.id));\n                console.log(`[handleLocalFontsUpload] Найдено новых шрифтов: ${trulyNewFonts.length} из ${validFonts.length}`);\n                if (trulyNewFonts.length > 0) {\n                    // Обновляем состояние\n                    setFonts((prevFonts)=>[\n                            ...prevFonts,\n                            ...trulyNewFonts\n                        ]);\n                    // Сохраняем новые шрифты в IndexedDB\n                    await Promise.all(trulyNewFonts.map((fontToSave)=>(0,_utils_db__WEBPACK_IMPORTED_MODULE_4__.saveFont)(fontToSave)));\n                    console.log(`[FontLoader/DB] ${trulyNewFonts.length} локальных шрифтов сохранено.`);\n                    react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.success(`Успешно загружено и сохранено новых локальных шрифтов: ${trulyNewFonts.length}`);\n                    // Выбираем первый из *только что добавленных*\n                    if (typeof safeSelectFont === \"function\") {\n                        safeSelectFont(trulyNewFonts[0]);\n                    }\n                } else {\n                    react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Загруженные локальные шрифты уже были добавлены ранее.\");\n                }\n            } else {\n                react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.warning(\"Не удалось обработать ни одного из загруженных локальных файлов.\");\n            }\n        } catch (error) {\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Ошибка при загрузке локальных шрифтов: ${error.message}`);\n            console.error(\"[FontLoader] Ошибка в handleLocalFontsUpload:\", error);\n        } finally{\n            setIsLoading(false); // Убираем индикатор загрузки\n        }\n    }, [\n        setFonts,\n        setIsLoading,\n        safeSelectFont,\n        _utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_3__.processLocalFont,\n        _utils_db__WEBPACK_IMPORTED_MODULE_4__.saveFont,\n        currentFonts\n    ]); // Добавляем зависимости\n    // Выбирает или загружает шрифт Fontsource\n    // (Переименована из selectOrAddFontsourceFont)\n    const loadAndSelectFontsourceFont = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (fontFamilyName, forceVariableFont = false)=>{\n        try {\n            // Проверяем существующие шрифты (переданные как currentFonts)\n            const existingFont = currentFonts.find((font)=>{\n                const nameMatch = font.name === fontFamilyName;\n                const variableMatch = font.isVariableFont === forceVariableFont;\n                // Для вариативных также проверяем displayName, чтобы отличить от статической версии с тем же familyName\n                const displayNameMatch = forceVariableFont ? font.displayName?.includes(\"Variable\") : !font.displayName?.includes(\"Variable\");\n                return nameMatch && variableMatch && displayNameMatch;\n            });\n            if (existingFont) {\n                if (typeof safeSelectFont === \"function\") {\n                    safeSelectFont(existingFont);\n                    react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.info(`Шрифт ${existingFont.displayName} уже загружен.`);\n                }\n                return;\n            }\n            setIsLoading(true);\n            const fontObj = await loadAllFontsourceStyles(fontFamilyName, forceVariableFont);\n            if (fontObj) {\n                await (0,_utils_db__WEBPACK_IMPORTED_MODULE_4__.saveFont)(fontObj); // Сохраняем в DB\n                setFonts((prevFonts)=>[\n                        ...prevFonts,\n                        fontObj\n                    ]); // Добавляем в состояние\n                if (typeof safeSelectFont === \"function\") {\n                    safeSelectFont(fontObj); // Выбираем новый шрифт\n                }\n                react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.success(`Шрифт ${fontObj.displayName} успешно загружен и добавлен`);\n            }\n        // Ошибка уже обработана и показана в loadAllFontsourceStyles\n        } catch (error) {\n        // Ошибка уже залогирована и показана в loadAllFontsourceStyles\n        // toast.error(`Не удалось загрузить шрифт ${fontFamilyName}`); // Можно добавить общее сообщение\n        } finally{\n            setIsLoading(false);\n        }\n    }, [\n        currentFonts,\n        setIsLoading,\n        setFonts,\n        safeSelectFont,\n        loadAllFontsourceStyles,\n        _utils_db__WEBPACK_IMPORTED_MODULE_4__.saveFont\n    ]); // Добавляем зависимости\n    return {\n        handleLocalFontsUpload,\n        loadAndSelectFontsourceFont,\n        loadFontsourceStyleVariant: loadFontStyleVariant\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTO2dCQUNsSCxPQUFPbUcsYUFBYUMsaUJBQWlCQztZQUN2QztZQUVBLElBQUlKLGNBQWM7Z0JBQ2hCLElBQUksT0FBTy9ILG1CQUFtQixZQUFZO29CQUN4Q0EsZUFBZStIO29CQUNmL0ksaURBQUtBLENBQUM0SSxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUVHLGFBQWF2RCxXQUFXLENBQUMsY0FBYyxDQUFDO2dCQUM5RDtnQkFDQTtZQUNGO1lBRUF6RSxhQUFhO1lBQ2IsTUFBTUksVUFBVSxNQUFNNEQsd0JBQXdCM0MsZ0JBQWdCNEM7WUFFOUQsSUFBSTdELFNBQVM7Z0JBQ1gsTUFBTWQsbURBQVFBLENBQUNjLFVBQVUsaUJBQWlCO2dCQUMxQ0wsU0FBUzJILENBQUFBLFlBQWE7MkJBQUlBO3dCQUFXdEg7cUJBQVEsR0FBRyx3QkFBd0I7Z0JBQ3hFLElBQUksT0FBT0gsbUJBQW1CLFlBQVk7b0JBQ3JDQSxlQUFlRyxVQUFVLHVCQUF1QjtnQkFDckQ7Z0JBQ0FuQixpREFBS0EsQ0FBQzJJLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRXhILFFBQVFxRSxXQUFXLENBQUMsNEJBQTRCLENBQUM7WUFDMUU7UUFDQSw2REFBNkQ7UUFDL0QsRUFBRSxPQUFPVixPQUFPO1FBQ2QsK0RBQStEO1FBQy9ELGlHQUFpRztRQUNuRyxTQUFVO1lBQ1IvRCxhQUFhO1FBQ2Y7SUFDRixHQUFHO1FBQUNFO1FBQWNGO1FBQWNEO1FBQVVFO1FBQWdCK0Q7UUFBeUIxRSwrQ0FBUUE7S0FBQyxHQUFHLHdCQUF3QjtJQUV2SCxPQUFPO1FBQ0x3SDtRQUNBaUI7UUFDQU0sNEJBQTRCbEk7SUFFOUI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZvbnQtZ2F1bnRsZXQtY2xvbmUvLi9ob29rcy91c2VGb250TG9hZGVyLmpzPzYwNDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcbmltcG9ydCB7IGZpbmRTdHlsZUluZm9CeVdlaWdodEFuZFN0eWxlLCBnZXRGb3JtYXRGcm9tRXh0ZW5zaW9uLCBQUkVTRVRfU1RZTEVTIH0gZnJvbSAnLi4vdXRpbHMvZm9udFV0aWxzQ29tbW9uJztcbmltcG9ydCB7IHByb2Nlc3NMb2NhbEZvbnQgfSBmcm9tICcuLi91dGlscy9sb2NhbEZvbnRQcm9jZXNzb3InO1xuaW1wb3J0IHsgc2F2ZUZvbnQgfSBmcm9tICcuLi91dGlscy9kYic7XG5pbXBvcnQgeyBiYXNlNjRUb0FycmF5QnVmZmVyIH0gZnJvbSAnLi4vdXRpbHMvZm9udE1hbmFnZXJVdGlscyc7XG5cbi8vINCa0Y3RiCDQtNC70Y8g0YXRgNCw0L3QtdC90LjRjyDQt9Cw0LPRgNGD0LbQtdC90L3Ri9GFINGE0LDQudC70L7QsiDRiNGA0LjRhNGC0L7QsiAo0YHRgtCw0YLQuNGH0LXRgdC60LjRhSBGb250c291cmNlKVxuY29uc3QgZm9udEZhY2VDYWNoZSA9IG5ldyBNYXAoKTtcblxuLy8g0KXQtdGILdGE0YPQvdC60YbQuNGPINC00LvRjyDRgdC+0LfQtNCw0L3QuNGPINGD0L3QuNC60LDQu9GM0L3Ri9GFINC60LvRjtGH0LXQuSDQutGN0YjQuNGA0L7QstCw0L3QuNGPXG5jb25zdCBjcmVhdGVDYWNoZUtleSA9IChmb250RmFtaWx5LCB3ZWlnaHQsIHN0eWxlKSA9PiBgZm9udHNvdXJjZV8ke2ZvbnRGYW1pbHl9XyR7d2VpZ2h0fV8ke3N0eWxlfWA7XG5cbi8qKlxuICog0KXRg9C6INC00LvRjyDRg9C/0YDQsNCy0LvQtdC90LjRjyDQt9Cw0LPRgNGD0LfQutC+0Lkg0YjRgNC40YTRgtC+0LIg0LjQtyDRgNCw0LfQu9C40YfQvdGL0YUg0LjRgdGC0L7Rh9C90LjQutC+0LIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXRGb250cyAtINCk0YPQvdC60YbQuNGPINC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyDRgdC+0YHRgtC+0Y/QvdC40Y8g0LzQsNGB0YHQuNCy0LAg0YjRgNC40YTRgtC+0LIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXRJc0xvYWRpbmcgLSDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0YPRgdGC0LDQvdC+0LLQutC4INGB0L7RgdGC0L7Rj9C90LjRjyDQt9Cw0LPRgNGD0LfQutC4LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc2FmZVNlbGVjdEZvbnQgLSDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0LHQtdC30L7Qv9Cw0YHQvdC+0LPQviDQstGL0LHQvtGA0LAg0YjRgNC40YTRgtCwINC/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuC5cbiAqIEBwYXJhbSB7QXJyYXl9IGN1cnJlbnRGb250cyAtINCi0LXQutGD0YnQuNC5INC80LDRgdGB0LjQsiDRiNGA0LjRhNGC0L7QsiAo0LTQu9GPINC/0YDQvtCy0LXRgNC60Lgg0LTRg9Cx0LvQuNC60LDRgtC+0LIpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRm9udExvYWRlcihzZXRGb250cywgc2V0SXNMb2FkaW5nLCBzYWZlU2VsZWN0Rm9udCwgY3VycmVudEZvbnRzKSB7XG5cbiAgLy8g0JLRgdC/0L7QvNC+0LPQsNGC0LXQu9GM0L3QsNGPINGE0YPQvdC60YbQuNGPINC00LvRjyDQt9Cw0LPRgNGD0LfQutC4INC+0LTQvdC+0LPQviDRgdGC0LDRgtC40YfQtdGB0LrQvtCz0L4g0LLQsNGA0LjQsNC90YLQsCDRgdGC0LjQu9GPIEZvbnRzb3VyY2VcbiAgLy8gKNCf0LXRgNC10L3QtdGB0LXQvdCwINC40LcgdXNlRm9udE1hbmFnZXIpXG4gIGNvbnN0IGxvYWRGb250U3R5bGVWYXJpYW50ID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZvbnRGYW1pbHksIHdlaWdodCwgc3R5bGUsIGZvbnRPYmosIHJldHVybkJsb2IgPSBmYWxzZSkgPT4ge1xuICAgIC8vINCd0JUg0LfQsNCz0YDRg9C20LDQtdC8INGB0YLQsNGC0LjRh9C10YHQutC40LUg0YHRgtC40LvQuCwg0LXRgdC70Lgg0YjRgNC40YTRgiDQvtC/0YDQtdC00LXQu9C10L0g0LrQsNC6INCy0LDRgNC40LDRgtC40LLQvdGL0LlcbiAgICBpZiAoZm9udE9iai5pc1ZhcmlhYmxlRm9udCkge1xuICAgICAgcmV0dXJuIHJldHVybkJsb2IgPyBudWxsIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGNhY2hlS2V5ID0gY3JlYXRlQ2FjaGVLZXkoZm9udEZhbWlseSwgd2VpZ2h0LCBzdHlsZSk7XG5cbiAgICBpZiAoIXJldHVybkJsb2IgJiYgZm9udEZhY2VDYWNoZS5oYXMoY2FjaGVLZXkpKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW0ZvbnRMb2FkZXJdINCY0YHQv9C+0LvRjNC30YPQtdC8INC60Y3RiNC40YDQvtCy0LDQvdC90YvQtSDQtNCw0L3QvdGL0LUg0LTQu9GPICR7Zm9udEZhbWlseX0gJHt3ZWlnaHR9ICR7c3R5bGV9YCk7XG4gICAgICBjb25zdCBjYWNoZWREYXRhID0gZm9udEZhY2VDYWNoZS5nZXQoY2FjaGVLZXkpO1xuICAgICAgaWYgKGZvbnRPYmoubG9hZGVkU3R5bGVzICYmICFmb250T2JqLmxvYWRlZFN0eWxlcy5zb21lKHMgPT4gcy53ZWlnaHQgPT09IHdlaWdodCAmJiBzLnN0eWxlID09PSBzdHlsZSkpIHtcbiAgICAgICAgZm9udE9iai5sb2FkZWRTdHlsZXMucHVzaCh7IHdlaWdodCwgc3R5bGUsIGNhY2hlZDogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXR1cm5CbG9iID8gbnVsbCA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBsZXQgYmxvYiA9IG51bGw7XG4gICAgbGV0IGZvbnREYXRhVXJsID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmb250RmFtaWx5TmFtZSA9IGZvbnRPYmouZm9udEZhbWlseSB8fCBmb250RmFtaWx5O1xuICAgICAgY29uc3QgYXBpVXJsID0gYC9hcGkvZm9udHNvdXJjZS8ke2VuY29kZVVSSUNvbXBvbmVudChmb250RmFtaWx5KX0/d2VpZ2h0PSR7d2VpZ2h0fSZzdHlsZT0ke3N0eWxlfSZzdWJzZXQ9bGF0aW5gO1xuICAgICAgY29uc29sZS5sb2coYFtGb250TG9hZGVyXSDQl9Cw0L/RgNC+0YEg0LogQVBJOiAke2FwaVVybH1gKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGDQntGI0LjQsdC60LAgSFRUUDogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICBcbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0YfRgtC+INC+0YLQstC10YIg0YHQvtC00LXRgNC20LjRgiBKU09OXG4gICAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbRm9udExvYWRlcl0gQ29udGVudC1UeXBlINC+0YLQstC10YLQsDogJHtjb250ZW50VHlwZX1gKTtcbiAgICAgIGlmICghY29udGVudFR5cGUgfHwgIWNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDQndC10L7QttC40LTQsNC90L3Ri9C5INGC0LjQvyDQvtGC0LLQtdGC0LA6ICR7Y29udGVudFR5cGV9YCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbRm9udExvYWRlcl0g0J7RgtCy0LXRgiBBUEkgKNC/0LXRgNCy0YvQtSAxMDAg0YHQuNC80LLQvtC70L7Qsik6ICR7cmVzcG9uc2VUZXh0LnN1YnN0cmluZygwLCAxMDApfWApO1xuICAgICAgaWYgKCFyZXNwb25zZVRleHQgfHwgcmVzcG9uc2VUZXh0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FQSSDQstC10YDQvdGD0Lsg0L/Rg9GB0YLQvtC5INC40LvQuCB1bmRlZmluZWQg0L7RgtCy0LXRgicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB7IGZvbnRCdWZmZXJCYXNlNjQsIGZpbGVOYW1lIH0gPSBKU09OLnBhcnNlKHJlc3BvbnNlVGV4dCk7XG4gICAgICBpZiAoIWZvbnRCdWZmZXJCYXNlNjQpIHRocm93IG5ldyBFcnJvcihcItCf0YPRgdGC0L7QuSDQsdGD0YTQtdGAINGI0YDQuNGE0YLQsFwiKTtcblxuICAgICAgY29uc3QgZm9udEJ1ZmZlciA9IGJhc2U2NFRvQXJyYXlCdWZmZXIoZm9udEJ1ZmZlckJhc2U2NCk7XG4gICAgICBjb25zdCBtaW1lVHlwZSA9IGBmb250LyR7Z2V0Rm9ybWF0RnJvbUV4dGVuc2lvbihmaWxlTmFtZSB8fCAnLndvZmYyJyl9YDtcbiAgICAgIGJsb2IgPSBuZXcgQmxvYihbZm9udEJ1ZmZlcl0sIHsgdHlwZTogbWltZVR5cGUgfSk7XG4gICAgICBmb250RGF0YVVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cbiAgICAgIGNvbnN0IGZvbnRGYWNlUnVsZSA9IGBcbiAgICAgICAgQGZvbnQtZmFjZSB7XG4gICAgICAgICAgZm9udC1mYW1pbHk6ICcke2ZvbnRGYW1pbHlOYW1lfSc7XG4gICAgICAgICAgc3JjOiB1cmwoJyR7Zm9udERhdGFVcmx9JykgZm9ybWF0KCd3b2ZmMicpO1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiAke3dlaWdodH07XG4gICAgICAgICAgZm9udC1zdHlsZTogJHtzdHlsZX07XG4gICAgICAgICAgdW5pY29kZS1yYW5nZTogVSswMDAwLTAwRkYsIFUrMDEzMSwgVSswMTUyLTAxNTMsIFUrMDJCQi0wMkJDLCBVKzAyQzYsIFUrMDJEQSwgVSswMkRDLCBVKzIwMDAtMjA2RiwgVSsyMDc0LCBVKzIwQUMsIFUrMjEyMiwgVSsyMTkxLCBVKzIxOTMsIFUrMjIxMiwgVSsyMjE1LCBVK0ZFRkYsIFUrRkZGRDtcbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIGNvbnN0IHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBmb250RmFjZVJ1bGU7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG5cbiAgICAgIGZvbnRGYWNlQ2FjaGUuc2V0KGNhY2hlS2V5LCB7IHVybDogZm9udERhdGFVcmwsIHN0eWxlRWxlbWVudCwgd2VpZ2h0LCBzdHlsZSB9KTtcblxuICAgICAgY29uc3QgZm9udEZhY2UgPSBuZXcgRm9udEZhY2UoZm9udEZhbWlseU5hbWUsIGB1cmwoJHtmb250RGF0YVVybH0pYCwgeyB3ZWlnaHQ6IFN0cmluZyh3ZWlnaHQpLCBzdHlsZSB9KTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZm9udEZhY2UubG9hZCgpO1xuICAgICAgICBkb2N1bWVudC5mb250cy5hZGQoZm9udEZhY2UpO1xuICAgICAgICBpZiAoZm9udE9iai5sb2FkZWRTdHlsZXMgJiYgIWZvbnRPYmoubG9hZGVkU3R5bGVzLnNvbWUocyA9PiBzLndlaWdodCA9PT0gd2VpZ2h0ICYmIHMuc3R5bGUgPT09IHN0eWxlKSkge1xuICAgICAgICAgIGZvbnRPYmoubG9hZGVkU3R5bGVzLnB1c2goeyB3ZWlnaHQsIHN0eWxlLCBjYWNoZWQ6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGBbRm9udExvYWRlcl0g0JfQsNCz0YDRg9C20LXQvSDRgdGC0LjQu9GMICR7Zm9udEZhbWlseX0gJHt3ZWlnaHR9ICR7c3R5bGV9YCk7XG4gICAgICAgIHJldHVybiByZXR1cm5CbG9iID8gYmxvYiA6IHVuZGVmaW5lZDtcbiAgICAgIH0gY2F0Y2ggKGxvYWRFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oYNCd0LUg0YPQtNCw0LvQvtGB0Ywg0LfQsNCz0YDRg9C30LjRgtGMIEZvbnRGYWNlINC00LvRjyAke2ZvbnRGYW1pbHl9ICR7d2VpZ2h0fSAke3N0eWxlfTpgLCBsb2FkRXJyb3IpO1xuICAgICAgICBpZiAoZm9udERhdGFVcmwpIFVSTC5yZXZva2VPYmplY3RVUkwoZm9udERhdGFVcmwpO1xuICAgICAgICByZXR1cm4gcmV0dXJuQmxvYiA/IG51bGwgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0LjQu9GPICR7Zm9udEZhbWlseX0gJHt3ZWlnaHR9ICR7c3R5bGV9OmAsIGVycm9yKTtcbiAgICAgIGlmIChmb250RGF0YVVybCkgVVJMLnJldm9rZU9iamVjdFVSTChmb250RGF0YVVybCk7XG4gICAgICBpZiAocmV0dXJuQmxvYikgcmV0dXJuIG51bGw7XG4gICAgICBlbHNlIHRocm93IGVycm9yO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoIXJldHVybkJsb2IgJiYgZm9udERhdGFVcmwpIHtcbiAgICAgICAgLy8gVVJMLnJldm9rZU9iamVjdFVSTChmb250RGF0YVVybCk7IC8vINCf0L7QutCwINC90LUg0YPQtNCw0LvRj9C10LwsINGH0YLQvtCx0Ysg0YHRgtC40LvQuCDQvdC1INC/0YDQvtC/0LDQtNCw0LvQuFxuICAgICAgICBjb25zb2xlLndhcm4oYFtGb250TG9hZGVyXSBCbG9iIFVSTCAke2ZvbnREYXRhVXJsfSDQtNC70Y8gJHtmb250RmFtaWx5fSAke3dlaWdodH0gJHtzdHlsZX0g0J3QlSDRg9C00LDQu9C10L0gKNC00LvRjyDRgdGC0LDQsdC40LvRjNC90L7RgdGC0Lgg0YHRgtC40LvQtdC5KS5gKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2Jhc2U2NFRvQXJyYXlCdWZmZXIsIGdldEZvcm1hdEZyb21FeHRlbnNpb25dKTsgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC30LDQstC40YHQuNC80L7RgdGC0Lgg0YPRgtC40LvQuNGCXG5cbiAgLy8g0JfQsNCz0YDRg9C20LDQtdGCINCy0YHQtSDRgdGC0LjQu9C4L9Cy0LDRgNC40LDRgtC40LLQvdGL0Lkg0YTQsNC50Lsg0LTQu9GPINGI0YDQuNGE0YLQsCBGb250c291cmNlXG4gIC8vICjQn9C10YDQtdC90LXRgdC10L3QsCDQuNC3IHVzZUZvbnRNYW5hZ2VyKVxuICBjb25zdCBsb2FkQWxsRm9udHNvdXJjZVN0eWxlcyA9IHVzZUNhbGxiYWNrKGFzeW5jIChmb250RmFtaWx5LCBmb3JjZVZhcmlhYmxlRm9udCA9IGZhbHNlKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1ldGFBcGlVcmwgPSBgL2FwaS9mb250c291cmNlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGZvbnRGYW1pbHkpfT9tZXRhPXRydWVgO1xuICAgICAgY29uc29sZS5sb2coYFtGb250TG9hZGVyXSDQl9Cw0L/RgNC+0YEg0LzQtdGC0LDQtNCw0L3QvdGL0YUg0LogQVBJOiAke21ldGFBcGlVcmx9YCk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1ldGFSZXNwb25zZSA9IGF3YWl0IGZldGNoKG1ldGFBcGlVcmwpO1xuICAgICAgaWYgKCFtZXRhUmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihg0JzQtdGC0LDQtNCw0L3QvdGL0LUg0LTQu9GPICR7Zm9udEZhbWlseX0g0L3QtSDQvdCw0LnQtNC10L3RiyAo0YHRgtCw0YLRg9GBICR7bWV0YVJlc3BvbnNlLnN0YXR1c30pYCk7XG4gICAgICBcbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0YfRgtC+INC+0YLQstC10YIg0YHQvtC00LXRgNC20LjRgiBKU09OXG4gICAgICBjb25zdCBtZXRhQ29udGVudFR5cGUgPSBtZXRhUmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICAgICAgY29uc29sZS5sb2coYFtGb250TG9hZGVyXSBDb250ZW50LVR5cGUg0LzQtdGC0LDQtNCw0L3QvdGL0YU6ICR7bWV0YUNvbnRlbnRUeXBlfWApO1xuICAgICAgaWYgKCFtZXRhQ29udGVudFR5cGUgfHwgIW1ldGFDb250ZW50VHlwZS5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg0J3QtdC+0LbQuNC00LDQvdC90YvQuSDRgtC40L8g0L7RgtCy0LXRgtCwINC+0YIgQVBJINC80LXRgtCw0LTQsNC90L3Ri9GFOiAke21ldGFDb250ZW50VHlwZX1gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbWV0YVJlc3BvbnNlVGV4dCA9IGF3YWl0IG1ldGFSZXNwb25zZS50ZXh0KCk7XG4gICAgICBjb25zb2xlLmxvZyhgW0ZvbnRMb2FkZXJdINCe0YLQstC10YIgQVBJINC80LXRgtCw0LTQsNC90L3Ri9GFICjQv9C10YDQstGL0LUgMTAwINGB0LjQvNCy0L7Qu9C+0LIpOiAke21ldGFSZXNwb25zZVRleHQuc3Vic3RyaW5nKDAsIDEwMCl9YCk7XG4gICAgICBpZiAoIW1ldGFSZXNwb25zZVRleHQgfHwgbWV0YVJlc3BvbnNlVGV4dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEkg0LzQtdGC0LDQtNCw0L3QvdGL0YUg0LLQtdGA0L3Rg9C7INC/0YPRgdGC0L7QuSDQuNC70LggdW5kZWZpbmVkINC+0YLQstC10YInKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbWV0YWRhdGEgPSBKU09OLnBhcnNlKG1ldGFSZXNwb25zZVRleHQpO1xuXG4gICAgICBjb25zdCBhY3R1YWxJc1ZhcmlhYmxlRm9udCA9IG1ldGFkYXRhPy5tZXRhZGF0YT8udmFyaWFibGUgJiYgZm9yY2VWYXJpYWJsZUZvbnQ7XG4gICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGFjdHVhbElzVmFyaWFibGVGb250ID8gYCR7Zm9udEZhbWlseX0gVmFyaWFibGVgIDogZm9udEZhbWlseTtcbiAgICAgIGNvbnN0IGZvbnRJZCA9IGBmb250c291cmNlLSR7Zm9udEZhbWlseX0tJHthY3R1YWxJc1ZhcmlhYmxlRm9udCA/ICd2YXJpYWJsZScgOiAnc3RhdGljJ31gO1xuXG4gICAgICBjb25zdCBmb250T2JqID0ge1xuICAgICAgICBpZDogZm9udElkLFxuICAgICAgICBuYW1lOiBmb250RmFtaWx5LFxuICAgICAgICBkaXNwbGF5TmFtZTogZGlzcGxheU5hbWUsXG4gICAgICAgIHNvdXJjZTogJ2ZvbnRzb3VyY2UnLFxuICAgICAgICBmb250RmFtaWx5OiBgJyR7ZGlzcGxheU5hbWV9J2AsXG4gICAgICAgIHZhcmlhYmxlQXhlczogYWN0dWFsSXNWYXJpYWJsZUZvbnQgPyBtZXRhZGF0YT8ubWV0YWRhdGE/LmF4ZXMgOiB7fSxcbiAgICAgICAgaXNWYXJpYWJsZUZvbnQ6IGFjdHVhbElzVmFyaWFibGVGb250LFxuICAgICAgICBhdmFpbGFibGVTdHlsZXM6IFtdLFxuICAgICAgICBsb2FkZWRTdHlsZXM6IFtdLFxuICAgICAgICBmaWxlOiBudWxsLFxuICAgICAgICB1cmw6IG51bGxcbiAgICAgIH07XG5cbiAgICAgIGlmIChhY3R1YWxJc1ZhcmlhYmxlRm9udCAmJiBtZXRhZGF0YS52YXJpYWJsZSAmJiBtZXRhZGF0YS52YXJpYWJsZS51cmwpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFtGb250TG9hZGVyXSDQl9Cw0LPRgNGD0LbQsNC10Lwg0LLQsNGA0LjQsNGC0LjQstC90YvQuSDRiNGA0LjRhNGCICR7ZGlzcGxheU5hbWV9INC/0L4gVVJMOiAke21ldGFkYXRhLnZhcmlhYmxlLnVybH1gKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBmb250RmlsZVJlc3BvbnNlID0gYXdhaXQgZmV0Y2gobWV0YWRhdGEudmFyaWFibGUudXJsKTtcbiAgICAgICAgICBpZiAoIWZvbnRGaWxlUmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihg0J3QtSDRg9C00LDQu9C+0YHRjCDQt9Cw0LPRgNGD0LfQuNGC0Ywg0YTQsNC50Lsg0LLQsNGA0LjQsNGC0LjQstC90L7Qs9C+INGI0YDQuNGE0YLQsCAo0YHRgtCw0YLRg9GBICR7Zm9udEZpbGVSZXNwb25zZS5zdGF0dXN9KWApO1xuICAgICAgICAgIGNvbnN0IGZvbnRCdWZmZXIgPSBhd2FpdCBmb250RmlsZVJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG4gICAgICAgICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IG1ldGFkYXRhLnZhcmlhYmxlLnVybC5zcGxpdCgnLicpLnBvcCgpPy50b0xvd2VyQ2FzZSgpIHx8ICd3b2ZmMic7XG4gICAgICAgICAgY29uc3QgbWltZVR5cGUgPSBgZm9udC8ke2ZpbGVFeHRlbnNpb24gPT09ICd0dGYnID8gJ3R0ZicgOiBmaWxlRXh0ZW5zaW9uID09PSAnb3RmJyA/ICdvdGYnIDogZmlsZUV4dGVuc2lvbiA9PT0gJ3dvZmYnID8gJ3dvZmYnIDogJ3dvZmYyJ31gO1xuICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZm9udEJ1ZmZlcl0sIHsgdHlwZTogbWltZVR5cGUgfSk7XG5cbiAgICAgICAgICBmb250T2JqLmZpbGUgPSBibG9iO1xuICAgICAgICAgIGZvbnRPYmoudXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0ZvbnRMb2FkZXJdINCS0LDRgNC40LDRgtC40LLQvdGL0Lkg0YjRgNC40YTRgiAke2Rpc3BsYXlOYW1lfSDQt9Cw0LPRgNGD0LbQtdC9LCBCbG9iINGB0L7Qt9C00LDQvSwgVVJMOiAke2ZvbnRPYmoudXJsfWApO1xuXG4gICAgICAgICAgLy8gVE9ETzog0J/QtdGA0LXQvdC10YHRgtC4INC70L7Qs9C40LrRgyDQtNC+0LHQsNCy0LvQtdC90LjRjyBAZm9udC1mYWNlINCyIHVzZUZvbnRDc3NcbiAgICAgICAgICBjb25zdCBmb250RmFjZVJ1bGUgPSBgXG4gICAgICAgICAgICAgIEBmb250LWZhY2Uge1xuICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICR7Zm9udE9iai5mb250RmFtaWx5fTtcbiAgICAgICAgICAgICAgICAgIHNyYzogdXJsKCcke2ZvbnRPYmoudXJsfScpIGZvcm1hdCgnJHtmaWxlRXh0ZW5zaW9uID09PSAndHRmJyA/ICd0cnVldHlwZScgOiBmaWxlRXh0ZW5zaW9uID09PSAnb3RmJyA/ICdvcGVudHlwZScgOiBmaWxlRXh0ZW5zaW9ufScpO1xuICAgICAgICAgICAgICAgICAgZm9udC1kaXNwbGF5OiBzd2FwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgO1xuICAgICAgICAgIGNvbnN0IHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgc3R5bGVFbGVtZW50LnRleHRDb250ZW50ID0gZm9udEZhY2VSdWxlO1xuICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0ZvbnRMb2FkZXJdINCS0LDRgNC40LDRgtC40LLQvdGL0Lkg0YjRgNC40YTRgiAke2Rpc3BsYXlOYW1lfSDQtNC+0LHQsNCy0LvQtdC9INGH0LXRgNC10LcgPHN0eWxlPiB0YWcuYCk7XG5cbiAgICAgICAgfSBjYXRjaCAobG9hZEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0ZvbnRMb2FkZXJdINCe0YjQuNCx0LrQsCDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtS/QvtCx0YDQsNCx0L7RgtC60LUg0LLQsNGA0LjQsNGC0LjQstC90L7Qs9C+INGE0LDQudC70LAgJHtkaXNwbGF5TmFtZX06YCwgbG9hZEVycm9yKTtcbiAgICAgICAgICB0b2FzdC5lcnJvcihg0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60Lgg0LLQsNGA0LjQsNGC0LjQstC90L7Qs9C+INGI0YDQuNGE0YLQsCAke2Rpc3BsYXlOYW1lfWApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdlaWdodHNBcnJheSA9IEFycmF5LmlzQXJyYXkobWV0YWRhdGE/Lm1ldGFkYXRhPy53ZWlnaHRzKSA/IG1ldGFkYXRhLm1ldGFkYXRhLndlaWdodHMgOiBbXTtcbiAgICAgIGNvbnN0IHN0eWxlc0FycmF5ID0gQXJyYXkuaXNBcnJheShtZXRhZGF0YT8ubWV0YWRhdGE/LnN0eWxlcykgPyBtZXRhZGF0YS5tZXRhZGF0YS5zdHlsZXMgOiBbXTtcblxuICAgICAgY29uc3QgYXZhaWxhYmxlU3R5bGVzID0gd2VpZ2h0c0FycmF5LmZsYXRNYXAod2VpZ2h0ID0+IHtcbiAgICAgICAgcmV0dXJuIHN0eWxlc0FycmF5Lm1hcChzdHlsZSA9PiB7XG4gICAgICAgICAgY29uc3Qgd2VpZ2h0TnVtID0gcGFyc2VJbnQod2VpZ2h0LCAxMCkgfHwgNDAwO1xuICAgICAgICAgIGNvbnN0IHN0eWxlSW5mbyA9IGZpbmRTdHlsZUluZm9CeVdlaWdodEFuZFN0eWxlKHdlaWdodE51bSwgc3R5bGUpO1xuICAgICAgICAgIHJldHVybiB7IG5hbWU6IHN0eWxlSW5mbyA/IHN0eWxlSW5mby5uYW1lIDogYCR7d2VpZ2h0fSAke3N0eWxlfWAsIHdlaWdodDogd2VpZ2h0TnVtLCBzdHlsZTogc3R5bGUgfTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGZvbnRPYmouYXZhaWxhYmxlU3R5bGVzID0gYXZhaWxhYmxlU3R5bGVzO1xuXG4gICAgICBpZiAoIWFjdHVhbElzVmFyaWFibGVGb250KSB7XG4gICAgICAgIGNvbnN0IHJlZ3VsYXJXZWlnaHQgPSB3ZWlnaHRzQXJyYXkuaW5jbHVkZXMoJzQwMCcpID8gJzQwMCcgOiAod2VpZ2h0c0FycmF5WzBdIHx8ICc0MDAnKTtcbiAgICAgICAgY29uc3QgcmVndWxhclN0eWxlID0gc3R5bGVzQXJyYXkuaW5jbHVkZXMoJ25vcm1hbCcpID8gJ25vcm1hbCcgOiAoc3R5bGVzQXJyYXlbMF0gfHwgJ25vcm1hbCcpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtGb250TG9hZGVyXSDQl9Cw0LPRgNGD0LbQsNC10Lwg0L7RgdC90L7QstC90L7QuSDRgdGC0LDRgtC40YfQtdGB0LrQuNC5INGB0YLQuNC70YwgJHtmb250RmFtaWx5fSAke3JlZ3VsYXJXZWlnaHR9ICR7cmVndWxhclN0eWxlfWApO1xuICAgICAgICAgIGNvbnN0IG1haW5TdHlsZUJsb2IgPSBhd2FpdCBsb2FkRm9udFN0eWxlVmFyaWFudChmb250RmFtaWx5LCBwYXJzZUludChyZWd1bGFyV2VpZ2h0LCAxMCksIHJlZ3VsYXJTdHlsZSwgZm9udE9iaiwgdHJ1ZSk7XG4gICAgICAgICAgaWYgKG1haW5TdHlsZUJsb2IgaW5zdGFuY2VvZiBCbG9iKSB7XG4gICAgICAgICAgICBmb250T2JqLmZpbGUgPSBtYWluU3R5bGVCbG9iO1xuICAgICAgICAgICAgZm9udE9iai51cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG1haW5TdHlsZUJsb2IpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtGb250TG9hZGVyXSDQntGB0L3QvtCy0L3QvtC5INGB0YLQsNGC0LjRh9C10YHQutC40Lkg0YHRgtC40LvRjCAke2Rpc3BsYXlOYW1lfSDQt9Cw0LPRgNGD0LbQtdC9LCBCbG9iINGB0L7RhdGA0LDQvdC10L0sIFVSTDogJHtmb250T2JqLnVybH1gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbRm9udExvYWRlcl0g0J3QtSDRg9C00LDQu9C+0YHRjCDQv9C+0LvRg9GH0LjRgtGMIEJsb2Ig0LTQu9GPINC+0YHQvdC+0LLQvdC+0LPQviDRgdGC0LjQu9GPICR7ZGlzcGxheU5hbWV9LiDQk9C70LjRhNGLINC80L7Qs9GD0YIg0LHRi9GC0Ywg0L3QtdC00L7RgdGC0YPQv9C90YsuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChtYWluU3R5bGVFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0ZvbnRMb2FkZXJdINCa0YDQuNGC0LjRh9C10YHQutCw0Y8g0L7RiNC40LHQutCwINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1INC+0YHQvdC+0LLQvdC+0LPQviDRgdGC0LjQu9GPICR7ZGlzcGxheU5hbWV9OmAsIG1haW5TdHlsZUVycm9yKTtcbiAgICAgICAgICAgIHRvYXN0LmVycm9yKGDQntGI0LjQsdC60LAg0LfQsNCz0YDRg9C30LrQuCDQvtGB0L3QvtCy0L3QvtCz0L4g0YHRgtC40LvRjyAke2Rpc3BsYXlOYW1lfS4g0JPQu9C40YTRiyDQsdGD0LTRg9GCINC90LXQtNC+0YHRgtGD0L/QvdGLLmApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g0JfQsNCz0YDRg9C20LDQtdC8INC+0YHRgtCw0LvRjNC90YvQtSDRgdGC0LjQu9C4INCyINGE0L7QvdC1XG4gICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgICAgICAgZm9yIChjb25zdCB3ZWlnaHQgb2Ygd2VpZ2h0c0FycmF5KSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN0eWxlIG9mIHN0eWxlc0FycmF5KSB7XG4gICAgICAgICAgICAgIGlmICh3ZWlnaHQgPT09IHJlZ3VsYXJXZWlnaHQgJiYgc3R5bGUgPT09IHJlZ3VsYXJTdHlsZSkgY29udGludWU7XG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2gobG9hZEZvbnRTdHlsZVZhcmlhbnQoZm9udEZhbWlseSwgcGFyc2VJbnQod2VpZ2h0LCAxMCksIHN0eWxlLCBmb250T2JqLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINGE0L7QvdC+0LLQvtC5INC30LDQs9GA0YPQt9C60Lgg0YHRgtC40LvRjyAke2ZvbnRGYW1pbHl9ICR7d2VpZ2h0fSAke3N0eWxlfTpgLCBlcnJvcikpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHByb21pc2VzKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0ZvbnRMb2FkZXJdINCk0L7QvdC+0LLQsNGPINC30LDQs9GA0YPQt9C60LAg0LLRgdC10YUg0YHRgtC40LvQtdC5INC00LvRjyAke2ZvbnRGYW1pbHl9INC30LDQstC10YDRiNC10L3QsC5gKTtcbiAgICAgICAgICBzZXRGb250cyhjdXJyZW50Rm9udHMgPT4gY3VycmVudEZvbnRzLm1hcChmID0+IGYuaWQgPT09IGZvbnRJZCA/IHsgLi4uZiB9IDogZikpO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm9udE9iajtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgW0ZvbnRMb2FkZXJdINCe0YjQuNCx0LrQsCDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDQstGB0LXRhSDRgdGC0LjQu9C10Lkg0YjRgNC40YTRgtCwICR7Zm9udEZhbWlseX06YCwgZXJyb3IpO1xuICAgICAgdG9hc3QuZXJyb3IoYNCd0LUg0YPQtNCw0LvQvtGB0Ywg0LfQsNCz0YDRg9C30LjRgtGMINGI0YDQuNGE0YIgJHtmb250RmFtaWx5fTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgdGhyb3cgZXJyb3I7IC8vINCf0YDQvtCx0YDQsNGB0YvQstCw0LXQvCDQvtGI0LjQsdC60YMg0LTQu9GPINC+0LHRgNCw0LHQvtGC0LrQuCDQsiDQstGL0LfRi9Cy0LDRjtGJ0LXQuSDRhNGD0L3QutGG0LjQuFxuICAgIH1cbiAgfSwgW3NldEZvbnRzLCBsb2FkRm9udFN0eWxlVmFyaWFudCwgZmluZFN0eWxlSW5mb0J5V2VpZ2h0QW5kU3R5bGVdKTsgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC30LDQstC40YHQuNC80L7RgdGC0LhcblxuICAvLyDQntCx0YDQsNCx0LDRgtGL0LLQsNC10YIg0LfQsNCz0YDRg9C20LXQvdC90YvQtSDQu9C+0LrQsNC70YzQvdGL0LUg0YjRgNC40YTRgtGLXG4gIC8vICjQn9C10YDQtdC40LzQtdC90L7QstCw0L3QsCDQuNC3IGhhbmRsZUZvbnRzVXBsb2FkZWQpXG4gIGNvbnN0IGhhbmRsZUxvY2FsRm9udHNVcGxvYWQgPSB1c2VDYWxsYmFjayhhc3luYyAobmV3Rm9udHMpID0+IHtcbiAgICBjb25zb2xlLmxvZygnW2hhbmRsZUxvY2FsRm9udHNVcGxvYWRdINCd0LDRh9Cw0LvQviDQvtCx0YDQsNCx0L7RgtC60Lg6JywgbmV3Rm9udHMpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShuZXdGb250cykgfHwgbmV3Rm9udHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnW2hhbmRsZUxvY2FsRm9udHNVcGxvYWRdINCe0YjQuNCx0LrQsDog0L/Rg9GB0YLQvtC5INC80LDRgdGB0LjQsiDQuNC70Lgg0L3QtSDQvNCw0YHRgdC40LInKTtcbiAgICAgIHRvYXN0LmVycm9yKCfQntGI0LjQsdC60LA6INCd0LUg0YPQutCw0LfQsNC90Ysg0YTQsNC50LvRiyDRiNGA0LjRhNGC0L7QsicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnW2hhbmRsZUxvY2FsRm9udHNVcGxvYWRdINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8IGlzTG9hZGluZz10cnVlJyk7XG4gICAgc2V0SXNMb2FkaW5nKHRydWUpOyAvLyDQn9C+0LrQsNC30YvQstCw0LXQvCDQuNC90LTQuNC60LDRgtC+0YAg0LfQsNCz0YDRg9C30LrQuFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcm9jZXNzZWRGb250cyA9IGF3YWl0IFByb21pc2UuYWxsKG5ld0ZvbnRzLm1hcChhc3luYyAoZm9udCkgPT4ge1xuICAgICAgICBpZiAoZm9udC5maWxlIGluc3RhbmNlb2YgQmxvYikge1xuICAgICAgICAgIHJldHVybiBhd2FpdCBwcm9jZXNzTG9jYWxGb250KGZvbnQpOyAvLyBwcm9jZXNzTG9jYWxGb250INC+0LbQuNC00LDQtdGCIHsgZmlsZTogQmxvYiwgbmFtZTogc3RyaW5nLCAuLi4gfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2FybignW0ZvbnRMb2FkZXJdINCf0YDQvtC/0YPRidC10L0g0Y3Qu9C10LzQtdC90YIg0LIgaGFuZGxlTG9jYWxGb250c1VwbG9hZCwg0YLQsNC6INC60LDQuiDQvtGC0YHRg9GC0YHRgtCy0YPQtdGCIEJsb2I6JywgZm9udCk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcblxuICAgICAgY29uc3QgdmFsaWRGb250cyA9IHByb2Nlc3NlZEZvbnRzLmZpbHRlcihmb250ID0+IGZvbnQgIT09IG51bGwpO1xuXG4gICAgICBpZiAodmFsaWRGb250cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vINCe0L/RgNC10LTQtdC70Y/QtdC8INC90L7QstGL0LUg0YjRgNC40YTRgtGLINCU0J4g0LLRi9C30L7QstCwIHNldEZvbnRzXG4gICAgICAgIGNvbnN0IGN1cnJlbnRJZHMgPSBuZXcgU2V0KGN1cnJlbnRGb250cy5tYXAoZiA9PiBmLmlkKS5maWx0ZXIoQm9vbGVhbikpO1xuICAgICAgICBjb25zdCB0cnVseU5ld0ZvbnRzID0gdmFsaWRGb250cy5maWx0ZXIoZiA9PiAhZi5pZCB8fCAhY3VycmVudElkcy5oYXMoZi5pZCkpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYFtoYW5kbGVMb2NhbEZvbnRzVXBsb2FkXSDQndCw0LnQtNC10L3QviDQvdC+0LLRi9GFINGI0YDQuNGE0YLQvtCyOiAke3RydWx5TmV3Rm9udHMubGVuZ3RofSDQuNC3ICR7dmFsaWRGb250cy5sZW5ndGh9YCk7XG5cbiAgICAgICAgaWYgKHRydWx5TmV3Rm9udHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDRgdC+0YHRgtC+0Y/QvdC40LVcbiAgICAgICAgICBzZXRGb250cyhwcmV2Rm9udHMgPT4gWy4uLnByZXZGb250cywgLi4udHJ1bHlOZXdGb250c10pO1xuXG4gICAgICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC90L7QstGL0LUg0YjRgNC40YTRgtGLINCyIEluZGV4ZWREQlxuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRydWx5TmV3Rm9udHMubWFwKGZvbnRUb1NhdmUgPT4gc2F2ZUZvbnQoZm9udFRvU2F2ZSkpKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0ZvbnRMb2FkZXIvREJdICR7dHJ1bHlOZXdGb250cy5sZW5ndGh9INC70L7QutCw0LvRjNC90YvRhSDRiNGA0LjRhNGC0L7QsiDRgdC+0YXRgNCw0L3QtdC90L4uYCk7XG4gICAgICAgICAgdG9hc3Quc3VjY2Vzcyhg0KPRgdC/0LXRiNC90L4g0LfQsNCz0YDRg9C20LXQvdC+INC4INGB0L7RhdGA0LDQvdC10L3QviDQvdC+0LLRi9GFINC70L7QutCw0LvRjNC90YvRhSDRiNGA0LjRhNGC0L7QsjogJHt0cnVseU5ld0ZvbnRzLmxlbmd0aH1gKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDQktGL0LHQuNGA0LDQtdC8INC/0LXRgNCy0YvQuSDQuNC3ICrRgtC+0LvRjNC60L4g0YfRgtC+INC00L7QsdCw0LLQu9C10L3QvdGL0YUqXG4gICAgICAgICAgaWYgKHR5cGVvZiBzYWZlU2VsZWN0Rm9udCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc2FmZVNlbGVjdEZvbnQodHJ1bHlOZXdGb250c1swXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgIHRvYXN0LmluZm8oXCLQl9Cw0LPRgNGD0LbQtdC90L3Ri9C1INC70L7QutCw0LvRjNC90YvQtSDRiNGA0LjRhNGC0Ysg0YPQttC1INCx0YvQu9C4INC00L7QsdCw0LLQu9C10L3RiyDRgNCw0L3QtdC1LlwiKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9hc3Qud2FybmluZygn0J3QtSDRg9C00LDQu9C+0YHRjCDQvtCx0YDQsNCx0L7RgtCw0YLRjCDQvdC4INC+0LTQvdC+0LPQviDQuNC3INC30LDQs9GA0YPQttC10L3QvdGL0YUg0LvQvtC60LDQu9GM0L3Ri9GFINGE0LDQudC70L7Qsi4nKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdG9hc3QuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDQu9C+0LrQsNC70YzQvdGL0YUg0YjRgNC40YTRgtC+0LI6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tGb250TG9hZGVyXSDQntGI0LjQsdC60LAg0LIgaGFuZGxlTG9jYWxGb250c1VwbG9hZDonLCBlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7IC8vINCj0LHQuNGA0LDQtdC8INC40L3QtNC40LrQsNGC0L7RgCDQt9Cw0LPRgNGD0LfQutC4XG4gICAgfVxuICB9LCBbc2V0Rm9udHMsIHNldElzTG9hZGluZywgc2FmZVNlbGVjdEZvbnQsIHByb2Nlc3NMb2NhbEZvbnQsIHNhdmVGb250LCBjdXJyZW50Rm9udHNdKTsgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC30LDQstC40YHQuNC80L7RgdGC0LhcblxuICAvLyDQktGL0LHQuNGA0LDQtdGCINC40LvQuCDQt9Cw0LPRgNGD0LbQsNC10YIg0YjRgNC40YTRgiBGb250c291cmNlXG4gIC8vICjQn9C10YDQtdC40LzQtdC90L7QstCw0L3QsCDQuNC3IHNlbGVjdE9yQWRkRm9udHNvdXJjZUZvbnQpXG4gIGNvbnN0IGxvYWRBbmRTZWxlY3RGb250c291cmNlRm9udCA9IHVzZUNhbGxiYWNrKGFzeW5jIChmb250RmFtaWx5TmFtZSwgZm9yY2VWYXJpYWJsZUZvbnQgPSBmYWxzZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0YHRg9GJ0LXRgdGC0LLRg9GO0YnQuNC1INGI0YDQuNGE0YLRiyAo0L/QtdGA0LXQtNCw0L3QvdGL0LUg0LrQsNC6IGN1cnJlbnRGb250cylcbiAgICAgIGNvbnN0IGV4aXN0aW5nRm9udCA9IGN1cnJlbnRGb250cy5maW5kKGZvbnQgPT4ge1xuICAgICAgICBjb25zdCBuYW1lTWF0Y2ggPSBmb250Lm5hbWUgPT09IGZvbnRGYW1pbHlOYW1lO1xuICAgICAgICBjb25zdCB2YXJpYWJsZU1hdGNoID0gZm9udC5pc1ZhcmlhYmxlRm9udCA9PT0gZm9yY2VWYXJpYWJsZUZvbnQ7XG4gICAgICAgIC8vINCU0LvRjyDQstCw0YDQuNCw0YLQuNCy0L3Ri9GFINGC0LDQutC20LUg0L/RgNC+0LLQtdGA0Y/QtdC8IGRpc3BsYXlOYW1lLCDRh9GC0L7QsdGLINC+0YLQu9C40YfQuNGC0Ywg0L7RgiDRgdGC0LDRgtC40YfQtdGB0LrQvtC5INCy0LXRgNGB0LjQuCDRgSDRgtC10Lwg0LbQtSBmYW1pbHlOYW1lXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lTWF0Y2ggPSBmb3JjZVZhcmlhYmxlRm9udCA/IGZvbnQuZGlzcGxheU5hbWU/LmluY2x1ZGVzKCdWYXJpYWJsZScpIDogIWZvbnQuZGlzcGxheU5hbWU/LmluY2x1ZGVzKCdWYXJpYWJsZScpO1xuICAgICAgICByZXR1cm4gbmFtZU1hdGNoICYmIHZhcmlhYmxlTWF0Y2ggJiYgZGlzcGxheU5hbWVNYXRjaDtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZXhpc3RpbmdGb250KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2FmZVNlbGVjdEZvbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBzYWZlU2VsZWN0Rm9udChleGlzdGluZ0ZvbnQpO1xuICAgICAgICAgIHRvYXN0LmluZm8oYNCo0YDQuNGE0YIgJHtleGlzdGluZ0ZvbnQuZGlzcGxheU5hbWV9INGD0LbQtSDQt9Cw0LPRgNGD0LbQtdC9LmApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgY29uc3QgZm9udE9iaiA9IGF3YWl0IGxvYWRBbGxGb250c291cmNlU3R5bGVzKGZvbnRGYW1pbHlOYW1lLCBmb3JjZVZhcmlhYmxlRm9udCk7XG5cbiAgICAgIGlmIChmb250T2JqKSB7XG4gICAgICAgIGF3YWl0IHNhdmVGb250KGZvbnRPYmopOyAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0LIgREJcbiAgICAgICAgc2V0Rm9udHMocHJldkZvbnRzID0+IFsuLi5wcmV2Rm9udHMsIGZvbnRPYmpdKTsgLy8g0JTQvtCx0LDQstC70Y/QtdC8INCyINGB0L7RgdGC0L7Rj9C90LjQtVxuICAgICAgICBpZiAodHlwZW9mIHNhZmVTZWxlY3RGb250ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgc2FmZVNlbGVjdEZvbnQoZm9udE9iaik7IC8vINCS0YvQsdC40YDQsNC10Lwg0L3QvtCy0YvQuSDRiNGA0LjRhNGCXG4gICAgICAgIH1cbiAgICAgICAgdG9hc3Quc3VjY2Vzcyhg0KjRgNC40YTRgiAke2ZvbnRPYmouZGlzcGxheU5hbWV9INGD0YHQv9C10YjQvdC+INC30LDQs9GA0YPQttC10L0g0Lgg0LTQvtCx0LDQstC70LXQvWApO1xuICAgICAgfVxuICAgICAgLy8g0J7RiNC40LHQutCwINGD0LbQtSDQvtCx0YDQsNCx0L7RgtCw0L3QsCDQuCDQv9C+0LrQsNC30LDQvdCwINCyIGxvYWRBbGxGb250c291cmNlU3R5bGVzXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vINCe0YjQuNCx0LrQsCDRg9C20LUg0LfQsNC70L7Qs9C40YDQvtCy0LDQvdCwINC4INC/0L7QutCw0LfQsNC90LAg0LIgbG9hZEFsbEZvbnRzb3VyY2VTdHlsZXNcbiAgICAgIC8vIHRvYXN0LmVycm9yKGDQndC1INGD0LTQsNC70L7RgdGMINC30LDQs9GA0YPQt9C40YLRjCDRiNGA0LjRhNGCICR7Zm9udEZhbWlseU5hbWV9YCk7IC8vINCc0L7QttC90L4g0LTQvtCx0LDQstC40YLRjCDQvtCx0YnQtdC1INGB0L7QvtCx0YnQtdC90LjQtVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW2N1cnJlbnRGb250cywgc2V0SXNMb2FkaW5nLCBzZXRGb250cywgc2FmZVNlbGVjdEZvbnQsIGxvYWRBbGxGb250c291cmNlU3R5bGVzLCBzYXZlRm9udF0pOyAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LfQsNCy0LjRgdC40LzQvtGB0YLQuFxuXG4gIHJldHVybiB7XG4gICAgaGFuZGxlTG9jYWxGb250c1VwbG9hZCxcbiAgICBsb2FkQW5kU2VsZWN0Rm9udHNvdXJjZUZvbnQsXG4gICAgbG9hZEZvbnRzb3VyY2VTdHlsZVZhcmlhbnQ6IGxvYWRGb250U3R5bGVWYXJpYW50LCAvLyDQrdC60YHQv9C+0YDRgtC40YDRg9C10Lwg0LTQu9GPIHVzZUZvbnRTdHlsZU1hbmFnZXJcbiAgICAvLyBsb2FkQWxsRm9udHNvdXJjZVN0eWxlcyAvLyDQndC1INGN0LrRgdC/0L7RgNGC0LjRgNGD0LXQvCwg0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINCy0L3Rg9GC0YDQuCBsb2FkQW5kU2VsZWN0Rm9udHNvdXJjZUZvbnRcbiAgfTtcbn0gIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidG9hc3QiLCJmaW5kU3R5bGVJbmZvQnlXZWlnaHRBbmRTdHlsZSIsImdldEZvcm1hdEZyb21FeHRlbnNpb24iLCJQUkVTRVRfU1RZTEVTIiwicHJvY2Vzc0xvY2FsRm9udCIsInNhdmVGb250IiwiYmFzZTY0VG9BcnJheUJ1ZmZlciIsImZvbnRGYWNlQ2FjaGUiLCJNYXAiLCJjcmVhdGVDYWNoZUtleSIsImZvbnRGYW1pbHkiLCJ3ZWlnaHQiLCJzdHlsZSIsInVzZUZvbnRMb2FkZXIiLCJzZXRGb250cyIsInNldElzTG9hZGluZyIsInNhZmVTZWxlY3RGb250IiwiY3VycmVudEZvbnRzIiwibG9hZEZvbnRTdHlsZVZhcmlhbnQiLCJmb250T2JqIiwicmV0dXJuQmxvYiIsImlzVmFyaWFibGVGb250IiwidW5kZWZpbmVkIiwiY2FjaGVLZXkiLCJoYXMiLCJjb25zb2xlIiwibG9nIiwiY2FjaGVkRGF0YSIsImdldCIsImxvYWRlZFN0eWxlcyIsInNvbWUiLCJzIiwicHVzaCIsImNhY2hlZCIsImJsb2IiLCJmb250RGF0YVVybCIsImZvbnRGYW1pbHlOYW1lIiwiYXBpVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJjb250ZW50VHlwZSIsImhlYWRlcnMiLCJpbmNsdWRlcyIsInJlc3BvbnNlVGV4dCIsInRleHQiLCJzdWJzdHJpbmciLCJmb250QnVmZmVyQmFzZTY0IiwiZmlsZU5hbWUiLCJKU09OIiwicGFyc2UiLCJmb250QnVmZmVyIiwibWltZVR5cGUiLCJCbG9iIiwidHlwZSIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImZvbnRGYWNlUnVsZSIsInN0eWxlRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50IiwiaGVhZCIsImFwcGVuZENoaWxkIiwic2V0IiwidXJsIiwiZm9udEZhY2UiLCJGb250RmFjZSIsIlN0cmluZyIsImxvYWQiLCJmb250cyIsImFkZCIsImxvYWRFcnJvciIsIndhcm4iLCJyZXZva2VPYmplY3RVUkwiLCJlcnJvciIsImxvYWRBbGxGb250c291cmNlU3R5bGVzIiwiZm9yY2VWYXJpYWJsZUZvbnQiLCJtZXRhQXBpVXJsIiwibWV0YVJlc3BvbnNlIiwibWV0YUNvbnRlbnRUeXBlIiwibWV0YVJlc3BvbnNlVGV4dCIsIm1ldGFkYXRhIiwiYWN0dWFsSXNWYXJpYWJsZUZvbnQiLCJ2YXJpYWJsZSIsImRpc3BsYXlOYW1lIiwiZm9udElkIiwiaWQiLCJuYW1lIiwic291cmNlIiwidmFyaWFibGVBeGVzIiwiYXhlcyIsImF2YWlsYWJsZVN0eWxlcyIsImZpbGUiLCJmb250RmlsZVJlc3BvbnNlIiwiYXJyYXlCdWZmZXIiLCJmaWxlRXh0ZW5zaW9uIiwic3BsaXQiLCJwb3AiLCJ0b0xvd2VyQ2FzZSIsIndlaWdodHNBcnJheSIsIkFycmF5IiwiaXNBcnJheSIsIndlaWdodHMiLCJzdHlsZXNBcnJheSIsInN0eWxlcyIsImZsYXRNYXAiLCJtYXAiLCJ3ZWlnaHROdW0iLCJwYXJzZUludCIsInN0eWxlSW5mbyIsInJlZ3VsYXJXZWlnaHQiLCJyZWd1bGFyU3R5bGUiLCJtYWluU3R5bGVCbG9iIiwibWFpblN0eWxlRXJyb3IiLCJzZXRUaW1lb3V0IiwicHJvbWlzZXMiLCJjYXRjaCIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwiZiIsIm1lc3NhZ2UiLCJoYW5kbGVMb2NhbEZvbnRzVXBsb2FkIiwibmV3Rm9udHMiLCJsZW5ndGgiLCJwcm9jZXNzZWRGb250cyIsImFsbCIsImZvbnQiLCJ2YWxpZEZvbnRzIiwiZmlsdGVyIiwiY3VycmVudElkcyIsIlNldCIsIkJvb2xlYW4iLCJ0cnVseU5ld0ZvbnRzIiwicHJldkZvbnRzIiwiZm9udFRvU2F2ZSIsInN1Y2Nlc3MiLCJpbmZvIiwid2FybmluZyIsImxvYWRBbmRTZWxlY3RGb250c291cmNlRm9udCIsImV4aXN0aW5nRm9udCIsImZpbmQiLCJuYW1lTWF0Y2giLCJ2YXJpYWJsZU1hdGNoIiwiZGlzcGxheU5hbWVNYXRjaCIsImxvYWRGb250c291cmNlU3R5bGVWYXJpYW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./hooks/useFontLoader.js\n");

/***/ }),

/***/ "./hooks/useFontManager.js":
/*!*********************************!*\
  !*** ./hooks/useFontManager.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFontManager: () => (/* binding */ useFontManager)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/fontUtilsCommon */ \"./utils/fontUtilsCommon.js\");\n/* harmony import */ var _utils_cssGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/cssGenerator */ \"./utils/cssGenerator.js\");\n/* harmony import */ var _utils_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/db */ \"./utils/db.js\");\n/* harmony import */ var _utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/localFontProcessor */ \"./utils/localFontProcessor.js\");\n/* harmony import */ var _useFontPersistence__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./useFontPersistence */ \"./hooks/useFontPersistence.js\");\n/* harmony import */ var _useFontLoader__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./useFontLoader */ \"./hooks/useFontLoader.js\");\n/* harmony import */ var _useVariableFontControls__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./useVariableFontControls */ \"./hooks/useVariableFontControls.js\");\n/* harmony import */ var _useFontStyleManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./useFontStyleManager */ \"./hooks/useFontStyleManager.js\");\n/* harmony import */ var _useFontCss__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./useFontCss */ \"./hooks/useFontCss.js\");\n/* harmony import */ var _useFontExport__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./useFontExport */ \"./hooks/useFontExport.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_1__, _utils_cssGenerator__WEBPACK_IMPORTED_MODULE_3__, _utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_5__, _useFontPersistence__WEBPACK_IMPORTED_MODULE_6__, _useFontLoader__WEBPACK_IMPORTED_MODULE_7__, _useVariableFontControls__WEBPACK_IMPORTED_MODULE_8__, _useFontCss__WEBPACK_IMPORTED_MODULE_10__, _useFontExport__WEBPACK_IMPORTED_MODULE_11__]);\n([react_toastify__WEBPACK_IMPORTED_MODULE_1__, _utils_cssGenerator__WEBPACK_IMPORTED_MODULE_3__, _utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_5__, _useFontPersistence__WEBPACK_IMPORTED_MODULE_6__, _useFontLoader__WEBPACK_IMPORTED_MODULE_7__, _useVariableFontControls__WEBPACK_IMPORTED_MODULE_8__, _useFontCss__WEBPACK_IMPORTED_MODULE_10__, _useFontExport__WEBPACK_IMPORTED_MODULE_11__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n// import opentype from 'opentype.js';\n\n\n\n\n // <<< Добавляем импорт revokeObjectURL\n // <<< Импортируем новый хук\n // <<< Импортируем useFontLoader\n\n // <<< Импортируем useFontStyleManager\n // <<< Импортируем useFontCss\n // <<< Импортируем useFontExport\n/**\n * Хук управления шрифтами в приложении\n * \n * Этот хук централизует всю логику работы со шрифтами, включая:\n * - Загрузку и парсинг шрифтов (локальных и Google Fonts)\n * - Управление вариативными осями шрифтов\n * - Генерацию CSS для шрифтов\n * - Удаление шрифтов и очистку ресурсов\n * - Создание статических версий вариативных шрифтов\n * \n * @example\n * // Использование хука в компоненте\n * const {\n *   fonts, \n *   selectedFont, \n *   handleFontsUploaded, \n *   getFontFamily, \n *   getVariationSettings \n * } = useFontManager();\n * \n * @returns {Object} Объект с состоянием и методами для работы со шрифтами\n */ function useFontManager() {\n    const [fonts, setFonts] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [selectedFont, setSelectedFont] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [variableSettings, setVariableSettings] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n    const [exportedFont, setExportedFont] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Референс для отслеживания последнего проанализированного шрифта\n    const loadedFontId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // <<< Флаг для отслеживания начальной загрузки >>>\n    const [isInitialLoadComplete, setIsInitialLoadComplete] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Создаем ref для safeSelectFont, чтобы использовать в колбэках\n    const safeSelectFontRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // <<< Вызов хука загрузки шрифтов (обновляем коллбэк) >>>\n    const { handleLocalFontsUpload, loadAndSelectFontsourceFont, loadFontsourceStyleVariant } = (0,_useFontLoader__WEBPACK_IMPORTED_MODULE_7__.useFontLoader)(setFonts, setIsLoading, (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((font)=>safeSelectFontRef.current?.(font), []), fonts);\n    // Создаем ref для saveFontSettings, чтобы использовать в колбэке до его объявления\n    const saveFontSettingsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // Создаем ref для saveLastVariableSettings, чтобы использовать до его объявления\n    const saveLastVariableSettingsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // <<< Вызов хука управления вариативными шрифтами >>>\n    const { applyVariableSettings, getDefaultAxisValues, resetVariableSettings, getVariableAxesInfo } = (0,_useVariableFontControls__WEBPACK_IMPORTED_MODULE_8__.useVariableFontControls)(selectedFont, variableSettings, setVariableSettings, setSelectedFont, setFonts, _utils_cssGenerator__WEBPACK_IMPORTED_MODULE_3__.debouncedUpdateVariableFontSettings, (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((settings)=>{\n        console.log(\"[FontManager] Callback вызван для сохранения настроек:\", settings, \"ref доступен:\", !!saveLastVariableSettingsRef.current);\n        return saveLastVariableSettingsRef.current?.(settings);\n    }, []) // Передаем ref через callback\n    );\n    // Колбэк для сохранения настроек пресета в IndexedDB\n    const handlePresetApplied = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((fontId, settings)=>{\n        if (saveFontSettingsRef.current) {\n            saveFontSettingsRef.current(fontId, settings);\n        }\n    }, []);\n    // <<< Вызов хука управления стилями >>>\n    const { applyPresetStyle// Получаем функцию из нового хука\n     } = (0,_useFontStyleManager__WEBPACK_IMPORTED_MODULE_9__.useFontStyleManager)(selectedFont, setSelectedFont, setFonts, variableSettings, applyVariableSettings, loadFontsourceStyleVariant, handlePresetApplied // Передаем колбэк для сохранения в IndexedDB\n    );\n    // <<< Вызов хука персистентности (ПОСЛЕ объявления applyVariableSettings и applyPresetStyle) >>>\n    const { saveSelectedFontId, saveLastVariableSettings, saveLastPresetName, clearFontLocalStorage, resetPersistence, saveFontSettings } = (0,_useFontPersistence__WEBPACK_IMPORTED_MODULE_6__.useFontPersistence)(setFonts, setIsLoading, setIsInitialLoadComplete, setSelectedFont, applyVariableSettings, applyPresetStyle, fonts, selectedFont);\n    // Устанавливаем saveFontSettings в ref для использования в handlePresetApplied\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        saveFontSettingsRef.current = saveFontSettings;\n    }, [\n        saveFontSettings\n    ]);\n    // Устанавливаем saveLastVariableSettings в ref для использования в useVariableFontControls\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        console.log(\"[FontManager] Обновляем saveLastVariableSettingsRef:\", typeof saveLastVariableSettings);\n        saveLastVariableSettingsRef.current = saveLastVariableSettings;\n    }, [\n        saveLastVariableSettings\n    ]);\n    // <<< Производные состояния >>>\n    const isSelectedFontVariable = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>selectedFont?.isVariableFont || false, [\n        selectedFont\n    ]);\n    // <<< Вызов хука управления CSS >>>\n    const { getFontFamily, getVariationSettings, generateCSS, loadFontFace, updateVariableFontCss, debouncedUpdateVariableFontCss, exportToCSS: exportToCSSFromHook, fontCssProperties } = (0,_useFontCss__WEBPACK_IMPORTED_MODULE_10__.useFontCss)(selectedFont, variableSettings, isSelectedFontVariable);\n    // <<< Вызов хука экспорта >>>\n    const { downloadFile, exportToCSS: exportToCSSFromExportHook, createStaticFont: createStaticFontFromExportHook, generateStaticFontFile, downloadStaticFont } = (0,_useFontExport__WEBPACK_IMPORTED_MODULE_11__.useFontExport)(exportToCSSFromHook);\n    /**\n   * Безопасно выбирает шрифт и применяет к нему базовые настройки\n   * @param {Object} font - Объект шрифта для выбора\n   */ const safeSelectFont = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((font)=>{\n        if (!font) {\n            console.warn(\"[safeSelectFont] Попытка выбрать null/undefined шрифт\");\n            return;\n        }\n        console.log(`[safeSelectFont] Выбираем шрифт: ${font.name || font.displayName}`);\n        // Устанавливаем выбранный шрифт\n        setSelectedFont(font);\n        // Проверяем, есть ли сохраненные настройки для этого шрифта\n        let settingsApplied = false;\n        // Приоритет 1: Сохраненные настройки осей для вариативного шрифта\n        if (font.isVariableFont && font.lastUsedVariableSettings) {\n            console.log(\"[safeSelectFont] Восстанавливаем сохраненные оси:\", font.lastUsedVariableSettings);\n            setVariableSettings(font.lastUsedVariableSettings);\n            // Применяем настройки через setTimeout для корректной работы\n            setTimeout(()=>{\n                if (applyVariableSettings) {\n                    applyVariableSettings(font.lastUsedVariableSettings, true, font);\n                }\n            }, 0);\n            settingsApplied = true;\n        } else if (font.lastUsedPresetName && applyPresetStyle) {\n            console.log(\"[safeSelectFont] Восстанавливаем сохраненный пресет:\", font.lastUsedPresetName);\n            // Убираем setTimeout - выполняем синхронно, чтобы currentWeight/currentStyle обновились\n            applyPresetStyle(font.lastUsedPresetName, font);\n            settingsApplied = true;\n        }\n        // Если настройки не были восстановлены, применяем дефолтные\n        if (!settingsApplied) {\n            if (font.isVariableFont && font.variableAxes) {\n                // Получаем дефолтные значения из хука\n                const defaultAxes = getDefaultAxisValues?.(font) || {};\n                console.log(\"[safeSelectFont] Применяем дефолтные оси для вариативного шрифта:\", defaultAxes);\n                setVariableSettings(defaultAxes);\n            } else {\n                // Для статических шрифтов очищаем настройки осей\n                setVariableSettings({});\n            }\n            // Применяем базовый стиль Regular\n            if (applyPresetStyle) {\n                // Убираем setTimeout - выполняем синхронно\n                applyPresetStyle(\"Regular\", font);\n            }\n        }\n    }, [\n        setSelectedFont,\n        setVariableSettings,\n        getDefaultAxisValues,\n        applyPresetStyle,\n        applyVariableSettings\n    ]);\n    // Сохраняем ссылку на функцию для использования в колбэках\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        safeSelectFontRef.current = safeSelectFont;\n    }, [\n        safeSelectFont\n    ]);\n    // Мемоизированное имя выбранного пресета (нужно определить до useEffect)\n    const selectedPresetName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\n        if (!selectedFont) return \"Regular\"; // По умолчанию\n        console.log(`[selectedPresetName] Вычисляем для шрифта: ${selectedFont.name}`, {\n            lastUsedPresetName: selectedFont.lastUsedPresetName,\n            currentWeight: selectedFont.currentWeight,\n            currentStyle: selectedFont.currentStyle,\n            isVariableFont: selectedFont.isVariableFont,\n            variableSettings: variableSettings\n        });\n        // Приоритет 1: Для статических шрифтов используем currentWeight/currentStyle\n        if (!selectedFont.isVariableFont) {\n            // Сначала пытаемся определить по текущему весу и стилю\n            if (selectedFont.currentWeight !== undefined && selectedFont.currentStyle !== undefined) {\n                const styleInfo = (0,_utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.findStyleInfoByWeightAndStyle)(selectedFont.currentWeight, selectedFont.currentStyle);\n                const presetName = styleInfo?.name || \"Regular\";\n                console.log(`[selectedPresetName] Статический шрифт по текущему весу/стилю: ${presetName} (${selectedFont.currentWeight}, ${selectedFont.currentStyle})`);\n                return presetName;\n            }\n            // Если currentWeight/currentStyle не установлены, используем сохраненный пресет\n            if (selectedFont.lastUsedPresetName) {\n                console.log(`[selectedPresetName] Статический шрифт с сохраненным пресетом: ${selectedFont.lastUsedPresetName}`);\n                return selectedFont.lastUsedPresetName;\n            }\n            // По умолчанию\n            console.log(`[selectedPresetName] Статический шрифт по умолчанию: Regular`);\n            return \"Regular\";\n        }\n        // Приоритет 2: Для вариативных шрифтов с настройками осей, определяем пресет по осям\n        if (selectedFont.isVariableFont && variableSettings && Object.keys(variableSettings).length > 0) {\n            // Пытаемся найти пресет, который соответствует текущим настройкам осей\n            const currentWeight = variableSettings.wght || 400;\n            const currentStyle = variableSettings.ital === 1 || variableSettings.slnt && variableSettings.slnt < 0 ? \"italic\" : \"normal\";\n            const matchedPreset = (0,_utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.findStyleInfoByWeightAndStyle)(currentWeight, currentStyle);\n            if (matchedPreset) {\n                console.log(`[selectedPresetName] Вариативный шрифт по осям: ${matchedPreset.name}`);\n                return matchedPreset.name;\n            }\n        }\n        // Приоритет 3: Если есть сохраненный пресет, используем его\n        if (selectedFont.lastUsedPresetName) {\n            console.log(`[selectedPresetName] Сохраненный пресет: ${selectedFont.lastUsedPresetName}`);\n            return selectedFont.lastUsedPresetName;\n        }\n        // Приоритет 4: По умолчанию Regular\n        console.log(`[selectedPresetName] По умолчанию: Regular`);\n        return \"Regular\";\n    }, [\n        selectedFont,\n        variableSettings\n    ]);\n    // <<< Сохранение настроек при переключении шрифтов >>>\n    const previousSelectedFontRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const previousVariableSettingsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({});\n    const previousPresetNameRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(\"Regular\");\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Если есть предыдущий шрифт и он отличается от текущего\n        if (previousSelectedFontRef.current && previousSelectedFontRef.current.id !== selectedFont?.id) {\n            const prevFont = previousSelectedFontRef.current;\n            const prevVariableSettings = previousVariableSettingsRef.current;\n            const prevPresetName = previousPresetNameRef.current;\n            console.log(`[FontSwitch] Сохраняем настройки для предыдущего шрифта: ${prevFont.name}`);\n            // Сохраняем настройки предыдущего шрифта в его объект (для сессии)\n            const updatedFonts = fonts.map((font)=>{\n                if (font.id === prevFont.id) {\n                    const updatedFont = {\n                        ...font\n                    };\n                    let dbUpdates = {}; // Объект для обновления в IndexedDB\n                    // Сохраняем настройки в зависимости от типа ПРЕДЫДУЩЕГО шрифта\n                    if (prevFont.isVariableFont && Object.keys(prevVariableSettings).length > 0) {\n                        updatedFont.lastUsedVariableSettings = {\n                            ...prevVariableSettings\n                        };\n                        updatedFont.lastUsedPresetName = null; // Очищаем пресет, если есть оси\n                        dbUpdates.lastUsedVariableSettings = {\n                            ...prevVariableSettings\n                        };\n                        dbUpdates.lastUsedPresetName = null;\n                        console.log(`[FontSwitch] Сохранены оси для ${prevFont.name}:`, updatedFont.lastUsedVariableSettings);\n                    } else if (prevPresetName && prevPresetName !== \"Regular\") {\n                        updatedFont.lastUsedPresetName = prevPresetName;\n                        updatedFont.lastUsedVariableSettings = null; // Очищаем оси, если есть пресет\n                        dbUpdates.lastUsedPresetName = prevPresetName;\n                        dbUpdates.lastUsedVariableSettings = null;\n                        console.log(`[FontSwitch] Сохранен пресет для ${prevFont.name}:`, updatedFont.lastUsedPresetName);\n                    }\n                    // Сохраняем currentWeight и currentStyle если они есть\n                    if (prevFont.currentWeight !== undefined && prevFont.currentStyle !== undefined) {\n                        updatedFont.currentWeight = prevFont.currentWeight;\n                        updatedFont.currentStyle = prevFont.currentStyle;\n                        dbUpdates.currentWeight = prevFont.currentWeight;\n                        dbUpdates.currentStyle = prevFont.currentStyle;\n                    }\n                    // Сохраняем в IndexedDB если есть что сохранять\n                    if (Object.keys(dbUpdates).length > 0) {\n                        saveFontSettings(prevFont.id, dbUpdates);\n                    }\n                    return updatedFont;\n                }\n                return font;\n            });\n            setFonts(updatedFonts);\n            // Также сохраняем в localStorage (глобальные настройки)\n            if (prevFont.isVariableFont && Object.keys(prevVariableSettings).length > 0) {\n                saveLastVariableSettings(prevVariableSettings);\n            } else if (prevPresetName && prevPresetName !== \"Regular\") {\n                saveLastPresetName(prevPresetName);\n            }\n        }\n        // Обновляем ссылки на текущие настройки для следующего переключения\n        previousSelectedFontRef.current = selectedFont;\n        previousVariableSettingsRef.current = {\n            ...variableSettings\n        };\n        previousPresetNameRef.current = selectedPresetName;\n        // Сохраняем ID выбранного шрифта\n        if (selectedFont?.id) {\n            saveSelectedFontId(selectedFont.id);\n        }\n    }, [\n        selectedFont,\n        fonts,\n        setFonts,\n        saveSelectedFontId,\n        saveLastVariableSettings,\n        saveLastPresetName,\n        saveFontSettings,\n        variableSettings,\n        selectedPresetName\n    ]);\n    // Убираем старый код loadInitialState, так как теперь useFontPersistence работает напрямую\n    // Мемоизированные доступные стили и имя выбранного пресета\n    const availableStyles = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\n        if (!selectedFont) return [];\n        console.log(\"[useMemo availableStyles] selectedFont:\", selectedFont?.name, \"selectedFont.availableStyles:\", selectedFont?.availableStyles);\n        // Удаляем специальную логику для Google Fonts\n        /*\n      if (selectedFont.source === 'google') {\n        // Для Google шрифтов берем стили из карты или дефолтные\n        const styles = GOOGLE_FONT_STYLES_MAP[selectedFont.name] || [\n            PRESET_STYLES.find(p => p.name === 'Regular'),\n            PRESET_STYLES.find(p => p.name === 'Bold')\n        ].filter(Boolean);\n        return styles;\n      } else */ // Если шрифт вариативный, возвращаем все пресеты (для UI выбора)\n        if (selectedFont.isVariableFont) {\n            return _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.PRESET_STYLES;\n        // Если у шрифта есть поле availableStyles (из Fontsource или локального парсинга)\n        } else if (selectedFont.availableStyles && Array.isArray(selectedFont.availableStyles)) {\n            // Убедимся, что стили имеют нужный формат {name, weight, style}\n            // Если формат уже правильный, просто возвращаем\n            if (selectedFont.availableStyles.every((s)=>s.name && s.weight && s.style)) {\n                return selectedFont.availableStyles;\n            }\n            // Если формат другой (например, из Fontsource metadata), нужно будет его преобразовать\n            // Пока просто возвращаем пустой массив или базовые, если преобразование не реализовано\n            // TODO: Добавить преобразование из формата Fontsource metadata, если он отличается\n            console.warn(\"Формат availableStyles отличается от ожидаемого, требуется преобразование.\");\n            return [\n                _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.PRESET_STYLES.find((p)=>p.name === \"Regular\"),\n                _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.PRESET_STYLES.find((p)=>p.name === \"Bold\")\n            ].filter(Boolean);\n        // Иначе возвращаем базовые стили\n        } else {\n            return [\n                _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.PRESET_STYLES.find((p)=>p.name === \"Regular\"),\n                _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.PRESET_STYLES.find((p)=>p.name === \"Bold\")\n            ].filter(Boolean);\n        }\n    }, [\n        selectedFont\n    ]);\n    // Мемоизированный флаг вариативного шрифта (перенесено в useFontCss)\n    // Мемоизированное имя шрифта\n    const selectedFontName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\n        return selectedFont ? selectedFont.name : \"\";\n    }, [\n        selectedFont\n    ]);\n    // Мемоизированные оси шрифта\n    const selectedFontAxes = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\n        return selectedFont && selectedFont.variableAxes ? selectedFont.variableAxes : {};\n    }, [\n        selectedFont\n    ]);\n    /**\n   * Создает статическую версию вариативного шрифта с текущими настройками осей\n   * \n   * @example\n   * // Создание статической версии текущего шрифта\n   * const staticFont = createStaticFont();\n   * console.log(staticFont.name); // Имя статического шрифта\n   * \n   * @returns {Object|undefined} Объект статического шрифта или undefined, если нет выбранного шрифта\n   */ const createStaticFont = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        return createStaticFontFromExportHook(selectedFont, selectedFontName, variableSettings, setExportedFont);\n    }, [\n        createStaticFontFromExportHook,\n        selectedFont,\n        selectedFontName,\n        variableSettings,\n        setExportedFont\n    ]);\n    /**\n   * Обрабатывает загруженные шрифты: анализирует файлы, определяет характеристики и\n   * добавляет шрифты в состояние приложения\n   * \n   * @example\n   * // Обработка шрифтов из input[type=\"file\"]\n   * const handleFileUpload = (e) => {\n   *   const files = Array.from(e.target.files).map(file => ({\n   *     file,\n   *     name: file.name,\n   *     url: URL.createObjectURL(file)\n   *   }));\n   *   handleFontsUploaded(files);\n   * };\n   * \n   * @param {Array} newFonts - Массив объектов с информацией о новых шрифтах\n   * @returns {Promise<void>}\n   */ const handleFontsUploaded = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (newFonts)=>{\n        console.log(\"[handleFontsUploaded] Получены шрифты:\", newFonts);\n        // Используем функцию из useFontLoader\n        const result = await handleLocalFontsUpload(newFonts);\n        console.log(\"[handleFontsUploaded] handleLocalFontsUpload завершен\");\n        return result;\n    }, [\n        handleLocalFontsUpload\n    ]);\n    /**\n   * Удаляет шрифт и освобождает ресурсы\n   * Если удаляется текущий выбранный шрифт, выбирает следующий доступный\n   * \n   * @example\n   * // Кнопка удаления шрифта\n   * <button onClick={() => removeFont(font.id)}>\n   *   Удалить\n   * </button>\n   * \n   * @param {string} fontId - ID шрифта для удаления\n   */ const removeFont = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((fontId)=>{\n        let removedFontFamily = null;\n        setFonts((prev)=>{\n            const fontToRemove = prev.find((f)=>f.id === fontId);\n            if (fontToRemove) {\n                removedFontFamily = fontToRemove.fontFamily; // Сохраняем имя для очистки\n                if (fontToRemove.url) {\n                    // Освобождаем URL для предотвращения утечек памяти\n                    (0,_utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_5__.revokeObjectURL)(fontToRemove.url);\n                }\n                // <<< Удаляем из IndexedDB >>>\n                (0,_utils_db__WEBPACK_IMPORTED_MODULE_4__.deleteFontDB)(fontId).catch((err)=>{\n                    console.error(`[DB] Ошибка удаления шрифта ${fontId} из DB:`, err);\n                    react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Ошибка удаления шрифта из базы данных.\");\n                // Что делать в этом случае? Возможно, ничего, шрифт останется в DB.\n                });\n            }\n            const updatedFonts = prev.filter((f)=>f.id !== fontId);\n            // Если удаляем текущий выбранный шрифт, выбираем следующий доступный\n            if (selectedFont && selectedFont.id === fontId) {\n                if (updatedFonts.length > 0) {\n                    // Сохраняем ссылку на новый шрифт для дальнейшего применения стиля\n                    const newFont = updatedFonts[0];\n                    // Устанавливаем новый шрифт\n                    setSelectedFont(newFont);\n                    // После установки нового шрифта, настраиваем его со стилем Regular\n                    setTimeout(()=>{\n                        // Устанавливаем стиль Regular для нового шрифта\n                        const presetName = \"Regular\";\n                        safeSelectFontRef.current?.(newFont);\n                    }, 0);\n                } else {\n                    setSelectedFont(null);\n                }\n            }\n            return updatedFonts;\n        });\n        react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.success(\"Шрифт удален\");\n    // Очистка FontFace из document.fonts (необязательно, но хорошо для гигиены)\n    // if (removedFontFamily && document.fonts) {\n    //    document.fonts.delete(removedFontFamily);\n    // }\n    }, [\n        selectedFont,\n        _utils_db__WEBPACK_IMPORTED_MODULE_4__.deleteFontDB,\n        setFonts,\n        setSelectedFont\n    ]);\n    // Обертки для совместимости с предыдущим API\n    const exportToCSS = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((download = false)=>{\n        return exportToCSSFromExportHook(selectedFont, selectedFontName, download);\n    }, [\n        exportToCSSFromExportHook,\n        selectedFont,\n        selectedFontName\n    ]);\n    /**\n   * Выбирает (или загружает, если ещё не загружен) шрифт Fontsource\n   * @param {string} fontFamilyName - Название семейства шрифтов\n   * @param {boolean} forceVariableFont - Загружать вариативный шрифт (если доступен)\n   */ const selectOrAddFontsourceFont = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (fontFamilyName, forceVariableFont = false)=>{\n        // Просто перенаправляем на функцию из useFontLoader\n        return loadAndSelectFontsourceFont(fontFamilyName, forceVariableFont);\n    }, [\n        loadAndSelectFontsourceFont\n    ]);\n    // <<< Функция полного сброса >>>\n    const resetApplicationState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        console.log(\"[Reset] Запуск полного сброса состояния приложения...\");\n        try {\n            // 1. Очищаем хранилища (IndexedDB и localStorage) через новый хук\n            await resetPersistence(); // <<< Вызываем сброс персистентности\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Локальное хранилище данных очищено.\"); // Обновляем сообщение\n            // 2. Очищаем состояния хука (остается как было)\n            setFonts([]);\n            setSelectedFont(null);\n            setVariableSettings({});\n            setExportedFont(null);\n            setIsLoading(false); // Сбрасываем флаг загрузки\n            // isInitialLoadComplete останется true, т.к. начальная загрузка была\n            console.log(\"[Reset] Состояния useFontManager сброшены.\");\n            // 4. Вызываем сброс других контекстов (пока только SettingsContext)\n            // resetSettings(); // Вызов будет в компоненте кнопки\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.success(\"Состояние приложения успешно сброшено!\");\n        } catch (error) {\n            console.error(\"[Reset] Ошибка во время сброса состояния:\", error);\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Произошла ошибка при сбросе состояния.\");\n        }\n    }, [\n        setFonts,\n        setSelectedFont,\n        setVariableSettings,\n        setExportedFont,\n        setIsLoading,\n        resetPersistence\n    ]); // Добавляем зависимости сеттеров\n    // Убираем старые useEffect, связанные с loadInitialState\n    return {\n        // Состояния\n        fonts,\n        selectedFont,\n        variableSettings,\n        exportedFont,\n        isSelectedFontVariable,\n        selectedFontName,\n        selectedFontAxes,\n        availableStyles,\n        selectedPresetName,\n        isLoading,\n        isInitialLoadComplete,\n        // Методы управления состоянием\n        setFonts,\n        setSelectedFont,\n        setVariableSettings,\n        setExportedFont,\n        // Методы загрузки (из useFontLoader)\n        handleLocalFontsUpload,\n        handleFontsUploaded,\n        loadAndSelectFontsourceFont,\n        selectOrAddFontsourceFont,\n        // Методы управления шрифтами \n        removeFont,\n        safeSelectFont,\n        // <<< Методы работы с вариативными осями из useVariableFontControls >>>\n        getVariableAxesInfo,\n        getVariableAxes: getVariableAxesInfo,\n        applyVariableSettings,\n        handleVariableSettingsChange: applyVariableSettings,\n        resetVariableSettings,\n        getDefaultAxisValues,\n        // Методы для стилей шрифта\n        applyPresetStyle,\n        // Методы для CSS\n        getFontFamily,\n        getVariationSettings,\n        generateCSS,\n        exportToCSS,\n        fontCssProperties,\n        // Методы экспорта и скачивания (из useFontExport)\n        downloadFile,\n        generateStaticFontFile,\n        downloadStaticFont,\n        // Прочие методы\n        createStaticFont,\n        resetApplicationState,\n        // Методы персистентности\n        saveFontSettings\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsd0NBQXdDLHNCQUFzQjtZQUV6RSxnREFBZ0Q7WUFDaER4SCxTQUFTLEVBQUU7WUFDWEUsZ0JBQWdCO1lBQ2hCRSxvQkFBb0IsQ0FBQztZQUNyQkUsZ0JBQWdCO1lBQ2hCRSxhQUFhLFFBQVEsMkJBQTJCO1lBQ2hELHFFQUFxRTtZQUNyRWlCLFFBQVFDLEdBQUcsQ0FBQztZQUdaLG9FQUFvRTtZQUNwRSxzREFBc0Q7WUFFdER4QyxpREFBS0EsQ0FBQ2dJLE9BQU8sQ0FBQztRQUVoQixFQUFFLE9BQU9GLE9BQU87WUFDZHZGLFFBQVF1RixLQUFLLENBQUMsNkNBQTZDQTtZQUMzRDlILGlEQUFLQSxDQUFDOEgsS0FBSyxDQUFDO1FBQ2Q7SUFDRixHQUFHO1FBQUNoSDtRQUFVRTtRQUFpQkU7UUFBcUJFO1FBQWlCRTtRQUFjMEI7S0FBaUIsR0FBRyxpQ0FBaUM7SUFFeEkseURBQXlEO0lBRXpELE9BQU87UUFDTCxZQUFZO1FBQ1puQztRQUNBRTtRQUNBRTtRQUNBRTtRQUNBK0I7UUFDQThEO1FBQ0FDO1FBQ0FaO1FBQ0F4QjtRQUNBeEQ7UUFDQUc7UUFFQSwrQkFBK0I7UUFDL0JWO1FBQ0FFO1FBQ0FFO1FBQ0FFO1FBRUEscUNBQXFDO1FBQ3JDTztRQUNBdUY7UUFDQXRGO1FBQ0FzRztRQUVBLDhCQUE4QjtRQUM5QmI7UUFDQWxEO1FBRUEsd0VBQXdFO1FBQ3hFOUI7UUFDQWtHLGlCQUFpQmxHO1FBQ2pCSDtRQUNBc0csOEJBQThCdEc7UUFDOUJFO1FBQ0FEO1FBRUEsMkJBQTJCO1FBQzNCUTtRQUVBLGlCQUFpQjtRQUNqQlM7UUFDQUM7UUFDQUM7UUFDQUk7UUFDQUU7UUFFQSxrREFBa0Q7UUFDbERDO1FBQ0FJO1FBQ0FDO1FBRUEsZ0JBQWdCO1FBQ2hCSDtRQUNBc0U7UUFFQSx5QkFBeUI7UUFDekJwRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb250LWdhdW50bGV0LWNsb25lLy4vaG9va3MvdXNlRm9udE1hbmFnZXIuanM/NWFlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlTWVtbywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuLy8gaW1wb3J0IG9wZW50eXBlIGZyb20gJ29wZW50eXBlLmpzJztcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSAncmVhY3QtdG9hc3RpZnknO1xuaW1wb3J0IHsgZmluZFN0eWxlSW5mb0J5V2VpZ2h0QW5kU3R5bGUsIFBSRVNFVF9TVFlMRVMgfSBmcm9tICcuLi91dGlscy9mb250VXRpbHNDb21tb24nO1xuaW1wb3J0IHsgZGVib3VuY2VkVXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3MgfSBmcm9tICcuLi91dGlscy9jc3NHZW5lcmF0b3InO1xuaW1wb3J0IHsgZGVsZXRlRm9udERCIH0gZnJvbSAnLi4vdXRpbHMvZGInO1xuaW1wb3J0IHsgcmV2b2tlT2JqZWN0VVJMIH0gZnJvbSAnLi4vdXRpbHMvbG9jYWxGb250UHJvY2Vzc29yJzsgLy8gPDw8INCU0L7QsdCw0LLQu9GP0LXQvCDQuNC80L/QvtGA0YIgcmV2b2tlT2JqZWN0VVJMXG5pbXBvcnQgeyB1c2VGb250UGVyc2lzdGVuY2UgfSBmcm9tICcuL3VzZUZvbnRQZXJzaXN0ZW5jZSc7IC8vIDw8PCDQmNC80L/QvtGA0YLQuNGA0YPQtdC8INC90L7QstGL0Lkg0YXRg9C6XG5pbXBvcnQgeyB1c2VGb250TG9hZGVyIH0gZnJvbSAnLi91c2VGb250TG9hZGVyJzsgLy8gPDw8INCY0LzQv9C+0YDRgtC40YDRg9C10LwgdXNlRm9udExvYWRlclxuaW1wb3J0IHsgdXNlVmFyaWFibGVGb250Q29udHJvbHMgfSBmcm9tICcuL3VzZVZhcmlhYmxlRm9udENvbnRyb2xzJztcbmltcG9ydCB7IHVzZUZvbnRTdHlsZU1hbmFnZXIgfSBmcm9tICcuL3VzZUZvbnRTdHlsZU1hbmFnZXInOyAvLyA8PDwg0JjQvNC/0L7RgNGC0LjRgNGD0LXQvCB1c2VGb250U3R5bGVNYW5hZ2VyXG5pbXBvcnQgeyB1c2VGb250Q3NzIH0gZnJvbSAnLi91c2VGb250Q3NzJzsgLy8gPDw8INCY0LzQv9C+0YDRgtC40YDRg9C10LwgdXNlRm9udENzc1xuaW1wb3J0IHsgdXNlRm9udEV4cG9ydCB9IGZyb20gJy4vdXNlRm9udEV4cG9ydCc7IC8vIDw8PCDQmNC80L/QvtGA0YLQuNGA0YPQtdC8IHVzZUZvbnRFeHBvcnRcblxuLyoqXG4gKiDQpdGD0Log0YPQv9GA0LDQstC70LXQvdC40Y8g0YjRgNC40YTRgtCw0LzQuCDQsiDQv9GA0LjQu9C+0LbQtdC90LjQuFxuICogXG4gKiDQrdGC0L7RgiDRhdGD0Log0YbQtdC90YLRgNCw0LvQuNC30YPQtdGCINCy0YHRjiDQu9C+0LPQuNC60YMg0YDQsNCx0L7RgtGLINGB0L4g0YjRgNC40YTRgtCw0LzQuCwg0LLQutC70Y7Rh9Cw0Y86XG4gKiAtINCX0LDQs9GA0YPQt9C60YMg0Lgg0L/QsNGA0YHQuNC90LMg0YjRgNC40YTRgtC+0LIgKNC70L7QutCw0LvRjNC90YvRhSDQuCBHb29nbGUgRm9udHMpXG4gKiAtINCj0L/RgNCw0LLQu9C10L3QuNC1INCy0LDRgNC40LDRgtC40LLQvdGL0LzQuCDQvtGB0Y/QvNC4INGI0YDQuNGE0YLQvtCyXG4gKiAtINCT0LXQvdC10YDQsNGG0LjRjiBDU1Mg0LTQu9GPINGI0YDQuNGE0YLQvtCyXG4gKiAtINCj0LTQsNC70LXQvdC40LUg0YjRgNC40YTRgtC+0LIg0Lgg0L7Rh9C40YHRgtC60YMg0YDQtdGB0YPRgNGB0L7QslxuICogLSDQodC+0LfQtNCw0L3QuNC1INGB0YLQsNGC0LjRh9C10YHQutC40YUg0LLQtdGA0YHQuNC5INCy0LDRgNC40LDRgtC40LLQvdGL0YUg0YjRgNC40YTRgtC+0LJcbiAqIFxuICogQGV4YW1wbGVcbiAqIC8vINCY0YHQv9C+0LvRjNC30L7QstCw0L3QuNC1INGF0YPQutCwINCyINC60L7QvNC/0L7QvdC10L3RgtC1XG4gKiBjb25zdCB7XG4gKiAgIGZvbnRzLCBcbiAqICAgc2VsZWN0ZWRGb250LCBcbiAqICAgaGFuZGxlRm9udHNVcGxvYWRlZCwgXG4gKiAgIGdldEZvbnRGYW1pbHksIFxuICogICBnZXRWYXJpYXRpb25TZXR0aW5ncyBcbiAqIH0gPSB1c2VGb250TWFuYWdlcigpO1xuICogXG4gKiBAcmV0dXJucyB7T2JqZWN0fSDQntCx0YrQtdC60YIg0YEg0YHQvtGB0YLQvtGP0L3QuNC10Lwg0Lgg0LzQtdGC0L7QtNCw0LzQuCDQtNC70Y8g0YDQsNCx0L7RgtGLINGB0L4g0YjRgNC40YTRgtCw0LzQuFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRm9udE1hbmFnZXIoKSB7XG4gIGNvbnN0IFtmb250cywgc2V0Rm9udHNdID0gdXNlU3RhdGUoW10pO1xuICBjb25zdCBbc2VsZWN0ZWRGb250LCBzZXRTZWxlY3RlZEZvbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFt2YXJpYWJsZVNldHRpbmdzLCBzZXRWYXJpYWJsZVNldHRpbmdzXSA9IHVzZVN0YXRlKHt9KTtcbiAgY29uc3QgW2V4cG9ydGVkRm9udCwgc2V0RXhwb3J0ZWRGb250XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAvLyDQoNC10YTQtdGA0LXQvdGBINC00LvRjyDQvtGC0YHQu9C10LbQuNCy0LDQvdC40Y8g0L/QvtGB0LvQtdC00L3QtdCz0L4g0L/RgNC+0LDQvdCw0LvQuNC30LjRgNC+0LLQsNC90L3QvtCz0L4g0YjRgNC40YTRgtCwXG4gIGNvbnN0IGxvYWRlZEZvbnRJZCA9IHVzZVJlZihudWxsKTtcbiAgLy8gPDw8INCk0LvQsNCzINC00LvRjyDQvtGC0YHQu9C10LbQuNCy0LDQvdC40Y8g0L3QsNGH0LDQu9GM0L3QvtC5INC30LDQs9GA0YPQt9C60LggPj4+XG4gIGNvbnN0IFtpc0luaXRpYWxMb2FkQ29tcGxldGUsIHNldElzSW5pdGlhbExvYWRDb21wbGV0ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICAvLyDQodC+0LfQtNCw0LXQvCByZWYg0LTQu9GPIHNhZmVTZWxlY3RGb250LCDRh9GC0L7QsdGLINC40YHQv9C+0LvRjNC30L7QstCw0YLRjCDQsiDQutC+0LvQsdGN0LrQsNGFXG4gIGNvbnN0IHNhZmVTZWxlY3RGb250UmVmID0gdXNlUmVmKG51bGwpO1xuICBcbiAgLy8gPDw8INCS0YvQt9C+0LIg0YXRg9C60LAg0LfQsNCz0YDRg9C30LrQuCDRiNGA0LjRhNGC0L7QsiAo0L7QsdC90L7QstC70Y/QtdC8INC60L7Qu9C70LHRjdC6KSA+Pj5cbiAgY29uc3QgeyBoYW5kbGVMb2NhbEZvbnRzVXBsb2FkLCBsb2FkQW5kU2VsZWN0Rm9udHNvdXJjZUZvbnQsIGxvYWRGb250c291cmNlU3R5bGVWYXJpYW50IH0gPSB1c2VGb250TG9hZGVyKFxuICAgIHNldEZvbnRzLFxuICAgIHNldElzTG9hZGluZyxcbiAgICB1c2VDYWxsYmFjaygoZm9udCkgPT4gc2FmZVNlbGVjdEZvbnRSZWYuY3VycmVudD8uKGZvbnQpLCBbXSksXG4gICAgZm9udHNcbiAgKTtcbiAgXG4gIC8vINCh0L7Qt9C00LDQtdC8IHJlZiDQtNC70Y8gc2F2ZUZvbnRTZXR0aW5ncywg0YfRgtC+0LHRiyDQuNGB0L/QvtC70YzQt9C+0LLQsNGC0Ywg0LIg0LrQvtC70LHRjdC60LUg0LTQviDQtdCz0L4g0L7QsdGK0Y/QstC70LXQvdC40Y9cbiAgY29uc3Qgc2F2ZUZvbnRTZXR0aW5nc1JlZiA9IHVzZVJlZihudWxsKTtcbiAgXG4gIC8vINCh0L7Qt9C00LDQtdC8IHJlZiDQtNC70Y8gc2F2ZUxhc3RWYXJpYWJsZVNldHRpbmdzLCDRh9GC0L7QsdGLINC40YHQv9C+0LvRjNC30L7QstCw0YLRjCDQtNC+INC10LPQviDQvtCx0YrRj9Cy0LvQtdC90LjRj1xuICBjb25zdCBzYXZlTGFzdFZhcmlhYmxlU2V0dGluZ3NSZWYgPSB1c2VSZWYobnVsbCk7XG4gIFxuICAvLyA8PDwg0JLRi9C30L7QsiDRhdGD0LrQsCDRg9C/0YDQsNCy0LvQtdC90LjRjyDQstCw0YDQuNCw0YLQuNCy0L3Ri9C80Lgg0YjRgNC40YTRgtCw0LzQuCA+Pj5cbiAgY29uc3Qge1xuICAgICAgYXBwbHlWYXJpYWJsZVNldHRpbmdzLFxuICAgICAgZ2V0RGVmYXVsdEF4aXNWYWx1ZXMsXG4gICAgICByZXNldFZhcmlhYmxlU2V0dGluZ3MsXG4gICAgICBnZXRWYXJpYWJsZUF4ZXNJbmZvLFxuICB9ID0gdXNlVmFyaWFibGVGb250Q29udHJvbHMoXG4gICAgICBzZWxlY3RlZEZvbnQsXG4gICAgICB2YXJpYWJsZVNldHRpbmdzLFxuICAgICAgc2V0VmFyaWFibGVTZXR0aW5ncyxcbiAgICAgIHNldFNlbGVjdGVkRm9udCxcbiAgICAgIHNldEZvbnRzLFxuICAgICAgZGVib3VuY2VkVXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3MsIC8vINCf0LXRgNC10LTQsNC10Lwg0YTRg9C90LrRhtC40Y4g0L7QsdC90L7QstC70LXQvdC40Y8gQ1NTXG4gICAgICB1c2VDYWxsYmFjaygoc2V0dGluZ3MpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tGb250TWFuYWdlcl0gQ2FsbGJhY2sg0LLRi9C30LLQsNC9INC00LvRjyDRgdC+0YXRgNCw0L3QtdC90LjRjyDQvdCw0YHRgtGA0L7QtdC6OicsIHNldHRpbmdzLCAncmVmINC00L7RgdGC0YPQv9C10L06JywgISFzYXZlTGFzdFZhcmlhYmxlU2V0dGluZ3NSZWYuY3VycmVudCk7XG4gICAgICAgIHJldHVybiBzYXZlTGFzdFZhcmlhYmxlU2V0dGluZ3NSZWYuY3VycmVudD8uKHNldHRpbmdzKTtcbiAgICAgIH0sIFtdKSAvLyDQn9C10YDQtdC00LDQtdC8IHJlZiDRh9C10YDQtdC3IGNhbGxiYWNrXG4gICk7XG5cbiAgLy8g0JrQvtC70LHRjdC6INC00LvRjyDRgdC+0YXRgNCw0L3QtdC90LjRjyDQvdCw0YHRgtGA0L7QtdC6INC/0YDQtdGB0LXRgtCwINCyIEluZGV4ZWREQlxuICBjb25zdCBoYW5kbGVQcmVzZXRBcHBsaWVkID0gdXNlQ2FsbGJhY2soKGZvbnRJZCwgc2V0dGluZ3MpID0+IHtcbiAgICBpZiAoc2F2ZUZvbnRTZXR0aW5nc1JlZi5jdXJyZW50KSB7XG4gICAgICBzYXZlRm9udFNldHRpbmdzUmVmLmN1cnJlbnQoZm9udElkLCBzZXR0aW5ncyk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gPDw8INCS0YvQt9C+0LIg0YXRg9C60LAg0YPQv9GA0LDQstC70LXQvdC40Y8g0YHRgtC40LvRj9C80LggPj4+XG4gIGNvbnN0IHtcbiAgICAgIGFwcGx5UHJlc2V0U3R5bGUgLy8g0J/QvtC70YPRh9Cw0LXQvCDRhNGD0L3QutGG0LjRjiDQuNC3INC90L7QstC+0LPQviDRhdGD0LrQsFxuICB9ID0gdXNlRm9udFN0eWxlTWFuYWdlcihcbiAgICAgIHNlbGVjdGVkRm9udCxcbiAgICAgIHNldFNlbGVjdGVkRm9udCxcbiAgICAgIHNldEZvbnRzLFxuICAgICAgdmFyaWFibGVTZXR0aW5ncyxcbiAgICAgIGFwcGx5VmFyaWFibGVTZXR0aW5ncywgLy8g0J/QtdGA0LXQtNCw0LXQvCDRhNGD0L3QutGG0LjRjiDQuNC3IHVzZVZhcmlhYmxlRm9udENvbnRyb2xzXG4gICAgICBsb2FkRm9udHNvdXJjZVN0eWxlVmFyaWFudCwgLy8g0J/QtdGA0LXQtNCw0LXQvCDRhNGD0L3QutGG0LjRjiDQuNC3IHVzZUZvbnRMb2FkZXJcbiAgICAgIGhhbmRsZVByZXNldEFwcGxpZWQgLy8g0J/QtdGA0LXQtNCw0LXQvCDQutC+0LvQsdGN0Log0LTQu9GPINGB0L7RhdGA0LDQvdC10L3QuNGPINCyIEluZGV4ZWREQlxuICApO1xuXG4gIC8vIDw8PCDQktGL0LfQvtCyINGF0YPQutCwINC/0LXRgNGB0LjRgdGC0LXQvdGC0L3QvtGB0YLQuCAo0J/QntCh0JvQlSDQvtCx0YrRj9Cy0LvQtdC90LjRjyBhcHBseVZhcmlhYmxlU2V0dGluZ3Mg0LggYXBwbHlQcmVzZXRTdHlsZSkgPj4+XG4gIGNvbnN0IHtcbiAgICBzYXZlU2VsZWN0ZWRGb250SWQsXG4gICAgc2F2ZUxhc3RWYXJpYWJsZVNldHRpbmdzLFxuICAgIHNhdmVMYXN0UHJlc2V0TmFtZSxcbiAgICBjbGVhckZvbnRMb2NhbFN0b3JhZ2UsXG4gICAgcmVzZXRQZXJzaXN0ZW5jZSxcbiAgICBzYXZlRm9udFNldHRpbmdzXG4gIH0gPSB1c2VGb250UGVyc2lzdGVuY2UoXG4gICAgc2V0Rm9udHMsXG4gICAgc2V0SXNMb2FkaW5nLFxuICAgIHNldElzSW5pdGlhbExvYWRDb21wbGV0ZSxcbiAgICBzZXRTZWxlY3RlZEZvbnQsXG4gICAgYXBwbHlWYXJpYWJsZVNldHRpbmdzLFxuICAgIGFwcGx5UHJlc2V0U3R5bGUsXG4gICAgZm9udHMsXG4gICAgc2VsZWN0ZWRGb250XG4gICk7XG5cbiAgLy8g0KPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwgc2F2ZUZvbnRTZXR0aW5ncyDQsiByZWYg0LTQu9GPINC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPINCyIGhhbmRsZVByZXNldEFwcGxpZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzYXZlRm9udFNldHRpbmdzUmVmLmN1cnJlbnQgPSBzYXZlRm9udFNldHRpbmdzO1xuICB9LCBbc2F2ZUZvbnRTZXR0aW5nc10pO1xuXG4gIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8IHNhdmVMYXN0VmFyaWFibGVTZXR0aW5ncyDQsiByZWYg0LTQu9GPINC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPINCyIHVzZVZhcmlhYmxlRm9udENvbnRyb2xzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1tGb250TWFuYWdlcl0g0J7QsdC90L7QstC70Y/QtdC8IHNhdmVMYXN0VmFyaWFibGVTZXR0aW5nc1JlZjonLCB0eXBlb2Ygc2F2ZUxhc3RWYXJpYWJsZVNldHRpbmdzKTtcbiAgICBzYXZlTGFzdFZhcmlhYmxlU2V0dGluZ3NSZWYuY3VycmVudCA9IHNhdmVMYXN0VmFyaWFibGVTZXR0aW5ncztcbiAgfSwgW3NhdmVMYXN0VmFyaWFibGVTZXR0aW5nc10pO1xuXG4gIC8vIDw8PCDQn9GA0L7QuNC30LLQvtC00L3Ri9C1INGB0L7RgdGC0L7Rj9C90LjRjyA+Pj5cbiAgY29uc3QgaXNTZWxlY3RlZEZvbnRWYXJpYWJsZSA9IHVzZU1lbW8oKCkgPT4gc2VsZWN0ZWRGb250Py5pc1ZhcmlhYmxlRm9udCB8fCBmYWxzZSwgW3NlbGVjdGVkRm9udF0pO1xuXG4gIC8vIDw8PCDQktGL0LfQvtCyINGF0YPQutCwINGD0L/RgNCw0LLQu9C10L3QuNGPIENTUyA+Pj5cbiAgY29uc3Qge1xuICAgICAgZ2V0Rm9udEZhbWlseSxcbiAgICAgIGdldFZhcmlhdGlvblNldHRpbmdzLFxuICAgICAgZ2VuZXJhdGVDU1MsXG4gICAgICBsb2FkRm9udEZhY2UsXG4gICAgICB1cGRhdGVWYXJpYWJsZUZvbnRDc3MsXG4gICAgICBkZWJvdW5jZWRVcGRhdGVWYXJpYWJsZUZvbnRDc3MsXG4gICAgICBleHBvcnRUb0NTUzogZXhwb3J0VG9DU1NGcm9tSG9vayxcbiAgICAgIGZvbnRDc3NQcm9wZXJ0aWVzXG4gIH0gPSB1c2VGb250Q3NzKHNlbGVjdGVkRm9udCwgdmFyaWFibGVTZXR0aW5ncywgaXNTZWxlY3RlZEZvbnRWYXJpYWJsZSk7XG5cbiAgLy8gPDw8INCS0YvQt9C+0LIg0YXRg9C60LAg0Y3QutGB0L/QvtGA0YLQsCA+Pj5cbiAgY29uc3Qge1xuICAgICAgZG93bmxvYWRGaWxlLFxuICAgICAgZXhwb3J0VG9DU1M6IGV4cG9ydFRvQ1NTRnJvbUV4cG9ydEhvb2ssXG4gICAgICBjcmVhdGVTdGF0aWNGb250OiBjcmVhdGVTdGF0aWNGb250RnJvbUV4cG9ydEhvb2ssXG4gICAgICBnZW5lcmF0ZVN0YXRpY0ZvbnRGaWxlLFxuICAgICAgZG93bmxvYWRTdGF0aWNGb250XG4gIH0gPSB1c2VGb250RXhwb3J0KGV4cG9ydFRvQ1NTRnJvbUhvb2spO1xuXG4gIC8qKlxuICAgKiDQkdC10LfQvtC/0LDRgdC90L4g0LLRi9Cx0LjRgNCw0LXRgiDRiNGA0LjRhNGCINC4INC/0YDQuNC80LXQvdGP0LXRgiDQuiDQvdC10LzRgyDQsdCw0LfQvtCy0YvQtSDQvdCw0YHRgtGA0L7QudC60LhcbiAgICogQHBhcmFtIHtPYmplY3R9IGZvbnQgLSDQntCx0YrQtdC60YIg0YjRgNC40YTRgtCwINC00LvRjyDQstGL0LHQvtGA0LBcbiAgICovXG4gIGNvbnN0IHNhZmVTZWxlY3RGb250ID0gdXNlQ2FsbGJhY2soKGZvbnQpID0+IHtcbiAgICBpZiAoIWZvbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybignW3NhZmVTZWxlY3RGb250XSDQn9C+0L/Ri9GC0LrQsCDQstGL0LHRgNCw0YLRjCBudWxsL3VuZGVmaW5lZCDRiNGA0LjRhNGCJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBbc2FmZVNlbGVjdEZvbnRdINCS0YvQsdC40YDQsNC10Lwg0YjRgNC40YTRgjogJHtmb250Lm5hbWUgfHwgZm9udC5kaXNwbGF5TmFtZX1gKTtcbiAgICBcbiAgICAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDQstGL0LHRgNCw0L3QvdGL0Lkg0YjRgNC40YTRglxuICAgIHNldFNlbGVjdGVkRm9udChmb250KTtcbiAgICBcbiAgICAvLyDQn9GA0L7QstC10YDRj9C10LwsINC10YHRgtGMINC70Lgg0YHQvtGF0YDQsNC90LXQvdC90YvQtSDQvdCw0YHRgtGA0L7QudC60Lgg0LTQu9GPINGN0YLQvtCz0L4g0YjRgNC40YTRgtCwXG4gICAgbGV0IHNldHRpbmdzQXBwbGllZCA9IGZhbHNlO1xuICAgIFxuICAgIC8vINCf0YDQuNC+0YDQuNGC0LXRgiAxOiDQodC+0YXRgNCw0L3QtdC90L3Ri9C1INC90LDRgdGC0YDQvtC50LrQuCDQvtGB0LXQuSDQtNC70Y8g0LLQsNGA0LjQsNGC0LjQstC90L7Qs9C+INGI0YDQuNGE0YLQsFxuICAgIGlmIChmb250LmlzVmFyaWFibGVGb250ICYmIGZvbnQubGFzdFVzZWRWYXJpYWJsZVNldHRpbmdzKSB7XG4gICAgICBjb25zb2xlLmxvZygnW3NhZmVTZWxlY3RGb250XSDQktC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0YHQvtGF0YDQsNC90LXQvdC90YvQtSDQvtGB0Lg6JywgZm9udC5sYXN0VXNlZFZhcmlhYmxlU2V0dGluZ3MpO1xuICAgICAgc2V0VmFyaWFibGVTZXR0aW5ncyhmb250Lmxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncyk7XG4gICAgICAvLyDQn9GA0LjQvNC10L3Rj9C10Lwg0L3QsNGB0YLRgNC+0LnQutC4INGH0LXRgNC10Lcgc2V0VGltZW91dCDQtNC70Y8g0LrQvtGA0YDQtdC60YLQvdC+0Lkg0YDQsNCx0L7RgtGLXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKGFwcGx5VmFyaWFibGVTZXR0aW5ncykge1xuICAgICAgICAgIGFwcGx5VmFyaWFibGVTZXR0aW5ncyhmb250Lmxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncywgdHJ1ZSwgZm9udCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDApO1xuICAgICAgc2V0dGluZ3NBcHBsaWVkID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8g0J/RgNC40L7RgNC40YLQtdGCIDI6INCh0L7RhdGA0LDQvdC10L3QvdGL0Lkg0L/RgNC10YHQtdGCXG4gICAgZWxzZSBpZiAoZm9udC5sYXN0VXNlZFByZXNldE5hbWUgJiYgYXBwbHlQcmVzZXRTdHlsZSkge1xuICAgICAgY29uc29sZS5sb2coJ1tzYWZlU2VsZWN0Rm9udF0g0JLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGB0L7RhdGA0LDQvdC10L3QvdGL0Lkg0L/RgNC10YHQtdGCOicsIGZvbnQubGFzdFVzZWRQcmVzZXROYW1lKTtcbiAgICAgIC8vINCj0LHQuNGA0LDQtdC8IHNldFRpbWVvdXQgLSDQstGL0L/QvtC70L3Rj9C10Lwg0YHQuNC90YXRgNC+0L3QvdC+LCDRh9GC0L7QsdGLIGN1cnJlbnRXZWlnaHQvY3VycmVudFN0eWxlINC+0LHQvdC+0LLQuNC70LjRgdGMXG4gICAgICBhcHBseVByZXNldFN0eWxlKGZvbnQubGFzdFVzZWRQcmVzZXROYW1lLCBmb250KTtcbiAgICAgIHNldHRpbmdzQXBwbGllZCA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vINCV0YHQu9C4INC90LDRgdGC0YDQvtC50LrQuCDQvdC1INCx0YvQu9C4INCy0L7RgdGB0YLQsNC90L7QstC70LXQvdGLLCDQv9GA0LjQvNC10L3Rj9C10Lwg0LTQtdGE0L7Qu9GC0L3Ri9C1XG4gICAgaWYgKCFzZXR0aW5nc0FwcGxpZWQpIHtcbiAgICAgIGlmIChmb250LmlzVmFyaWFibGVGb250ICYmIGZvbnQudmFyaWFibGVBeGVzKSB7XG4gICAgICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LTQtdGE0L7Qu9GC0L3Ri9C1INC30L3QsNGH0LXQvdC40Y8g0LjQtyDRhdGD0LrQsFxuICAgICAgICBjb25zdCBkZWZhdWx0QXhlcyA9IGdldERlZmF1bHRBeGlzVmFsdWVzPy4oZm9udCkgfHwge307XG4gICAgICAgIGNvbnNvbGUubG9nKCdbc2FmZVNlbGVjdEZvbnRdINCf0YDQuNC80LXQvdGP0LXQvCDQtNC10YTQvtC70YLQvdGL0LUg0L7RgdC4INC00LvRjyDQstCw0YDQuNCw0YLQuNCy0L3QvtCz0L4g0YjRgNC40YTRgtCwOicsIGRlZmF1bHRBeGVzKTtcbiAgICAgICAgc2V0VmFyaWFibGVTZXR0aW5ncyhkZWZhdWx0QXhlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDQlNC70Y8g0YHRgtCw0YLQuNGH0LXRgdC60LjRhSDRiNGA0LjRhNGC0L7QsiDQvtGH0LjRidCw0LXQvCDQvdCw0YHRgtGA0L7QudC60Lgg0L7RgdC10LlcbiAgICAgICAgc2V0VmFyaWFibGVTZXR0aW5ncyh7fSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vINCf0YDQuNC80LXQvdGP0LXQvCDQsdCw0LfQvtCy0YvQuSDRgdGC0LjQu9GMIFJlZ3VsYXJcbiAgICAgIGlmIChhcHBseVByZXNldFN0eWxlKSB7XG4gICAgICAgIC8vINCj0LHQuNGA0LDQtdC8IHNldFRpbWVvdXQgLSDQstGL0L/QvtC70L3Rj9C10Lwg0YHQuNC90YXRgNC+0L3QvdC+XG4gICAgICAgIGFwcGx5UHJlc2V0U3R5bGUoJ1JlZ3VsYXInLCBmb250KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtzZXRTZWxlY3RlZEZvbnQsIHNldFZhcmlhYmxlU2V0dGluZ3MsIGdldERlZmF1bHRBeGlzVmFsdWVzLCBhcHBseVByZXNldFN0eWxlLCBhcHBseVZhcmlhYmxlU2V0dGluZ3NdKTtcbiAgXG4gIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDRgdGB0YvQu9C60YMg0L3QsCDRhNGD0L3QutGG0LjRjiDQtNC70Y8g0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40Y8g0LIg0LrQvtC70LHRjdC60LDRhVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNhZmVTZWxlY3RGb250UmVmLmN1cnJlbnQgPSBzYWZlU2VsZWN0Rm9udDtcbiAgfSwgW3NhZmVTZWxlY3RGb250XSk7XG5cbiAgLy8g0JzQtdC80L7QuNC30LjRgNC+0LLQsNC90L3QvtC1INC40LzRjyDQstGL0LHRgNCw0L3QvdC+0LPQviDQv9GA0LXRgdC10YLQsCAo0L3Rg9C20L3QviDQvtC/0YDQtdC00LXQu9C40YLRjCDQtNC+IHVzZUVmZmVjdClcbiAgY29uc3Qgc2VsZWN0ZWRQcmVzZXROYW1lID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICBpZiAoIXNlbGVjdGVkRm9udCkgcmV0dXJuICdSZWd1bGFyJzsgLy8g0J/QviDRg9C80L7Qu9GH0LDQvdC40Y5cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFtzZWxlY3RlZFByZXNldE5hbWVdINCS0YvRh9C40YHQu9GP0LXQvCDQtNC70Y8g0YjRgNC40YTRgtCwOiAke3NlbGVjdGVkRm9udC5uYW1lfWAsIHtcbiAgICAgICAgbGFzdFVzZWRQcmVzZXROYW1lOiBzZWxlY3RlZEZvbnQubGFzdFVzZWRQcmVzZXROYW1lLFxuICAgICAgICBjdXJyZW50V2VpZ2h0OiBzZWxlY3RlZEZvbnQuY3VycmVudFdlaWdodCxcbiAgICAgICAgY3VycmVudFN0eWxlOiBzZWxlY3RlZEZvbnQuY3VycmVudFN0eWxlLFxuICAgICAgICBpc1ZhcmlhYmxlRm9udDogc2VsZWN0ZWRGb250LmlzVmFyaWFibGVGb250LFxuICAgICAgICB2YXJpYWJsZVNldHRpbmdzOiB2YXJpYWJsZVNldHRpbmdzXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8g0J/RgNC40L7RgNC40YLQtdGCIDE6INCU0LvRjyDRgdGC0LDRgtC40YfQtdGB0LrQuNGFINGI0YDQuNGE0YLQvtCyINC40YHQv9C+0LvRjNC30YPQtdC8IGN1cnJlbnRXZWlnaHQvY3VycmVudFN0eWxlXG4gICAgICBpZiAoIXNlbGVjdGVkRm9udC5pc1ZhcmlhYmxlRm9udCkge1xuICAgICAgICAvLyDQodC90LDRh9Cw0LvQsCDQv9GL0YLQsNC10LzRgdGPINC+0L/RgNC10LTQtdC70LjRgtGMINC/0L4g0YLQtdC60YPRidC10LzRgyDQstC10YHRgyDQuCDRgdGC0LjQu9GOXG4gICAgICAgIGlmIChzZWxlY3RlZEZvbnQuY3VycmVudFdlaWdodCAhPT0gdW5kZWZpbmVkICYmIHNlbGVjdGVkRm9udC5jdXJyZW50U3R5bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnN0IHN0eWxlSW5mbyA9IGZpbmRTdHlsZUluZm9CeVdlaWdodEFuZFN0eWxlKFxuICAgICAgICAgICAgICBzZWxlY3RlZEZvbnQuY3VycmVudFdlaWdodCwgXG4gICAgICAgICAgICAgIHNlbGVjdGVkRm9udC5jdXJyZW50U3R5bGVcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IHByZXNldE5hbWUgPSBzdHlsZUluZm8/Lm5hbWUgfHwgJ1JlZ3VsYXInO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbc2VsZWN0ZWRQcmVzZXROYW1lXSDQodGC0LDRgtC40YfQtdGB0LrQuNC5INGI0YDQuNGE0YIg0L/QviDRgtC10LrRg9GJ0LXQvNGDINCy0LXRgdGDL9GB0YLQuNC70Y46ICR7cHJlc2V0TmFtZX0gKCR7c2VsZWN0ZWRGb250LmN1cnJlbnRXZWlnaHR9LCAke3NlbGVjdGVkRm9udC5jdXJyZW50U3R5bGV9KWApO1xuICAgICAgICAgIHJldHVybiBwcmVzZXROYW1lO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDQldGB0LvQuCBjdXJyZW50V2VpZ2h0L2N1cnJlbnRTdHlsZSDQvdC1INGD0YHRgtCw0L3QvtCy0LvQtdC90YssINC40YHQv9C+0LvRjNC30YPQtdC8INGB0L7RhdGA0LDQvdC10L3QvdGL0Lkg0L/RgNC10YHQtdGCXG4gICAgICAgIGlmIChzZWxlY3RlZEZvbnQubGFzdFVzZWRQcmVzZXROYW1lKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtzZWxlY3RlZFByZXNldE5hbWVdINCh0YLQsNGC0LjRh9C10YHQutC40Lkg0YjRgNC40YTRgiDRgSDRgdC+0YXRgNCw0L3QtdC90L3Ri9C8INC/0YDQtdGB0LXRgtC+0Lw6ICR7c2VsZWN0ZWRGb250Lmxhc3RVc2VkUHJlc2V0TmFtZX1gKTtcbiAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRGb250Lmxhc3RVc2VkUHJlc2V0TmFtZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g0J/QviDRg9C80L7Qu9GH0LDQvdC40Y5cbiAgICAgICAgY29uc29sZS5sb2coYFtzZWxlY3RlZFByZXNldE5hbWVdINCh0YLQsNGC0LjRh9C10YHQutC40Lkg0YjRgNC40YTRgiDQv9C+INGD0LzQvtC70YfQsNC90LjRjjogUmVndWxhcmApO1xuICAgICAgICByZXR1cm4gJ1JlZ3VsYXInO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDQn9GA0LjQvtGA0LjRgtC10YIgMjog0JTQu9GPINCy0LDRgNC40LDRgtC40LLQvdGL0YUg0YjRgNC40YTRgtC+0LIg0YEg0L3QsNGB0YLRgNC+0LnQutCw0LzQuCDQvtGB0LXQuSwg0L7Qv9GA0LXQtNC10LvRj9C10Lwg0L/RgNC10YHQtdGCINC/0L4g0L7RgdGP0LxcbiAgICAgIGlmIChzZWxlY3RlZEZvbnQuaXNWYXJpYWJsZUZvbnQgJiYgdmFyaWFibGVTZXR0aW5ncyAmJiBPYmplY3Qua2V5cyh2YXJpYWJsZVNldHRpbmdzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vINCf0YvRgtCw0LXQvNGB0Y8g0L3QsNC50YLQuCDQv9GA0LXRgdC10YIsINC60L7RgtC+0YDRi9C5INGB0L7QvtGC0LLQtdGC0YHRgtCy0YPQtdGCINGC0LXQutGD0YnQuNC8INC90LDRgdGC0YDQvtC50LrQsNC8INC+0YHQtdC5XG4gICAgICAgIGNvbnN0IGN1cnJlbnRXZWlnaHQgPSB2YXJpYWJsZVNldHRpbmdzLndnaHQgfHwgNDAwO1xuICAgICAgICBjb25zdCBjdXJyZW50U3R5bGUgPSAodmFyaWFibGVTZXR0aW5ncy5pdGFsID09PSAxIHx8ICh2YXJpYWJsZVNldHRpbmdzLnNsbnQgJiYgdmFyaWFibGVTZXR0aW5ncy5zbG50IDwgMCkpID8gJ2l0YWxpYycgOiAnbm9ybWFsJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG1hdGNoZWRQcmVzZXQgPSBmaW5kU3R5bGVJbmZvQnlXZWlnaHRBbmRTdHlsZShjdXJyZW50V2VpZ2h0LCBjdXJyZW50U3R5bGUpO1xuICAgICAgICBpZiAobWF0Y2hlZFByZXNldCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbc2VsZWN0ZWRQcmVzZXROYW1lXSDQktCw0YDQuNCw0YLQuNCy0L3Ri9C5INGI0YDQuNGE0YIg0L/QviDQvtGB0Y/QvDogJHttYXRjaGVkUHJlc2V0Lm5hbWV9YCk7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoZWRQcmVzZXQubmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDQn9GA0LjQvtGA0LjRgtC10YIgMzog0JXRgdC70Lgg0LXRgdGC0Ywg0YHQvtGF0YDQsNC90LXQvdC90YvQuSDQv9GA0LXRgdC10YIsINC40YHQv9C+0LvRjNC30YPQtdC8INC10LPQvlxuICAgICAgaWYgKHNlbGVjdGVkRm9udC5sYXN0VXNlZFByZXNldE5hbWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFtzZWxlY3RlZFByZXNldE5hbWVdINCh0L7RhdGA0LDQvdC10L3QvdGL0Lkg0L/RgNC10YHQtdGCOiAke3NlbGVjdGVkRm9udC5sYXN0VXNlZFByZXNldE5hbWV9YCk7XG4gICAgICAgIHJldHVybiBzZWxlY3RlZEZvbnQubGFzdFVzZWRQcmVzZXROYW1lO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDQn9GA0LjQvtGA0LjRgtC10YIgNDog0J/QviDRg9C80L7Qu9GH0LDQvdC40Y4gUmVndWxhclxuICAgICAgY29uc29sZS5sb2coYFtzZWxlY3RlZFByZXNldE5hbWVdINCf0L4g0YPQvNC+0LvRh9Cw0L3QuNGOOiBSZWd1bGFyYCk7XG4gICAgICByZXR1cm4gJ1JlZ3VsYXInO1xuICB9LCBbc2VsZWN0ZWRGb250LCB2YXJpYWJsZVNldHRpbmdzXSk7XG5cbiAgLy8gPDw8INCh0L7RhdGA0LDQvdC10L3QuNC1INC90LDRgdGC0YDQvtC10Log0L/RgNC4INC/0LXRgNC10LrQu9GO0YfQtdC90LjQuCDRiNGA0LjRhNGC0L7QsiA+Pj5cbiAgY29uc3QgcHJldmlvdXNTZWxlY3RlZEZvbnRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHByZXZpb3VzVmFyaWFibGVTZXR0aW5nc1JlZiA9IHVzZVJlZih7fSk7XG4gIGNvbnN0IHByZXZpb3VzUHJlc2V0TmFtZVJlZiA9IHVzZVJlZignUmVndWxhcicpO1xuICBcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyDQldGB0LvQuCDQtdGB0YLRjCDQv9GA0LXQtNGL0LTRg9GJ0LjQuSDRiNGA0LjRhNGCINC4INC+0L0g0L7RgtC70LjRh9Cw0LXRgtGB0Y8g0L7RgiDRgtC10LrRg9GJ0LXQs9C+XG4gICAgaWYgKHByZXZpb3VzU2VsZWN0ZWRGb250UmVmLmN1cnJlbnQgJiYgXG4gICAgICAgIHByZXZpb3VzU2VsZWN0ZWRGb250UmVmLmN1cnJlbnQuaWQgIT09IHNlbGVjdGVkRm9udD8uaWQpIHtcbiAgICAgIFxuICAgICAgY29uc3QgcHJldkZvbnQgPSBwcmV2aW91c1NlbGVjdGVkRm9udFJlZi5jdXJyZW50O1xuICAgICAgY29uc3QgcHJldlZhcmlhYmxlU2V0dGluZ3MgPSBwcmV2aW91c1ZhcmlhYmxlU2V0dGluZ3NSZWYuY3VycmVudDtcbiAgICAgIGNvbnN0IHByZXZQcmVzZXROYW1lID0gcHJldmlvdXNQcmVzZXROYW1lUmVmLmN1cnJlbnQ7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBbRm9udFN3aXRjaF0g0KHQvtGF0YDQsNC90Y/QtdC8INC90LDRgdGC0YDQvtC50LrQuCDQtNC70Y8g0L/RgNC10LTRi9C00YPRidC10LPQviDRiNGA0LjRhNGC0LA6ICR7cHJldkZvbnQubmFtZX1gKTtcbiAgICAgIFxuICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC90LDRgdGC0YDQvtC50LrQuCDQv9GA0LXQtNGL0LTRg9GJ0LXQs9C+INGI0YDQuNGE0YLQsCDQsiDQtdCz0L4g0L7QsdGK0LXQutGCICjQtNC70Y8g0YHQtdGB0YHQuNC4KVxuICAgICAgY29uc3QgdXBkYXRlZEZvbnRzID0gZm9udHMubWFwKGZvbnQgPT4ge1xuICAgICAgICBpZiAoZm9udC5pZCA9PT0gcHJldkZvbnQuaWQpIHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkRm9udCA9IHsgLi4uZm9udCB9O1xuICAgICAgICAgIGxldCBkYlVwZGF0ZXMgPSB7fTsgLy8g0J7QsdGK0LXQutGCINC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyDQsiBJbmRleGVkREJcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0L3QsNGB0YLRgNC+0LnQutC4INCyINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDRgtC40L/QsCDQn9Cg0JXQlNCr0JTQo9Cp0JXQk9CeINGI0YDQuNGE0YLQsFxuICAgICAgICAgIGlmIChwcmV2Rm9udC5pc1ZhcmlhYmxlRm9udCAmJiBPYmplY3Qua2V5cyhwcmV2VmFyaWFibGVTZXR0aW5ncykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdXBkYXRlZEZvbnQubGFzdFVzZWRWYXJpYWJsZVNldHRpbmdzID0geyAuLi5wcmV2VmFyaWFibGVTZXR0aW5ncyB9O1xuICAgICAgICAgICAgdXBkYXRlZEZvbnQubGFzdFVzZWRQcmVzZXROYW1lID0gbnVsbDsgLy8g0J7Rh9C40YnQsNC10Lwg0L/RgNC10YHQtdGCLCDQtdGB0LvQuCDQtdGB0YLRjCDQvtGB0LhcbiAgICAgICAgICAgIGRiVXBkYXRlcy5sYXN0VXNlZFZhcmlhYmxlU2V0dGluZ3MgPSB7IC4uLnByZXZWYXJpYWJsZVNldHRpbmdzIH07XG4gICAgICAgICAgICBkYlVwZGF0ZXMubGFzdFVzZWRQcmVzZXROYW1lID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRm9udFN3aXRjaF0g0KHQvtGF0YDQsNC90LXQvdGLINC+0YHQuCDQtNC70Y8gJHtwcmV2Rm9udC5uYW1lfTpgLCB1cGRhdGVkRm9udC5sYXN0VXNlZFZhcmlhYmxlU2V0dGluZ3MpO1xuICAgICAgICAgIH0gZWxzZSBpZiAocHJldlByZXNldE5hbWUgJiYgcHJldlByZXNldE5hbWUgIT09ICdSZWd1bGFyJykge1xuICAgICAgICAgICAgdXBkYXRlZEZvbnQubGFzdFVzZWRQcmVzZXROYW1lID0gcHJldlByZXNldE5hbWU7XG4gICAgICAgICAgICB1cGRhdGVkRm9udC5sYXN0VXNlZFZhcmlhYmxlU2V0dGluZ3MgPSBudWxsOyAvLyDQntGH0LjRidCw0LXQvCDQvtGB0LgsINC10YHQu9C4INC10YHRgtGMINC/0YDQtdGB0LXRglxuICAgICAgICAgICAgZGJVcGRhdGVzLmxhc3RVc2VkUHJlc2V0TmFtZSA9IHByZXZQcmVzZXROYW1lO1xuICAgICAgICAgICAgZGJVcGRhdGVzLmxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncyA9IG51bGw7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0ZvbnRTd2l0Y2hdINCh0L7RhdGA0LDQvdC10L0g0L/RgNC10YHQtdGCINC00LvRjyAke3ByZXZGb250Lm5hbWV9OmAsIHVwZGF0ZWRGb250Lmxhc3RVc2VkUHJlc2V0TmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCBjdXJyZW50V2VpZ2h0INC4IGN1cnJlbnRTdHlsZSDQtdGB0LvQuCDQvtC90Lgg0LXRgdGC0YxcbiAgICAgICAgICBpZiAocHJldkZvbnQuY3VycmVudFdlaWdodCAhPT0gdW5kZWZpbmVkICYmIHByZXZGb250LmN1cnJlbnRTdHlsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB1cGRhdGVkRm9udC5jdXJyZW50V2VpZ2h0ID0gcHJldkZvbnQuY3VycmVudFdlaWdodDtcbiAgICAgICAgICAgIHVwZGF0ZWRGb250LmN1cnJlbnRTdHlsZSA9IHByZXZGb250LmN1cnJlbnRTdHlsZTtcbiAgICAgICAgICAgIGRiVXBkYXRlcy5jdXJyZW50V2VpZ2h0ID0gcHJldkZvbnQuY3VycmVudFdlaWdodDtcbiAgICAgICAgICAgIGRiVXBkYXRlcy5jdXJyZW50U3R5bGUgPSBwcmV2Rm9udC5jdXJyZW50U3R5bGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQsiBJbmRleGVkREIg0LXRgdC70Lgg0LXRgdGC0Ywg0YfRgtC+INGB0L7RhdGA0LDQvdGP0YLRjFxuICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhkYlVwZGF0ZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNhdmVGb250U2V0dGluZ3MocHJldkZvbnQuaWQsIGRiVXBkYXRlcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB1cGRhdGVkRm9udDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9udDtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBzZXRGb250cyh1cGRhdGVkRm9udHMpO1xuICAgICAgXG4gICAgICAvLyDQotCw0LrQttC1INGB0L7RhdGA0LDQvdGP0LXQvCDQsiBsb2NhbFN0b3JhZ2UgKNCz0LvQvtCx0LDQu9GM0L3Ri9C1INC90LDRgdGC0YDQvtC50LrQuClcbiAgICAgIGlmIChwcmV2Rm9udC5pc1ZhcmlhYmxlRm9udCAmJiBPYmplY3Qua2V5cyhwcmV2VmFyaWFibGVTZXR0aW5ncykubGVuZ3RoID4gMCkge1xuICAgICAgICBzYXZlTGFzdFZhcmlhYmxlU2V0dGluZ3MocHJldlZhcmlhYmxlU2V0dGluZ3MpO1xuICAgICAgfSBlbHNlIGlmIChwcmV2UHJlc2V0TmFtZSAmJiBwcmV2UHJlc2V0TmFtZSAhPT0gJ1JlZ3VsYXInKSB7XG4gICAgICAgIHNhdmVMYXN0UHJlc2V0TmFtZShwcmV2UHJlc2V0TmFtZSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDRgdGB0YvQu9C60Lgg0L3QsCDRgtC10LrRg9GJ0LjQtSDQvdCw0YHRgtGA0L7QudC60Lgg0LTQu9GPINGB0LvQtdC00YPRjtGJ0LXQs9C+INC/0LXRgNC10LrQu9GO0YfQtdC90LjRj1xuICAgIHByZXZpb3VzU2VsZWN0ZWRGb250UmVmLmN1cnJlbnQgPSBzZWxlY3RlZEZvbnQ7XG4gICAgcHJldmlvdXNWYXJpYWJsZVNldHRpbmdzUmVmLmN1cnJlbnQgPSB7IC4uLnZhcmlhYmxlU2V0dGluZ3MgfTtcbiAgICBwcmV2aW91c1ByZXNldE5hbWVSZWYuY3VycmVudCA9IHNlbGVjdGVkUHJlc2V0TmFtZTtcbiAgICBcbiAgICAvLyDQodC+0YXRgNCw0L3Rj9C10LwgSUQg0LLRi9Cx0YDQsNC90L3QvtCz0L4g0YjRgNC40YTRgtCwXG4gICAgaWYgKHNlbGVjdGVkRm9udD8uaWQpIHtcbiAgICAgIHNhdmVTZWxlY3RlZEZvbnRJZChzZWxlY3RlZEZvbnQuaWQpO1xuICAgIH1cbiAgfSwgW3NlbGVjdGVkRm9udCwgZm9udHMsIHNldEZvbnRzLCBzYXZlU2VsZWN0ZWRGb250SWQsIHNhdmVMYXN0VmFyaWFibGVTZXR0aW5ncywgc2F2ZUxhc3RQcmVzZXROYW1lLCBzYXZlRm9udFNldHRpbmdzLCB2YXJpYWJsZVNldHRpbmdzLCBzZWxlY3RlZFByZXNldE5hbWVdKTtcblxuICAvLyDQo9Cx0LjRgNCw0LXQvCDRgdGC0LDRgNGL0Lkg0LrQvtC0IGxvYWRJbml0aWFsU3RhdGUsINGC0LDQuiDQutCw0Log0YLQtdC/0LXRgNGMIHVzZUZvbnRQZXJzaXN0ZW5jZSDRgNCw0LHQvtGC0LDQtdGCINC90LDQv9GA0Y/QvNGD0Y5cblxuICAvLyDQnNC10LzQvtC40LfQuNGA0L7QstCw0L3QvdGL0LUg0LTQvtGB0YLRg9C/0L3Ri9C1INGB0YLQuNC70Lgg0Lgg0LjQvNGPINCy0YvQsdGA0LDQvdC90L7Qs9C+INC/0YDQtdGB0LXRgtCwXG4gIGNvbnN0IGF2YWlsYWJsZVN0eWxlcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgaWYgKCFzZWxlY3RlZEZvbnQpIHJldHVybiBbXTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1t1c2VNZW1vIGF2YWlsYWJsZVN0eWxlc10gc2VsZWN0ZWRGb250OicsIHNlbGVjdGVkRm9udD8ubmFtZSwgJ3NlbGVjdGVkRm9udC5hdmFpbGFibGVTdHlsZXM6Jywgc2VsZWN0ZWRGb250Py5hdmFpbGFibGVTdHlsZXMpO1xuICAgICAgXG4gICAgICAvLyDQo9C00LDQu9GP0LXQvCDRgdC/0LXRhtC40LDQu9GM0L3Rg9GOINC70L7Qs9C40LrRgyDQtNC70Y8gR29vZ2xlIEZvbnRzXG4gICAgICAvKlxuICAgICAgaWYgKHNlbGVjdGVkRm9udC5zb3VyY2UgPT09ICdnb29nbGUnKSB7XG4gICAgICAgIC8vINCU0LvRjyBHb29nbGUg0YjRgNC40YTRgtC+0LIg0LHQtdGA0LXQvCDRgdGC0LjQu9C4INC40Lcg0LrQsNGA0YLRiyDQuNC70Lgg0LTQtdGE0L7Qu9GC0L3Ri9C1XG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IEdPT0dMRV9GT05UX1NUWUxFU19NQVBbc2VsZWN0ZWRGb250Lm5hbWVdIHx8IFtcbiAgICAgICAgICAgIFBSRVNFVF9TVFlMRVMuZmluZChwID0+IHAubmFtZSA9PT0gJ1JlZ3VsYXInKSxcbiAgICAgICAgICAgIFBSRVNFVF9TVFlMRVMuZmluZChwID0+IHAubmFtZSA9PT0gJ0JvbGQnKVxuICAgICAgICBdLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgcmV0dXJuIHN0eWxlcztcbiAgICAgIH0gZWxzZSAqLyBcbiAgICAgIFxuICAgICAgLy8g0JXRgdC70Lgg0YjRgNC40YTRgiDQstCw0YDQuNCw0YLQuNCy0L3Ri9C5LCDQstC+0LfQstGA0LDRidCw0LXQvCDQstGB0LUg0L/RgNC10YHQtdGC0YsgKNC00LvRjyBVSSDQstGL0LHQvtGA0LApXG4gICAgICBpZiAoc2VsZWN0ZWRGb250LmlzVmFyaWFibGVGb250KSB7XG4gICAgICAgICAgcmV0dXJuIFBSRVNFVF9TVFlMRVM7XG4gICAgICAvLyDQldGB0LvQuCDRgyDRiNGA0LjRhNGC0LAg0LXRgdGC0Ywg0L/QvtC70LUgYXZhaWxhYmxlU3R5bGVzICjQuNC3IEZvbnRzb3VyY2Ug0LjQu9C4INC70L7QutCw0LvRjNC90L7Qs9C+INC/0LDRgNGB0LjQvdCz0LApXG4gICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkRm9udC5hdmFpbGFibGVTdHlsZXMgJiYgQXJyYXkuaXNBcnJheShzZWxlY3RlZEZvbnQuYXZhaWxhYmxlU3R5bGVzKSkge1xuICAgICAgICAgIC8vINCj0LHQtdC00LjQvNGB0Y8sINGH0YLQviDRgdGC0LjQu9C4INC40LzQtdGO0YIg0L3Rg9C20L3Ri9C5INGE0L7RgNC80LDRgiB7bmFtZSwgd2VpZ2h0LCBzdHlsZX1cbiAgICAgICAgICAvLyDQldGB0LvQuCDRhNC+0YDQvNCw0YIg0YPQttC1INC/0YDQsNCy0LjQu9GM0L3Ri9C5LCDQv9GA0L7RgdGC0L4g0LLQvtC30LLRgNCw0YnQsNC10LxcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRGb250LmF2YWlsYWJsZVN0eWxlcy5ldmVyeShzID0+IHMubmFtZSAmJiBzLndlaWdodCAmJiBzLnN0eWxlKSkge1xuICAgICAgICAgIHJldHVybiBzZWxlY3RlZEZvbnQuYXZhaWxhYmxlU3R5bGVzO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDQldGB0LvQuCDRhNC+0YDQvNCw0YIg0LTRgNGD0LPQvtC5ICjQvdCw0L/RgNC40LzQtdGALCDQuNC3IEZvbnRzb3VyY2UgbWV0YWRhdGEpLCDQvdGD0LbQvdC+INCx0YPQtNC10YIg0LXQs9C+INC/0YDQtdC+0LHRgNCw0LfQvtCy0LDRgtGMXG4gICAgICAgICAgLy8g0J/QvtC60LAg0L/RgNC+0YHRgtC+INCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC/0YPRgdGC0L7QuSDQvNCw0YHRgdC40LIg0LjQu9C4INCx0LDQt9C+0LLRi9C1LCDQtdGB0LvQuCDQv9GA0LXQvtCx0YDQsNC30L7QstCw0L3QuNC1INC90LUg0YDQtdCw0LvQuNC30L7QstCw0L3QvlxuICAgICAgICAgIC8vIFRPRE86INCU0L7QsdCw0LLQuNGC0Ywg0L/RgNC10L7QsdGA0LDQt9C+0LLQsNC90LjQtSDQuNC3INGE0L7RgNC80LDRgtCwIEZvbnRzb3VyY2UgbWV0YWRhdGEsINC10YHQu9C4INC+0L0g0L7RgtC70LjRh9Cw0LXRgtGB0Y9cbiAgICAgICAgICBjb25zb2xlLndhcm4oJ9Ck0L7RgNC80LDRgiBhdmFpbGFibGVTdHlsZXMg0L7RgtC70LjRh9Cw0LXRgtGB0Y8g0L7RgiDQvtC20LjQtNCw0LXQvNC+0LPQviwg0YLRgNC10LHRg9C10YLRgdGPINC/0YDQtdC+0LHRgNCw0LfQvtCy0LDQvdC40LUuJyk7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgUFJFU0VUX1NUWUxFUy5maW5kKHAgPT4gcC5uYW1lID09PSAnUmVndWxhcicpLFxuICAgICAgICAgICAgICBQUkVTRVRfU1RZTEVTLmZpbmQocCA9PiBwLm5hbWUgPT09ICdCb2xkJylcbiAgICAgICAgICBdLmZpbHRlcihCb29sZWFuKTtcbiAgICAgIC8vINCY0L3QsNGH0LUg0LLQvtC30LLRgNCw0YnQsNC10Lwg0LHQsNC30L7QstGL0LUg0YHRgtC40LvQuFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICBQUkVTRVRfU1RZTEVTLmZpbmQocCA9PiBwLm5hbWUgPT09ICdSZWd1bGFyJyksXG4gICAgICAgICAgICAgIFBSRVNFVF9TVFlMRVMuZmluZChwID0+IHAubmFtZSA9PT0gJ0JvbGQnKVxuICAgICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgfVxuICB9LCBbc2VsZWN0ZWRGb250XSk7XG5cbiAgLy8g0JzQtdC80L7QuNC30LjRgNC+0LLQsNC90L3Ri9C5INGE0LvQsNCzINCy0LDRgNC40LDRgtC40LLQvdC+0LPQviDRiNGA0LjRhNGC0LAgKNC/0LXRgNC10L3QtdGB0LXQvdC+INCyIHVzZUZvbnRDc3MpXG4gIFxuICAvLyDQnNC10LzQvtC40LfQuNGA0L7QstCw0L3QvdC+0LUg0LjQvNGPINGI0YDQuNGE0YLQsFxuICBjb25zdCBzZWxlY3RlZEZvbnROYW1lID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHNlbGVjdGVkRm9udCA/IHNlbGVjdGVkRm9udC5uYW1lIDogJyc7XG4gIH0sIFtzZWxlY3RlZEZvbnRdKTtcbiAgXG4gIC8vINCc0LXQvNC+0LjQt9C40YDQvtCy0LDQvdC90YvQtSDQvtGB0Lgg0YjRgNC40YTRgtCwXG4gIGNvbnN0IHNlbGVjdGVkRm9udEF4ZXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gc2VsZWN0ZWRGb250ICYmIHNlbGVjdGVkRm9udC52YXJpYWJsZUF4ZXMgPyBzZWxlY3RlZEZvbnQudmFyaWFibGVBeGVzIDoge307XG4gIH0sIFtzZWxlY3RlZEZvbnRdKTtcbiAgXG4gIC8qKlxuICAgKiDQodC+0LfQtNCw0LXRgiDRgdGC0LDRgtC40YfQtdGB0LrRg9GOINCy0LXRgNGB0LjRjiDQstCw0YDQuNCw0YLQuNCy0L3QvtCz0L4g0YjRgNC40YTRgtCwINGBINGC0LXQutGD0YnQuNC80Lgg0L3QsNGB0YLRgNC+0LnQutCw0LzQuCDQvtGB0LXQuVxuICAgKiBcbiAgICogQGV4YW1wbGVcbiAgICogLy8g0KHQvtC30LTQsNC90LjQtSDRgdGC0LDRgtC40YfQtdGB0LrQvtC5INCy0LXRgNGB0LjQuCDRgtC10LrRg9GJ0LXQs9C+INGI0YDQuNGE0YLQsFxuICAgKiBjb25zdCBzdGF0aWNGb250ID0gY3JlYXRlU3RhdGljRm9udCgpO1xuICAgKiBjb25zb2xlLmxvZyhzdGF0aWNGb250Lm5hbWUpOyAvLyDQmNC80Y8g0YHRgtCw0YLQuNGH0LXRgdC60L7Qs9C+INGI0YDQuNGE0YLQsFxuICAgKiBcbiAgICogQHJldHVybnMge09iamVjdHx1bmRlZmluZWR9INCe0LHRitC10LrRgiDRgdGC0LDRgtC40YfQtdGB0LrQvtCz0L4g0YjRgNC40YTRgtCwINC40LvQuCB1bmRlZmluZWQsINC10YHQu9C4INC90LXRgiDQstGL0LHRgNCw0L3QvdC+0LPQviDRiNGA0LjRhNGC0LBcbiAgICovXG4gIGNvbnN0IGNyZWF0ZVN0YXRpY0ZvbnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmV0dXJuIGNyZWF0ZVN0YXRpY0ZvbnRGcm9tRXhwb3J0SG9vayhzZWxlY3RlZEZvbnQsIHNlbGVjdGVkRm9udE5hbWUsIHZhcmlhYmxlU2V0dGluZ3MsIHNldEV4cG9ydGVkRm9udCk7XG4gIH0sIFtjcmVhdGVTdGF0aWNGb250RnJvbUV4cG9ydEhvb2ssIHNlbGVjdGVkRm9udCwgc2VsZWN0ZWRGb250TmFtZSwgdmFyaWFibGVTZXR0aW5ncywgc2V0RXhwb3J0ZWRGb250XSk7XG4gIFxuICAvKipcbiAgICog0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdGCINC30LDQs9GA0YPQttC10L3QvdGL0LUg0YjRgNC40YTRgtGLOiDQsNC90LDQu9C40LfQuNGA0YPQtdGCINGE0LDQudC70YssINC+0L/RgNC10LTQtdC70Y/QtdGCINGF0LDRgNCw0LrRgtC10YDQuNGB0YLQuNC60Lgg0LhcbiAgICog0LTQvtCx0LDQstC70Y/QtdGCINGI0YDQuNGE0YLRiyDQsiDRgdC+0YHRgtC+0Y/QvdC40LUg0L/RgNC40LvQvtC20LXQvdC40Y9cbiAgICogXG4gICAqIEBleGFtcGxlXG4gICAqIC8vINCe0LHRgNCw0LHQvtGC0LrQsCDRiNGA0LjRhNGC0L7QsiDQuNC3IGlucHV0W3R5cGU9XCJmaWxlXCJdXG4gICAqIGNvbnN0IGhhbmRsZUZpbGVVcGxvYWQgPSAoZSkgPT4ge1xuICAgKiAgIGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShlLnRhcmdldC5maWxlcykubWFwKGZpbGUgPT4gKHtcbiAgICogICAgIGZpbGUsXG4gICAqICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAqICAgICB1cmw6IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSlcbiAgICogICB9KSk7XG4gICAqICAgaGFuZGxlRm9udHNVcGxvYWRlZChmaWxlcyk7XG4gICAqIH07XG4gICAqIFxuICAgKiBAcGFyYW0ge0FycmF5fSBuZXdGb250cyAtINCc0LDRgdGB0LjQsiDQvtCx0YrQtdC60YLQvtCyINGBINC40L3RhNC+0YDQvNCw0YbQuNC10Lkg0L4g0L3QvtCy0YvRhSDRiNGA0LjRhNGC0LDRhVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIGNvbnN0IGhhbmRsZUZvbnRzVXBsb2FkZWQgPSB1c2VDYWxsYmFjayhhc3luYyAobmV3Rm9udHMpID0+IHtcbiAgICBjb25zb2xlLmxvZygnW2hhbmRsZUZvbnRzVXBsb2FkZWRdINCf0L7Qu9GD0YfQtdC90Ysg0YjRgNC40YTRgtGLOicsIG5ld0ZvbnRzKTtcbiAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCDRhNGD0L3QutGG0LjRjiDQuNC3IHVzZUZvbnRMb2FkZXJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVMb2NhbEZvbnRzVXBsb2FkKG5ld0ZvbnRzKTtcbiAgICBjb25zb2xlLmxvZygnW2hhbmRsZUZvbnRzVXBsb2FkZWRdIGhhbmRsZUxvY2FsRm9udHNVcGxvYWQg0LfQsNCy0LXRgNGI0LXQvScpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sIFtoYW5kbGVMb2NhbEZvbnRzVXBsb2FkXSk7XG4gIFxuICAvKipcbiAgICog0KPQtNCw0LvRj9C10YIg0YjRgNC40YTRgiDQuCDQvtGB0LLQvtCx0L7QttC00LDQtdGCINGA0LXRgdGD0YDRgdGLXG4gICAqINCV0YHQu9C4INGD0LTQsNC70Y/QtdGC0YHRjyDRgtC10LrRg9GJ0LjQuSDQstGL0LHRgNCw0L3QvdGL0Lkg0YjRgNC40YTRgiwg0LLRi9Cx0LjRgNCw0LXRgiDRgdC70LXQtNGD0Y7RidC40Lkg0LTQvtGB0YLRg9C/0L3Ri9C5XG4gICAqIFxuICAgKiBAZXhhbXBsZVxuICAgKiAvLyDQmtC90L7Qv9C60LAg0YPQtNCw0LvQtdC90LjRjyDRiNGA0LjRhNGC0LBcbiAgICogPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiByZW1vdmVGb250KGZvbnQuaWQpfT5cbiAgICogICDQo9C00LDQu9C40YLRjFxuICAgKiA8L2J1dHRvbj5cbiAgICogXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb250SWQgLSBJRCDRiNGA0LjRhNGC0LAg0LTQu9GPINGD0LTQsNC70LXQvdC40Y9cbiAgICovXG4gIGNvbnN0IHJlbW92ZUZvbnQgPSB1c2VDYWxsYmFjaygoZm9udElkKSA9PiB7XG4gICAgbGV0IHJlbW92ZWRGb250RmFtaWx5ID0gbnVsbDsgXG5cbiAgICBzZXRGb250cyhwcmV2ID0+IHtcbiAgICAgIGNvbnN0IGZvbnRUb1JlbW92ZSA9IHByZXYuZmluZChmID0+IGYuaWQgPT09IGZvbnRJZCk7XG4gICAgICBpZiAoZm9udFRvUmVtb3ZlKSB7XG4gICAgICAgICByZW1vdmVkRm9udEZhbWlseSA9IGZvbnRUb1JlbW92ZS5mb250RmFtaWx5OyAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0LjQvNGPINC00LvRjyDQvtGH0LjRgdGC0LrQuFxuICAgICAgICAgaWYgKGZvbnRUb1JlbW92ZS51cmwpIHtcbiAgICAgICAgLy8g0J7RgdCy0L7QsdC+0LbQtNCw0LXQvCBVUkwg0LTQu9GPINC/0YDQtdC00L7RgtCy0YDQsNGJ0LXQvdC40Y8g0YPRgtC10YfQtdC6INC/0LDQvNGP0YLQuFxuICAgICAgICAgICAgIHJldm9rZU9iamVjdFVSTChmb250VG9SZW1vdmUudXJsKTtcbiAgICAgICAgIH1cbiAgICAgICAgIC8vIDw8PCDQo9C00LDQu9GP0LXQvCDQuNC3IEluZGV4ZWREQiA+Pj5cbiAgICAgICAgIGRlbGV0ZUZvbnREQihmb250SWQpLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbREJdINCe0YjQuNCx0LrQsCDRg9C00LDQu9C10L3QuNGPINGI0YDQuNGE0YLQsCAke2ZvbnRJZH0g0LjQtyBEQjpgLCBlcnIpO1xuICAgICAgICAgICAgdG9hc3QuZXJyb3IoJ9Ce0YjQuNCx0LrQsCDRg9C00LDQu9C10L3QuNGPINGI0YDQuNGE0YLQsCDQuNC3INCx0LDQt9GLINC00LDQvdC90YvRhS4nKTtcbiAgICAgICAgICAgIC8vINCn0YLQviDQtNC10LvQsNGC0Ywg0LIg0Y3RgtC+0Lwg0YHQu9GD0YfQsNC1PyDQktC+0LfQvNC+0LbQvdC+LCDQvdC40YfQtdCz0L4sINGI0YDQuNGE0YIg0L7RgdGC0LDQvdC10YLRgdGPINCyIERCLlxuICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHVwZGF0ZWRGb250cyA9IHByZXYuZmlsdGVyKGYgPT4gZi5pZCAhPT0gZm9udElkKTtcbiAgICAgIFxuICAgICAgLy8g0JXRgdC70Lgg0YPQtNCw0LvRj9C10Lwg0YLQtdC60YPRidC40Lkg0LLRi9Cx0YDQsNC90L3Ri9C5INGI0YDQuNGE0YIsINCy0YvQsdC40YDQsNC10Lwg0YHQu9C10LTRg9GO0YnQuNC5INC00L7RgdGC0YPQv9C90YvQuVxuICAgICAgaWYgKHNlbGVjdGVkRm9udCAmJiBzZWxlY3RlZEZvbnQuaWQgPT09IGZvbnRJZCkge1xuICAgICAgICBpZiAodXBkYXRlZEZvbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0YHRgdGL0LvQutGDINC90LAg0L3QvtCy0YvQuSDRiNGA0LjRhNGCINC00LvRjyDQtNCw0LvRjNC90LXQudGI0LXQs9C+INC/0YDQuNC80LXQvdC10L3QuNGPINGB0YLQuNC70Y9cbiAgICAgICAgICBjb25zdCBuZXdGb250ID0gdXBkYXRlZEZvbnRzWzBdO1xuICAgICAgICAgIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC90L7QstGL0Lkg0YjRgNC40YTRglxuICAgICAgICAgIHNldFNlbGVjdGVkRm9udChuZXdGb250KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDQn9C+0YHQu9C1INGD0YHRgtCw0L3QvtCy0LrQuCDQvdC+0LLQvtCz0L4g0YjRgNC40YTRgtCwLCDQvdCw0YHRgtGA0LDQuNCy0LDQtdC8INC10LPQviDRgdC+INGB0YLQuNC70LXQvCBSZWd1bGFyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDRgdGC0LjQu9GMIFJlZ3VsYXIg0LTQu9GPINC90L7QstC+0LPQviDRiNGA0LjRhNGC0LBcbiAgICAgICAgICAgIGNvbnN0IHByZXNldE5hbWUgPSAnUmVndWxhcic7XG4gICAgICAgICAgICBzYWZlU2VsZWN0Rm9udFJlZi5jdXJyZW50Py4obmV3Rm9udCk7XG5cbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRTZWxlY3RlZEZvbnQobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHVwZGF0ZWRGb250cztcbiAgICB9KTtcbiAgICBcbiAgICB0b2FzdC5zdWNjZXNzKCfQqNGA0LjRhNGCINGD0LTQsNC70LXQvScpO1xuXG4gICAgLy8g0J7Rh9C40YHRgtC60LAgRm9udEZhY2Ug0LjQtyBkb2N1bWVudC5mb250cyAo0L3QtdC+0LHRj9C30LDRgtC10LvRjNC90L4sINC90L4g0YXQvtGA0L7RiNC+INC00LvRjyDQs9C40LPQuNC10L3RiylcbiAgICAvLyBpZiAocmVtb3ZlZEZvbnRGYW1pbHkgJiYgZG9jdW1lbnQuZm9udHMpIHtcbiAgICAvLyAgICBkb2N1bWVudC5mb250cy5kZWxldGUocmVtb3ZlZEZvbnRGYW1pbHkpO1xuICAgIC8vIH1cbiAgfSwgW3NlbGVjdGVkRm9udCwgZGVsZXRlRm9udERCLCBzZXRGb250cywgc2V0U2VsZWN0ZWRGb250XSk7XG5cbiAgLy8g0J7QsdC10YDRgtC60Lgg0LTQu9GPINGB0L7QstC80LXRgdGC0LjQvNC+0YHRgtC4INGBINC/0YDQtdC00YvQtNGD0YnQuNC8IEFQSVxuICBjb25zdCBleHBvcnRUb0NTUyA9IHVzZUNhbGxiYWNrKChkb3dubG9hZCA9IGZhbHNlKSA9PiB7XG4gICAgcmV0dXJuIGV4cG9ydFRvQ1NTRnJvbUV4cG9ydEhvb2soc2VsZWN0ZWRGb250LCBzZWxlY3RlZEZvbnROYW1lLCBkb3dubG9hZCk7XG4gIH0sIFtleHBvcnRUb0NTU0Zyb21FeHBvcnRIb29rLCBzZWxlY3RlZEZvbnQsIHNlbGVjdGVkRm9udE5hbWVdKTtcbiAgXG4gIC8qKlxuICAgKiDQktGL0LHQuNGA0LDQtdGCICjQuNC70Lgg0LfQsNCz0YDRg9C20LDQtdGCLCDQtdGB0LvQuCDQtdGJ0ZEg0L3QtSDQt9Cw0LPRgNGD0LbQtdC9KSDRiNGA0LjRhNGCIEZvbnRzb3VyY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvbnRGYW1pbHlOYW1lIC0g0J3QsNC30LLQsNC90LjQtSDRgdC10LzQtdC50YHRgtCy0LAg0YjRgNC40YTRgtC+0LJcbiAgICogQHBhcmFtIHtib29sZWFufSBmb3JjZVZhcmlhYmxlRm9udCAtINCX0LDQs9GA0YPQttCw0YLRjCDQstCw0YDQuNCw0YLQuNCy0L3Ri9C5INGI0YDQuNGE0YIgKNC10YHQu9C4INC00L7RgdGC0YPQv9C10L0pXG4gICAqL1xuICBjb25zdCBzZWxlY3RPckFkZEZvbnRzb3VyY2VGb250ID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZvbnRGYW1pbHlOYW1lLCBmb3JjZVZhcmlhYmxlRm9udCA9IGZhbHNlKSA9PiB7XG4gICAgLy8g0J/RgNC+0YHRgtC+INC/0LXRgNC10L3QsNC/0YDQsNCy0LvRj9C10Lwg0L3QsCDRhNGD0L3QutGG0LjRjiDQuNC3IHVzZUZvbnRMb2FkZXJcbiAgICByZXR1cm4gbG9hZEFuZFNlbGVjdEZvbnRzb3VyY2VGb250KGZvbnRGYW1pbHlOYW1lLCBmb3JjZVZhcmlhYmxlRm9udCk7XG4gIH0sIFtsb2FkQW5kU2VsZWN0Rm9udHNvdXJjZUZvbnRdKTtcbiAgXG4gIC8vIDw8PCDQpNGD0L3QutGG0LjRjyDQv9C+0LvQvdC+0LPQviDRgdCx0YDQvtGB0LAgPj4+XG4gIGNvbnN0IHJlc2V0QXBwbGljYXRpb25TdGF0ZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIltSZXNldF0g0JfQsNC/0YPRgdC6INC/0L7Qu9C90L7Qs9C+INGB0LHRgNC+0YHQsCDRgdC+0YHRgtC+0Y/QvdC40Y8g0L/RgNC40LvQvtC20LXQvdC40Y8uLi5cIik7XG4gICAgdHJ5IHtcbiAgICAgIC8vIDEuINCe0YfQuNGJ0LDQtdC8INGF0YDQsNC90LjQu9C40YnQsCAoSW5kZXhlZERCINC4IGxvY2FsU3RvcmFnZSkg0YfQtdGA0LXQtyDQvdC+0LLRi9C5INGF0YPQulxuICAgICAgYXdhaXQgcmVzZXRQZXJzaXN0ZW5jZSgpOyAvLyA8PDwg0JLRi9C30YvQstCw0LXQvCDRgdCx0YDQvtGBINC/0LXRgNGB0LjRgdGC0LXQvdGC0L3QvtGB0YLQuFxuICAgICAgdG9hc3QuaW5mbyhcItCb0L7QutCw0LvRjNC90L7QtSDRhdGA0LDQvdC40LvQuNGJ0LUg0LTQsNC90L3Ri9GFINC+0YfQuNGJ0LXQvdC+LlwiKTsgLy8g0J7QsdC90L7QstC70Y/QtdC8INGB0L7QvtCx0YnQtdC90LjQtVxuXG4gICAgICAvLyAyLiDQntGH0LjRidCw0LXQvCDRgdC+0YHRgtC+0Y/QvdC40Y8g0YXRg9C60LAgKNC+0YHRgtCw0LXRgtGB0Y8g0LrQsNC6INCx0YvQu9C+KVxuICAgICAgc2V0Rm9udHMoW10pO1xuICAgICAgc2V0U2VsZWN0ZWRGb250KG51bGwpO1xuICAgICAgc2V0VmFyaWFibGVTZXR0aW5ncyh7fSk7XG4gICAgICBzZXRFeHBvcnRlZEZvbnQobnVsbCk7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpOyAvLyDQodCx0YDQsNGB0YvQstCw0LXQvCDRhNC70LDQsyDQt9Cw0LPRgNGD0LfQutC4XG4gICAgICAvLyBpc0luaXRpYWxMb2FkQ29tcGxldGUg0L7RgdGC0LDQvdC10YLRgdGPIHRydWUsINGCLtC6LiDQvdCw0YfQsNC70YzQvdCw0Y8g0LfQsNCz0YDRg9C30LrQsCDQsdGL0LvQsFxuICAgICAgY29uc29sZS5sb2coXCJbUmVzZXRdINCh0L7RgdGC0L7Rj9C90LjRjyB1c2VGb250TWFuYWdlciDRgdCx0YDQvtGI0LXQvdGLLlwiKTtcblxuXG4gICAgICAvLyA0LiDQktGL0LfRi9Cy0LDQtdC8INGB0LHRgNC+0YEg0LTRgNGD0LPQuNGFINC60L7QvdGC0LXQutGB0YLQvtCyICjQv9C+0LrQsCDRgtC+0LvRjNC60L4gU2V0dGluZ3NDb250ZXh0KVxuICAgICAgLy8gcmVzZXRTZXR0aW5ncygpOyAvLyDQktGL0LfQvtCyINCx0YPQtNC10YIg0LIg0LrQvtC80L/QvtC90LXQvdGC0LUg0LrQvdC+0L/QutC4XG5cbiAgICAgIHRvYXN0LnN1Y2Nlc3MoXCLQodC+0YHRgtC+0Y/QvdC40LUg0L/RgNC40LvQvtC20LXQvdC40Y8g0YPRgdC/0LXRiNC90L4g0YHQsdGA0L7RiNC10L3QviFcIik7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIltSZXNldF0g0J7RiNC40LHQutCwINCy0L4g0LLRgNC10LzRjyDRgdCx0YDQvtGB0LAg0YHQvtGB0YLQvtGP0L3QuNGPOlwiLCBlcnJvcik7XG4gICAgICB0b2FzdC5lcnJvcihcItCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0L/RgNC4INGB0LHRgNC+0YHQtSDRgdC+0YHRgtC+0Y/QvdC40Y8uXCIpO1xuICAgIH1cbiAgfSwgW3NldEZvbnRzLCBzZXRTZWxlY3RlZEZvbnQsIHNldFZhcmlhYmxlU2V0dGluZ3MsIHNldEV4cG9ydGVkRm9udCwgc2V0SXNMb2FkaW5nLCByZXNldFBlcnNpc3RlbmNlXSk7IC8vINCU0L7QsdCw0LLQu9GP0LXQvCDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INGB0LXRgtGC0LXRgNC+0LJcblxuICAvLyDQo9Cx0LjRgNCw0LXQvCDRgdGC0LDRgNGL0LUgdXNlRWZmZWN0LCDRgdCy0Y/Qt9Cw0L3QvdGL0LUg0YEgbG9hZEluaXRpYWxTdGF0ZVxuXG4gIHJldHVybiB7XG4gICAgLy8g0KHQvtGB0YLQvtGP0L3QuNGPXG4gICAgZm9udHMsXG4gICAgc2VsZWN0ZWRGb250LFxuICAgIHZhcmlhYmxlU2V0dGluZ3MsXG4gICAgZXhwb3J0ZWRGb250LFxuICAgIGlzU2VsZWN0ZWRGb250VmFyaWFibGUsXG4gICAgc2VsZWN0ZWRGb250TmFtZSxcbiAgICBzZWxlY3RlZEZvbnRBeGVzLFxuICAgIGF2YWlsYWJsZVN0eWxlcyxcbiAgICBzZWxlY3RlZFByZXNldE5hbWUsXG4gICAgaXNMb2FkaW5nLFxuICAgIGlzSW5pdGlhbExvYWRDb21wbGV0ZSxcbiAgICBcbiAgICAvLyDQnNC10YLQvtC00Ysg0YPQv9GA0LDQstC70LXQvdC40Y8g0YHQvtGB0YLQvtGP0L3QuNC10LxcbiAgICBzZXRGb250cyxcbiAgICBzZXRTZWxlY3RlZEZvbnQsXG4gICAgc2V0VmFyaWFibGVTZXR0aW5ncyxcbiAgICBzZXRFeHBvcnRlZEZvbnQsXG4gICAgXG4gICAgLy8g0JzQtdGC0L7QtNGLINC30LDQs9GA0YPQt9C60LggKNC40LcgdXNlRm9udExvYWRlcilcbiAgICBoYW5kbGVMb2NhbEZvbnRzVXBsb2FkLCBcbiAgICBoYW5kbGVGb250c1VwbG9hZGVkLCAvLyDQn9GA0LDQstC40LvRjNC90LDRjyDRhNGD0L3QutGG0LjRjy3QvtCx0LXRgNGC0LrQsFxuICAgIGxvYWRBbmRTZWxlY3RGb250c291cmNlRm9udCxcbiAgICBzZWxlY3RPckFkZEZvbnRzb3VyY2VGb250LCAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0YLQsNC60LbQtSDRjdGC0L7RgiDQsNC70LjQsNGBXG4gICAgXG4gICAgLy8g0JzQtdGC0L7QtNGLINGD0L/RgNCw0LLQu9C10L3QuNGPINGI0YDQuNGE0YLQsNC80LggXG4gICAgcmVtb3ZlRm9udCxcbiAgICBzYWZlU2VsZWN0Rm9udCxcbiAgICBcbiAgICAvLyA8PDwg0JzQtdGC0L7QtNGLINGA0LDQsdC+0YLRiyDRgSDQstCw0YDQuNCw0YLQuNCy0L3Ri9C80Lgg0L7RgdGP0LzQuCDQuNC3IHVzZVZhcmlhYmxlRm9udENvbnRyb2xzID4+PlxuICAgIGdldFZhcmlhYmxlQXhlc0luZm8sXG4gICAgZ2V0VmFyaWFibGVBeGVzOiBnZXRWYXJpYWJsZUF4ZXNJbmZvLCAvLyDQkNC70LjQsNGBINC00LvRjyDQvtCx0YDQsNGC0L3QvtC5INGB0L7QstC80LXRgdGC0LjQvNC+0YHRgtC4XG4gICAgYXBwbHlWYXJpYWJsZVNldHRpbmdzLFxuICAgIGhhbmRsZVZhcmlhYmxlU2V0dGluZ3NDaGFuZ2U6IGFwcGx5VmFyaWFibGVTZXR0aW5ncywgLy8g0JDQu9C40LDRgSDQtNC70Y8g0L7QsdGA0LDRgtC90L7QuSDRgdC+0LLQvNC10YHRgtC40LzQvtGB0YLQuFxuICAgIHJlc2V0VmFyaWFibGVTZXR0aW5ncyxcbiAgICBnZXREZWZhdWx0QXhpc1ZhbHVlcyxcbiAgICBcbiAgICAvLyDQnNC10YLQvtC00Ysg0LTQu9GPINGB0YLQuNC70LXQuSDRiNGA0LjRhNGC0LBcbiAgICBhcHBseVByZXNldFN0eWxlLFxuICAgIFxuICAgIC8vINCc0LXRgtC+0LTRiyDQtNC70Y8gQ1NTXG4gICAgZ2V0Rm9udEZhbWlseSxcbiAgICBnZXRWYXJpYXRpb25TZXR0aW5ncyxcbiAgICBnZW5lcmF0ZUNTUyxcbiAgICBleHBvcnRUb0NTUyxcbiAgICBmb250Q3NzUHJvcGVydGllcyxcbiAgICBcbiAgICAvLyDQnNC10YLQvtC00Ysg0Y3QutGB0L/QvtGA0YLQsCDQuCDRgdC60LDRh9C40LLQsNC90LjRjyAo0LjQtyB1c2VGb250RXhwb3J0KVxuICAgIGRvd25sb2FkRmlsZSxcbiAgICBnZW5lcmF0ZVN0YXRpY0ZvbnRGaWxlLFxuICAgIGRvd25sb2FkU3RhdGljRm9udCxcbiAgICBcbiAgICAvLyDQn9GA0L7Rh9C40LUg0LzQtdGC0L7QtNGLXG4gICAgY3JlYXRlU3RhdGljRm9udCxcbiAgICByZXNldEFwcGxpY2F0aW9uU3RhdGUsXG4gICAgXG4gICAgLy8g0JzQtdGC0L7QtNGLINC/0LXRgNGB0LjRgdGC0LXQvdGC0L3QvtGB0YLQuFxuICAgIHNhdmVGb250U2V0dGluZ3MsXG4gIH07XG59ICJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlUmVmIiwidXNlTWVtbyIsInVzZUVmZmVjdCIsInRvYXN0IiwiZmluZFN0eWxlSW5mb0J5V2VpZ2h0QW5kU3R5bGUiLCJQUkVTRVRfU1RZTEVTIiwiZGVib3VuY2VkVXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3MiLCJkZWxldGVGb250REIiLCJyZXZva2VPYmplY3RVUkwiLCJ1c2VGb250UGVyc2lzdGVuY2UiLCJ1c2VGb250TG9hZGVyIiwidXNlVmFyaWFibGVGb250Q29udHJvbHMiLCJ1c2VGb250U3R5bGVNYW5hZ2VyIiwidXNlRm9udENzcyIsInVzZUZvbnRFeHBvcnQiLCJ1c2VGb250TWFuYWdlciIsImZvbnRzIiwic2V0Rm9udHMiLCJzZWxlY3RlZEZvbnQiLCJzZXRTZWxlY3RlZEZvbnQiLCJ2YXJpYWJsZVNldHRpbmdzIiwic2V0VmFyaWFibGVTZXR0aW5ncyIsImV4cG9ydGVkRm9udCIsInNldEV4cG9ydGVkRm9udCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImxvYWRlZEZvbnRJZCIsImlzSW5pdGlhbExvYWRDb21wbGV0ZSIsInNldElzSW5pdGlhbExvYWRDb21wbGV0ZSIsInNhZmVTZWxlY3RGb250UmVmIiwiaGFuZGxlTG9jYWxGb250c1VwbG9hZCIsImxvYWRBbmRTZWxlY3RGb250c291cmNlRm9udCIsImxvYWRGb250c291cmNlU3R5bGVWYXJpYW50IiwiZm9udCIsImN1cnJlbnQiLCJzYXZlRm9udFNldHRpbmdzUmVmIiwic2F2ZUxhc3RWYXJpYWJsZVNldHRpbmdzUmVmIiwiYXBwbHlWYXJpYWJsZVNldHRpbmdzIiwiZ2V0RGVmYXVsdEF4aXNWYWx1ZXMiLCJyZXNldFZhcmlhYmxlU2V0dGluZ3MiLCJnZXRWYXJpYWJsZUF4ZXNJbmZvIiwic2V0dGluZ3MiLCJjb25zb2xlIiwibG9nIiwiaGFuZGxlUHJlc2V0QXBwbGllZCIsImZvbnRJZCIsImFwcGx5UHJlc2V0U3R5bGUiLCJzYXZlU2VsZWN0ZWRGb250SWQiLCJzYXZlTGFzdFZhcmlhYmxlU2V0dGluZ3MiLCJzYXZlTGFzdFByZXNldE5hbWUiLCJjbGVhckZvbnRMb2NhbFN0b3JhZ2UiLCJyZXNldFBlcnNpc3RlbmNlIiwic2F2ZUZvbnRTZXR0aW5ncyIsImlzU2VsZWN0ZWRGb250VmFyaWFibGUiLCJpc1ZhcmlhYmxlRm9udCIsImdldEZvbnRGYW1pbHkiLCJnZXRWYXJpYXRpb25TZXR0aW5ncyIsImdlbmVyYXRlQ1NTIiwibG9hZEZvbnRGYWNlIiwidXBkYXRlVmFyaWFibGVGb250Q3NzIiwiZGVib3VuY2VkVXBkYXRlVmFyaWFibGVGb250Q3NzIiwiZXhwb3J0VG9DU1MiLCJleHBvcnRUb0NTU0Zyb21Ib29rIiwiZm9udENzc1Byb3BlcnRpZXMiLCJkb3dubG9hZEZpbGUiLCJleHBvcnRUb0NTU0Zyb21FeHBvcnRIb29rIiwiY3JlYXRlU3RhdGljRm9udCIsImNyZWF0ZVN0YXRpY0ZvbnRGcm9tRXhwb3J0SG9vayIsImdlbmVyYXRlU3RhdGljRm9udEZpbGUiLCJkb3dubG9hZFN0YXRpY0ZvbnQiLCJzYWZlU2VsZWN0Rm9udCIsIndhcm4iLCJuYW1lIiwiZGlzcGxheU5hbWUiLCJzZXR0aW5nc0FwcGxpZWQiLCJsYXN0VXNlZFZhcmlhYmxlU2V0dGluZ3MiLCJzZXRUaW1lb3V0IiwibGFzdFVzZWRQcmVzZXROYW1lIiwidmFyaWFibGVBeGVzIiwiZGVmYXVsdEF4ZXMiLCJzZWxlY3RlZFByZXNldE5hbWUiLCJjdXJyZW50V2VpZ2h0IiwiY3VycmVudFN0eWxlIiwidW5kZWZpbmVkIiwic3R5bGVJbmZvIiwicHJlc2V0TmFtZSIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJ3Z2h0IiwiaXRhbCIsInNsbnQiLCJtYXRjaGVkUHJlc2V0IiwicHJldmlvdXNTZWxlY3RlZEZvbnRSZWYiLCJwcmV2aW91c1ZhcmlhYmxlU2V0dGluZ3NSZWYiLCJwcmV2aW91c1ByZXNldE5hbWVSZWYiLCJpZCIsInByZXZGb250IiwicHJldlZhcmlhYmxlU2V0dGluZ3MiLCJwcmV2UHJlc2V0TmFtZSIsInVwZGF0ZWRGb250cyIsIm1hcCIsInVwZGF0ZWRGb250IiwiZGJVcGRhdGVzIiwiYXZhaWxhYmxlU3R5bGVzIiwiQXJyYXkiLCJpc0FycmF5IiwiZXZlcnkiLCJzIiwid2VpZ2h0Iiwic3R5bGUiLCJmaW5kIiwicCIsImZpbHRlciIsIkJvb2xlYW4iLCJzZWxlY3RlZEZvbnROYW1lIiwic2VsZWN0ZWRGb250QXhlcyIsImhhbmRsZUZvbnRzVXBsb2FkZWQiLCJuZXdGb250cyIsInJlc3VsdCIsInJlbW92ZUZvbnQiLCJyZW1vdmVkRm9udEZhbWlseSIsInByZXYiLCJmb250VG9SZW1vdmUiLCJmIiwiZm9udEZhbWlseSIsInVybCIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJuZXdGb250Iiwic3VjY2VzcyIsImRvd25sb2FkIiwic2VsZWN0T3JBZGRGb250c291cmNlRm9udCIsImZvbnRGYW1pbHlOYW1lIiwiZm9yY2VWYXJpYWJsZUZvbnQiLCJyZXNldEFwcGxpY2F0aW9uU3RhdGUiLCJpbmZvIiwiZ2V0VmFyaWFibGVBeGVzIiwiaGFuZGxlVmFyaWFibGVTZXR0aW5nc0NoYW5nZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./hooks/useFontManager.js\n");

/***/ }),

/***/ "./hooks/useFontPersistence.js":
/*!*************************************!*\
  !*** ./hooks/useFontPersistence.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFontPersistence: () => (/* binding */ useFontPersistence)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var _utils_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/db */ \"./utils/db.js\");\n/* harmony import */ var _utils_cssGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/cssGenerator */ \"./utils/cssGenerator.js\");\n/* harmony import */ var _utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/localFontProcessor */ \"./utils/localFontProcessor.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_1__, _utils_cssGenerator__WEBPACK_IMPORTED_MODULE_3__, _utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_4__]);\n([react_toastify__WEBPACK_IMPORTED_MODULE_1__, _utils_cssGenerator__WEBPACK_IMPORTED_MODULE_3__, _utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n // Нужен для восстановления\n // Для очистки URL\n// Ключи localStorage для настроек шрифта\nconst FONT_SETTINGS_LS_KEYS = {\n    LAST_PRESET_NAME: \"lastPresetName\",\n    LAST_VARIABLE_SETTINGS: \"lastVariableSettings\",\n    SELECTED_FONT_ID: \"selectedFontId\"\n};\n/**\n * Хук для управления постоянством данных шрифтов (IndexedDB, localStorage).\n * @param {Function} setFonts - Функция установки состояния массива шрифтов.\n * @param {Function} setIsLoading - Функция установки состояния загрузки.\n * @param {Function} setIsInitialLoadComplete - Функция установки флага завершения начальной загрузки.\n * @param {Function} setSelectedFont - Функция установки выбранного шрифта.\n * @param {Function} handleVariableSettingsChange - Функция применения настроек вариативности.\n * @param {Function} applyPresetStyle - Функция применения пресета стиля.\n * @param {Array} fonts - Текущий массив шрифтов (для поиска при восстановлении).\n * @param {Object|null} selectedFont - Текущий выбранный шрифт (для предотвращения повторного восстановления).\n */ function useFontPersistence(setFonts, setIsLoading, setIsInitialLoadComplete, setSelectedFont, handleVariableSettingsChange, applyPresetStyle, fonts, selectedFont // Передаем selectedFont\n) {\n    // --- Начальная загрузка из IndexedDB --- \n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        let isMounted = true;\n        const loadInitialFonts = async ()=>{\n            console.log(\"[DB] Загрузка начальных шрифтов...\");\n            setIsLoading(true);\n            try {\n                const storedFonts = await (0,_utils_db__WEBPACK_IMPORTED_MODULE_2__.getAllFonts)();\n                if (!isMounted) return;\n                if (storedFonts && storedFonts.length > 0) {\n                    console.log(`[DB] Найдено ${storedFonts.length} шрифтов.`);\n                    const processedFonts = await Promise.all(storedFonts.map(async (font)=>{\n                        if (!font?.id || !font.file || !(font.file instanceof Blob)) {\n                            console.warn(\"[DB] Пропущен некорректный объект:\", font);\n                            return null;\n                        }\n                        try {\n                            font.url = URL.createObjectURL(font.file);\n                            const fontFamilyToLoad = font.fontFamily || `font-${font.id}`; // Генерируем имя, если нет\n                            font.fontFamily = fontFamilyToLoad;\n                            let initialVarSettings = {};\n                            if (font.isVariableFont && font.variableAxes) {\n                                initialVarSettings = Object.entries(font.variableAxes).reduce((acc, [tag, axis])=>{\n                                    if (axis && typeof axis === \"object\" && axis.default !== undefined) acc[tag] = axis.default;\n                                    return acc;\n                                }, {});\n                            }\n                            await (0,_utils_cssGenerator__WEBPACK_IMPORTED_MODULE_3__.loadFontFaceIfNeeded)(fontFamilyToLoad, font.url, initialVarSettings);\n                            // Добавляем недостающие поля сессии, если их нет\n                            return {\n                                ...font,\n                                lastUsedPresetName: font.lastUsedPresetName || null,\n                                lastUsedVariableSettings: font.lastUsedVariableSettings || null\n                            };\n                        } catch (loadError) {\n                            console.error(`[DB] Ошибка пересоздания FontFace для ${font.name}:`, loadError);\n                            if (font.url) (0,_utils_localFontProcessor__WEBPACK_IMPORTED_MODULE_4__.revokeObjectURL)(font.url);\n                            return null;\n                        }\n                    }));\n                    const validFonts = processedFonts.filter((f)=>f !== null);\n                    if (isMounted) {\n                        setFonts(validFonts);\n                        console.log(`[DB] ${validFonts.length} шрифтов успешно загружено.`);\n                    }\n                } else {\n                    console.log(\"[DB] В IndexedDB нет шрифтов.\");\n                }\n            } catch (error) {\n                console.error(\"[DB] Ошибка загрузки шрифтов:\", error);\n                react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Ошибка загрузки сохраненных шрифтов.\");\n            } finally{\n                if (isMounted) {\n                    setIsLoading(false);\n                    setIsInitialLoadComplete(true);\n                }\n            }\n        };\n        loadInitialFonts();\n        return ()=>{\n            isMounted = false;\n        };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        setFonts,\n        setIsLoading,\n        setIsInitialLoadComplete\n    ]); // Зависимости только сеттеры\n    // --- Восстановление выбранного шрифта и его настроек --- \n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Запускаем только после завершения загрузки из DB и если есть шрифты, но ни один не выбран\n        if (fonts && fonts.length > 0 && !selectedFont) {\n            console.log(\"[Restore] Попытка восстановить выбор и настройки...\");\n            const storedId = localStorage.getItem(FONT_SETTINGS_LS_KEYS.SELECTED_FONT_ID);\n            let fontToSelect = null;\n            if (storedId) {\n                fontToSelect = fonts.find((f)=>f.id === storedId);\n                if (fontToSelect) {\n                    console.log(`[Restore] Найден шрифт по ID: ${fontToSelect.displayName || fontToSelect.name}`);\n                } else {\n                    console.log(`[Restore] Шрифт с ID ${storedId} не найден. Удаляем ID.`);\n                    localStorage.removeItem(FONT_SETTINGS_LS_KEYS.SELECTED_FONT_ID);\n                }\n            }\n            if (!fontToSelect && fonts && fonts.length > 0) {\n                console.log(\"[Restore] Выбираем первый доступный шрифт.\");\n                fontToSelect = fonts[0];\n                localStorage.setItem(FONT_SETTINGS_LS_KEYS.SELECTED_FONT_ID, fontToSelect.id); // Сохраняем ID первого\n            }\n            if (fontToSelect) {\n                setSelectedFont(fontToSelect); // Устанавливаем шрифт\n                // Используем setTimeout для применения настроек после установки шрифта\n                setTimeout(()=>{\n                    console.log(`[Restore] Применение настроек для ${fontToSelect.displayName || fontToSelect.name} через setTimeout`);\n                    const restoredVarSettingsRaw = localStorage.getItem(FONT_SETTINGS_LS_KEYS.LAST_VARIABLE_SETTINGS);\n                    const restoredPresetName = localStorage.getItem(FONT_SETTINGS_LS_KEYS.LAST_PRESET_NAME);\n                    let settingsApplied = false;\n                    // 1. ПРИОРИТЕТ: Глобальные настройки из localStorage (самые свежие)\n                    if (fontToSelect.isVariableFont && restoredVarSettingsRaw) {\n                        try {\n                            const restoredVarSettings = JSON.parse(restoredVarSettingsRaw);\n                            console.log(\"[Restore] Восстанавливаем оси из localStorage (приоритет):\", restoredVarSettings);\n                            if (handleVariableSettingsChange) {\n                                handleVariableSettingsChange(restoredVarSettings, true, fontToSelect);\n                                settingsApplied = true;\n                            }\n                        } catch (e) {\n                            console.error(\"[Restore] Ошибка парсинга осей из localStorage:\", e);\n                            localStorage.removeItem(FONT_SETTINGS_LS_KEYS.LAST_VARIABLE_SETTINGS);\n                        }\n                    } else if (restoredPresetName && applyPresetStyle) {\n                        console.log(`[Restore] Восстанавливаем пресет из localStorage (приоритет): ${restoredPresetName}`);\n                        applyPresetStyle(restoredPresetName, fontToSelect);\n                        settingsApplied = true;\n                    }\n                    // 2. FALLBACK: Настройки конкретного шрифта из IndexedDB (если нет в localStorage)\n                    if (!settingsApplied) {\n                        if (fontToSelect.isVariableFont && fontToSelect.lastUsedVariableSettings && handleVariableSettingsChange) {\n                            console.log(\"[Restore] Восстанавливаем оси из IndexedDB (fallback):\", fontToSelect.lastUsedVariableSettings);\n                            handleVariableSettingsChange(fontToSelect.lastUsedVariableSettings, true, fontToSelect);\n                            settingsApplied = true;\n                        } else if (fontToSelect.lastUsedPresetName && applyPresetStyle) {\n                            console.log(`[Restore] Восстанавливаем пресет из IndexedDB (fallback): ${fontToSelect.lastUsedPresetName}`);\n                            applyPresetStyle(fontToSelect.lastUsedPresetName, fontToSelect);\n                            settingsApplied = true;\n                        }\n                    }\n                    // 3. ПОСЛЕДНИЙ FALLBACK: Если вообще ничего не восстановлено, ставим дефолт\n                    if (!settingsApplied) {\n                        console.log(\"[Restore] Настройки не восстановлены, применяем дефолтный Regular\");\n                        if (applyPresetStyle) {\n                            applyPresetStyle(\"Regular\", fontToSelect);\n                            settingsApplied = true;\n                        }\n                    }\n                }, 0);\n            }\n        }\n    // Добавляем fonts и selectedFont в зависимости, чтобы эффект срабатывал при их изменении\n    }, [\n        fonts,\n        selectedFont,\n        setSelectedFont,\n        applyPresetStyle,\n        handleVariableSettingsChange\n    ]);\n    // --- Функции для управления localStorage --- \n    const saveSelectedFontId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((fontId)=>{\n        if (false) {}\n    }, []);\n    const saveLastVariableSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((settings)=>{\n        console.log(\"[Persistence] saveLastVariableSettings вызвана с настройками:\", settings);\n        if (false) {} else {\n            console.warn(\"[Persistence] window недоступен, сохранение пропущено\");\n        }\n    }, []);\n    const saveLastPresetName = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((presetName)=>{\n        if (false) {}\n    }, []);\n    const clearFontLocalStorage = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (false) {}\n    }, []);\n    // --- Функция сброса персистентности --- \n    const resetPersistence = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        try {\n            await (0,_utils_db__WEBPACK_IMPORTED_MODULE_2__.deleteAllFontsDB)();\n            clearFontLocalStorage();\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.info(\"Хранилища шрифтов (DB и LS) очищены.\");\n        } catch (error) {\n            console.error(\"[Persistence] Ошибка при сбросе хранилищ:\", error);\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(\"Ошибка очистки хранилищ шрифтов.\");\n        }\n    }, [\n        clearFontLocalStorage\n    ]);\n    // --- Функция сохранения настроек шрифта в IndexedDB ---\n    const saveFontSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (fontId, settings)=>{\n        if (!fontId || !settings) return;\n        try {\n            await (0,_utils_db__WEBPACK_IMPORTED_MODULE_2__.updateFontSettings)(fontId, settings);\n        } catch (error) {\n            console.error(`[Persistence] Ошибка сохранения настроек шрифта ${fontId}:`, error);\n        }\n    }, []);\n    // Возвращаем функции для управления персистентностью\n    return {\n        saveSelectedFontId,\n        saveLastVariableSettings,\n        saveLastPresetName,\n        clearFontLocalStorage,\n        resetPersistence,\n        saveFontSettings\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDTCxHQUFHLEVBQUU7SUFFTCwwQ0FBMEM7SUFDMUMsTUFBTXNGLG1CQUFtQnRGLGtEQUFXQSxDQUFDO1FBQ2pDLElBQUk7WUFDQSxNQUFNRywyREFBZ0JBO1lBQ3RCK0U7WUFDQWpGLGlEQUFLQSxDQUFDc0YsSUFBSSxDQUFDO1FBQ2YsRUFBRSxPQUFPakMsT0FBTztZQUNaaEMsUUFBUWdDLEtBQUssQ0FBQyw2Q0FBNkNBO1lBQzNEckQsaURBQUtBLENBQUNxRCxLQUFLLENBQUM7UUFDaEI7SUFDSixHQUFHO1FBQUM0QjtLQUFzQjtJQUUxQix5REFBeUQ7SUFDekQsTUFBTU0sbUJBQW1CeEYsa0RBQVdBLENBQUMsT0FBTzRFLFFBQVFFO1FBQ2hELElBQUksQ0FBQ0YsVUFBVSxDQUFDRSxVQUFVO1FBRTFCLElBQUk7WUFDQSxNQUFNMUUsNkRBQWtCQSxDQUFDd0UsUUFBUUU7UUFDckMsRUFBRSxPQUFPeEIsT0FBTztZQUNaaEMsUUFBUWdDLEtBQUssQ0FBQyxDQUFDLGdEQUFnRCxFQUFFc0IsT0FBTyxDQUFDLENBQUMsRUFBRXRCO1FBQ2hGO0lBQ0osR0FBRyxFQUFFO0lBRUwscURBQXFEO0lBQ3JELE9BQU87UUFDSHFCO1FBQ0FFO1FBQ0FHO1FBQ0FFO1FBQ0FJO1FBQ0FFO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZvbnQtZ2F1bnRsZXQtY2xvbmUvLi9ob29rcy91c2VGb250UGVyc2lzdGVuY2UuanM/NjE5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdyZWFjdC10b2FzdGlmeSc7XG5pbXBvcnQgeyBnZXRBbGxGb250cywgZGVsZXRlQWxsRm9udHNEQiwgdXBkYXRlRm9udFNldHRpbmdzIH0gZnJvbSAnLi4vdXRpbHMvZGInO1xuaW1wb3J0IHsgbG9hZEZvbnRGYWNlSWZOZWVkZWQgfSBmcm9tICcuLi91dGlscy9jc3NHZW5lcmF0b3InOyAvLyDQndGD0LbQtdC9INC00LvRjyDQstC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNGPXG5pbXBvcnQgeyByZXZva2VPYmplY3RVUkwgfSBmcm9tICcuLi91dGlscy9sb2NhbEZvbnRQcm9jZXNzb3InOyAvLyDQlNC70Y8g0L7Rh9C40YHRgtC60LggVVJMXG5cbi8vINCa0LvRjtGH0LggbG9jYWxTdG9yYWdlINC00LvRjyDQvdCw0YHRgtGA0L7QtdC6INGI0YDQuNGE0YLQsFxuY29uc3QgRk9OVF9TRVRUSU5HU19MU19LRVlTID0ge1xuICAgIExBU1RfUFJFU0VUX05BTUU6ICdsYXN0UHJlc2V0TmFtZScsXG4gICAgTEFTVF9WQVJJQUJMRV9TRVRUSU5HUzogJ2xhc3RWYXJpYWJsZVNldHRpbmdzJyxcbiAgICBTRUxFQ1RFRF9GT05UX0lEOiAnc2VsZWN0ZWRGb250SWQnXG59O1xuXG4vKipcbiAqINCl0YPQuiDQtNC70Y8g0YPQv9GA0LDQstC70LXQvdC40Y8g0L/QvtGB0YLQvtGP0L3RgdGC0LLQvtC8INC00LDQvdC90YvRhSDRiNGA0LjRhNGC0L7QsiAoSW5kZXhlZERCLCBsb2NhbFN0b3JhZ2UpLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0Rm9udHMgLSDQpNGD0L3QutGG0LjRjyDRg9GB0YLQsNC90L7QstC60Lgg0YHQvtGB0YLQvtGP0L3QuNGPINC80LDRgdGB0LjQstCwINGI0YDQuNGE0YLQvtCyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0SXNMb2FkaW5nIC0g0KTRg9C90LrRhtC40Y8g0YPRgdGC0LDQvdC+0LLQutC4INGB0L7RgdGC0L7Rj9C90LjRjyDQt9Cw0LPRgNGD0LfQutC4LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0SXNJbml0aWFsTG9hZENvbXBsZXRlIC0g0KTRg9C90LrRhtC40Y8g0YPRgdGC0LDQvdC+0LLQutC4INGE0LvQsNCz0LAg0LfQsNCy0LXRgNGI0LXQvdC40Y8g0L3QsNGH0LDQu9GM0L3QvtC5INC30LDQs9GA0YPQt9C60LguXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXRTZWxlY3RlZEZvbnQgLSDQpNGD0L3QutGG0LjRjyDRg9GB0YLQsNC90L7QstC60Lgg0LLRi9Cx0YDQsNC90L3QvtCz0L4g0YjRgNC40YTRgtCwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlVmFyaWFibGVTZXR0aW5nc0NoYW5nZSAtINCk0YPQvdC60YbQuNGPINC/0YDQuNC80LXQvdC10L3QuNGPINC90LDRgdGC0YDQvtC10Log0LLQsNGA0LjQsNGC0LjQstC90L7RgdGC0LguXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBhcHBseVByZXNldFN0eWxlIC0g0KTRg9C90LrRhtC40Y8g0L/RgNC40LzQtdC90LXQvdC40Y8g0L/RgNC10YHQtdGC0LAg0YHRgtC40LvRjy5cbiAqIEBwYXJhbSB7QXJyYXl9IGZvbnRzIC0g0KLQtdC60YPRidC40Lkg0LzQsNGB0YHQuNCyINGI0YDQuNGE0YLQvtCyICjQtNC70Y8g0L/QvtC40YHQutCwINC/0YDQuCDQstC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNC4KS5cbiAqIEBwYXJhbSB7T2JqZWN0fG51bGx9IHNlbGVjdGVkRm9udCAtINCi0LXQutGD0YnQuNC5INCy0YvQsdGA0LDQvdC90YvQuSDRiNGA0LjRhNGCICjQtNC70Y8g0L/RgNC10LTQvtGC0LLRgNCw0YnQtdC90LjRjyDQv9C+0LLRgtC+0YDQvdC+0LPQviDQstC+0YHRgdGC0LDQvdC+0LLQu9C10L3QuNGPKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZvbnRQZXJzaXN0ZW5jZShcbiAgICBzZXRGb250cyxcbiAgICBzZXRJc0xvYWRpbmcsXG4gICAgc2V0SXNJbml0aWFsTG9hZENvbXBsZXRlLFxuICAgIHNldFNlbGVjdGVkRm9udCxcbiAgICBoYW5kbGVWYXJpYWJsZVNldHRpbmdzQ2hhbmdlLFxuICAgIGFwcGx5UHJlc2V0U3R5bGUsXG4gICAgZm9udHMsIC8vINCf0LXRgNC10LTQsNC10Lwg0YLQtdC60YPRidC40LUgZm9udHNcbiAgICBzZWxlY3RlZEZvbnQgLy8g0J/QtdGA0LXQtNCw0LXQvCBzZWxlY3RlZEZvbnRcbikge1xuXG4gICAgLy8gLS0tINCd0LDRh9Cw0LvRjNC90LDRjyDQt9Cw0LPRgNGD0LfQutCwINC40LcgSW5kZXhlZERCIC0tLSBcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBsZXQgaXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgbG9hZEluaXRpYWxGb250cyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbREJdINCX0LDQs9GA0YPQt9C60LAg0L3QsNGH0LDQu9GM0L3Ri9GFINGI0YDQuNGE0YLQvtCyLi4uJyk7XG4gICAgICAgICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlZEZvbnRzID0gYXdhaXQgZ2V0QWxsRm9udHMoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTW91bnRlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlZEZvbnRzICYmIHN0b3JlZEZvbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtEQl0g0J3QsNC50LTQtdC90L4gJHtzdG9yZWRGb250cy5sZW5ndGh9INGI0YDQuNGE0YLQvtCyLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRGb250cyA9IGF3YWl0IFByb21pc2UuYWxsKHN0b3JlZEZvbnRzLm1hcChhc3luYyAoZm9udCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb250Py5pZCB8fCAhZm9udC5maWxlIHx8ICEoZm9udC5maWxlIGluc3RhbmNlb2YgQmxvYikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tEQl0g0J/RgNC+0L/Rg9GJ0LXQvSDQvdC10LrQvtGA0YDQtdC60YLQvdGL0Lkg0L7QsdGK0LXQutGCOicsIGZvbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250LnVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZm9udC5maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb250RmFtaWx5VG9Mb2FkID0gZm9udC5mb250RmFtaWx5IHx8IGBmb250LSR7Zm9udC5pZH1gOyAvLyDQk9C10L3QtdGA0LjRgNGD0LXQvCDQuNC80Y8sINC10YHQu9C4INC90LXRglxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQuZm9udEZhbWlseSA9IGZvbnRGYW1pbHlUb0xvYWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5pdGlhbFZhclNldHRpbmdzID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvbnQuaXNWYXJpYWJsZUZvbnQgJiYgZm9udC52YXJpYWJsZUF4ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZhclNldHRpbmdzID0gT2JqZWN0LmVudHJpZXMoZm9udC52YXJpYWJsZUF4ZXMpLnJlZHVjZSgoYWNjLCBbdGFnLCBheGlzXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF4aXMgJiYgdHlwZW9mIGF4aXMgPT09ICdvYmplY3QnICYmIGF4aXMuZGVmYXVsdCAhPT0gdW5kZWZpbmVkKSBhY2NbdGFnXSA9IGF4aXMuZGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9hZEZvbnRGYWNlSWZOZWVkZWQoZm9udEZhbWlseVRvTG9hZCwgZm9udC51cmwsIGluaXRpYWxWYXJTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC90LXQtNC+0YHRgtCw0Y7RidC40LUg0L/QvtC70Y8g0YHQtdGB0YHQuNC4LCDQtdGB0LvQuCDQuNGFINC90LXRglxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZvbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RVc2VkUHJlc2V0TmFtZTogZm9udC5sYXN0VXNlZFByZXNldE5hbWUgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFVzZWRWYXJpYWJsZVNldHRpbmdzOiBmb250Lmxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncyB8fCBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGxvYWRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtEQl0g0J7RiNC40LHQutCwINC/0LXRgNC10YHQvtC30LTQsNC90LjRjyBGb250RmFjZSDQtNC70Y8gJHtmb250Lm5hbWV9OmAsIGxvYWRFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvbnQudXJsKSByZXZva2VPYmplY3RVUkwoZm9udC51cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsaWRGb250cyA9IHByb2Nlc3NlZEZvbnRzLmZpbHRlcihmID0+IGYgIT09IG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRGb250cyh2YWxpZEZvbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbREJdICR7dmFsaWRGb250cy5sZW5ndGh9INGI0YDQuNGE0YLQvtCyINGD0YHQv9C10YjQvdC+INC30LDQs9GA0YPQttC10L3Qvi5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbREJdINCSIEluZGV4ZWREQiDQvdC10YIg0YjRgNC40YTRgtC+0LIuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbREJdINCe0YjQuNCx0LrQsCDQt9Cw0LPRgNGD0LfQutC4INGI0YDQuNGE0YLQvtCyOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0b2FzdC5lcnJvcign0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60Lgg0YHQvtGF0YDQsNC90LXQvdC90YvRhSDRiNGA0LjRhNGC0L7Qsi4nKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzZXRJc0luaXRpYWxMb2FkQ29tcGxldGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsb2FkSW5pdGlhbEZvbnRzKCk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7IGlzTW91bnRlZCA9IGZhbHNlOyB9O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICB9LCBbc2V0Rm9udHMsIHNldElzTG9hZGluZywgc2V0SXNJbml0aWFsTG9hZENvbXBsZXRlXSk7IC8vINCX0LDQstC40YHQuNC80L7RgdGC0Lgg0YLQvtC70YzQutC+INGB0LXRgtGC0LXRgNGLXG5cbiAgICAvLyAtLS0g0JLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LjQtSDQstGL0LHRgNCw0L3QvdC+0LPQviDRiNGA0LjRhNGC0LAg0Lgg0LXQs9C+INC90LDRgdGC0YDQvtC10LogLS0tIFxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIC8vINCX0LDQv9GD0YHQutCw0LXQvCDRgtC+0LvRjNC60L4g0L/QvtGB0LvQtSDQt9Cw0LLQtdGA0YjQtdC90LjRjyDQt9Cw0LPRgNGD0LfQutC4INC40LcgREIg0Lgg0LXRgdC70Lgg0LXRgdGC0Ywg0YjRgNC40YTRgtGLLCDQvdC+INC90Lgg0L7QtNC40L0g0L3QtSDQstGL0LHRgNCw0L1cbiAgICAgICAgaWYgKGZvbnRzICYmIGZvbnRzLmxlbmd0aCA+IDAgJiYgIXNlbGVjdGVkRm9udCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tSZXN0b3JlXSDQn9C+0L/Ri9GC0LrQsCDQstC+0YHRgdGC0LDQvdC+0LLQuNGC0Ywg0LLRi9Cx0L7RgCDQuCDQvdCw0YHRgtGA0L7QudC60LguLi4nKTtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oRk9OVF9TRVRUSU5HU19MU19LRVlTLlNFTEVDVEVEX0ZPTlRfSUQpO1xuICAgICAgICAgICAgbGV0IGZvbnRUb1NlbGVjdCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChzdG9yZWRJZCkge1xuICAgICAgICAgICAgICAgIGZvbnRUb1NlbGVjdCA9IGZvbnRzLmZpbmQoZiA9PiBmLmlkID09PSBzdG9yZWRJZCk7XG4gICAgICAgICAgICAgICAgaWYgKGZvbnRUb1NlbGVjdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1Jlc3RvcmVdINCd0LDQudC00LXQvSDRiNGA0LjRhNGCINC/0L4gSUQ6ICR7Zm9udFRvU2VsZWN0LmRpc3BsYXlOYW1lIHx8IGZvbnRUb1NlbGVjdC5uYW1lfWApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbUmVzdG9yZV0g0KjRgNC40YTRgiDRgSBJRCAke3N0b3JlZElkfSDQvdC1INC90LDQudC00LXQvS4g0KPQtNCw0LvRj9C10LwgSUQuYCk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEZPTlRfU0VUVElOR1NfTFNfS0VZUy5TRUxFQ1RFRF9GT05UX0lEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZm9udFRvU2VsZWN0ICYmIGZvbnRzICYmIGZvbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1Jlc3RvcmVdINCS0YvQsdC40YDQsNC10Lwg0L/QtdGA0LLRi9C5INC00L7RgdGC0YPQv9C90YvQuSDRiNGA0LjRhNGCLicpO1xuICAgICAgICAgICAgICAgIGZvbnRUb1NlbGVjdCA9IGZvbnRzWzBdO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEZPTlRfU0VUVElOR1NfTFNfS0VZUy5TRUxFQ1RFRF9GT05UX0lELCBmb250VG9TZWxlY3QuaWQpOyAvLyDQodC+0YXRgNCw0L3Rj9C10LwgSUQg0L/QtdGA0LLQvtCz0L5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZvbnRUb1NlbGVjdCkge1xuICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkRm9udChmb250VG9TZWxlY3QpOyAvLyDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDRiNGA0LjRhNGCXG5cbiAgICAgICAgICAgICAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCBzZXRUaW1lb3V0INC00LvRjyDQv9GA0LjQvNC10L3QtdC90LjRjyDQvdCw0YHRgtGA0L7QtdC6INC/0L7RgdC70LUg0YPRgdGC0LDQvdC+0LLQutC4INGI0YDQuNGE0YLQsFxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1Jlc3RvcmVdINCf0YDQuNC80LXQvdC10L3QuNC1INC90LDRgdGC0YDQvtC10Log0LTQu9GPICR7Zm9udFRvU2VsZWN0LmRpc3BsYXlOYW1lIHx8IGZvbnRUb1NlbGVjdC5uYW1lfSDRh9C10YDQtdC3IHNldFRpbWVvdXRgKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdG9yZWRWYXJTZXR0aW5nc1JhdyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKEZPTlRfU0VUVElOR1NfTFNfS0VZUy5MQVNUX1ZBUklBQkxFX1NFVFRJTkdTKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdG9yZWRQcmVzZXROYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oRk9OVF9TRVRUSU5HU19MU19LRVlTLkxBU1RfUFJFU0VUX05BTUUpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2V0dGluZ3NBcHBsaWVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gMS4g0J/QoNCY0J7QoNCY0KLQldCiOiDQk9C70L7QsdCw0LvRjNC90YvQtSDQvdCw0YHRgtGA0L7QudC60Lgg0LjQtyBsb2NhbFN0b3JhZ2UgKNGB0LDQvNGL0LUg0YHQstC10LbQuNC1KVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9udFRvU2VsZWN0LmlzVmFyaWFibGVGb250ICYmIHJlc3RvcmVkVmFyU2V0dGluZ3NSYXcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdG9yZWRWYXJTZXR0aW5ncyA9IEpTT04ucGFyc2UocmVzdG9yZWRWYXJTZXR0aW5nc1Jhdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tSZXN0b3JlXSDQktC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0L7RgdC4INC40LcgbG9jYWxTdG9yYWdlICjQv9GA0LjQvtGA0LjRgtC10YIpOicsIHJlc3RvcmVkVmFyU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVWYXJpYWJsZVNldHRpbmdzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVZhcmlhYmxlU2V0dGluZ3NDaGFuZ2UocmVzdG9yZWRWYXJTZXR0aW5ncywgdHJ1ZSwgZm9udFRvU2VsZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NBcHBsaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1Jlc3RvcmVdINCe0YjQuNCx0LrQsCDQv9Cw0YDRgdC40L3Qs9CwINC+0YHQtdC5INC40LcgbG9jYWxTdG9yYWdlOicsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEZPTlRfU0VUVElOR1NfTFNfS0VZUy5MQVNUX1ZBUklBQkxFX1NFVFRJTkdTKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN0b3JlZFByZXNldE5hbWUgJiYgYXBwbHlQcmVzZXRTdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtSZXN0b3JlXSDQktC+0YHRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0L/RgNC10YHQtdGCINC40LcgbG9jYWxTdG9yYWdlICjQv9GA0LjQvtGA0LjRgtC10YIpOiAke3Jlc3RvcmVkUHJlc2V0TmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5UHJlc2V0U3R5bGUocmVzdG9yZWRQcmVzZXROYW1lLCBmb250VG9TZWxlY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NBcHBsaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIDIuIEZBTExCQUNLOiDQndCw0YHRgtGA0L7QudC60Lgg0LrQvtC90LrRgNC10YLQvdC+0LPQviDRiNGA0LjRhNGC0LAg0LjQtyBJbmRleGVkREIgKNC10YHQu9C4INC90LXRgiDQsiBsb2NhbFN0b3JhZ2UpXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2V0dGluZ3NBcHBsaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9udFRvU2VsZWN0LmlzVmFyaWFibGVGb250ICYmIGZvbnRUb1NlbGVjdC5sYXN0VXNlZFZhcmlhYmxlU2V0dGluZ3MgJiYgaGFuZGxlVmFyaWFibGVTZXR0aW5nc0NoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbUmVzdG9yZV0g0JLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC+0YHQuCDQuNC3IEluZGV4ZWREQiAoZmFsbGJhY2spOicsIGZvbnRUb1NlbGVjdC5sYXN0VXNlZFZhcmlhYmxlU2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVZhcmlhYmxlU2V0dGluZ3NDaGFuZ2UoZm9udFRvU2VsZWN0Lmxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncywgdHJ1ZSwgZm9udFRvU2VsZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc0FwcGxpZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmb250VG9TZWxlY3QubGFzdFVzZWRQcmVzZXROYW1lICYmIGFwcGx5UHJlc2V0U3R5bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1Jlc3RvcmVdINCS0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQv9GA0LXRgdC10YIg0LjQtyBJbmRleGVkREIgKGZhbGxiYWNrKTogJHtmb250VG9TZWxlY3QubGFzdFVzZWRQcmVzZXROYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5UHJlc2V0U3R5bGUoZm9udFRvU2VsZWN0Lmxhc3RVc2VkUHJlc2V0TmFtZSwgZm9udFRvU2VsZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc0FwcGxpZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gMy4g0J/QntCh0JvQldCU0J3QmNCZIEZBTExCQUNLOiDQldGB0LvQuCDQstC+0L7QsdGJ0LUg0L3QuNGH0LXQs9C+INC90LUg0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90L4sINGB0YLQsNCy0LjQvCDQtNC10YTQvtC70YJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXR0aW5nc0FwcGxpZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbUmVzdG9yZV0g0J3QsNGB0YLRgNC+0LnQutC4INC90LUg0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90YssINC/0YDQuNC80LXQvdGP0LXQvCDQtNC10YTQvtC70YLQvdGL0LkgUmVndWxhcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcGx5UHJlc2V0U3R5bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseVByZXNldFN0eWxlKCdSZWd1bGFyJywgZm9udFRvU2VsZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nc0FwcGxpZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAvLyDQlNC+0LHQsNCy0LvRj9C10LwgZm9udHMg0Lggc2VsZWN0ZWRGb250INCyINC30LDQstC40YHQuNC80L7RgdGC0LgsINGH0YLQvtCx0Ysg0Y3RhNGE0LXQutGCINGB0YDQsNCx0LDRgtGL0LLQsNC7INC/0YDQuCDQuNGFINC40LfQvNC10L3QtdC90LjQuFxuICAgIH0sIFtmb250cywgc2VsZWN0ZWRGb250LCBzZXRTZWxlY3RlZEZvbnQsIGFwcGx5UHJlc2V0U3R5bGUsIGhhbmRsZVZhcmlhYmxlU2V0dGluZ3NDaGFuZ2VdKTtcblxuICAgIC8vIC0tLSDQpNGD0L3QutGG0LjQuCDQtNC70Y8g0YPQv9GA0LDQstC70LXQvdC40Y8gbG9jYWxTdG9yYWdlIC0tLSBcblxuICAgIGNvbnN0IHNhdmVTZWxlY3RlZEZvbnRJZCA9IHVzZUNhbGxiYWNrKChmb250SWQpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAoZm9udElkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oRk9OVF9TRVRUSU5HU19MU19LRVlTLlNFTEVDVEVEX0ZPTlRfSUQsIGZvbnRJZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEZPTlRfU0VUVElOR1NfTFNfS0VZUy5TRUxFQ1RFRF9GT05UX0lEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IHNhdmVMYXN0VmFyaWFibGVTZXR0aW5ncyA9IHVzZUNhbGxiYWNrKChzZXR0aW5ncykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnW1BlcnNpc3RlbmNlXSBzYXZlTGFzdFZhcmlhYmxlU2V0dGluZ3Mg0LLRi9C30LLQsNC90LAg0YEg0L3QsNGB0YLRgNC+0LnQutCw0LzQuDonLCBzZXR0aW5ncyk7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oRk9OVF9TRVRUSU5HU19MU19LRVlTLkxBU1RfVkFSSUFCTEVfU0VUVElOR1MsIEpTT04uc3RyaW5naWZ5KHNldHRpbmdzKSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShGT05UX1NFVFRJTkdTX0xTX0tFWVMuTEFTVF9QUkVTRVRfTkFNRSk7IC8vINCh0LHRgNCw0YHRi9Cy0LDQtdC8INC/0YDQtdGB0LXRglxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQZXJzaXN0ZW5jZV0g0J3QsNGB0YLRgNC+0LnQutC4INGB0L7RhdGA0LDQvdC10L3RiyDQsiBsb2NhbFN0b3JhZ2UnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW1BlcnNpc3RlbmNlXSB3aW5kb3cg0L3QtdC00L7RgdGC0YPQv9C10L0sINGB0L7RhdGA0LDQvdC10L3QuNC1INC/0YDQvtC/0YPRidC10L3QvicpO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3Qgc2F2ZUxhc3RQcmVzZXROYW1lID0gdXNlQ2FsbGJhY2soKHByZXNldE5hbWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShGT05UX1NFVFRJTkdTX0xTX0tFWVMuTEFTVF9QUkVTRVRfTkFNRSwgcHJlc2V0TmFtZSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShGT05UX1NFVFRJTkdTX0xTX0tFWVMuTEFTVF9WQVJJQUJMRV9TRVRUSU5HUyk7IC8vINCh0LHRgNCw0YHRi9Cy0LDQtdC8INC+0YHQuFxuICAgICAgICB9XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgY2xlYXJGb250TG9jYWxTdG9yYWdlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoRk9OVF9TRVRUSU5HU19MU19LRVlTKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJbUGVyc2lzdGVuY2VdIGxvY2FsU3RvcmFnZSAo0YjRgNC40YTRgtGLKSDQvtGH0LjRidC10L0uXCIpO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuXG4gICAgLy8gLS0tINCk0YPQvdC60YbQuNGPINGB0LHRgNC+0YHQsCDQv9C10YDRgdC40YHRgtC10L3RgtC90L7RgdGC0LggLS0tIFxuICAgIGNvbnN0IHJlc2V0UGVyc2lzdGVuY2UgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkZWxldGVBbGxGb250c0RCKCk7XG4gICAgICAgICAgICBjbGVhckZvbnRMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgICAgIHRvYXN0LmluZm8oXCLQpdGA0LDQvdC40LvQuNGJ0LAg0YjRgNC40YTRgtC+0LIgKERCINC4IExTKSDQvtGH0LjRidC10L3Riy5cIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1BlcnNpc3RlbmNlXSDQntGI0LjQsdC60LAg0L/RgNC4INGB0LHRgNC+0YHQtSDRhdGA0LDQvdC40LvQuNGJOlwiLCBlcnJvcik7XG4gICAgICAgICAgICB0b2FzdC5lcnJvcihcItCe0YjQuNCx0LrQsCDQvtGH0LjRgdGC0LrQuCDRhdGA0LDQvdC40LvQuNGJINGI0YDQuNGE0YLQvtCyLlwiKTtcbiAgICAgICAgfVxuICAgIH0sIFtjbGVhckZvbnRMb2NhbFN0b3JhZ2VdKTtcblxuICAgIC8vIC0tLSDQpNGD0L3QutGG0LjRjyDRgdC+0YXRgNCw0L3QtdC90LjRjyDQvdCw0YHRgtGA0L7QtdC6INGI0YDQuNGE0YLQsCDQsiBJbmRleGVkREIgLS0tXG4gICAgY29uc3Qgc2F2ZUZvbnRTZXR0aW5ncyA9IHVzZUNhbGxiYWNrKGFzeW5jIChmb250SWQsIHNldHRpbmdzKSA9PiB7XG4gICAgICAgIGlmICghZm9udElkIHx8ICFzZXR0aW5ncykgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZUZvbnRTZXR0aW5ncyhmb250SWQsIHNldHRpbmdzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtQZXJzaXN0ZW5jZV0g0J7RiNC40LHQutCwINGB0L7RhdGA0LDQvdC10L3QuNGPINC90LDRgdGC0YDQvtC10Log0YjRgNC40YTRgtCwICR7Zm9udElkfTpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9LCBbXSk7XG5cbiAgICAvLyDQktC+0LfQstGA0LDRidCw0LXQvCDRhNGD0L3QutGG0LjQuCDQtNC70Y8g0YPQv9GA0LDQstC70LXQvdC40Y8g0L/QtdGA0YHQuNGB0YLQtdC90YLQvdC+0YHRgtGM0Y5cbiAgICByZXR1cm4ge1xuICAgICAgICBzYXZlU2VsZWN0ZWRGb250SWQsXG4gICAgICAgIHNhdmVMYXN0VmFyaWFibGVTZXR0aW5ncyxcbiAgICAgICAgc2F2ZUxhc3RQcmVzZXROYW1lLFxuICAgICAgICBjbGVhckZvbnRMb2NhbFN0b3JhZ2UsXG4gICAgICAgIHJlc2V0UGVyc2lzdGVuY2UsXG4gICAgICAgIHNhdmVGb250U2V0dGluZ3NcbiAgICB9O1xufSAiXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJ0b2FzdCIsImdldEFsbEZvbnRzIiwiZGVsZXRlQWxsRm9udHNEQiIsInVwZGF0ZUZvbnRTZXR0aW5ncyIsImxvYWRGb250RmFjZUlmTmVlZGVkIiwicmV2b2tlT2JqZWN0VVJMIiwiRk9OVF9TRVRUSU5HU19MU19LRVlTIiwiTEFTVF9QUkVTRVRfTkFNRSIsIkxBU1RfVkFSSUFCTEVfU0VUVElOR1MiLCJTRUxFQ1RFRF9GT05UX0lEIiwidXNlRm9udFBlcnNpc3RlbmNlIiwic2V0Rm9udHMiLCJzZXRJc0xvYWRpbmciLCJzZXRJc0luaXRpYWxMb2FkQ29tcGxldGUiLCJzZXRTZWxlY3RlZEZvbnQiLCJoYW5kbGVWYXJpYWJsZVNldHRpbmdzQ2hhbmdlIiwiYXBwbHlQcmVzZXRTdHlsZSIsImZvbnRzIiwic2VsZWN0ZWRGb250IiwiaXNNb3VudGVkIiwibG9hZEluaXRpYWxGb250cyIsImNvbnNvbGUiLCJsb2ciLCJzdG9yZWRGb250cyIsImxlbmd0aCIsInByb2Nlc3NlZEZvbnRzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImZvbnQiLCJpZCIsImZpbGUiLCJCbG9iIiwid2FybiIsInVybCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImZvbnRGYW1pbHlUb0xvYWQiLCJmb250RmFtaWx5IiwiaW5pdGlhbFZhclNldHRpbmdzIiwiaXNWYXJpYWJsZUZvbnQiLCJ2YXJpYWJsZUF4ZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwicmVkdWNlIiwiYWNjIiwidGFnIiwiYXhpcyIsImRlZmF1bHQiLCJ1bmRlZmluZWQiLCJsYXN0VXNlZFByZXNldE5hbWUiLCJsYXN0VXNlZFZhcmlhYmxlU2V0dGluZ3MiLCJsb2FkRXJyb3IiLCJlcnJvciIsIm5hbWUiLCJ2YWxpZEZvbnRzIiwiZmlsdGVyIiwiZiIsInN0b3JlZElkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImZvbnRUb1NlbGVjdCIsImZpbmQiLCJkaXNwbGF5TmFtZSIsInJlbW92ZUl0ZW0iLCJzZXRJdGVtIiwic2V0VGltZW91dCIsInJlc3RvcmVkVmFyU2V0dGluZ3NSYXciLCJyZXN0b3JlZFByZXNldE5hbWUiLCJzZXR0aW5nc0FwcGxpZWQiLCJyZXN0b3JlZFZhclNldHRpbmdzIiwiSlNPTiIsInBhcnNlIiwiZSIsInNhdmVTZWxlY3RlZEZvbnRJZCIsImZvbnRJZCIsInNhdmVMYXN0VmFyaWFibGVTZXR0aW5ncyIsInNldHRpbmdzIiwic3RyaW5naWZ5Iiwic2F2ZUxhc3RQcmVzZXROYW1lIiwicHJlc2V0TmFtZSIsImNsZWFyRm9udExvY2FsU3RvcmFnZSIsInZhbHVlcyIsImZvckVhY2giLCJrZXkiLCJyZXNldFBlcnNpc3RlbmNlIiwiaW5mbyIsInNhdmVGb250U2V0dGluZ3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./hooks/useFontPersistence.js\n");

/***/ }),

/***/ "./hooks/useFontStyleManager.js":
/*!**************************************!*\
  !*** ./hooks/useFontStyleManager.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFontStyleManager: () => (/* binding */ useFontStyleManager)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/fontUtilsCommon */ \"./utils/fontUtilsCommon.js\");\n\n\n/**\n * Хук для управления стилями шрифтов (пресетами).\n * \n * @param {Object} selectedFont - Текущий выбранный объект шрифта.\n * @param {Function} setSelectedFont - Функция для обновления состояния выбранного шрифта.\n * @param {Function} setFonts - Функция для обновления всего массива шрифтов (для сохранения lastUsedPresetName).\n * @param {Object} variableSettings - Текущие настройки вариативных осей (для чтения перед применением пресета).\n * @param {Function} applyVariableSettings - Функция из useVariableFontControls для применения настроек осей.\n * @param {Function} loadFontsourceStyleVariant - Функция из useFontLoader для потенциальной загрузки статических вариантов Fontsource (пока не используется напрямую в applyPresetStyle).\n * @param {Function} onPresetApplied - Колбэк, вызываемый после применения пресета для сохранения в IndexedDB.\n * @returns {{ applyPresetStyle: Function }} - Объект с функцией применения пресета.\n */ function useFontStyleManager(selectedFont, setSelectedFont, setFonts, variableSettings, applyVariableSettings, loadFontsourceStyleVariant, onPresetApplied) {\n    /**\n   * Применяет предустановленный стиль (пресет) для текущего или указанного шрифта.\n   * (Перенесено из useFontManager)\n   * \n   * @param {string} presetName - Имя пресета (например, 'Regular', 'Bold', 'Italic').\n   * @param {Object|null} font - Шрифт для применения (по умолчанию selectedFont).\n   */ const applyPresetStyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (presetName, font = null)=>{\n        const fontToApply = font || selectedFont;\n        if (!fontToApply) return;\n        const presetInfo = _utils_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_1__.PRESET_STYLES.find((p)=>p.name === presetName);\n        if (!presetInfo) {\n            console.warn(`Пресет \"${presetName}\" не найден.`);\n            return;\n        }\n        const { weight, style } = presetInfo;\n        console.log(`[applyPresetStyle] Применяем пресет '${presetName}' (weight: ${weight}, style: ${style}) к шрифту '${fontToApply.name}' (ID: ${fontToApply.id})`);\n        // Внутренняя функция для обновления состояния selectedFont, если необходимо\n        const updateSelectedFontStateIfNeeded = ()=>{\n            // Обновляем selectedFont если:\n            // 1. Применяем стиль к текущему выбранному шрифту\n            // 2. selectedFont еще не установлен, но fontToApply есть (восстановление)\n            // 3. fontToApply - это тот шрифт, который должен стать selectedFont (при переключении)\n            if (selectedFont && fontToApply.id === selectedFont.id || !selectedFont && fontToApply || font && fontToApply.id === font.id) {\n                setSelectedFont((prevSelected)=>{\n                    // Случай 1: prevSelected есть и это тот же шрифт - обновляем его\n                    if (prevSelected && prevSelected.id === fontToApply.id) {\n                        console.log(`[applyPresetStyle] Обновляем состояние selectedFont (${fontToApply.name}) до weight: ${weight}, style: ${style}`);\n                        return {\n                            ...prevSelected,\n                            currentWeight: weight,\n                            currentStyle: style\n                        };\n                    } else if (fontToApply) {\n                        console.log(`[applyPresetStyle] Устанавливаем состояние selectedFont (${fontToApply.name}) до weight: ${weight}, style: ${style}`);\n                        return {\n                            ...fontToApply,\n                            currentWeight: weight,\n                            currentStyle: style\n                        };\n                    }\n                    return prevSelected; // Возвращаем старое состояние в остальных случаях\n                });\n            }\n        };\n        // Логика для невариативных Fontsource шрифтов\n        if (fontToApply.source === \"fontsource\" && !fontToApply.isVariableFont) {\n            // Проверяем, был ли стиль загружен ранее\n            const styleIsLoaded = fontToApply.loadedStyles?.some((s)=>s.weight === weight && s.style === style);\n            if (!styleIsLoaded) {\n                console.log(`[applyPresetStyle] Загружаем стиль ${presetName} для Fontsource ${fontToApply.name}`);\n                // Загружаем нужный стиль\n                if (loadFontsourceStyleVariant) {\n                    try {\n                        loadFontsourceStyleVariant(fontToApply.name, weight, style, fontToApply);\n                    } catch (error) {\n                        console.error(`[applyPresetStyle] Ошибка загрузки стиля ${presetName}:`, error);\n                    }\n                }\n            }\n        } else if (fontToApply.isVariableFont) {\n            const currentAxes = fontToApply.variableAxes || {};\n            // Используем актуальные настройки из variableSettings (переданные в хук)\n            const currentFontSettings = variableSettings;\n            const newSettings = {\n                ...currentFontSettings\n            }; // Копируем текущие настройки\n            let settingsChanged = false;\n            // Обновляем 'wght', если ось существует\n            if (\"wght\" in currentAxes) {\n                // Применяем вес из пресета\n                if (newSettings.wght !== weight) {\n                    newSettings.wght = weight;\n                    settingsChanged = true;\n                }\n            }\n            // Обновляем 'ital' или 'slnt' в зависимости от стиля пресета\n            const targetItal = style === \"italic\" ? 1 : 0;\n            const slantAxis = typeof currentAxes.slnt === \"object\" ? currentAxes.slnt : undefined;\n            // Определяем целевое значение 'slnt'. Если стиль 'italic', используем min оси (или -15), иначе default (или 0)\n            const targetSlnt = style === \"italic\" ? slantAxis?.min ?? -15 : slantAxis?.default ?? 0;\n            if (\"ital\" in currentAxes) {\n                if (newSettings.ital !== targetItal) {\n                    newSettings.ital = targetItal;\n                    settingsChanged = true;\n                    // Если есть 'slnt', удаляем его, т.к. 'ital' имеет приоритет\n                    if (\"slnt\" in newSettings) delete newSettings.slnt;\n                }\n            } else if (\"slnt\" in currentAxes) {\n                if (newSettings.slnt !== targetSlnt) {\n                    newSettings.slnt = targetSlnt;\n                    settingsChanged = true;\n                    // Если есть 'ital', удаляем его (хотя не должно быть по логике выше)\n                    if (\"ital\" in newSettings) delete newSettings.ital;\n                }\n            }\n            // Если настройки осей изменились, вызываем applyVariableSettings\n            if (settingsChanged) {\n                console.log(`[applyPresetStyle] Настройки изменились. Вызываем applyVariableSettings для ${fontToApply.name}:`, newSettings);\n                // Передаем isFinalUpdate = true, и сам объект шрифта fontToApply\n                applyVariableSettings(newSettings, true, fontToApply);\n            } else {\n                console.log(`[applyPresetStyle] Настройки вариативности для пресета '${presetName}' уже применены или не изменились.`);\n            }\n        } else {\n            console.log(`[applyPresetStyle] Применяем стиль ${presetName} к статическому/другому типу шрифта: ${fontToApply.name}`);\n        }\n        // ВАЖНО: Обновляем selectedFont для ВСЕХ типов шрифтов (только один раз в конце)\n        updateSelectedFontStateIfNeeded();\n        // Обновляем lastUsedPresetName в общем массиве шрифтов\n        // Это нужно делать всегда, независимо от того, изменились ли оси\n        setFonts((currentFonts)=>{\n            if (!Array.isArray(currentFonts)) {\n                console.warn(\"[applyPresetStyle] currentFonts не является массивом:\", currentFonts);\n                return currentFonts; // Возвращаем как есть, если не массив\n            }\n            return currentFonts.map((f)=>{\n                if (f.id === fontToApply.id) {\n                    console.log(`[applyPresetStyle] Обновляем lastUsedPresetName для ${f.name} на ${presetName}`);\n                    // Для вариативных шрифтов НЕ сбрасываем lastUsedVariableSettings,\n                    // так как пресет может изменить оси, и мы хотим сохранить эти изменения\n                    if (fontToApply.isVariableFont) {\n                        return {\n                            ...f,\n                            lastUsedPresetName: presetName\n                        };\n                    } else {\n                        // Для статических шрифтов сбрасываем variableSettings и сохраняем пресет\n                        return {\n                            ...f,\n                            lastUsedPresetName: presetName,\n                            lastUsedVariableSettings: null\n                        };\n                    }\n                }\n                return f;\n            });\n        });\n        // Сохраняем настройки в IndexedDB через колбэк\n        if (onPresetApplied) {\n            const settingsToSave = {\n                lastUsedPresetName: presetName,\n                currentWeight: weight,\n                currentStyle: style\n            };\n            // Для статических шрифтов очищаем lastUsedVariableSettings\n            if (!fontToApply.isVariableFont) {\n                settingsToSave.lastUsedVariableSettings = null;\n            }\n            console.log(`[applyPresetStyle] Сохраняем настройки в IndexedDB для ${fontToApply.name}:`, settingsToSave);\n            onPresetApplied(fontToApply.id, settingsToSave);\n        }\n    }, [\n        selectedFont,\n        setSelectedFont,\n        setFonts,\n        variableSettings,\n        applyVariableSettings,\n        loadFontsourceStyleVariant,\n        onPresetApplied\n    ]); // Зависимости useCallback\n    return {\n        applyPresetStyle\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjNDO2dCQUNwQmUsZUFBZU47Z0JBQ2ZPLGNBQWNOO1lBQ2hCO1lBRUEsMkRBQTJEO1lBQzNELElBQUksQ0FBQ1IsWUFBWWdCLGNBQWMsRUFBRTtnQkFDL0IyQixlQUFlRCx3QkFBd0IsR0FBRztZQUM1QztZQUVBckMsUUFBUUksR0FBRyxDQUFDLENBQUMsdURBQXVELEVBQUVULFlBQVlJLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRXVDO1lBQzNGL0MsZ0JBQWdCSSxZQUFZVSxFQUFFLEVBQUVpQztRQUNsQztJQUVGLEdBQUc7UUFBQ3JEO1FBQWNDO1FBQWlCQztRQUFVQztRQUFrQkM7UUFBdUJDO1FBQTRCQztLQUFnQixHQUFHLDBCQUEwQjtJQUUvSixPQUFPO1FBQ0xDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZvbnQtZ2F1bnRsZXQtY2xvbmUvLi9ob29rcy91c2VGb250U3R5bGVNYW5hZ2VyLmpzP2IyOGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBQUkVTRVRfU1RZTEVTIH0gZnJvbSAnLi4vdXRpbHMvZm9udFV0aWxzQ29tbW9uJztcblxuLyoqXG4gKiDQpdGD0Log0LTQu9GPINGD0L/RgNCw0LLQu9C10L3QuNGPINGB0YLQuNC70Y/QvNC4INGI0YDQuNGE0YLQvtCyICjQv9GA0LXRgdC10YLQsNC80LgpLlxuICogXG4gKiBAcGFyYW0ge09iamVjdH0gc2VsZWN0ZWRGb250IC0g0KLQtdC60YPRidC40Lkg0LLRi9Cx0YDQsNC90L3Ri9C5INC+0LHRitC10LrRgiDRiNGA0LjRhNGC0LAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZXRTZWxlY3RlZEZvbnQgLSDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0L7QsdC90L7QstC70LXQvdC40Y8g0YHQvtGB0YLQvtGP0L3QuNGPINCy0YvQsdGA0LDQvdC90L7Qs9C+INGI0YDQuNGE0YLQsC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHNldEZvbnRzIC0g0KTRg9C90LrRhtC40Y8g0LTQu9GPINC+0LHQvdC+0LLQu9C10L3QuNGPINCy0YHQtdCz0L4g0LzQsNGB0YHQuNCy0LAg0YjRgNC40YTRgtC+0LIgKNC00LvRjyDRgdC+0YXRgNCw0L3QtdC90LjRjyBsYXN0VXNlZFByZXNldE5hbWUpLlxuICogQHBhcmFtIHtPYmplY3R9IHZhcmlhYmxlU2V0dGluZ3MgLSDQotC10LrRg9GJ0LjQtSDQvdCw0YHRgtGA0L7QudC60Lgg0LLQsNGA0LjQsNGC0LjQstC90YvRhSDQvtGB0LXQuSAo0LTQu9GPINGH0YLQtdC90LjRjyDQv9C10YDQtdC0INC/0YDQuNC80LXQvdC10L3QuNC10Lwg0L/RgNC10YHQtdGC0LApLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gYXBwbHlWYXJpYWJsZVNldHRpbmdzIC0g0KTRg9C90LrRhtC40Y8g0LjQtyB1c2VWYXJpYWJsZUZvbnRDb250cm9scyDQtNC70Y8g0L/RgNC40LzQtdC90LXQvdC40Y8g0L3QsNGB0YLRgNC+0LXQuiDQvtGB0LXQuS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxvYWRGb250c291cmNlU3R5bGVWYXJpYW50IC0g0KTRg9C90LrRhtC40Y8g0LjQtyB1c2VGb250TG9hZGVyINC00LvRjyDQv9C+0YLQtdC90YbQuNCw0LvRjNC90L7QuSDQt9Cw0LPRgNGD0LfQutC4INGB0YLQsNGC0LjRh9C10YHQutC40YUg0LLQsNGA0LjQsNC90YLQvtCyIEZvbnRzb3VyY2UgKNC/0L7QutCwINC90LUg0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINC90LDQv9GA0Y/QvNGD0Y4g0LIgYXBwbHlQcmVzZXRTdHlsZSkuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvblByZXNldEFwcGxpZWQgLSDQmtC+0LvQsdGN0LosINCy0YvQt9GL0LLQsNC10LzRi9C5INC/0L7RgdC70LUg0L/RgNC40LzQtdC90LXQvdC40Y8g0L/RgNC10YHQtdGC0LAg0LTQu9GPINGB0L7RhdGA0LDQvdC10L3QuNGPINCyIEluZGV4ZWREQi5cbiAqIEByZXR1cm5zIHt7IGFwcGx5UHJlc2V0U3R5bGU6IEZ1bmN0aW9uIH19IC0g0J7QsdGK0LXQutGCINGBINGE0YPQvdC60YbQuNC10Lkg0L/RgNC40LzQtdC90LXQvdC40Y8g0L/RgNC10YHQtdGC0LAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VGb250U3R5bGVNYW5hZ2VyKFxuICBzZWxlY3RlZEZvbnQsXG4gIHNldFNlbGVjdGVkRm9udCxcbiAgc2V0Rm9udHMsXG4gIHZhcmlhYmxlU2V0dGluZ3MsXG4gIGFwcGx5VmFyaWFibGVTZXR0aW5ncyxcbiAgbG9hZEZvbnRzb3VyY2VTdHlsZVZhcmlhbnQsXG4gIG9uUHJlc2V0QXBwbGllZFxuKSB7XG5cbiAgLyoqXG4gICAqINCf0YDQuNC80LXQvdGP0LXRgiDQv9GA0LXQtNGD0YHRgtCw0L3QvtCy0LvQtdC90L3Ri9C5INGB0YLQuNC70YwgKNC/0YDQtdGB0LXRgikg0LTQu9GPINGC0LXQutGD0YnQtdCz0L4g0LjQu9C4INGD0LrQsNC30LDQvdC90L7Qs9C+INGI0YDQuNGE0YLQsC5cbiAgICogKNCf0LXRgNC10L3QtdGB0LXQvdC+INC40LcgdXNlRm9udE1hbmFnZXIpXG4gICAqIFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJlc2V0TmFtZSAtINCY0LzRjyDQv9GA0LXRgdC10YLQsCAo0L3QsNC/0YDQuNC80LXRgCwgJ1JlZ3VsYXInLCAnQm9sZCcsICdJdGFsaWMnKS5cbiAgICogQHBhcmFtIHtPYmplY3R8bnVsbH0gZm9udCAtINCo0YDQuNGE0YIg0LTQu9GPINC/0YDQuNC80LXQvdC10L3QuNGPICjQv9C+INGD0LzQvtC70YfQsNC90LjRjiBzZWxlY3RlZEZvbnQpLlxuICAgKi9cbiAgY29uc3QgYXBwbHlQcmVzZXRTdHlsZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChwcmVzZXROYW1lLCBmb250ID0gbnVsbCkgPT4ge1xuICAgIGNvbnN0IGZvbnRUb0FwcGx5ID0gZm9udCB8fCBzZWxlY3RlZEZvbnQ7XG4gICAgaWYgKCFmb250VG9BcHBseSkgcmV0dXJuO1xuXG4gICAgY29uc3QgcHJlc2V0SW5mbyA9IFBSRVNFVF9TVFlMRVMuZmluZChwID0+IHAubmFtZSA9PT0gcHJlc2V0TmFtZSk7XG4gICAgaWYgKCFwcmVzZXRJbmZvKSB7XG4gICAgICBjb25zb2xlLndhcm4oYNCf0YDQtdGB0LXRgiBcIiR7cHJlc2V0TmFtZX1cIiDQvdC1INC90LDQudC00LXQvS5gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyB3ZWlnaHQsIHN0eWxlIH0gPSBwcmVzZXRJbmZvO1xuICAgIGNvbnNvbGUubG9nKGBbYXBwbHlQcmVzZXRTdHlsZV0g0J/RgNC40LzQtdC90Y/QtdC8INC/0YDQtdGB0LXRgiAnJHtwcmVzZXROYW1lfScgKHdlaWdodDogJHt3ZWlnaHR9LCBzdHlsZTogJHtzdHlsZX0pINC6INGI0YDQuNGE0YLRgyAnJHtmb250VG9BcHBseS5uYW1lfScgKElEOiAke2ZvbnRUb0FwcGx5LmlkfSlgKTtcblxuICAgIC8vINCS0L3Rg9GC0YDQtdC90L3Rj9GPINGE0YPQvdC60YbQuNGPINC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyDRgdC+0YHRgtC+0Y/QvdC40Y8gc2VsZWN0ZWRGb250LCDQtdGB0LvQuCDQvdC10L7QsdGF0L7QtNC40LzQvlxuICAgIGNvbnN0IHVwZGF0ZVNlbGVjdGVkRm9udFN0YXRlSWZOZWVkZWQgPSAoKSA9PiB7XG4gICAgICAvLyDQntCx0L3QvtCy0LvRj9C10Lwgc2VsZWN0ZWRGb250INC10YHQu9C4OlxuICAgICAgLy8gMS4g0J/RgNC40LzQtdC90Y/QtdC8INGB0YLQuNC70Ywg0Log0YLQtdC60YPRidC10LzRgyDQstGL0LHRgNCw0L3QvdC+0LzRgyDRiNGA0LjRhNGC0YNcbiAgICAgIC8vIDIuIHNlbGVjdGVkRm9udCDQtdGJ0LUg0L3QtSDRg9GB0YLQsNC90L7QstC70LXQvSwg0L3QviBmb250VG9BcHBseSDQtdGB0YLRjCAo0LLQvtGB0YHRgtCw0L3QvtCy0LvQtdC90LjQtSlcbiAgICAgIC8vIDMuIGZvbnRUb0FwcGx5IC0g0Y3RgtC+INGC0L7RgiDRiNGA0LjRhNGCLCDQutC+0YLQvtGA0YvQuSDQtNC+0LvQttC10L0g0YHRgtCw0YLRjCBzZWxlY3RlZEZvbnQgKNC/0YDQuCDQv9C10YDQtdC60LvRjtGH0LXQvdC40LgpXG4gICAgICBpZiAoKHNlbGVjdGVkRm9udCAmJiBmb250VG9BcHBseS5pZCA9PT0gc2VsZWN0ZWRGb250LmlkKSB8fCBcbiAgICAgICAgICAoIXNlbGVjdGVkRm9udCAmJiBmb250VG9BcHBseSkgfHxcbiAgICAgICAgICAoZm9udCAmJiBmb250VG9BcHBseS5pZCA9PT0gZm9udC5pZCkpIHtcbiAgICAgICAgc2V0U2VsZWN0ZWRGb250KHByZXZTZWxlY3RlZCA9PiB7XG4gICAgICAgICAgLy8g0KHQu9GD0YfQsNC5IDE6IHByZXZTZWxlY3RlZCDQtdGB0YLRjCDQuCDRjdGC0L4g0YLQvtGCINC20LUg0YjRgNC40YTRgiAtINC+0LHQvdC+0LLQu9GP0LXQvCDQtdCz0L5cbiAgICAgICAgICBpZiAocHJldlNlbGVjdGVkICYmIHByZXZTZWxlY3RlZC5pZCA9PT0gZm9udFRvQXBwbHkuaWQpIHtcbiAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW2FwcGx5UHJlc2V0U3R5bGVdINCe0LHQvdC+0LLQu9GP0LXQvCDRgdC+0YHRgtC+0Y/QvdC40LUgc2VsZWN0ZWRGb250ICgke2ZvbnRUb0FwcGx5Lm5hbWV9KSDQtNC+IHdlaWdodDogJHt3ZWlnaHR9LCBzdHlsZTogJHtzdHlsZX1gKTtcbiAgICAgICAgICAgICByZXR1cm4geyAuLi5wcmV2U2VsZWN0ZWQsIGN1cnJlbnRXZWlnaHQ6IHdlaWdodCwgY3VycmVudFN0eWxlOiBzdHlsZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDQodC70YPRh9Cw0LkgMjogcHJldlNlbGVjdGVkINC90LXRgiDQuNC70Lgg0Y3RgtC+INC00YDRg9Cz0L7QuSDRiNGA0LjRhNGCLCDQvdC+IGZvbnRUb0FwcGx5INC10YHRgtGMIC0g0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10LwgZm9udFRvQXBwbHkg0LrQsNC6IHNlbGVjdGVkRm9udFxuICAgICAgICAgIGVsc2UgaWYgKGZvbnRUb0FwcGx5KSB7XG4gICAgICAgICAgICAgY29uc29sZS5sb2coYFthcHBseVByZXNldFN0eWxlXSDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDRgdC+0YHRgtC+0Y/QvdC40LUgc2VsZWN0ZWRGb250ICgke2ZvbnRUb0FwcGx5Lm5hbWV9KSDQtNC+IHdlaWdodDogJHt3ZWlnaHR9LCBzdHlsZTogJHtzdHlsZX1gKTtcbiAgICAgICAgICAgICByZXR1cm4geyAuLi5mb250VG9BcHBseSwgY3VycmVudFdlaWdodDogd2VpZ2h0LCBjdXJyZW50U3R5bGU6IHN0eWxlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBwcmV2U2VsZWN0ZWQ7IC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdC8INGB0YLQsNGA0L7QtSDRgdC+0YHRgtC+0Y/QvdC40LUg0LIg0L7RgdGC0LDQu9GM0L3Ri9GFINGB0LvRg9GH0LDRj9GFXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyDQm9C+0LPQuNC60LAg0LTQu9GPINC90LXQstCw0YDQuNCw0YLQuNCy0L3Ri9GFIEZvbnRzb3VyY2Ug0YjRgNC40YTRgtC+0LJcbiAgICBpZiAoZm9udFRvQXBwbHkuc291cmNlID09PSAnZm9udHNvdXJjZScgJiYgIWZvbnRUb0FwcGx5LmlzVmFyaWFibGVGb250KSB7XG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10LwsINCx0YvQuyDQu9C4INGB0YLQuNC70Ywg0LfQsNCz0YDRg9C20LXQvSDRgNCw0L3QtdC1XG4gICAgICBjb25zdCBzdHlsZUlzTG9hZGVkID0gZm9udFRvQXBwbHkubG9hZGVkU3R5bGVzPy5zb21lKHMgPT4gcy53ZWlnaHQgPT09IHdlaWdodCAmJiBzLnN0eWxlID09PSBzdHlsZSk7XG4gICAgICBpZiAoIXN0eWxlSXNMb2FkZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFthcHBseVByZXNldFN0eWxlXSDQl9Cw0LPRgNGD0LbQsNC10Lwg0YHRgtC40LvRjCAke3ByZXNldE5hbWV9INC00LvRjyBGb250c291cmNlICR7Zm9udFRvQXBwbHkubmFtZX1gKTtcbiAgICAgICAgLy8g0JfQsNCz0YDRg9C20LDQtdC8INC90YPQttC90YvQuSDRgdGC0LjQu9GMXG4gICAgICAgIGlmIChsb2FkRm9udHNvdXJjZVN0eWxlVmFyaWFudCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2FkRm9udHNvdXJjZVN0eWxlVmFyaWFudChmb250VG9BcHBseS5uYW1lLCB3ZWlnaHQsIHN0eWxlLCBmb250VG9BcHBseSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFthcHBseVByZXNldFN0eWxlXSDQntGI0LjQsdC60LAg0LfQsNCz0YDRg9C30LrQuCDRgdGC0LjQu9GPICR7cHJlc2V0TmFtZX06YCwgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyDQm9C+0LPQuNC60LAg0LTQu9GPINCy0LDRgNC40LDRgtC40LLQvdGL0YUg0YjRgNC40YTRgtC+0LJcbiAgICBlbHNlIGlmIChmb250VG9BcHBseS5pc1ZhcmlhYmxlRm9udCkge1xuICAgICAgY29uc3QgY3VycmVudEF4ZXMgPSBmb250VG9BcHBseS52YXJpYWJsZUF4ZXMgfHwge307XG4gICAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCDQsNC60YLRg9Cw0LvRjNC90YvQtSDQvdCw0YHRgtGA0L7QudC60Lgg0LjQtyB2YXJpYWJsZVNldHRpbmdzICjQv9C10YDQtdC00LDQvdC90YvQtSDQsiDRhdGD0LopXG4gICAgICBjb25zdCBjdXJyZW50Rm9udFNldHRpbmdzID0gdmFyaWFibGVTZXR0aW5nczsgXG4gICAgICBjb25zdCBuZXdTZXR0aW5ncyA9IHsgLi4uY3VycmVudEZvbnRTZXR0aW5ncyB9OyAvLyDQmtC+0L/QuNGA0YPQtdC8INGC0LXQutGD0YnQuNC1INC90LDRgdGC0YDQvtC50LrQuFxuICAgICAgbGV0IHNldHRpbmdzQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgICAvLyDQntCx0L3QvtCy0LvRj9C10LwgJ3dnaHQnLCDQtdGB0LvQuCDQvtGB0Ywg0YHRg9GJ0LXRgdGC0LLRg9C10YJcbiAgICAgIGlmICgnd2dodCcgaW4gY3VycmVudEF4ZXMpIHtcbiAgICAgICAgLy8g0J/RgNC40LzQtdC90Y/QtdC8INCy0LXRgSDQuNC3INC/0YDQtdGB0LXRgtCwXG4gICAgICAgIGlmIChuZXdTZXR0aW5ncy53Z2h0ICE9PSB3ZWlnaHQpIHtcbiAgICAgICAgICBuZXdTZXR0aW5ncy53Z2h0ID0gd2VpZ2h0O1xuICAgICAgICAgIHNldHRpbmdzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8ICdpdGFsJyDQuNC70LggJ3NsbnQnINCyINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDRgdGC0LjQu9GPINC/0YDQtdGB0LXRgtCwXG4gICAgICBjb25zdCB0YXJnZXRJdGFsID0gc3R5bGUgPT09ICdpdGFsaWMnID8gMSA6IDA7XG4gICAgICBjb25zdCBzbGFudEF4aXMgPSB0eXBlb2YgY3VycmVudEF4ZXMuc2xudCA9PT0gJ29iamVjdCcgPyBjdXJyZW50QXhlcy5zbG50IDogdW5kZWZpbmVkO1xuICAgICAgLy8g0J7Qv9GA0LXQtNC10LvRj9C10Lwg0YbQtdC70LXQstC+0LUg0LfQvdCw0YfQtdC90LjQtSAnc2xudCcuINCV0YHQu9C4INGB0YLQuNC70YwgJ2l0YWxpYycsINC40YHQv9C+0LvRjNC30YPQtdC8IG1pbiDQvtGB0LggKNC40LvQuCAtMTUpLCDQuNC90LDRh9C1IGRlZmF1bHQgKNC40LvQuCAwKVxuICAgICAgY29uc3QgdGFyZ2V0U2xudCA9IHN0eWxlID09PSAnaXRhbGljJyA/IChzbGFudEF4aXM/Lm1pbiA/PyAtMTUpIDogKHNsYW50QXhpcz8uZGVmYXVsdCA/PyAwKTtcblxuICAgICAgaWYgKCdpdGFsJyBpbiBjdXJyZW50QXhlcykgeyAvLyDQldGB0LvQuCDQtdGB0YLRjCDQvtGB0YwgJ2l0YWwnXG4gICAgICAgIGlmIChuZXdTZXR0aW5ncy5pdGFsICE9PSB0YXJnZXRJdGFsKSB7XG4gICAgICAgICAgbmV3U2V0dGluZ3MuaXRhbCA9IHRhcmdldEl0YWw7XG4gICAgICAgICAgc2V0dGluZ3NDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAvLyDQldGB0LvQuCDQtdGB0YLRjCAnc2xudCcsINGD0LTQsNC70Y/QtdC8INC10LPQviwg0YIu0LouICdpdGFsJyDQuNC80LXQtdGCINC/0YDQuNC+0YDQuNGC0LXRglxuICAgICAgICAgIGlmICgnc2xudCcgaW4gbmV3U2V0dGluZ3MpIGRlbGV0ZSBuZXdTZXR0aW5ncy5zbG50OyBcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgnc2xudCcgaW4gY3VycmVudEF4ZXMpIHsgLy8g0JjQvdCw0YfQtSwg0LXRgdC70Lgg0LXRgdGC0Ywg0L7RgdGMICdzbG50J1xuICAgICAgICBpZiAobmV3U2V0dGluZ3Muc2xudCAhPT0gdGFyZ2V0U2xudCkge1xuICAgICAgICAgIG5ld1NldHRpbmdzLnNsbnQgPSB0YXJnZXRTbG50O1xuICAgICAgICAgIHNldHRpbmdzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgIC8vINCV0YHQu9C4INC10YHRgtGMICdpdGFsJywg0YPQtNCw0LvRj9C10Lwg0LXQs9C+ICjRhdC+0YLRjyDQvdC1INC00L7Qu9C20L3QviDQsdGL0YLRjCDQv9C+INC70L7Qs9C40LrQtSDQstGL0YjQtSlcbiAgICAgICAgICBpZiAoJ2l0YWwnIGluIG5ld1NldHRpbmdzKSBkZWxldGUgbmV3U2V0dGluZ3MuaXRhbDsgXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g0JXRgdC70Lgg0L3QsNGB0YLRgNC+0LnQutC4INC+0YHQtdC5INC40LfQvNC10L3QuNC70LjRgdGMLCDQstGL0LfRi9Cy0LDQtdC8IGFwcGx5VmFyaWFibGVTZXR0aW5nc1xuICAgICAgaWYgKHNldHRpbmdzQ2hhbmdlZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgW2FwcGx5UHJlc2V0U3R5bGVdINCd0LDRgdGC0YDQvtC50LrQuCDQuNC30LzQtdC90LjQu9C40YHRjC4g0JLRi9C30YvQstCw0LXQvCBhcHBseVZhcmlhYmxlU2V0dGluZ3Mg0LTQu9GPICR7Zm9udFRvQXBwbHkubmFtZX06YCwgbmV3U2V0dGluZ3MpO1xuICAgICAgICAvLyDQn9C10YDQtdC00LDQtdC8IGlzRmluYWxVcGRhdGUgPSB0cnVlLCDQuCDRgdCw0Lwg0L7QsdGK0LXQutGCINGI0YDQuNGE0YLQsCBmb250VG9BcHBseVxuICAgICAgICBhcHBseVZhcmlhYmxlU2V0dGluZ3MobmV3U2V0dGluZ3MsIHRydWUsIGZvbnRUb0FwcGx5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbYXBwbHlQcmVzZXRTdHlsZV0g0J3QsNGB0YLRgNC+0LnQutC4INCy0LDRgNC40LDRgtC40LLQvdC+0YHRgtC4INC00LvRjyDQv9GA0LXRgdC10YLQsCAnJHtwcmVzZXROYW1lfScg0YPQttC1INC/0YDQuNC80LXQvdC10L3RiyDQuNC70Lgg0L3QtSDQuNC30LzQtdC90LjQu9C40YHRjC5gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8g0JvQvtCz0LjQutCwINC00LvRjyDQtNGA0YPQs9C40YUg0YLQuNC/0L7QsiDRiNGA0LjRhNGC0L7QsiAo0L3QsNC/0YDQuNC80LXRgCwg0LvQvtC60LDQu9GM0L3Ri9C1INC90LXQstCw0YDQuNCw0YLQuNCy0L3Ri9C1KVxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coYFthcHBseVByZXNldFN0eWxlXSDQn9GA0LjQvNC10L3Rj9C10Lwg0YHRgtC40LvRjCAke3ByZXNldE5hbWV9INC6INGB0YLQsNGC0LjRh9C10YHQutC+0LzRgy/QtNGA0YPQs9C+0LzRgyDRgtC40L/RgyDRiNGA0LjRhNGC0LA6ICR7Zm9udFRvQXBwbHkubmFtZX1gKTtcbiAgICB9XG5cbiAgICAvLyDQktCQ0JbQndCeOiDQntCx0L3QvtCy0LvRj9C10Lwgc2VsZWN0ZWRGb250INC00LvRjyDQktCh0JXQpSDRgtC40L/QvtCyINGI0YDQuNGE0YLQvtCyICjRgtC+0LvRjNC60L4g0L7QtNC40L0g0YDQsNC3INCyINC60L7QvdGG0LUpXG4gICAgdXBkYXRlU2VsZWN0ZWRGb250U3RhdGVJZk5lZWRlZCgpO1xuXG4gICAgLy8g0J7QsdC90L7QstC70Y/QtdC8IGxhc3RVc2VkUHJlc2V0TmFtZSDQsiDQvtCx0YnQtdC8INC80LDRgdGB0LjQstC1INGI0YDQuNGE0YLQvtCyXG4gICAgLy8g0K3RgtC+INC90YPQttC90L4g0LTQtdC70LDRgtGMINCy0YHQtdCz0LTQsCwg0L3QtdC30LDQstC40YHQuNC80L4g0L7RgiDRgtC+0LPQviwg0LjQt9C80LXQvdC40LvQuNGB0Ywg0LvQuCDQvtGB0LhcbiAgICBzZXRGb250cyhjdXJyZW50Rm9udHMgPT4ge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGN1cnJlbnRGb250cykpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdbYXBwbHlQcmVzZXRTdHlsZV0gY3VycmVudEZvbnRzINC90LUg0Y/QstC70Y/QtdGC0YHRjyDQvNCw0YHRgdC40LLQvtC8OicsIGN1cnJlbnRGb250cyk7XG4gICAgICAgIHJldHVybiBjdXJyZW50Rm9udHM7IC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdC8INC60LDQuiDQtdGB0YLRjCwg0LXRgdC70Lgg0L3QtSDQvNCw0YHRgdC40LJcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXJyZW50Rm9udHMubWFwKGYgPT4ge1xuICAgICAgICBpZiAoZi5pZCA9PT0gZm9udFRvQXBwbHkuaWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW2FwcGx5UHJlc2V0U3R5bGVdINCe0LHQvdC+0LLQu9GP0LXQvCBsYXN0VXNlZFByZXNldE5hbWUg0LTQu9GPICR7Zi5uYW1lfSDQvdCwICR7cHJlc2V0TmFtZX1gKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDQlNC70Y8g0LLQsNGA0LjQsNGC0LjQstC90YvRhSDRiNGA0LjRhNGC0L7QsiDQndCVINGB0LHRgNCw0YHRi9Cy0LDQtdC8IGxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncyxcbiAgICAgICAgICAvLyDRgtCw0Log0LrQsNC6INC/0YDQtdGB0LXRgiDQvNC+0LbQtdGCINC40LfQvNC10L3QuNGC0Ywg0L7RgdC4LCDQuCDQvNGLINGF0L7RgtC40Lwg0YHQvtGF0YDQsNC90LjRgtGMINGN0YLQuCDQuNC30LzQtdC90LXQvdC40Y9cbiAgICAgICAgICBpZiAoZm9udFRvQXBwbHkuaXNWYXJpYWJsZUZvbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmYsIGxhc3RVc2VkUHJlc2V0TmFtZTogcHJlc2V0TmFtZSB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDQlNC70Y8g0YHRgtCw0YLQuNGH0LXRgdC60LjRhSDRiNGA0LjRhNGC0L7QsiDRgdCx0YDQsNGB0YvQstCw0LXQvCB2YXJpYWJsZVNldHRpbmdzINC4INGB0L7RhdGA0LDQvdGP0LXQvCDQv9GA0LXRgdC10YJcbiAgICAgICAgICAgIHJldHVybiB7IC4uLmYsIGxhc3RVc2VkUHJlc2V0TmFtZTogcHJlc2V0TmFtZSwgbGFzdFVzZWRWYXJpYWJsZVNldHRpbmdzOiBudWxsIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0L3QsNGB0YLRgNC+0LnQutC4INCyIEluZGV4ZWREQiDRh9C10YDQtdC3INC60L7Qu9Cx0Y3QulxuICAgIGlmIChvblByZXNldEFwcGxpZWQpIHtcbiAgICAgIGNvbnN0IHNldHRpbmdzVG9TYXZlID0ge1xuICAgICAgICBsYXN0VXNlZFByZXNldE5hbWU6IHByZXNldE5hbWUsXG4gICAgICAgIGN1cnJlbnRXZWlnaHQ6IHdlaWdodCxcbiAgICAgICAgY3VycmVudFN0eWxlOiBzdHlsZVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8g0JTQu9GPINGB0YLQsNGC0LjRh9C10YHQutC40YUg0YjRgNC40YTRgtC+0LIg0L7Rh9C40YnQsNC10LwgbGFzdFVzZWRWYXJpYWJsZVNldHRpbmdzXG4gICAgICBpZiAoIWZvbnRUb0FwcGx5LmlzVmFyaWFibGVGb250KSB7XG4gICAgICAgIHNldHRpbmdzVG9TYXZlLmxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncyA9IG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBbYXBwbHlQcmVzZXRTdHlsZV0g0KHQvtGF0YDQsNC90Y/QtdC8INC90LDRgdGC0YDQvtC50LrQuCDQsiBJbmRleGVkREIg0LTQu9GPICR7Zm9udFRvQXBwbHkubmFtZX06YCwgc2V0dGluZ3NUb1NhdmUpO1xuICAgICAgb25QcmVzZXRBcHBsaWVkKGZvbnRUb0FwcGx5LmlkLCBzZXR0aW5nc1RvU2F2ZSk7XG4gICAgfVxuXG4gIH0sIFtzZWxlY3RlZEZvbnQsIHNldFNlbGVjdGVkRm9udCwgc2V0Rm9udHMsIHZhcmlhYmxlU2V0dGluZ3MsIGFwcGx5VmFyaWFibGVTZXR0aW5ncywgbG9hZEZvbnRzb3VyY2VTdHlsZVZhcmlhbnQsIG9uUHJlc2V0QXBwbGllZF0pOyAvLyDQl9Cw0LLQuNGB0LjQvNC+0YHRgtC4IHVzZUNhbGxiYWNrXG5cbiAgcmV0dXJuIHtcbiAgICBhcHBseVByZXNldFN0eWxlLFxuICB9O1xufSAiXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJQUkVTRVRfU1RZTEVTIiwidXNlRm9udFN0eWxlTWFuYWdlciIsInNlbGVjdGVkRm9udCIsInNldFNlbGVjdGVkRm9udCIsInNldEZvbnRzIiwidmFyaWFibGVTZXR0aW5ncyIsImFwcGx5VmFyaWFibGVTZXR0aW5ncyIsImxvYWRGb250c291cmNlU3R5bGVWYXJpYW50Iiwib25QcmVzZXRBcHBsaWVkIiwiYXBwbHlQcmVzZXRTdHlsZSIsInByZXNldE5hbWUiLCJmb250IiwiZm9udFRvQXBwbHkiLCJwcmVzZXRJbmZvIiwiZmluZCIsInAiLCJuYW1lIiwiY29uc29sZSIsIndhcm4iLCJ3ZWlnaHQiLCJzdHlsZSIsImxvZyIsImlkIiwidXBkYXRlU2VsZWN0ZWRGb250U3RhdGVJZk5lZWRlZCIsInByZXZTZWxlY3RlZCIsImN1cnJlbnRXZWlnaHQiLCJjdXJyZW50U3R5bGUiLCJzb3VyY2UiLCJpc1ZhcmlhYmxlRm9udCIsInN0eWxlSXNMb2FkZWQiLCJsb2FkZWRTdHlsZXMiLCJzb21lIiwicyIsImVycm9yIiwiY3VycmVudEF4ZXMiLCJ2YXJpYWJsZUF4ZXMiLCJjdXJyZW50Rm9udFNldHRpbmdzIiwibmV3U2V0dGluZ3MiLCJzZXR0aW5nc0NoYW5nZWQiLCJ3Z2h0IiwidGFyZ2V0SXRhbCIsInNsYW50QXhpcyIsInNsbnQiLCJ1bmRlZmluZWQiLCJ0YXJnZXRTbG50IiwibWluIiwiZGVmYXVsdCIsIml0YWwiLCJjdXJyZW50Rm9udHMiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJmIiwibGFzdFVzZWRQcmVzZXROYW1lIiwibGFzdFVzZWRWYXJpYWJsZVNldHRpbmdzIiwic2V0dGluZ3NUb1NhdmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./hooks/useFontStyleManager.js\n");

/***/ }),

/***/ "./hooks/useVariableFontControls.js":
/*!******************************************!*\
  !*** ./hooks/useVariableFontControls.js ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useVariableFontControls: () => (/* binding */ useVariableFontControls)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_1__]);\nreact_toastify__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// import opentype from 'opentype.js'; // opentype нужен для getVariableAxes, если парсим файл\n// Кэш для хранения метаданных шрифтов (перенесен из useFontManager)\nconst fontMetadataCache = new Map();\n/**\n * Хук для управления настройками вариативных шрифтов.\n * @param {Object} selectedFont - Текущий выбранный объект шрифта.\n * @param {Object} variableSettings - Текущие настройки вариативных осей.\n * @param {Function} setVariableSettings - Функция для обновления состояния настроек осей.\n * @param {Function} setSelectedFont - Функция для обновления состояния выбранного шрифта.\n * @param {Function} setFonts - Функция для обновления всего массива шрифтов (для сохранения lastUsedVariableSettings).\n * @param {Function} debouncedUpdateCssSettings - Debounced функция для обновления CSS (переименована из debouncedUpdateVariableFontSettings).\n * @param {Function} saveLastVariableSettings - Функция для сохранения настроек в localStorage.\n */ function useVariableFontControls(selectedFont, variableSettings, setVariableSettings, setSelectedFont, setFonts, debouncedUpdateCssSettings, saveLastVariableSettings) {\n    // Реф для applyVariableSettings, если он будет вызываться из других функций этого хука\n    const applyVariableSettingsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    /**\n   * Применяет новые настройки к вариативному шрифту.\n   * (Перенесено из useFontManager, переименовано из handleVariableSettingsChange)\n   * @param {Object} newSettings - Новые значения осей.\n   * @param {boolean} isFinalUpdate - Флаг финального обновления (для CSS).\n   * @param {Object|null} font - Шрифт для применения (по умолчанию selectedFont).\n   */ const applyVariableSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((newSettings, isFinalUpdate = false, font = null)=>{\n        const fontToApply = font || selectedFont;\n        if (!fontToApply || !fontToApply.isVariableFont) return;\n        const prevSettings = {\n            ...variableSettings\n        }; // Сохраняем предыдущие для CSS\n        let hasChanges = false;\n        Object.keys(newSettings).forEach((tag)=>{\n            if (variableSettings[tag] !== newSettings[tag]) hasChanges = true;\n        });\n        if (!hasChanges && !isFinalUpdate) return; // Выходим если нет изменений И это не финальный апдейт (финальный может быть без изменений)\n        setVariableSettings((currentPrevSettings)=>({\n                ...currentPrevSettings,\n                ...newSettings\n            }));\n        const updatedSettings = {\n            ...variableSettings,\n            ...newSettings\n        };\n        // Обновляем объект selectedFont асинхронно\n        setSelectedFont((prevFont)=>{\n            if (!prevFont || prevFont.id !== fontToApply.id) return prevFont;\n            const variationSettingsStr = Object.entries(updatedSettings).map(([tag, value])=>`\\\"${tag}\\\" ${value}`).join(\", \");\n            const updatedAxes = {\n                ...fontToApply.variableAxes\n            };\n            Object.entries(updatedSettings).forEach(([tag, value])=>{\n                if (updatedAxes[tag]) {\n                    if (typeof updatedAxes[tag] === \"object\") {\n                        updatedAxes[tag] = {\n                            ...updatedAxes[tag],\n                            currentValue: value\n                        };\n                    } else {\n                        updatedAxes[tag] = {\n                            min: value * 0.5,\n                            max: value * 1.5,\n                            default: value,\n                            currentValue: value,\n                            name: tag.charAt(0).toUpperCase() + tag.slice(1)\n                        };\n                    }\n                }\n            });\n            return {\n                ...prevFont,\n                variableAxes: updatedAxes,\n                variationSettings: variationSettingsStr\n            };\n        });\n        // Обновляем CSS (если финальное изменение)\n        if (isFinalUpdate && typeof debouncedUpdateCssSettings === \"function\") {\n            // Передаем сам объект шрифта, актуальные и предыдущие настройки\n            debouncedUpdateCssSettings(fontToApply, updatedSettings, prevSettings);\n        }\n        // Сохраняем настройки в localStorage при финальном обновлении\n        if (isFinalUpdate && typeof saveLastVariableSettings === \"function\") {\n            console.log(`[VarControls] Сохраняем настройки в localStorage:`, updatedSettings);\n            saveLastVariableSettings(updatedSettings);\n        }\n        // Обновляем lastUsedVariableSettings в общем массиве шрифтов\n        setFonts((currentFonts)=>currentFonts.map((f)=>{\n                if (f.id === fontToApply.id) {\n                    console.log(`[VarControls] Обновляем lastUsedVariableSettings для ${f.name}:`, updatedSettings);\n                    return {\n                        ...f,\n                        lastUsedVariableSettings: updatedSettings,\n                        lastUsedPresetName: null\n                    };\n                }\n                return f;\n            }));\n    }, [\n        selectedFont,\n        variableSettings,\n        setVariableSettings,\n        setSelectedFont,\n        setFonts,\n        debouncedUpdateCssSettings,\n        saveLastVariableSettings\n    ]);\n    // Обновляем реф при каждом изменении функции\n    applyVariableSettingsRef.current = applyVariableSettings;\n    /**\n   * Получает дефолтные значения осей для текущего шрифта.\n   * (Перенесено из useFontManager)\n   */ const getDefaultAxisValues = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (!selectedFont || !selectedFont.variableAxes) return {};\n        const defaultSettings = {};\n        Object.entries(selectedFont.variableAxes).forEach(([tag, axisData])=>{\n            if (typeof axisData === \"object\" && axisData.default !== undefined) {\n                defaultSettings[tag] = axisData.default;\n            } else if (typeof axisData === \"number\") {\n                defaultSettings[tag] = axisData; // Если вдруг ось - просто число\n            }\n        });\n        return defaultSettings;\n    }, [\n        selectedFont\n    ]);\n    /**\n   * Сбрасывает настройки осей к дефолтным значениям.\n   * (Перенесено из useFontManager)\n   */ const resetVariableSettings = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        const defaultSettings = getDefaultAxisValues();\n        if (Object.keys(defaultSettings).length > 0) {\n            // Используем applyVariableSettings через реф\n            applyVariableSettingsRef.current?.(defaultSettings, true); // isFinalUpdate = true для обновления CSS\n        }\n        return defaultSettings; // Возвращаем на всякий случай\n    }, [\n        getDefaultAxisValues\n    ]);\n    /**\n   * Извлекает информацию о вариативных осях шрифта.\n   * (Перенесено из useFontManager)\n   * TODO: Рассмотреть возможность использования opentype.js здесь или вынести в утилиты.\n   */ const getVariableAxesInfo = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (font)=>{\n        const targetFont = font || selectedFont;\n        if (!targetFont) return [];\n        const fontId = targetFont.id || null;\n        if (targetFont.isVariableFont === false) return [];\n        // 1. Используем существующие данные, если есть\n        if (targetFont.variableAxes && Object.keys(targetFont.variableAxes).length > 0) {\n            const fontAxes = Object.entries(targetFont.variableAxes).map(([tag, axisData])=>({\n                    tag,\n                    name: axisData.name || tag,\n                    min: axisData.min,\n                    max: axisData.max,\n                    default: axisData.default,\n                    // Добавляем текущее значение для UI\n                    current: typeof axisData.currentValue !== \"undefined\" ? axisData.currentValue : axisData.default\n                }));\n            // Фильтрация по supportedAxes (если есть)\n            let filteredAxes = fontAxes;\n            if (targetFont.supportedAxes?.length > 0) {\n                filteredAxes = fontAxes.filter((axis)=>targetFont.supportedAxes.includes(axis.tag));\n                if (filteredAxes.length === 0) filteredAxes = fontAxes; // Показать все, если фильтр ничего не дал\n            }\n            return filteredAxes;\n        }\n        // 2. Используем кэш\n        if (fontId && fontMetadataCache.has(fontId)) {\n            return fontMetadataCache.get(fontId);\n        }\n        // 3. Парсим файл (если есть и если opentype.js доступен)\n        // TODO: Добавить проверку на opentype.js и реализовать парсинг, если нужно\n        /*\n    if (targetFont.file instanceof Blob && typeof opentype !== 'undefined') {\n      try {\n        const fontData = await parseFontFile(targetFont.file); // Нужна функция parseFontFile\n        if (fontData?.tables?.fvar) {\n          const axes = fontData.tables.fvar.axes.map(axis => ({ ... }));\n          if (fontId) fontMetadataCache.set(fontId, axes);\n          return axes;\n        } else {\n          if (fontId) fontMetadataCache.set(fontId, []);\n          return [];\n        }\n      } catch (error) {\n        toast.error(`Ошибка парсинга шрифта: ${error.message}`);\n        return [];\n      }\n    }\n    */ console.warn(`[VarControls] Не удалось получить оси для ${targetFont.name}. Нет данных в объекте или кэше, парсинг файла не реализован.`);\n        return []; // Возвращаем пустой массив, если оси не найдены/не спарсены\n    }, [\n        selectedFont\n    ]); // Зависит только от selectedFont (для дефолта) и кэша\n    return {\n        applyVariableSettings,\n        getDefaultAxisValues,\n        resetVariableSettings,\n        getVariableAxesInfo\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU0sS0FBSyxHQUFHSyxlQUFlRCxVQUFVLDBDQUEwQztZQUN0RztZQUNBLE9BQU9DO1FBQ1Q7UUFFQSxvQkFBb0I7UUFDcEIsSUFBSUYsVUFBVTFELGtCQUFrQmlFLEdBQUcsQ0FBQ1AsU0FBUztZQUMzQyxPQUFPMUQsa0JBQWtCa0UsR0FBRyxDQUFDUjtRQUMvQjtRQUVBLHlEQUF5RDtRQUN6RCwyRUFBMkU7UUFDM0U7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBaUJBLEdBRUFmLFFBQVF3QixJQUFJLENBQUMsQ0FBQywwQ0FBMEMsRUFBRVYsV0FBV25CLElBQUksQ0FBQyw2REFBNkQsQ0FBQztRQUN4SSxPQUFPLEVBQUUsRUFBRSw0REFBNEQ7SUFDekUsR0FBRztRQUFDbkM7S0FBYSxHQUFHLHNEQUFzRDtJQUUxRSxPQUFPO1FBQ0xRO1FBQ0F1QztRQUNBSTtRQUNBRTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb250LWdhdW50bGV0LWNsb25lLy4vaG9va3MvdXNlVmFyaWFibGVGb250Q29udHJvbHMuanM/ZDdlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdG9hc3QgfSBmcm9tICdyZWFjdC10b2FzdGlmeSc7XG4vLyBpbXBvcnQgb3BlbnR5cGUgZnJvbSAnb3BlbnR5cGUuanMnOyAvLyBvcGVudHlwZSDQvdGD0LbQtdC9INC00LvRjyBnZXRWYXJpYWJsZUF4ZXMsINC10YHQu9C4INC/0LDRgNGB0LjQvCDRhNCw0LnQu1xuXG4vLyDQmtGN0Ygg0LTQu9GPINGF0YDQsNC90LXQvdC40Y8g0LzQtdGC0LDQtNCw0L3QvdGL0YUg0YjRgNC40YTRgtC+0LIgKNC/0LXRgNC10L3QtdGB0LXQvSDQuNC3IHVzZUZvbnRNYW5hZ2VyKVxuY29uc3QgZm9udE1ldGFkYXRhQ2FjaGUgPSBuZXcgTWFwKCk7XG5cbi8qKlxuICog0KXRg9C6INC00LvRjyDRg9C/0YDQsNCy0LvQtdC90LjRjyDQvdCw0YHRgtGA0L7QudC60LDQvNC4INCy0LDRgNC40LDRgtC40LLQvdGL0YUg0YjRgNC40YTRgtC+0LIuXG4gKiBAcGFyYW0ge09iamVjdH0gc2VsZWN0ZWRGb250IC0g0KLQtdC60YPRidC40Lkg0LLRi9Cx0YDQsNC90L3Ri9C5INC+0LHRitC10LrRgiDRiNGA0LjRhNGC0LAuXG4gKiBAcGFyYW0ge09iamVjdH0gdmFyaWFibGVTZXR0aW5ncyAtINCi0LXQutGD0YnQuNC1INC90LDRgdGC0YDQvtC50LrQuCDQstCw0YDQuNCw0YLQuNCy0L3Ri9GFINC+0YHQtdC5LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0VmFyaWFibGVTZXR0aW5ncyAtINCk0YPQvdC60YbQuNGPINC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyDRgdC+0YHRgtC+0Y/QvdC40Y8g0L3QsNGB0YLRgNC+0LXQuiDQvtGB0LXQuS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHNldFNlbGVjdGVkRm9udCAtINCk0YPQvdC60YbQuNGPINC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyDRgdC+0YHRgtC+0Y/QvdC40Y8g0LLRi9Cx0YDQsNC90L3QvtCz0L4g0YjRgNC40YTRgtCwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0Rm9udHMgLSDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0L7QsdC90L7QstC70LXQvdC40Y8g0LLRgdC10LPQviDQvNCw0YHRgdC40LLQsCDRiNGA0LjRhNGC0L7QsiAo0LTQu9GPINGB0L7RhdGA0LDQvdC10L3QuNGPIGxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncykuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBkZWJvdW5jZWRVcGRhdGVDc3NTZXR0aW5ncyAtIERlYm91bmNlZCDRhNGD0L3QutGG0LjRjyDQtNC70Y8g0L7QsdC90L7QstC70LXQvdC40Y8gQ1NTICjQv9C10YDQtdC40LzQtdC90L7QstCw0L3QsCDQuNC3IGRlYm91bmNlZFVwZGF0ZVZhcmlhYmxlRm9udFNldHRpbmdzKS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHNhdmVMYXN0VmFyaWFibGVTZXR0aW5ncyAtINCk0YPQvdC60YbQuNGPINC00LvRjyDRgdC+0YXRgNCw0L3QtdC90LjRjyDQvdCw0YHRgtGA0L7QtdC6INCyIGxvY2FsU3RvcmFnZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVZhcmlhYmxlRm9udENvbnRyb2xzKFxuICBzZWxlY3RlZEZvbnQsXG4gIHZhcmlhYmxlU2V0dGluZ3MsXG4gIHNldFZhcmlhYmxlU2V0dGluZ3MsXG4gIHNldFNlbGVjdGVkRm9udCxcbiAgc2V0Rm9udHMsXG4gIGRlYm91bmNlZFVwZGF0ZUNzc1NldHRpbmdzLFxuICBzYXZlTGFzdFZhcmlhYmxlU2V0dGluZ3Ncbikge1xuXG4gIC8vINCg0LXRhCDQtNC70Y8gYXBwbHlWYXJpYWJsZVNldHRpbmdzLCDQtdGB0LvQuCDQvtC9INCx0YPQtNC10YIg0LLRi9C30YvQstCw0YLRjNGB0Y8g0LjQtyDQtNGA0YPQs9C40YUg0YTRg9C90LrRhtC40Lkg0Y3RgtC+0LPQviDRhdGD0LrQsFxuICBjb25zdCBhcHBseVZhcmlhYmxlU2V0dGluZ3NSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgLyoqXG4gICAqINCf0YDQuNC80LXQvdGP0LXRgiDQvdC+0LLRi9C1INC90LDRgdGC0YDQvtC50LrQuCDQuiDQstCw0YDQuNCw0YLQuNCy0L3QvtC80YMg0YjRgNC40YTRgtGDLlxuICAgKiAo0J/QtdGA0LXQvdC10YHQtdC90L4g0LjQtyB1c2VGb250TWFuYWdlciwg0L/QtdGA0LXQuNC80LXQvdC+0LLQsNC90L4g0LjQtyBoYW5kbGVWYXJpYWJsZVNldHRpbmdzQ2hhbmdlKVxuICAgKiBAcGFyYW0ge09iamVjdH0gbmV3U2V0dGluZ3MgLSDQndC+0LLRi9C1INC30L3QsNGH0LXQvdC40Y8g0L7RgdC10LkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNGaW5hbFVwZGF0ZSAtINCk0LvQsNCzINGE0LjQvdCw0LvRjNC90L7Qs9C+INC+0LHQvdC+0LLQu9C10L3QuNGPICjQtNC70Y8gQ1NTKS5cbiAgICogQHBhcmFtIHtPYmplY3R8bnVsbH0gZm9udCAtINCo0YDQuNGE0YIg0LTQu9GPINC/0YDQuNC80LXQvdC10L3QuNGPICjQv9C+INGD0LzQvtC70YfQsNC90LjRjiBzZWxlY3RlZEZvbnQpLlxuICAgKi9cbiAgY29uc3QgYXBwbHlWYXJpYWJsZVNldHRpbmdzID0gdXNlQ2FsbGJhY2soKG5ld1NldHRpbmdzLCBpc0ZpbmFsVXBkYXRlID0gZmFsc2UsIGZvbnQgPSBudWxsKSA9PiB7XG4gICAgY29uc3QgZm9udFRvQXBwbHkgPSBmb250IHx8IHNlbGVjdGVkRm9udDtcbiAgICBpZiAoIWZvbnRUb0FwcGx5IHx8ICFmb250VG9BcHBseS5pc1ZhcmlhYmxlRm9udCkgcmV0dXJuO1xuXG4gICAgY29uc3QgcHJldlNldHRpbmdzID0geyAuLi52YXJpYWJsZVNldHRpbmdzIH07IC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQv9GA0LXQtNGL0LTRg9GJ0LjQtSDQtNC70Y8gQ1NTXG5cbiAgICBsZXQgaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgIE9iamVjdC5rZXlzKG5ld1NldHRpbmdzKS5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICBpZiAodmFyaWFibGVTZXR0aW5nc1t0YWddICE9PSBuZXdTZXR0aW5nc1t0YWddKSBoYXNDaGFuZ2VzID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBpZiAoIWhhc0NoYW5nZXMgJiYgIWlzRmluYWxVcGRhdGUpIHJldHVybjsgLy8g0JLRi9GF0L7QtNC40Lwg0LXRgdC70Lgg0L3QtdGCINC40LfQvNC10L3QtdC90LjQuSDQmCDRjdGC0L4g0L3QtSDRhNC40L3QsNC70YzQvdGL0Lkg0LDQv9C00LXQudGCICjRhNC40L3QsNC70YzQvdGL0Lkg0LzQvtC20LXRgiDQsdGL0YLRjCDQsdC10Lcg0LjQt9C80LXQvdC10L3QuNC5KVxuXG4gICAgc2V0VmFyaWFibGVTZXR0aW5ncyhjdXJyZW50UHJldlNldHRpbmdzID0+ICh7IC4uLmN1cnJlbnRQcmV2U2V0dGluZ3MsIC4uLm5ld1NldHRpbmdzIH0pKTtcblxuICAgIGNvbnN0IHVwZGF0ZWRTZXR0aW5ncyA9IHsgLi4udmFyaWFibGVTZXR0aW5ncywgLi4ubmV3U2V0dGluZ3MgfTtcblxuICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCDQvtCx0YrQtdC60YIgc2VsZWN0ZWRGb250INCw0YHQuNC90YXRgNC+0L3QvdC+XG4gICAgc2V0U2VsZWN0ZWRGb250KHByZXZGb250ID0+IHtcbiAgICAgIGlmICghcHJldkZvbnQgfHwgcHJldkZvbnQuaWQgIT09IGZvbnRUb0FwcGx5LmlkKSByZXR1cm4gcHJldkZvbnQ7XG5cbiAgICAgIGNvbnN0IHZhcmlhdGlvblNldHRpbmdzU3RyID0gT2JqZWN0LmVudHJpZXModXBkYXRlZFNldHRpbmdzKVxuICAgICAgICAubWFwKChbdGFnLCB2YWx1ZV0pID0+IGBcXFwiJHt0YWd9XFxcIiAke3ZhbHVlfWApXG4gICAgICAgIC5qb2luKCcsICcpO1xuXG4gICAgICBjb25zdCB1cGRhdGVkQXhlcyA9IHsgLi4uZm9udFRvQXBwbHkudmFyaWFibGVBeGVzIH07XG4gICAgICBPYmplY3QuZW50cmllcyh1cGRhdGVkU2V0dGluZ3MpLmZvckVhY2goKFt0YWcsIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodXBkYXRlZEF4ZXNbdGFnXSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlZEF4ZXNbdGFnXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHVwZGF0ZWRBeGVzW3RhZ10gPSB7IC4uLnVwZGF0ZWRBeGVzW3RhZ10sIGN1cnJlbnRWYWx1ZTogdmFsdWUgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlZEF4ZXNbdGFnXSA9IHsgbWluOiB2YWx1ZSAqIDAuNSwgbWF4OiB2YWx1ZSAqIDEuNSwgZGVmYXVsdDogdmFsdWUsIGN1cnJlbnRWYWx1ZTogdmFsdWUsIG5hbWU6IHRhZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRhZy5zbGljZSgxKSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7IC4uLnByZXZGb250LCB2YXJpYWJsZUF4ZXM6IHVwZGF0ZWRBeGVzLCB2YXJpYXRpb25TZXR0aW5nczogdmFyaWF0aW9uU2V0dGluZ3NTdHIgfTtcbiAgICB9KTtcblxuICAgIC8vINCe0LHQvdC+0LLQu9GP0LXQvCBDU1MgKNC10YHQu9C4INGE0LjQvdCw0LvRjNC90L7QtSDQuNC30LzQtdC90LXQvdC40LUpXG4gICAgaWYgKGlzRmluYWxVcGRhdGUgJiYgdHlwZW9mIGRlYm91bmNlZFVwZGF0ZUNzc1NldHRpbmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgLy8g0J/QtdGA0LXQtNCw0LXQvCDRgdCw0Lwg0L7QsdGK0LXQutGCINGI0YDQuNGE0YLQsCwg0LDQutGC0YPQsNC70YzQvdGL0LUg0Lgg0L/RgNC10LTRi9C00YPRidC40LUg0L3QsNGB0YLRgNC+0LnQutC4XG4gICAgICBkZWJvdW5jZWRVcGRhdGVDc3NTZXR0aW5ncyhmb250VG9BcHBseSwgdXBkYXRlZFNldHRpbmdzLCBwcmV2U2V0dGluZ3MpO1xuICAgIH1cblxuICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQvdCw0YHRgtGA0L7QudC60Lgg0LIgbG9jYWxTdG9yYWdlINC/0YDQuCDRhNC40L3QsNC70YzQvdC+0Lwg0L7QsdC90L7QstC70LXQvdC40LhcbiAgICBpZiAoaXNGaW5hbFVwZGF0ZSAmJiB0eXBlb2Ygc2F2ZUxhc3RWYXJpYWJsZVNldHRpbmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW1ZhckNvbnRyb2xzXSDQodC+0YXRgNCw0L3Rj9C10Lwg0L3QsNGB0YLRgNC+0LnQutC4INCyIGxvY2FsU3RvcmFnZTpgLCB1cGRhdGVkU2V0dGluZ3MpO1xuICAgICAgc2F2ZUxhc3RWYXJpYWJsZVNldHRpbmdzKHVwZGF0ZWRTZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgLy8g0J7QsdC90L7QstC70Y/QtdC8IGxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncyDQsiDQvtCx0YnQtdC8INC80LDRgdGB0LjQstC1INGI0YDQuNGE0YLQvtCyXG4gICAgc2V0Rm9udHMoY3VycmVudEZvbnRzID0+IGN1cnJlbnRGb250cy5tYXAoZiA9PiB7XG4gICAgICBpZiAoZi5pZCA9PT0gZm9udFRvQXBwbHkuaWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coYFtWYXJDb250cm9sc10g0J7QsdC90L7QstC70Y/QtdC8IGxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncyDQtNC70Y8gJHtmLm5hbWV9OmAsIHVwZGF0ZWRTZXR0aW5ncyk7XG4gICAgICAgIHJldHVybiB7IC4uLmYsIGxhc3RVc2VkVmFyaWFibGVTZXR0aW5nczogdXBkYXRlZFNldHRpbmdzLCBsYXN0VXNlZFByZXNldE5hbWU6IG51bGwgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmO1xuICAgIH0pKTtcblxuICB9LCBbc2VsZWN0ZWRGb250LCB2YXJpYWJsZVNldHRpbmdzLCBzZXRWYXJpYWJsZVNldHRpbmdzLCBzZXRTZWxlY3RlZEZvbnQsIHNldEZvbnRzLCBkZWJvdW5jZWRVcGRhdGVDc3NTZXR0aW5ncywgc2F2ZUxhc3RWYXJpYWJsZVNldHRpbmdzXSk7XG5cbiAgLy8g0J7QsdC90L7QstC70Y/QtdC8INGA0LXRhCDQv9GA0Lgg0LrQsNC20LTQvtC8INC40LfQvNC10L3QtdC90LjQuCDRhNGD0L3QutGG0LjQuFxuICBhcHBseVZhcmlhYmxlU2V0dGluZ3NSZWYuY3VycmVudCA9IGFwcGx5VmFyaWFibGVTZXR0aW5ncztcblxuICAvKipcbiAgICog0J/QvtC70YPRh9Cw0LXRgiDQtNC10YTQvtC70YLQvdGL0LUg0LfQvdCw0YfQtdC90LjRjyDQvtGB0LXQuSDQtNC70Y8g0YLQtdC60YPRidC10LPQviDRiNGA0LjRhNGC0LAuXG4gICAqICjQn9C10YDQtdC90LXRgdC10L3QviDQuNC3IHVzZUZvbnRNYW5hZ2VyKVxuICAgKi9cbiAgY29uc3QgZ2V0RGVmYXVsdEF4aXNWYWx1ZXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKCFzZWxlY3RlZEZvbnQgfHwgIXNlbGVjdGVkRm9udC52YXJpYWJsZUF4ZXMpIHJldHVybiB7fTtcbiAgICBcbiAgICBjb25zdCBkZWZhdWx0U2V0dGluZ3MgPSB7fTtcbiAgICBPYmplY3QuZW50cmllcyhzZWxlY3RlZEZvbnQudmFyaWFibGVBeGVzKS5mb3JFYWNoKChbdGFnLCBheGlzRGF0YV0pID0+IHtcbiAgICAgIGlmICh0eXBlb2YgYXhpc0RhdGEgPT09ICdvYmplY3QnICYmIGF4aXNEYXRhLmRlZmF1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWZhdWx0U2V0dGluZ3NbdGFnXSA9IGF4aXNEYXRhLmRlZmF1bHQ7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBheGlzRGF0YSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgZGVmYXVsdFNldHRpbmdzW3RhZ10gPSBheGlzRGF0YTsgLy8g0JXRgdC70Lgg0LLQtNGA0YPQsyDQvtGB0YwgLSDQv9GA0L7RgdGC0L4g0YfQuNGB0LvQvlxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkZWZhdWx0U2V0dGluZ3M7XG4gIH0sIFtzZWxlY3RlZEZvbnRdKTtcblxuICAvKipcbiAgICog0KHQsdGA0LDRgdGL0LLQsNC10YIg0L3QsNGB0YLRgNC+0LnQutC4INC+0YHQtdC5INC6INC00LXRhNC+0LvRgtC90YvQvCDQt9C90LDRh9C10L3QuNGP0LwuXG4gICAqICjQn9C10YDQtdC90LXRgdC10L3QviDQuNC3IHVzZUZvbnRNYW5hZ2VyKVxuICAgKi9cbiAgY29uc3QgcmVzZXRWYXJpYWJsZVNldHRpbmdzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGRlZmF1bHRTZXR0aW5ncyA9IGdldERlZmF1bHRBeGlzVmFsdWVzKCk7XG4gICAgaWYgKE9iamVjdC5rZXlzKGRlZmF1bHRTZXR0aW5ncykubGVuZ3RoID4gMCkge1xuICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10LwgYXBwbHlWYXJpYWJsZVNldHRpbmdzINGH0LXRgNC10Lcg0YDQtdGEXG4gICAgICBhcHBseVZhcmlhYmxlU2V0dGluZ3NSZWYuY3VycmVudD8uKGRlZmF1bHRTZXR0aW5ncywgdHJ1ZSk7IC8vIGlzRmluYWxVcGRhdGUgPSB0cnVlINC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyBDU1NcbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRTZXR0aW5nczsgLy8g0JLQvtC30LLRgNCw0YnQsNC10Lwg0L3QsCDQstGB0Y/QutC40Lkg0YHQu9GD0YfQsNC5XG4gIH0sIFtnZXREZWZhdWx0QXhpc1ZhbHVlc10pO1xuXG4gIC8qKlxuICAgKiDQmNC30LLQu9C10LrQsNC10YIg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0LLQsNGA0LjQsNGC0LjQstC90YvRhSDQvtGB0Y/RhSDRiNGA0LjRhNGC0LAuXG4gICAqICjQn9C10YDQtdC90LXRgdC10L3QviDQuNC3IHVzZUZvbnRNYW5hZ2VyKVxuICAgKiBUT0RPOiDQoNCw0YHRgdC80L7RgtGA0LXRgtGMINCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40Y8gb3BlbnR5cGUuanMg0LfQtNC10YHRjCDQuNC70Lgg0LLRi9C90LXRgdGC0Lgg0LIg0YPRgtC40LvQuNGC0YsuXG4gICAqL1xuICBjb25zdCBnZXRWYXJpYWJsZUF4ZXNJbmZvID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZvbnQpID0+IHtcbiAgICBjb25zdCB0YXJnZXRGb250ID0gZm9udCB8fCBzZWxlY3RlZEZvbnQ7XG4gICAgaWYgKCF0YXJnZXRGb250KSByZXR1cm4gW107XG5cbiAgICBjb25zdCBmb250SWQgPSB0YXJnZXRGb250LmlkIHx8IG51bGw7XG5cbiAgICBpZiAodGFyZ2V0Rm9udC5pc1ZhcmlhYmxlRm9udCA9PT0gZmFsc2UpIHJldHVybiBbXTtcblxuICAgIC8vIDEuINCY0YHQv9C+0LvRjNC30YPQtdC8INGB0YPRidC10YHRgtCy0YPRjtGJ0LjQtSDQtNCw0L3QvdGL0LUsINC10YHQu9C4INC10YHRgtGMXG4gICAgaWYgKHRhcmdldEZvbnQudmFyaWFibGVBeGVzICYmIE9iamVjdC5rZXlzKHRhcmdldEZvbnQudmFyaWFibGVBeGVzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBmb250QXhlcyA9IE9iamVjdC5lbnRyaWVzKHRhcmdldEZvbnQudmFyaWFibGVBeGVzKS5tYXAoKFt0YWcsIGF4aXNEYXRhXSkgPT4gKHtcbiAgICAgICAgdGFnLFxuICAgICAgICBuYW1lOiBheGlzRGF0YS5uYW1lIHx8IHRhZyxcbiAgICAgICAgbWluOiBheGlzRGF0YS5taW4sXG4gICAgICAgIG1heDogYXhpc0RhdGEubWF4LFxuICAgICAgICBkZWZhdWx0OiBheGlzRGF0YS5kZWZhdWx0LFxuICAgICAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0YLQtdC60YPRidC10LUg0LfQvdCw0YfQtdC90LjQtSDQtNC70Y8gVUlcbiAgICAgICAgY3VycmVudDogdHlwZW9mIGF4aXNEYXRhLmN1cnJlbnRWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcgPyBheGlzRGF0YS5jdXJyZW50VmFsdWUgOiBheGlzRGF0YS5kZWZhdWx0XG4gICAgICB9KSk7XG4gICAgICAvLyDQpNC40LvRjNGC0YDQsNGG0LjRjyDQv9C+IHN1cHBvcnRlZEF4ZXMgKNC10YHQu9C4INC10YHRgtGMKVxuICAgICAgbGV0IGZpbHRlcmVkQXhlcyA9IGZvbnRBeGVzO1xuICAgICAgaWYgKHRhcmdldEZvbnQuc3VwcG9ydGVkQXhlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZpbHRlcmVkQXhlcyA9IGZvbnRBeGVzLmZpbHRlcihheGlzID0+IHRhcmdldEZvbnQuc3VwcG9ydGVkQXhlcy5pbmNsdWRlcyhheGlzLnRhZykpO1xuICAgICAgICAgIGlmIChmaWx0ZXJlZEF4ZXMubGVuZ3RoID09PSAwKSBmaWx0ZXJlZEF4ZXMgPSBmb250QXhlczsgLy8g0J/QvtC60LDQt9Cw0YLRjCDQstGB0LUsINC10YHQu9C4INGE0LjQu9GM0YLRgCDQvdC40YfQtdCz0L4g0L3QtSDQtNCw0LtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmaWx0ZXJlZEF4ZXM7XG4gICAgfVxuXG4gICAgLy8gMi4g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0LrRjdGIXG4gICAgaWYgKGZvbnRJZCAmJiBmb250TWV0YWRhdGFDYWNoZS5oYXMoZm9udElkKSkge1xuICAgICAgcmV0dXJuIGZvbnRNZXRhZGF0YUNhY2hlLmdldChmb250SWQpO1xuICAgIH1cblxuICAgIC8vIDMuINCf0LDRgNGB0LjQvCDRhNCw0LnQuyAo0LXRgdC70Lgg0LXRgdGC0Ywg0Lgg0LXRgdC70Lggb3BlbnR5cGUuanMg0LTQvtGB0YLRg9C/0LXQvSlcbiAgICAvLyBUT0RPOiDQlNC+0LHQsNCy0LjRgtGMINC/0YDQvtCy0LXRgNC60YMg0L3QsCBvcGVudHlwZS5qcyDQuCDRgNC10LDQu9C40LfQvtCy0LDRgtGMINC/0LDRgNGB0LjQvdCzLCDQtdGB0LvQuCDQvdGD0LbQvdC+XG4gICAgLypcbiAgICBpZiAodGFyZ2V0Rm9udC5maWxlIGluc3RhbmNlb2YgQmxvYiAmJiB0eXBlb2Ygb3BlbnR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBmb250RGF0YSA9IGF3YWl0IHBhcnNlRm9udEZpbGUodGFyZ2V0Rm9udC5maWxlKTsgLy8g0J3Rg9C20L3QsCDRhNGD0L3QutGG0LjRjyBwYXJzZUZvbnRGaWxlXG4gICAgICAgIGlmIChmb250RGF0YT8udGFibGVzPy5mdmFyKSB7XG4gICAgICAgICAgY29uc3QgYXhlcyA9IGZvbnREYXRhLnRhYmxlcy5mdmFyLmF4ZXMubWFwKGF4aXMgPT4gKHsgLi4uIH0pKTtcbiAgICAgICAgICBpZiAoZm9udElkKSBmb250TWV0YWRhdGFDYWNoZS5zZXQoZm9udElkLCBheGVzKTtcbiAgICAgICAgICByZXR1cm4gYXhlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZm9udElkKSBmb250TWV0YWRhdGFDYWNoZS5zZXQoZm9udElkLCBbXSk7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0b2FzdC5lcnJvcihg0J7RiNC40LHQutCwINC/0LDRgNGB0LjQvdCz0LAg0YjRgNC40YTRgtCwOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9XG4gICAgKi9cblxuICAgIGNvbnNvbGUud2FybihgW1ZhckNvbnRyb2xzXSDQndC1INGD0LTQsNC70L7RgdGMINC/0L7Qu9GD0YfQuNGC0Ywg0L7RgdC4INC00LvRjyAke3RhcmdldEZvbnQubmFtZX0uINCd0LXRgiDQtNCw0L3QvdGL0YUg0LIg0L7QsdGK0LXQutGC0LUg0LjQu9C4INC60Y3RiNC1LCDQv9Cw0YDRgdC40L3QsyDRhNCw0LnQu9CwINC90LUg0YDQtdCw0LvQuNC30L7QstCw0L0uYCk7XG4gICAgcmV0dXJuIFtdOyAvLyDQktC+0LfQstGA0LDRidCw0LXQvCDQv9GD0YHRgtC+0Lkg0LzQsNGB0YHQuNCyLCDQtdGB0LvQuCDQvtGB0Lgg0L3QtSDQvdCw0LnQtNC10L3Riy/QvdC1INGB0L/QsNGA0YHQtdC90YtcbiAgfSwgW3NlbGVjdGVkRm9udF0pOyAvLyDQl9Cw0LLQuNGB0LjRgiDRgtC+0LvRjNC60L4g0L7RgiBzZWxlY3RlZEZvbnQgKNC00LvRjyDQtNC10YTQvtC70YLQsCkg0Lgg0LrRjdGI0LBcblxuICByZXR1cm4ge1xuICAgIGFwcGx5VmFyaWFibGVTZXR0aW5ncyxcbiAgICBnZXREZWZhdWx0QXhpc1ZhbHVlcyxcbiAgICByZXNldFZhcmlhYmxlU2V0dGluZ3MsXG4gICAgZ2V0VmFyaWFibGVBeGVzSW5mbywgLy8g0J/QtdGA0LXQuNC80LXQvdC+0LLQsNC90L4g0LjQtyBnZXRWYXJpYWJsZUF4ZXNcbiAgfTtcbn0gIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUmVmIiwidG9hc3QiLCJmb250TWV0YWRhdGFDYWNoZSIsIk1hcCIsInVzZVZhcmlhYmxlRm9udENvbnRyb2xzIiwic2VsZWN0ZWRGb250IiwidmFyaWFibGVTZXR0aW5ncyIsInNldFZhcmlhYmxlU2V0dGluZ3MiLCJzZXRTZWxlY3RlZEZvbnQiLCJzZXRGb250cyIsImRlYm91bmNlZFVwZGF0ZUNzc1NldHRpbmdzIiwic2F2ZUxhc3RWYXJpYWJsZVNldHRpbmdzIiwiYXBwbHlWYXJpYWJsZVNldHRpbmdzUmVmIiwiYXBwbHlWYXJpYWJsZVNldHRpbmdzIiwibmV3U2V0dGluZ3MiLCJpc0ZpbmFsVXBkYXRlIiwiZm9udCIsImZvbnRUb0FwcGx5IiwiaXNWYXJpYWJsZUZvbnQiLCJwcmV2U2V0dGluZ3MiLCJoYXNDaGFuZ2VzIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJ0YWciLCJjdXJyZW50UHJldlNldHRpbmdzIiwidXBkYXRlZFNldHRpbmdzIiwicHJldkZvbnQiLCJpZCIsInZhcmlhdGlvblNldHRpbmdzU3RyIiwiZW50cmllcyIsIm1hcCIsInZhbHVlIiwiam9pbiIsInVwZGF0ZWRBeGVzIiwidmFyaWFibGVBeGVzIiwiY3VycmVudFZhbHVlIiwibWluIiwibWF4IiwiZGVmYXVsdCIsIm5hbWUiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwidmFyaWF0aW9uU2V0dGluZ3MiLCJjb25zb2xlIiwibG9nIiwiY3VycmVudEZvbnRzIiwiZiIsImxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncyIsImxhc3RVc2VkUHJlc2V0TmFtZSIsImN1cnJlbnQiLCJnZXREZWZhdWx0QXhpc1ZhbHVlcyIsImRlZmF1bHRTZXR0aW5ncyIsImF4aXNEYXRhIiwidW5kZWZpbmVkIiwicmVzZXRWYXJpYWJsZVNldHRpbmdzIiwibGVuZ3RoIiwiZ2V0VmFyaWFibGVBeGVzSW5mbyIsInRhcmdldEZvbnQiLCJmb250SWQiLCJmb250QXhlcyIsImZpbHRlcmVkQXhlcyIsInN1cHBvcnRlZEF4ZXMiLCJmaWx0ZXIiLCJheGlzIiwiaW5jbHVkZXMiLCJoYXMiLCJnZXQiLCJ3YXJuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./hooks/useVariableFontControls.js\n");

/***/ }),

/***/ "./pages/_app.jsx":
/*!************************!*\
  !*** ./pages/_app.jsx ***!
  \************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ MyApp)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/globals.css */ \"./styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_toastify_dist_ReactToastify_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-toastify/dist/ReactToastify.css */ \"./node_modules/react-toastify/dist/ReactToastify.css\");\n/* harmony import */ var react_toastify_dist_ReactToastify_css__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_toastify_dist_ReactToastify_css__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _contexts_SettingsContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../contexts/SettingsContext */ \"./contexts/SettingsContext.js\");\n/* harmony import */ var _contexts_FontContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../contexts/FontContext */ \"./contexts/FontContext.js\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/head */ \"next/head\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_7__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_2__, _contexts_FontContext__WEBPACK_IMPORTED_MODULE_6__]);\n([react_toastify__WEBPACK_IMPORTED_MODULE_2__, _contexts_FontContext__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nfunction MyApp({ Component, pageProps }) {\n    // Очищаем все шрифты при загрузке страницы\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Создаем стиль, который очистит все шрифты перед загрузкой\n        const clearFontsStyle = document.createElement(\"style\");\n        clearFontsStyle.textContent = `\n      /* Очистка всех шрифтов */\n      @font-face {\n        font-family: 'Arial';\n        src: local('Arial');\n        font-weight: normal;\n        font-style: normal;\n      }\n    `;\n        document.head.appendChild(clearFontsStyle);\n        return ()=>{\n            // Удаляем стиль при размонтировании\n            if (clearFontsStyle.parentNode) {\n                clearFontsStyle.parentNode.removeChild(clearFontsStyle);\n            }\n        };\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_head__WEBPACK_IMPORTED_MODULE_7___default()), {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"viewport\",\n                        content: \"width=device-width, initial-scale=1\"\n                    }, void 0, false, {\n                        fileName: \"/Users/igormocalov/Desktop/Font/pages/_app.jsx\",\n                        lineNumber: 36,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"title\", {\n                        children: \"Font Gauntlet - Инструмент для работы со шрифтами\"\n                    }, void 0, false, {\n                        fileName: \"/Users/igormocalov/Desktop/Font/pages/_app.jsx\",\n                        lineNumber: 37,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/igormocalov/Desktop/Font/pages/_app.jsx\",\n                lineNumber: 35,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_SettingsContext__WEBPACK_IMPORTED_MODULE_5__.SettingsProvider, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_FontContext__WEBPACK_IMPORTED_MODULE_6__.FontProvider, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                            ...pageProps\n                        }, void 0, false, {\n                            fileName: \"/Users/igormocalov/Desktop/Font/pages/_app.jsx\",\n                            lineNumber: 42,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_toastify__WEBPACK_IMPORTED_MODULE_2__.ToastContainer, {\n                            position: \"bottom-right\",\n                            autoClose: 3000,\n                            hideProgressBar: false,\n                            newestOnTop: true,\n                            closeOnClick: true,\n                            rtl: false,\n                            pauseOnFocusLoss: true,\n                            draggable: true,\n                            pauseOnHover: true\n                        }, void 0, false, {\n                            fileName: \"/Users/igormocalov/Desktop/Font/pages/_app.jsx\",\n                            lineNumber: 43,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/igormocalov/Desktop/Font/pages/_app.jsx\",\n                    lineNumber: 41,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/igormocalov/Desktop/Font/pages/_app.jsx\",\n                lineNumber: 40,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9fYXBwLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUM7QUFDYztBQUN4QjtBQUNnQjtBQUNnQjtBQUNSO0FBQzFCO0FBRWQsU0FBU08sTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBRTtJQUNwRCwyQ0FBMkM7SUFDM0NSLGdEQUFTQSxDQUFDO1FBQ1IsNERBQTREO1FBQzVELE1BQU1TLGtCQUFrQkMsU0FBU0MsYUFBYSxDQUFDO1FBQy9DRixnQkFBZ0JHLFdBQVcsR0FBRyxDQUFDOzs7Ozs7OztJQVEvQixDQUFDO1FBQ0RGLFNBQVNHLElBQUksQ0FBQ0MsV0FBVyxDQUFDTDtRQUUxQixPQUFPO1lBQ0wsb0NBQW9DO1lBQ3BDLElBQUlBLGdCQUFnQk0sVUFBVSxFQUFFO2dCQUM5Qk4sZ0JBQWdCTSxVQUFVLENBQUNDLFdBQVcsQ0FBQ1A7WUFDekM7UUFDRjtJQUNGLEdBQUcsRUFBRTtJQUVMLHFCQUNFOzswQkFDRSw4REFBQ0osa0RBQUlBOztrQ0FDSCw4REFBQ1k7d0JBQUtDLE1BQUs7d0JBQVdDLFNBQVE7Ozs7OztrQ0FDOUIsOERBQUNDO2tDQUFNOzs7Ozs7Ozs7Ozs7MEJBR1QsOERBQUNqQix1RUFBZ0JBOzBCQUNmLDRFQUFDQywrREFBWUE7O3NDQUNYLDhEQUFDRzs0QkFBVyxHQUFHQyxTQUFTOzs7Ozs7c0NBQ3hCLDhEQUFDUCwwREFBY0E7NEJBQ2JvQixVQUFTOzRCQUNUQyxXQUFXOzRCQUNYQyxpQkFBaUI7NEJBQ2pCQyxXQUFXOzRCQUNYQyxZQUFZOzRCQUNaQyxLQUFLOzRCQUNMQyxnQkFBZ0I7NEJBQ2hCQyxTQUFTOzRCQUNUQyxZQUFZOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTXhCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9udC1nYXVudGxldC1jbG9uZS8uL3BhZ2VzL19hcHAuanN4PzRjYjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFRvYXN0Q29udGFpbmVyLCB0b2FzdCB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcbmltcG9ydCAnLi4vc3R5bGVzL2dsb2JhbHMuY3NzJzsgXG5pbXBvcnQgJ3JlYWN0LXRvYXN0aWZ5L2Rpc3QvUmVhY3RUb2FzdGlmeS5jc3MnO1xuaW1wb3J0IHsgU2V0dGluZ3NQcm92aWRlciB9IGZyb20gJy4uL2NvbnRleHRzL1NldHRpbmdzQ29udGV4dCc7XG5pbXBvcnQgeyBGb250UHJvdmlkZXIgfSBmcm9tICcuLi9jb250ZXh0cy9Gb250Q29udGV4dCc7XG5pbXBvcnQgSGVhZCBmcm9tICduZXh0L2hlYWQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNeUFwcCh7IENvbXBvbmVudCwgcGFnZVByb3BzIH0pIHtcbiAgLy8g0J7Rh9C40YnQsNC10Lwg0LLRgdC1INGI0YDQuNGE0YLRiyDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8g0KHQvtC30LTQsNC10Lwg0YHRgtC40LvRjCwg0LrQvtGC0L7RgNGL0Lkg0L7Rh9C40YHRgtC40YIg0LLRgdC1INGI0YDQuNGE0YLRiyDQv9C10YDQtdC0INC30LDQs9GA0YPQt9C60L7QuVxuICAgIGNvbnN0IGNsZWFyRm9udHNTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgY2xlYXJGb250c1N0eWxlLnRleHRDb250ZW50ID0gYFxuICAgICAgLyog0J7Rh9C40YHRgtC60LAg0LLRgdC10YUg0YjRgNC40YTRgtC+0LIgKi9cbiAgICAgIEBmb250LWZhY2Uge1xuICAgICAgICBmb250LWZhbWlseTogJ0FyaWFsJztcbiAgICAgICAgc3JjOiBsb2NhbCgnQXJpYWwnKTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICAgICAgZm9udC1zdHlsZTogbm9ybWFsO1xuICAgICAgfVxuICAgIGA7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChjbGVhckZvbnRzU3R5bGUpO1xuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAvLyDQo9C00LDQu9GP0LXQvCDRgdGC0LjQu9GMINC/0YDQuCDRgNCw0LfQvNC+0L3RgtC40YDQvtCy0LDQvdC40LhcbiAgICAgIGlmIChjbGVhckZvbnRzU3R5bGUucGFyZW50Tm9kZSkge1xuICAgICAgICBjbGVhckZvbnRzU3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjbGVhckZvbnRzU3R5bGUpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcbiAgXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxIZWFkPlxuICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTFcIiAvPlxuICAgICAgICA8dGl0bGU+Rm9udCBHYXVudGxldCAtINCY0L3RgdGC0YDRg9C80LXQvdGCINC00LvRjyDRgNCw0LHQvtGC0Ysg0YHQviDRiNGA0LjRhNGC0LDQvNC4PC90aXRsZT5cbiAgICAgIDwvSGVhZD5cbiAgICAgIFxuICAgICAgPFNldHRpbmdzUHJvdmlkZXI+XG4gICAgICAgIDxGb250UHJvdmlkZXI+XG4gICAgICAgICAgPENvbXBvbmVudCB7Li4ucGFnZVByb3BzfSAvPlxuICAgICAgICAgIDxUb2FzdENvbnRhaW5lciBcbiAgICAgICAgICAgIHBvc2l0aW9uPVwiYm90dG9tLXJpZ2h0XCJcbiAgICAgICAgICAgIGF1dG9DbG9zZT17MzAwMH1cbiAgICAgICAgICAgIGhpZGVQcm9ncmVzc0Jhcj17ZmFsc2V9XG4gICAgICAgICAgICBuZXdlc3RPblRvcFxuICAgICAgICAgICAgY2xvc2VPbkNsaWNrXG4gICAgICAgICAgICBydGw9e2ZhbHNlfVxuICAgICAgICAgICAgcGF1c2VPbkZvY3VzTG9zc1xuICAgICAgICAgICAgZHJhZ2dhYmxlXG4gICAgICAgICAgICBwYXVzZU9uSG92ZXJcbiAgICAgICAgICAvPlxuICAgICAgICA8L0ZvbnRQcm92aWRlcj5cbiAgICAgIDwvU2V0dGluZ3NQcm92aWRlcj5cbiAgICA8Lz5cbiAgKTtcbn0gIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwiVG9hc3RDb250YWluZXIiLCJ0b2FzdCIsIlNldHRpbmdzUHJvdmlkZXIiLCJGb250UHJvdmlkZXIiLCJIZWFkIiwiTXlBcHAiLCJDb21wb25lbnQiLCJwYWdlUHJvcHMiLCJjbGVhckZvbnRzU3R5bGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIm1ldGEiLCJuYW1lIiwiY29udGVudCIsInRpdGxlIiwicG9zaXRpb24iLCJhdXRvQ2xvc2UiLCJoaWRlUHJvZ3Jlc3NCYXIiLCJuZXdlc3RPblRvcCIsImNsb3NlT25DbGljayIsInJ0bCIsInBhdXNlT25Gb2N1c0xvc3MiLCJkcmFnZ2FibGUiLCJwYXVzZU9uSG92ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/_app.jsx\n");

/***/ }),

/***/ "./utils/cssGenerator.js":
/*!*******************************!*\
  !*** ./utils/cssGenerator.js ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addFontFace: () => (/* binding */ addFontFace),\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   debouncedAddFontFace: () => (/* binding */ debouncedAddFontFace),\n/* harmony export */   debouncedUpdateVariableFontSettings: () => (/* binding */ debouncedUpdateVariableFontSettings),\n/* harmony export */   hasSignificantChanges: () => (/* binding */ hasSignificantChanges),\n/* harmony export */   loadFontFaceIfNeeded: () => (/* binding */ loadFontFaceIfNeeded),\n/* harmony export */   updateVariableFontSettings: () => (/* binding */ updateVariableFontSettings)\n/* harmony export */ });\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var _fontUtilsCommon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fontUtilsCommon */ \"./utils/fontUtilsCommon.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_0__]);\nreact_toastify__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// Функции для генерации CSS правил (@font-face, font-variation-settings и т.д.) \n\n\n// Восстанавливаем функцию hasSignificantChanges\n/**\n * Проверяет, являются ли изменения в настройках вариативных осей \"значительными\"\n * Используется для оптимизации обновлений CSS (например, при перетаскивании слайдера)\n * @param {Object} prevSettings - Предыдущие настройки\n * @param {Object} currentSettings - Текущие настройки\n * @param {number} threshold - Порог \"значительности\" изменения для одной оси\n * @returns {boolean} true, если изменения значительны\n */ const hasSignificantChanges = (prevSettings, currentSettings, threshold = 10)=>{\n    // Если предыдущих настроек нет, считаем изменение значительным\n    if (!prevSettings) return true;\n    // Получаем ключи (теги осей) из обоих объектов\n    const prevKeys = Object.keys(prevSettings);\n    const currentKeys = Object.keys(currentSettings);\n    // Если количество осей изменилось, считаем изменение значительным\n    if (prevKeys.length !== currentKeys.length) return true;\n    // Проверяем каждую ось\n    for (const key of currentKeys){\n        // Если ось новая или значение изменилось значительно, считаем изменение значительным\n        if (!(key in prevSettings) || Math.abs(parseFloat(prevSettings[key]) - parseFloat(currentSettings[key])) >= threshold) {\n            return true;\n        }\n    }\n    // Если ни одно из условий выше не сработало, изменения незначительны\n    return false;\n};\n/**\n * Буфер для CSS обновлений\n * Помогает предотвратить моргание шрифта при частом обновлении\n */ const fontCssBuffer = {\n    // Основной буфер (активный)\n    main: new Map(),\n    // Вторичный буфер (для подготовки)\n    shadow: new Map(),\n    // Флаг отслеживания активного переключения\n    switching: false,\n    // ID кадра анимации для отмены\n    animationFrameId: null\n};\n/**\n * Обновляет CSS правило с использованием двойной буферизации и requestAnimationFrame\n * @param {string} fontId - ID шрифта\n * @param {string} cssRule - CSS правило\n */ const updateBufferedFontCss = (fontId, cssRule)=>{\n    // Сохраняем правило в теневом буфере\n    fontCssBuffer.shadow.set(fontId, cssRule);\n    // Если кадр анимации уже запланирован, не создаем новый\n    if (fontCssBuffer.animationFrameId) {\n        return;\n    }\n    // Планируем переключение на следующий кадр анимации\n    fontCssBuffer.animationFrameId = requestAnimationFrame(()=>{\n        // Устанавливаем флаг переключения\n        fontCssBuffer.switching = true;\n        // Применяем все CSS правила из теневого буфера\n        fontCssBuffer.shadow.forEach((rule, id)=>{\n            try {\n                // Находим существующий элемент style или создаем новый\n                let styleElement = document.querySelector(`style[data-font-id=\"${id}\"]`);\n                if (!styleElement) {\n                    styleElement = document.createElement(\"style\");\n                    styleElement.setAttribute(\"data-font-id\", id);\n                    document.head.appendChild(styleElement);\n                }\n                // Обновляем содержимое, только если оно изменилось\n                if (styleElement.textContent !== rule) {\n                    styleElement.textContent = rule;\n                }\n                // Копируем правило в основной буфер\n                fontCssBuffer.main.set(id, rule);\n            // УДАЛЕНО: Принудительная перерисовка страницы\n            // document.body.offsetHeight;\n            } catch (error) {\n                console.error(`Ошибка при обновлении CSS для шрифта ${id}:`, error);\n            }\n        });\n        // Очищаем теневой буфер\n        fontCssBuffer.shadow.clear();\n        // Сбрасываем флаг переключения и ID кадра анимации\n        fontCssBuffer.switching = false;\n        fontCssBuffer.animationFrameId = null;\n    });\n};\n/**\n * Кэш для хранения загруженных объектов FontFace\n * Ключ: `${fontFamily}_${url}`, Значение: Promise<FontFace>\n */ const fontFaceCache = new Map();\n/**\n * Загружает шрифт с использованием FontFace API и кэширования\n * @param {string} fontFamily - Имя семейства шрифтов\n * @param {string} url - URL шрифта\n * @param {Object} settings - Настройки вариативных осей (опционально)\n * @returns {Promise<FontFace>} - Промис с объектом FontFace\n */ const loadFontFaceIfNeeded = async (fontFamily, url, settings = {})=>{\n    const cacheKey = `${fontFamily}_${url}`;\n    // Проверяем кэш\n    if (fontFaceCache.has(cacheKey)) {\n        try {\n            const cachedPromise = fontFaceCache.get(cacheKey);\n            const fontFace = await cachedPromise; // Дожидаемся разрешения промиса из кэша\n            // Проверяем, добавлен ли шрифт в document.fonts (на случай, если он был удален)\n            if (typeof document !== \"undefined\" && document.fonts && !document.fonts.has(fontFace)) {\n                document.fonts.add(fontFace);\n            }\n            return fontFace;\n        } catch (error) {\n            // Если промис в кэше был отклонен, удаляем его и продолжаем загрузку\n            console.warn(`Ошибка при использовании кэшированного FontFace для ${fontFamily}, повторная загрузка:`, error);\n            fontFaceCache.delete(cacheKey);\n        }\n    }\n    // Создаем промис для загрузки (чтобы закэшировать сам промис)\n    const loadPromise = (async ()=>{\n        try {\n            // ИСПРАВЛЕНИЕ: НЕ устанавливаем variationSettings в FontFace опциях!\n            // Это позволит динамически изменять оси через CSS font-variation-settings\n            const options = {};\n            // УДАЛЕНО: if (Object.keys(settings).length > 0) { ... }\n            console.log(`[loadFontFaceIfNeeded] Создаем FontFace для ${fontFamily} БЕЗ фиксированных variationSettings`);\n            const fontFace = new FontFace(fontFamily, `url(${url})`, options);\n            await fontFace.load();\n            if (typeof document !== \"undefined\" && document.fonts) {\n                document.fonts.add(fontFace);\n            }\n            console.log(`[loadFontFaceIfNeeded] FontFace успешно загружен и добавлен: ${fontFamily}`);\n            return fontFace;\n        } catch (error) {\n            console.error(`Ошибка при загрузке шрифта ${fontFamily} через FontFace API:`, error);\n            fontFaceCache.delete(cacheKey); // Удаляем из кэша при ошибке загрузки\n            throw error; // Пробрасываем ошибку дальше\n        }\n    })();\n    // Кэшируем сам промис\n    fontFaceCache.set(cacheKey, loadPromise);\n    return loadPromise;\n};\n/**\n * @deprecated Эта функция больше не добавляет @font-face. Используйте loadFontFaceIfNeeded.\n *             Она может быть использована только для обновления настроек, но лучше использовать updateVariableFontSettings.\n */ const addFontFace = (fontObj, prevSettings = null)=>{\n    // Проверяем, что у нас есть допустимый объект шрифта\n    if (!fontObj) {\n        console.error(\"fontObj не предоставлен\");\n        return null;\n    }\n    // Проверяем, что у нас есть файл или URL (уже не нужно для этой функции)\n    /*\n  if (!fontObj.url && (!fontObj.file || !(fontObj.file instanceof Blob))) {\n    console.error('Нет URL или файла для шрифта');\n    return fontObj;\n  }\n  */ // Убедимся, что у шрифта есть ID\n    if (!fontObj.id) {\n        fontObj.id = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n    }\n    // Убедимся, что есть fontFamily (он должен быть установлен в processLocalFont или взят из источника)\n    const fontFamilyName = fontObj.fontFamily;\n    if (!fontFamilyName) {\n        console.error(\"fontObj не имеет fontFamily, не могу обновить CSS.\", fontObj);\n        return fontObj; // Возвращаем без изменений\n    }\n    // --- УДАЛЕНА ГЕНЕРАЦИЯ @font-face --- \n    // Вся логика, связанная с `src: url(...)` и `format()` удалена.\n    // --- ЛОГИКА ОБНОВЛЕНИЯ VARIATION SETTINGS (оставлена для обратной совместимости, но лучше использовать updateVariableFontSettings) ---\n    // ... (код извлечения currentSettings и генерации variationSettingsRule остается, как в предыдущем анализе)\n    const currentSettings = {};\n    if (fontObj.isVariableFont && fontObj.variableAxes) {\n        Object.entries(fontObj.variableAxes).forEach(([tag, axisData])=>{\n            const value = axisData?.currentValue ?? axisData?.default;\n            if (value !== undefined) {\n                currentSettings[tag] = value;\n            }\n        });\n    }\n    // Подготавливаем строку font-variation-settings\n    let variationSettingsRule = \"\";\n    if (fontObj.isVariableFont) {\n        const settingsToApply = Object.entries(currentSettings);\n        if (settingsToApply.length > 0) {\n            const settingsArray = settingsToApply.map(([tag, value])=>`\\\"${tag}\\\" ${value}`);\n            // Используем data-атрибут как селектор (пример)\n            variationSettingsRule = `[data-font-family=\"${fontFamilyName}\"] { font-variation-settings: ${settingsArray.join(\", \")}; }`;\n        }\n    }\n    const cssRule = variationSettingsRule;\n    // Обновляем CSS с помощью буферизации, если есть что обновлять\n    if (cssRule) {\n        // Используем ID + '-settings', чтобы не конфликтовать с возможным старым @font-face стилем\n        updateBufferedFontCss(fontObj.id + \"-settings\", cssRule);\n    }\n    return fontObj;\n};\n/**\n * Создает дебаунсированную версию функции для предотвращения частых вызовов\n * @param {Function} func - Функция для дебаунсинга\n * @param {number} wait - Время ожидания в миллисекундах\n * @returns {Function} - Дебаунсированная функция\n */ const debounce = (func, wait = 50)=>{\n    let timeout;\n    return function(...args) {\n        const context = this;\n        clearTimeout(timeout);\n        timeout = setTimeout(()=>func.apply(context, args), wait);\n    };\n};\n/**\n * Дебаунсированная версия addFontFace для безопасного вызова при изменении осей\n */ const debouncedAddFontFace = debounce(addFontFace, 50);\n/**\n * Переименовываем updateFontFaceIfNeeded в updateVariableFontSettings\n * @param {Object} fontObj - Объект шрифта\n * @param {Object} currentSettings - Объект с текущими настройками осей { tag: value, ... }\n * @param {Object} prevSettings - Предыдущие настройки (опционально, для hasSignificantChanges)\n * @returns {Object} - Исходный fontObj\n */ const updateVariableFontSettings = (fontObj, currentSettings, prevSettings = null)=>{\n    if (!fontObj || !fontObj.fontFamily || !fontObj.isVariableFont) {\n        console.warn(\"updateVariableFontSettings: Невалидный fontObj или не вариативный шрифт.\");\n        return fontObj;\n    }\n    if (!currentSettings || typeof currentSettings !== \"object\") {\n        console.warn(\"updateVariableFontSettings: Не предоставлены currentSettings.\");\n        return fontObj;\n    }\n    const fontFamilyName = fontObj.fontFamily;\n    const fontId = fontObj.id || fontFamilyName; // Нужен ID для updateBufferedFontCss\n    // Опциональная проверка на значительные изменения\n    // if (prevSettings && !hasSignificantChanges(prevSettings, currentSettings)) {\n    //     return fontObj; // Нет значительных изменений\n    // }\n    // Формируем CSS правило ТОЛЬКО для font-variation-settings\n    let variationSettingsRule = \"\";\n    const settingsToApply = Object.entries(currentSettings);\n    if (settingsToApply.length > 0) {\n        const settingsArray = settingsToApply.map(([tag, value])=>`\\\"${tag}\\\" ${value}`);\n        // Используем data-атрибут как селектор. Убедись, что элемент превью имеет этот атрибут!\n        variationSettingsRule = `[data-font-family=\"${fontFamilyName}\"] { font-variation-settings: ${settingsArray.join(\", \")}; }`;\n    // Альтернатива: CSS переменные (требует изменений в компоненте)\n    // variationSettingsRule = `:root { ${settingsArray.map(([tag, value]) => `--${fontId}-${tag}: ${value};`).join('\\n')} }`;\n    }\n    // Обновляем CSS через буфер\n    if (variationSettingsRule) {\n        updateBufferedFontCss(fontId + \"-settings\", variationSettingsRule); // Используем уникальный ID для стилей настроек\n    } else {\n    // Если настроек нет, возможно, нужно удалить предыдущее правило?\n    // updateBufferedFontCss(fontId + '-settings', ''); // Очистить стиль\n    }\n    return fontObj;\n};\n// Дебаунсированная версия updateVariableFontSettings (остается)\nconst debouncedUpdateVariableFontSettings = debounce(updateVariableFontSettings, 50);\n/**\n * Счетчик для отслеживания количества загрузок шрифтов для отладки\n */ let fontLoadCounter = 0;\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0EsSUFBSSxDQUFDeEQsbUJBQW1CLE9BQU9BLG9CQUFvQixVQUFVO1FBQ3pEa0MsUUFBUWMsSUFBSSxDQUFDO1FBQ2IsT0FBT1E7SUFDWDtJQUVBLE1BQU1JLGlCQUFpQkosUUFBUWxCLFVBQVU7SUFDekMsTUFBTXBCLFNBQVNzQyxRQUFRaEMsRUFBRSxJQUFJb0MsZ0JBQWdCLHFDQUFxQztJQUVsRixrREFBa0Q7SUFDbEQsK0VBQStFO0lBQy9FLG9EQUFvRDtJQUNwRCxJQUFJO0lBRUosMkRBQTJEO0lBQzNELElBQUlVLHdCQUF3QjtJQUM1QixNQUFNQyxrQkFBa0JwRSxPQUFPNEQsT0FBTyxDQUFDL0Q7SUFDdkMsSUFBSXVFLGdCQUFnQmpFLE1BQU0sR0FBRyxHQUFHO1FBQzVCLE1BQU1rRSxnQkFBZ0JELGdCQUFnQkUsR0FBRyxDQUFDLENBQUMsQ0FBQ1QsS0FBS0UsTUFBTSxHQUFLLENBQUMsRUFBRSxFQUFFRixJQUFJLEdBQUcsRUFBRUUsTUFBTSxDQUFDO1FBQ2pGLHdGQUF3RjtRQUN4Rkksd0JBQXdCLENBQUMsbUJBQW1CLEVBQUVWLGVBQWUsOEJBQThCLEVBQUVZLGNBQWNFLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQztJQUMxSCxnRUFBZ0U7SUFDaEUsMEhBQTBIO0lBQzlIO0lBRUEsNEJBQTRCO0lBQzVCLElBQUlKLHVCQUF1QjtRQUN2QnJELHNCQUFzQkMsU0FBUyxhQUFhb0Qsd0JBQXdCLCtDQUErQztJQUN2SCxPQUFPO0lBQ0gsaUVBQWlFO0lBQ2pFLHFFQUFxRTtJQUN6RTtJQUVBLE9BQU9kO0FBQ1gsRUFBRTtBQUVGLGdFQUFnRTtBQUN6RCxNQUFNOEIsc0NBQXNDWCxTQUFTVSw0QkFBNEIsSUFBSTtBQUU1Rjs7Q0FFQyxHQUNELElBQUlFLGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZvbnQtZ2F1bnRsZXQtY2xvbmUvLi91dGlscy9jc3NHZW5lcmF0b3IuanM/Y2E3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDQpNGD0L3QutGG0LjQuCDQtNC70Y8g0LPQtdC90LXRgNCw0YbQuNC4IENTUyDQv9GA0LDQstC40LsgKEBmb250LWZhY2UsIGZvbnQtdmFyaWF0aW9uLXNldHRpbmdzINC4INGCLtC0LikgXG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcbmltcG9ydCB7IGdldEZvcm1hdEZyb21FeHRlbnNpb24gfSBmcm9tICcuL2ZvbnRVdGlsc0NvbW1vbic7XG5cbi8vINCS0L7RgdGB0YLQsNC90LDQstC70LjQstCw0LXQvCDRhNGD0L3QutGG0LjRjiBoYXNTaWduaWZpY2FudENoYW5nZXNcbi8qKlxuICog0J/RgNC+0LLQtdGA0Y/QtdGCLCDRj9Cy0LvRj9GO0YLRgdGPINC70Lgg0LjQt9C80LXQvdC10L3QuNGPINCyINC90LDRgdGC0YDQvtC50LrQsNGFINCy0LDRgNC40LDRgtC40LLQvdGL0YUg0L7RgdC10LkgXCLQt9C90LDRh9C40YLQtdC70YzQvdGL0LzQuFwiXG4gKiDQmNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0LTQu9GPINC+0L/RgtC40LzQuNC30LDRhtC40Lgg0L7QsdC90L7QstC70LXQvdC40LkgQ1NTICjQvdCw0L/RgNC40LzQtdGALCDQv9GA0Lgg0L/QtdGA0LXRgtCw0YHQutC40LLQsNC90LjQuCDRgdC70LDQudC00LXRgNCwKVxuICogQHBhcmFtIHtPYmplY3R9IHByZXZTZXR0aW5ncyAtINCf0YDQtdC00YvQtNGD0YnQuNC1INC90LDRgdGC0YDQvtC50LrQuFxuICogQHBhcmFtIHtPYmplY3R9IGN1cnJlbnRTZXR0aW5ncyAtINCi0LXQutGD0YnQuNC1INC90LDRgdGC0YDQvtC50LrQuFxuICogQHBhcmFtIHtudW1iZXJ9IHRocmVzaG9sZCAtINCf0L7RgNC+0LMgXCLQt9C90LDRh9C40YLQtdC70YzQvdC+0YHRgtC4XCIg0LjQt9C80LXQvdC10L3QuNGPINC00LvRjyDQvtC00L3QvtC5INC+0YHQuFxuICogQHJldHVybnMge2Jvb2xlYW59IHRydWUsINC10YHQu9C4INC40LfQvNC10L3QtdC90LjRjyDQt9C90LDRh9C40YLQtdC70YzQvdGLXG4gKi9cbmV4cG9ydCBjb25zdCBoYXNTaWduaWZpY2FudENoYW5nZXMgPSAocHJldlNldHRpbmdzLCBjdXJyZW50U2V0dGluZ3MsIHRocmVzaG9sZCA9IDEwKSA9PiB7XG4gIC8vINCV0YHQu9C4INC/0YDQtdC00YvQtNGD0YnQuNGFINC90LDRgdGC0YDQvtC10Log0L3QtdGCLCDRgdGH0LjRgtCw0LXQvCDQuNC30LzQtdC90LXQvdC40LUg0LfQvdCw0YfQuNGC0LXQu9GM0L3Ri9C8XG4gIGlmICghcHJldlNldHRpbmdzKSByZXR1cm4gdHJ1ZTtcbiAgXG4gIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LrQu9GO0YfQuCAo0YLQtdCz0Lgg0L7RgdC10LkpINC40Lcg0L7QsdC+0LjRhSDQvtCx0YrQtdC60YLQvtCyXG4gIGNvbnN0IHByZXZLZXlzID0gT2JqZWN0LmtleXMocHJldlNldHRpbmdzKTtcbiAgY29uc3QgY3VycmVudEtleXMgPSBPYmplY3Qua2V5cyhjdXJyZW50U2V0dGluZ3MpO1xuXG4gIC8vINCV0YHQu9C4INC60L7Qu9C40YfQtdGB0YLQstC+INC+0YHQtdC5INC40LfQvNC10L3QuNC70L7RgdGMLCDRgdGH0LjRgtCw0LXQvCDQuNC30LzQtdC90LXQvdC40LUg0LfQvdCw0YfQuNGC0LXQu9GM0L3Ri9C8XG4gIGlmIChwcmV2S2V5cy5sZW5ndGggIT09IGN1cnJlbnRLZXlzLmxlbmd0aCkgcmV0dXJuIHRydWU7XG5cbiAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC60LDQttC00YPRjiDQvtGB0YxcbiAgZm9yIChjb25zdCBrZXkgb2YgY3VycmVudEtleXMpIHtcbiAgICAvLyDQldGB0LvQuCDQvtGB0Ywg0L3QvtCy0LDRjyDQuNC70Lgg0LfQvdCw0YfQtdC90LjQtSDQuNC30LzQtdC90LjQu9C+0YHRjCDQt9C90LDRh9C40YLQtdC70YzQvdC+LCDRgdGH0LjRgtCw0LXQvCDQuNC30LzQtdC90LXQvdC40LUg0LfQvdCw0YfQuNGC0LXQu9GM0L3Ri9C8XG4gICAgaWYgKCEoa2V5IGluIHByZXZTZXR0aW5ncykgfHwgXG4gICAgICAgIE1hdGguYWJzKHBhcnNlRmxvYXQocHJldlNldHRpbmdzW2tleV0pIC0gcGFyc2VGbG9hdChjdXJyZW50U2V0dGluZ3Nba2V5XSkpID49IHRocmVzaG9sZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLy8g0JXRgdC70Lgg0L3QuCDQvtC00L3QviDQuNC3INGD0YHQu9C+0LLQuNC5INCy0YvRiNC1INC90LUg0YHRgNCw0LHQvtGC0LDQu9C+LCDQuNC30LzQtdC90LXQvdC40Y8g0L3QtdC30L3QsNGH0LjRgtC10LvRjNC90YtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiDQkdGD0YTQtdGAINC00LvRjyBDU1Mg0L7QsdC90L7QstC70LXQvdC40LlcbiAqINCf0L7QvNC+0LPQsNC10YIg0L/RgNC10LTQvtGC0LLRgNCw0YLQuNGC0Ywg0LzQvtGA0LPQsNC90LjQtSDRiNGA0LjRhNGC0LAg0L/RgNC4INGH0LDRgdGC0L7QvCDQvtCx0L3QvtCy0LvQtdC90LjQuFxuICovXG5jb25zdCBmb250Q3NzQnVmZmVyID0ge1xuICAvLyDQntGB0L3QvtCy0L3QvtC5INCx0YPRhNC10YAgKNCw0LrRgtC40LLQvdGL0LkpXG4gIG1haW46IG5ldyBNYXAoKSxcbiAgLy8g0JLRgtC+0YDQuNGH0L3Ri9C5INCx0YPRhNC10YAgKNC00LvRjyDQv9C+0LTQs9C+0YLQvtCy0LrQuClcbiAgc2hhZG93OiBuZXcgTWFwKCksXG4gIC8vINCk0LvQsNCzINC+0YLRgdC70LXQttC40LLQsNC90LjRjyDQsNC60YLQuNCy0L3QvtCz0L4g0L/QtdGA0LXQutC70Y7Rh9C10L3QuNGPXG4gIHN3aXRjaGluZzogZmFsc2UsXG4gIC8vIElEINC60LDQtNGA0LAg0LDQvdC40LzQsNGG0LjQuCDQtNC70Y8g0L7RgtC80LXQvdGLXG4gIGFuaW1hdGlvbkZyYW1lSWQ6IG51bGxcbn07XG5cbi8qKlxuICog0J7QsdC90L7QstC70Y/QtdGCIENTUyDQv9GA0LDQstC40LvQviDRgSDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjQtdC8INC00LLQvtC50L3QvtC5INCx0YPRhNC10YDQuNC30LDRhtC40Lgg0LggcmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udElkIC0gSUQg0YjRgNC40YTRgtCwXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzUnVsZSAtIENTUyDQv9GA0LDQstC40LvQvlxuICovXG5jb25zdCB1cGRhdGVCdWZmZXJlZEZvbnRDc3MgPSAoZm9udElkLCBjc3NSdWxlKSA9PiB7XG4gIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQv9GA0LDQstC40LvQviDQsiDRgtC10L3QtdCy0L7QvCDQsdGD0YTQtdGA0LVcbiAgZm9udENzc0J1ZmZlci5zaGFkb3cuc2V0KGZvbnRJZCwgY3NzUnVsZSk7XG5cbiAgLy8g0JXRgdC70Lgg0LrQsNC00YAg0LDQvdC40LzQsNGG0LjQuCDRg9C20LUg0LfQsNC/0LvQsNC90LjRgNC+0LLQsNC9LCDQvdC1INGB0L7Qt9C00LDQtdC8INC90L7QstGL0LlcbiAgaWYgKGZvbnRDc3NCdWZmZXIuYW5pbWF0aW9uRnJhbWVJZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vINCf0LvQsNC90LjRgNGD0LXQvCDQv9C10YDQtdC60LvRjtGH0LXQvdC40LUg0L3QsCDRgdC70LXQtNGD0Y7RidC40Lkg0LrQsNC00YAg0LDQvdC40LzQsNGG0LjQuFxuICBmb250Q3NzQnVmZmVyLmFuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGE0LvQsNCzINC/0LXRgNC10LrQu9GO0YfQtdC90LjRj1xuICAgIGZvbnRDc3NCdWZmZXIuc3dpdGNoaW5nID0gdHJ1ZTtcblxuICAgIC8vINCf0YDQuNC80LXQvdGP0LXQvCDQstGB0LUgQ1NTINC/0YDQsNCy0LjQu9CwINC40Lcg0YLQtdC90LXQstC+0LPQviDQsdGD0YTQtdGA0LBcbiAgICBmb250Q3NzQnVmZmVyLnNoYWRvdy5mb3JFYWNoKChydWxlLCBpZCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8g0J3QsNGF0L7QtNC40Lwg0YHRg9GJ0LXRgdGC0LLRg9GO0YnQuNC5INGN0LvQtdC80LXQvdGCIHN0eWxlINC40LvQuCDRgdC+0LfQtNCw0LXQvCDQvdC+0LLRi9C5XG4gICAgICAgIGxldCBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzdHlsZVtkYXRhLWZvbnQtaWQ9XCIke2lkfVwiXWApO1xuXG4gICAgICAgIGlmICghc3R5bGVFbGVtZW50KSB7XG4gICAgICAgICAgc3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICBzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWZvbnQtaWQnLCBpZCk7XG4gICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INGB0L7QtNC10YDQttC40LzQvtC1LCDRgtC+0LvRjNC60L4g0LXRgdC70Lgg0L7QvdC+INC40LfQvNC10L3QuNC70L7RgdGMXG4gICAgICAgIGlmIChzdHlsZUVsZW1lbnQudGV4dENvbnRlbnQgIT09IHJ1bGUpIHtcbiAgICAgICAgICBzdHlsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBydWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g0JrQvtC/0LjRgNGD0LXQvCDQv9GA0LDQstC40LvQviDQsiDQvtGB0L3QvtCy0L3QvtC5INCx0YPRhNC10YBcbiAgICAgICAgZm9udENzc0J1ZmZlci5tYWluLnNldChpZCwgcnVsZSk7XG5cbiAgICAgICAgLy8g0KPQlNCQ0JvQldCd0J46INCf0YDQuNC90YPQtNC40YLQtdC70YzQvdCw0Y8g0L/QtdGA0LXRgNC40YHQvtCy0LrQsCDRgdGC0YDQsNC90LjRhtGLXG4gICAgICAgIC8vIGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINC/0YDQuCDQvtCx0L3QvtCy0LvQtdC90LjQuCBDU1Mg0LTQu9GPINGI0YDQuNGE0YLQsCAke2lkfTpgLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDQntGH0LjRidCw0LXQvCDRgtC10L3QtdCy0L7QuSDQsdGD0YTQtdGAXG4gICAgZm9udENzc0J1ZmZlci5zaGFkb3cuY2xlYXIoKTtcblxuICAgIC8vINCh0LHRgNCw0YHRi9Cy0LDQtdC8INGE0LvQsNCzINC/0LXRgNC10LrQu9GO0YfQtdC90LjRjyDQuCBJRCDQutCw0LTRgNCwINCw0L3QuNC80LDRhtC40LhcbiAgICBmb250Q3NzQnVmZmVyLnN3aXRjaGluZyA9IGZhbHNlO1xuICAgIGZvbnRDc3NCdWZmZXIuYW5pbWF0aW9uRnJhbWVJZCA9IG51bGw7XG4gIH0pO1xufTtcblxuLyoqXG4gKiDQmtGN0Ygg0LTQu9GPINGF0YDQsNC90LXQvdC40Y8g0LfQsNCz0YDRg9C20LXQvdC90YvRhSDQvtCx0YrQtdC60YLQvtCyIEZvbnRGYWNlXG4gKiDQmtC70Y7RhzogYCR7Zm9udEZhbWlseX1fJHt1cmx9YCwg0JfQvdCw0YfQtdC90LjQtTogUHJvbWlzZTxGb250RmFjZT5cbiAqL1xuY29uc3QgZm9udEZhY2VDYWNoZSA9IG5ldyBNYXAoKTtcblxuLyoqXG4gKiDQl9Cw0LPRgNGD0LbQsNC10YIg0YjRgNC40YTRgiDRgSDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjQtdC8IEZvbnRGYWNlIEFQSSDQuCDQutGN0YjQuNGA0L7QstCw0L3QuNGPXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udEZhbWlseSAtINCY0LzRjyDRgdC10LzQtdC50YHRgtCy0LAg0YjRgNC40YTRgtC+0LJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwg0YjRgNC40YTRgtCwXG4gKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3MgLSDQndCw0YHRgtGA0L7QudC60Lgg0LLQsNGA0LjQsNGC0LjQstC90YvRhSDQvtGB0LXQuSAo0L7Qv9GG0LjQvtC90LDQu9GM0L3QvilcbiAqIEByZXR1cm5zIHtQcm9taXNlPEZvbnRGYWNlPn0gLSDQn9GA0L7QvNC40YEg0YEg0L7QsdGK0LXQutGC0L7QvCBGb250RmFjZVxuICovXG5leHBvcnQgY29uc3QgbG9hZEZvbnRGYWNlSWZOZWVkZWQgPSBhc3luYyAoZm9udEZhbWlseSwgdXJsLCBzZXR0aW5ncyA9IHt9KSA9PiB7XG4gIGNvbnN0IGNhY2hlS2V5ID0gYCR7Zm9udEZhbWlseX1fJHt1cmx9YDtcbiAgXG4gIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDQutGN0YhcbiAgaWYgKGZvbnRGYWNlQ2FjaGUuaGFzKGNhY2hlS2V5KSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYWNoZWRQcm9taXNlID0gZm9udEZhY2VDYWNoZS5nZXQoY2FjaGVLZXkpO1xuICAgICAgY29uc3QgZm9udEZhY2UgPSBhd2FpdCBjYWNoZWRQcm9taXNlOyAvLyDQlNC+0LbQuNC00LDQtdC80YHRjyDRgNCw0LfRgNC10YjQtdC90LjRjyDQv9GA0L7QvNC40YHQsCDQuNC3INC60Y3RiNCwXG4gICAgICAvLyDQn9GA0L7QstC10YDRj9C10LwsINC00L7QsdCw0LLQu9C10L0g0LvQuCDRiNGA0LjRhNGCINCyIGRvY3VtZW50LmZvbnRzICjQvdCwINGB0LvRg9GH0LDQuSwg0LXRgdC70Lgg0L7QvSDQsdGL0Lsg0YPQtNCw0LvQtdC9KVxuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZm9udHMgJiYgIWRvY3VtZW50LmZvbnRzLmhhcyhmb250RmFjZSkpIHtcbiAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChmb250RmFjZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZm9udEZhY2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vINCV0YHQu9C4INC/0YDQvtC80LjRgSDQsiDQutGN0YjQtSDQsdGL0Lsg0L7RgtC60LvQvtC90LXQvSwg0YPQtNCw0LvRj9C10Lwg0LXQs9C+INC4INC/0YDQvtC00L7Qu9C20LDQtdC8INC30LDQs9GA0YPQt9C60YNcbiAgICAgIGNvbnNvbGUud2Fybihg0J7RiNC40LHQutCwINC/0YDQuCDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjQuCDQutGN0YjQuNGA0L7QstCw0L3QvdC+0LPQviBGb250RmFjZSDQtNC70Y8gJHtmb250RmFtaWx5fSwg0L/QvtCy0YLQvtGA0L3QsNGPINC30LDQs9GA0YPQt9C60LA6YCwgZXJyb3IpO1xuICAgICAgZm9udEZhY2VDYWNoZS5kZWxldGUoY2FjaGVLZXkpO1xuICAgIH1cbiAgfVxuXG4gIC8vINCh0L7Qt9C00LDQtdC8INC/0YDQvtC80LjRgSDQtNC70Y8g0LfQsNCz0YDRg9C30LrQuCAo0YfRgtC+0LHRiyDQt9Cw0LrRjdGI0LjRgNC+0LLQsNGC0Ywg0YHQsNC8INC/0YDQvtC80LjRgSlcbiAgY29uc3QgbG9hZFByb21pc2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDQmNCh0J/QoNCQ0JLQm9CV0J3QmNCVOiDQndCVINGD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8IHZhcmlhdGlvblNldHRpbmdzINCyIEZvbnRGYWNlINC+0L/RhtC40Y/RhSFcbiAgICAgIC8vINCt0YLQviDQv9C+0LfQstC+0LvQuNGCINC00LjQvdCw0LzQuNGH0LXRgdC60Lgg0LjQt9C80LXQvdGP0YLRjCDQvtGB0Lgg0YfQtdGA0LXQtyBDU1MgZm9udC12YXJpYXRpb24tc2V0dGluZ3NcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcbiAgICAgIC8vINCj0JTQkNCb0JXQndCeOiBpZiAoT2JqZWN0LmtleXMoc2V0dGluZ3MpLmxlbmd0aCA+IDApIHsgLi4uIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFtsb2FkRm9udEZhY2VJZk5lZWRlZF0g0KHQvtC30LTQsNC10LwgRm9udEZhY2Ug0LTQu9GPICR7Zm9udEZhbWlseX0g0JHQldCXINGE0LjQutGB0LjRgNC+0LLQsNC90L3Ri9GFIHZhcmlhdGlvblNldHRpbmdzYCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZvbnRGYWNlID0gbmV3IEZvbnRGYWNlKGZvbnRGYW1pbHksIGB1cmwoJHt1cmx9KWAsIG9wdGlvbnMpO1xuICAgICAgYXdhaXQgZm9udEZhY2UubG9hZCgpO1xuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuZm9udHMpIHtcbiAgICAgICAgICBkb2N1bWVudC5mb250cy5hZGQoZm9udEZhY2UpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgW2xvYWRGb250RmFjZUlmTmVlZGVkXSBGb250RmFjZSDRg9GB0L/QtdGI0L3QviDQt9Cw0LPRgNGD0LbQtdC9INC4INC00L7QsdCw0LLQu9C10L06ICR7Zm9udEZhbWlseX1gKTtcbiAgICAgIHJldHVybiBmb250RmFjZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1INGI0YDQuNGE0YLQsCAke2ZvbnRGYW1pbHl9INGH0LXRgNC10LcgRm9udEZhY2UgQVBJOmAsIGVycm9yKTtcbiAgICAgIGZvbnRGYWNlQ2FjaGUuZGVsZXRlKGNhY2hlS2V5KTsgLy8g0KPQtNCw0LvRj9C10Lwg0LjQtyDQutGN0YjQsCDQv9GA0Lgg0L7RiNC40LHQutC1INC30LDQs9GA0YPQt9C60LhcbiAgICAgIHRocm93IGVycm9yOyAvLyDQn9GA0L7QsdGA0LDRgdGL0LLQsNC10Lwg0L7RiNC40LHQutGDINC00LDQu9GM0YjQtVxuICAgIH1cbiAgfSkoKTtcblxuICAvLyDQmtGN0YjQuNGA0YPQtdC8INGB0LDQvCDQv9GA0L7QvNC40YFcbiAgZm9udEZhY2VDYWNoZS5zZXQoY2FjaGVLZXksIGxvYWRQcm9taXNlKTtcblxuICByZXR1cm4gbG9hZFByb21pc2U7XG59O1xuXG4vKipcbiAqIEBkZXByZWNhdGVkINCt0YLQsCDRhNGD0L3QutGG0LjRjyDQsdC+0LvRjNGI0LUg0L3QtSDQtNC+0LHQsNCy0LvRj9C10YIgQGZvbnQtZmFjZS4g0JjRgdC/0L7Qu9GM0LfRg9C50YLQtSBsb2FkRm9udEZhY2VJZk5lZWRlZC5cbiAqICAgICAgICAgICAgINCe0L3QsCDQvNC+0LbQtdGCINCx0YvRgtGMINC40YHQv9C+0LvRjNC30L7QstCw0L3QsCDRgtC+0LvRjNC60L4g0LTQu9GPINC+0LHQvdC+0LLQu9C10L3QuNGPINC90LDRgdGC0YDQvtC10LosINC90L4g0LvRg9GH0YjQtSDQuNGB0L/QvtC70YzQt9C+0LLQsNGC0YwgdXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3MuXG4gKi9cbmV4cG9ydCBjb25zdCBhZGRGb250RmFjZSA9IChmb250T2JqLCBwcmV2U2V0dGluZ3MgPSBudWxsKSA9PiB7XG4gIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0YfRgtC+INGDINC90LDRgSDQtdGB0YLRjCDQtNC+0L/Rg9GB0YLQuNC80YvQuSDQvtCx0YrQtdC60YIg0YjRgNC40YTRgtCwXG4gIGlmICghZm9udE9iaikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ2ZvbnRPYmog0L3QtSDQv9GA0LXQtNC+0YHRgtCw0LLQu9C10L0nKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0YfRgtC+INGDINC90LDRgSDQtdGB0YLRjCDRhNCw0LnQuyDQuNC70LggVVJMICjRg9C20LUg0L3QtSDQvdGD0LbQvdC+INC00LvRjyDRjdGC0L7QuSDRhNGD0L3QutGG0LjQuClcbiAgLypcbiAgaWYgKCFmb250T2JqLnVybCAmJiAoIWZvbnRPYmouZmlsZSB8fCAhKGZvbnRPYmouZmlsZSBpbnN0YW5jZW9mIEJsb2IpKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ9Cd0LXRgiBVUkwg0LjQu9C4INGE0LDQudC70LAg0LTQu9GPINGI0YDQuNGE0YLQsCcpO1xuICAgIHJldHVybiBmb250T2JqO1xuICB9XG4gICovXG5cbiAgLy8g0KPQsdC10LTQuNC80YHRjywg0YfRgtC+INGDINGI0YDQuNGE0YLQsCDQtdGB0YLRjCBJRFxuICBpZiAoIWZvbnRPYmouaWQpIHtcbiAgICBmb250T2JqLmlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxNSk7XG4gIH1cblxuICAvLyDQo9Cx0LXQtNC40LzRgdGPLCDRh9GC0L4g0LXRgdGC0YwgZm9udEZhbWlseSAo0L7QvSDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0YPRgdGC0LDQvdC+0LLQu9C10L0g0LIgcHJvY2Vzc0xvY2FsRm9udCDQuNC70Lgg0LLQt9GP0YIg0LjQtyDQuNGB0YLQvtGH0L3QuNC60LApXG4gIGNvbnN0IGZvbnRGYW1pbHlOYW1lID0gZm9udE9iai5mb250RmFtaWx5O1xuICBpZiAoIWZvbnRGYW1pbHlOYW1lKSB7XG4gICAgY29uc29sZS5lcnJvcignZm9udE9iaiDQvdC1INC40LzQtdC10YIgZm9udEZhbWlseSwg0L3QtSDQvNC+0LPRgyDQvtCx0L3QvtCy0LjRgtGMIENTUy4nLCBmb250T2JqKTtcbiAgICByZXR1cm4gZm9udE9iajsgLy8g0JLQvtC30LLRgNCw0YnQsNC10Lwg0LHQtdC3INC40LfQvNC10L3QtdC90LjQuVxuICB9XG5cbiAgLy8gLS0tINCj0JTQkNCb0JXQndCQINCT0JXQndCV0KDQkNCm0JjQryBAZm9udC1mYWNlIC0tLSBcbiAgLy8g0JLRgdGPINC70L7Qs9C40LrQsCwg0YHQstGP0LfQsNC90L3QsNGPINGBIGBzcmM6IHVybCguLi4pYCDQuCBgZm9ybWF0KClgINGD0LTQsNC70LXQvdCwLlxuXG4gIC8vIC0tLSDQm9Ce0JPQmNCa0JAg0J7QkdCd0J7QktCb0JXQndCY0K8gVkFSSUFUSU9OIFNFVFRJTkdTICjQvtGB0YLQsNCy0LvQtdC90LAg0LTQu9GPINC+0LHRgNCw0YLQvdC+0Lkg0YHQvtCy0LzQtdGB0YLQuNC80L7RgdGC0LgsINC90L4g0LvRg9GH0YjQtSDQuNGB0L/QvtC70YzQt9C+0LLQsNGC0YwgdXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3MpIC0tLVxuICAvLyAuLi4gKNC60L7QtCDQuNC30LLQu9C10YfQtdC90LjRjyBjdXJyZW50U2V0dGluZ3Mg0Lgg0LPQtdC90LXRgNCw0YbQuNC4IHZhcmlhdGlvblNldHRpbmdzUnVsZSDQvtGB0YLQsNC10YLRgdGPLCDQutCw0Log0LIg0L/RgNC10LTRi9C00YPRidC10Lwg0LDQvdCw0LvQuNC30LUpXG4gIGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHt9O1xuICBpZiAoZm9udE9iai5pc1ZhcmlhYmxlRm9udCAmJiBmb250T2JqLnZhcmlhYmxlQXhlcykge1xuICAgIE9iamVjdC5lbnRyaWVzKGZvbnRPYmoudmFyaWFibGVBeGVzKS5mb3JFYWNoKChbdGFnLCBheGlzRGF0YV0pID0+IHtcbiAgICAgICAgIGNvbnN0IHZhbHVlID0gYXhpc0RhdGE/LmN1cnJlbnRWYWx1ZSA/PyBheGlzRGF0YT8uZGVmYXVsdDtcbiAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgY3VycmVudFNldHRpbmdzW3RhZ10gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBcbiAgLy8g0J/QvtC00LPQvtGC0LDQstC70LjQstCw0LXQvCDRgdGC0YDQvtC60YMgZm9udC12YXJpYXRpb24tc2V0dGluZ3NcbiAgbGV0IHZhcmlhdGlvblNldHRpbmdzUnVsZSA9ICcnO1xuICBpZiAoZm9udE9iai5pc1ZhcmlhYmxlRm9udCkge1xuICAgICAgY29uc3Qgc2V0dGluZ3NUb0FwcGx5ID0gT2JqZWN0LmVudHJpZXMoY3VycmVudFNldHRpbmdzKTtcbiAgICAgIGlmIChzZXR0aW5nc1RvQXBwbHkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHNldHRpbmdzQXJyYXkgPSBzZXR0aW5nc1RvQXBwbHkubWFwKChbdGFnLCB2YWx1ZV0pID0+IGBcXFwiJHt0YWd9XFxcIiAke3ZhbHVlfWApO1xuICAgICAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IGRhdGEt0LDRgtGA0LjQsdGD0YIg0LrQsNC6INGB0LXQu9C10LrRgtC+0YAgKNC/0YDQuNC80LXRgClcbiAgICAgICAgICB2YXJpYXRpb25TZXR0aW5nc1J1bGUgPSBgW2RhdGEtZm9udC1mYW1pbHk9XCIke2ZvbnRGYW1pbHlOYW1lfVwiXSB7IGZvbnQtdmFyaWF0aW9uLXNldHRpbmdzOiAke3NldHRpbmdzQXJyYXkuam9pbignLCAnKX07IH1gO1xuICAgICAgfVxuICB9XG5cbiAgY29uc3QgY3NzUnVsZSA9IHZhcmlhdGlvblNldHRpbmdzUnVsZTtcblxuICAvLyDQntCx0L3QvtCy0LvRj9C10LwgQ1NTINGBINC/0L7QvNC+0YnRjNGOINCx0YPRhNC10YDQuNC30LDRhtC40LgsINC10YHQu9C4INC10YHRgtGMINGH0YLQviDQvtCx0L3QvtCy0LvRj9GC0YxcbiAgaWYgKGNzc1J1bGUpIHtcbiAgICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IElEICsgJy1zZXR0aW5ncycsINGH0YLQvtCx0Ysg0L3QtSDQutC+0L3RhNC70LjQutGC0L7QstCw0YLRjCDRgSDQstC+0LfQvNC+0LbQvdGL0Lwg0YHRgtCw0YDRi9C8IEBmb250LWZhY2Ug0YHRgtC40LvQtdC8XG4gICAgICB1cGRhdGVCdWZmZXJlZEZvbnRDc3MoZm9udE9iai5pZCArICctc2V0dGluZ3MnLCBjc3NSdWxlKTtcbiAgfVxuXG4gICAgcmV0dXJuIGZvbnRPYmo7XG59O1xuXG4vKipcbiAqINCh0L7Qt9C00LDQtdGCINC00LXQsdCw0YPQvdGB0LjRgNC+0LLQsNC90L3Rg9GOINCy0LXRgNGB0LjRjiDRhNGD0L3QutGG0LjQuCDQtNC70Y8g0L/RgNC10LTQvtGC0LLRgNCw0YnQtdC90LjRjyDRh9Cw0YHRgtGL0YUg0LLRi9C30L7QstC+0LJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgLSDQpNGD0L3QutGG0LjRjyDQtNC70Y8g0LTQtdCx0LDRg9C90YHQuNC90LPQsFxuICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgLSDQktGA0LXQvNGPINC+0LbQuNC00LDQvdC40Y8g0LIg0LzQuNC70LvQuNGB0LXQutGD0L3QtNCw0YVcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gLSDQlNC10LHQsNGD0L3RgdC40YDQvtCy0LDQvdC90LDRjyDRhNGD0L3QutGG0LjRj1xuICovXG5leHBvcnQgY29uc3QgZGVib3VuY2UgPSAoZnVuYywgd2FpdCA9IDUwKSA9PiB7XG4gIGxldCB0aW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpLCB3YWl0KTtcbiAgfTtcbn07XG5cbi8qKlxuICog0JTQtdCx0LDRg9C90YHQuNGA0L7QstCw0L3QvdCw0Y8g0LLQtdGA0YHQuNGPIGFkZEZvbnRGYWNlINC00LvRjyDQsdC10LfQvtC/0LDRgdC90L7Qs9C+INCy0YvQt9C+0LLQsCDQv9GA0Lgg0LjQt9C80LXQvdC10L3QuNC4INC+0YHQtdC5XG4gKi9cbmV4cG9ydCBjb25zdCBkZWJvdW5jZWRBZGRGb250RmFjZSA9IGRlYm91bmNlKGFkZEZvbnRGYWNlLCA1MCk7XG5cbi8qKlxuICog0J/QtdGA0LXQuNC80LXQvdC+0LLRi9Cy0LDQtdC8IHVwZGF0ZUZvbnRGYWNlSWZOZWVkZWQg0LIgdXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3NcbiAqIEBwYXJhbSB7T2JqZWN0fSBmb250T2JqIC0g0J7QsdGK0LXQutGCINGI0YDQuNGE0YLQsFxuICogQHBhcmFtIHtPYmplY3R9IGN1cnJlbnRTZXR0aW5ncyAtINCe0LHRitC10LrRgiDRgSDRgtC10LrRg9GJ0LjQvNC4INC90LDRgdGC0YDQvtC50LrQsNC80Lgg0L7RgdC10LkgeyB0YWc6IHZhbHVlLCAuLi4gfVxuICogQHBhcmFtIHtPYmplY3R9IHByZXZTZXR0aW5ncyAtINCf0YDQtdC00YvQtNGD0YnQuNC1INC90LDRgdGC0YDQvtC50LrQuCAo0L7Qv9GG0LjQvtC90LDQu9GM0L3Qviwg0LTQu9GPIGhhc1NpZ25pZmljYW50Q2hhbmdlcylcbiAqIEByZXR1cm5zIHtPYmplY3R9IC0g0JjRgdGF0L7QtNC90YvQuSBmb250T2JqXG4gKi9cbmV4cG9ydCBjb25zdCB1cGRhdGVWYXJpYWJsZUZvbnRTZXR0aW5ncyA9IChmb250T2JqLCBjdXJyZW50U2V0dGluZ3MsIHByZXZTZXR0aW5ncyA9IG51bGwpID0+IHtcbiAgICBpZiAoIWZvbnRPYmogfHwgIWZvbnRPYmouZm9udEZhbWlseSB8fCAhZm9udE9iai5pc1ZhcmlhYmxlRm9udCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3VwZGF0ZVZhcmlhYmxlRm9udFNldHRpbmdzOiDQndC10LLQsNC70LjQtNC90YvQuSBmb250T2JqINC40LvQuCDQvdC1INCy0LDRgNC40LDRgtC40LLQvdGL0Lkg0YjRgNC40YTRgi4nKTtcbiAgICAgICAgcmV0dXJuIGZvbnRPYmo7XG4gICAgfVxuICAgIGlmICghY3VycmVudFNldHRpbmdzIHx8IHR5cGVvZiBjdXJyZW50U2V0dGluZ3MgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybigndXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3M6INCd0LUg0L/RgNC10LTQvtGB0YLQsNCy0LvQtdC90YsgY3VycmVudFNldHRpbmdzLicpO1xuICAgICAgICByZXR1cm4gZm9udE9iajtcbiAgICB9XG5cbiAgICBjb25zdCBmb250RmFtaWx5TmFtZSA9IGZvbnRPYmouZm9udEZhbWlseTtcbiAgICBjb25zdCBmb250SWQgPSBmb250T2JqLmlkIHx8IGZvbnRGYW1pbHlOYW1lOyAvLyDQndGD0LbQtdC9IElEINC00LvRjyB1cGRhdGVCdWZmZXJlZEZvbnRDc3NcblxuICAgIC8vINCe0L/RhtC40L7QvdCw0LvRjNC90LDRjyDQv9GA0L7QstC10YDQutCwINC90LAg0LfQvdCw0YfQuNGC0LXQu9GM0L3Ri9C1INC40LfQvNC10L3QtdC90LjRj1xuICAgIC8vIGlmIChwcmV2U2V0dGluZ3MgJiYgIWhhc1NpZ25pZmljYW50Q2hhbmdlcyhwcmV2U2V0dGluZ3MsIGN1cnJlbnRTZXR0aW5ncykpIHtcbiAgICAvLyAgICAgcmV0dXJuIGZvbnRPYmo7IC8vINCd0LXRgiDQt9C90LDRh9C40YLQtdC70YzQvdGL0YUg0LjQt9C80LXQvdC10L3QuNC5XG4gICAgLy8gfVxuXG4gICAgLy8g0KTQvtGA0LzQuNGA0YPQtdC8IENTUyDQv9GA0LDQstC40LvQviDQotCe0JvQrNCa0J4g0LTQu9GPIGZvbnQtdmFyaWF0aW9uLXNldHRpbmdzXG4gICAgbGV0IHZhcmlhdGlvblNldHRpbmdzUnVsZSA9ICcnO1xuICAgIGNvbnN0IHNldHRpbmdzVG9BcHBseSA9IE9iamVjdC5lbnRyaWVzKGN1cnJlbnRTZXR0aW5ncyk7XG4gICAgaWYgKHNldHRpbmdzVG9BcHBseS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzQXJyYXkgPSBzZXR0aW5nc1RvQXBwbHkubWFwKChbdGFnLCB2YWx1ZV0pID0+IGBcXFwiJHt0YWd9XFxcIiAke3ZhbHVlfWApO1xuICAgICAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCBkYXRhLdCw0YLRgNC40LHRg9GCINC60LDQuiDRgdC10LvQtdC60YLQvtGALiDQo9Cx0LXQtNC40YHRjCwg0YfRgtC+INGN0LvQtdC80LXQvdGCINC/0YDQtdCy0YzRjiDQuNC80LXQtdGCINGN0YLQvtGCINCw0YLRgNC40LHRg9GCIVxuICAgICAgICB2YXJpYXRpb25TZXR0aW5nc1J1bGUgPSBgW2RhdGEtZm9udC1mYW1pbHk9XCIke2ZvbnRGYW1pbHlOYW1lfVwiXSB7IGZvbnQtdmFyaWF0aW9uLXNldHRpbmdzOiAke3NldHRpbmdzQXJyYXkuam9pbignLCAnKX07IH1gO1xuICAgICAgICAvLyDQkNC70YzRgtC10YDQvdCw0YLQuNCy0LA6IENTUyDQv9C10YDQtdC80LXQvdC90YvQtSAo0YLRgNC10LHRg9C10YIg0LjQt9C80LXQvdC10L3QuNC5INCyINC60L7QvNC/0L7QvdC10L3RgtC1KVxuICAgICAgICAvLyB2YXJpYXRpb25TZXR0aW5nc1J1bGUgPSBgOnJvb3QgeyAke3NldHRpbmdzQXJyYXkubWFwKChbdGFnLCB2YWx1ZV0pID0+IGAtLSR7Zm9udElkfS0ke3RhZ306ICR7dmFsdWV9O2ApLmpvaW4oJ1xcbicpfSB9YDtcbiAgICB9XG5cbiAgICAvLyDQntCx0L3QvtCy0LvRj9C10LwgQ1NTINGH0LXRgNC10Lcg0LHRg9GE0LXRgFxuICAgIGlmICh2YXJpYXRpb25TZXR0aW5nc1J1bGUpIHtcbiAgICAgICAgdXBkYXRlQnVmZmVyZWRGb250Q3NzKGZvbnRJZCArICctc2V0dGluZ3MnLCB2YXJpYXRpb25TZXR0aW5nc1J1bGUpOyAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCDRg9C90LjQutCw0LvRjNC90YvQuSBJRCDQtNC70Y8g0YHRgtC40LvQtdC5INC90LDRgdGC0YDQvtC10LpcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyDQldGB0LvQuCDQvdCw0YHRgtGA0L7QtdC6INC90LXRgiwg0LLQvtC30LzQvtC20L3Qviwg0L3Rg9C20L3QviDRg9C00LDQu9C40YLRjCDQv9GA0LXQtNGL0LTRg9GJ0LXQtSDQv9GA0LDQstC40LvQvj9cbiAgICAgICAgLy8gdXBkYXRlQnVmZmVyZWRGb250Q3NzKGZvbnRJZCArICctc2V0dGluZ3MnLCAnJyk7IC8vINCe0YfQuNGB0YLQuNGC0Ywg0YHRgtC40LvRjFxuICAgIH1cblxuICAgIHJldHVybiBmb250T2JqO1xufTtcblxuLy8g0JTQtdCx0LDRg9C90YHQuNGA0L7QstCw0L3QvdCw0Y8g0LLQtdGA0YHQuNGPIHVwZGF0ZVZhcmlhYmxlRm9udFNldHRpbmdzICjQvtGB0YLQsNC10YLRgdGPKVxuZXhwb3J0IGNvbnN0IGRlYm91bmNlZFVwZGF0ZVZhcmlhYmxlRm9udFNldHRpbmdzID0gZGVib3VuY2UodXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3MsIDUwKTtcblxuLyoqXG4gKiDQodGH0LXRgtGH0LjQuiDQtNC70Y8g0L7RgtGB0LvQtdC20LjQstCw0L3QuNGPINC60L7Qu9C40YfQtdGB0YLQstCwINC30LDQs9GA0YPQt9C+0Log0YjRgNC40YTRgtC+0LIg0LTQu9GPINC+0YLQu9Cw0LTQutC4XG4gKi9cbmxldCBmb250TG9hZENvdW50ZXIgPSAwO1xuXG4iXSwibmFtZXMiOlsidG9hc3QiLCJnZXRGb3JtYXRGcm9tRXh0ZW5zaW9uIiwiaGFzU2lnbmlmaWNhbnRDaGFuZ2VzIiwicHJldlNldHRpbmdzIiwiY3VycmVudFNldHRpbmdzIiwidGhyZXNob2xkIiwicHJldktleXMiLCJPYmplY3QiLCJrZXlzIiwiY3VycmVudEtleXMiLCJsZW5ndGgiLCJrZXkiLCJNYXRoIiwiYWJzIiwicGFyc2VGbG9hdCIsImZvbnRDc3NCdWZmZXIiLCJtYWluIiwiTWFwIiwic2hhZG93Iiwic3dpdGNoaW5nIiwiYW5pbWF0aW9uRnJhbWVJZCIsInVwZGF0ZUJ1ZmZlcmVkRm9udENzcyIsImZvbnRJZCIsImNzc1J1bGUiLCJzZXQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJmb3JFYWNoIiwicnVsZSIsImlkIiwic3R5bGVFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImhlYWQiLCJhcHBlbmRDaGlsZCIsInRleHRDb250ZW50IiwiZXJyb3IiLCJjb25zb2xlIiwiY2xlYXIiLCJmb250RmFjZUNhY2hlIiwibG9hZEZvbnRGYWNlSWZOZWVkZWQiLCJmb250RmFtaWx5IiwidXJsIiwic2V0dGluZ3MiLCJjYWNoZUtleSIsImhhcyIsImNhY2hlZFByb21pc2UiLCJnZXQiLCJmb250RmFjZSIsImZvbnRzIiwiYWRkIiwid2FybiIsImRlbGV0ZSIsImxvYWRQcm9taXNlIiwib3B0aW9ucyIsImxvZyIsIkZvbnRGYWNlIiwibG9hZCIsImFkZEZvbnRGYWNlIiwiZm9udE9iaiIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZm9udEZhbWlseU5hbWUiLCJpc1ZhcmlhYmxlRm9udCIsInZhcmlhYmxlQXhlcyIsImVudHJpZXMiLCJ0YWciLCJheGlzRGF0YSIsInZhbHVlIiwiY3VycmVudFZhbHVlIiwiZGVmYXVsdCIsInVuZGVmaW5lZCIsInZhcmlhdGlvblNldHRpbmdzUnVsZSIsInNldHRpbmdzVG9BcHBseSIsInNldHRpbmdzQXJyYXkiLCJtYXAiLCJqb2luIiwiZGVib3VuY2UiLCJmdW5jIiwid2FpdCIsInRpbWVvdXQiLCJhcmdzIiwiY29udGV4dCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJhcHBseSIsImRlYm91bmNlZEFkZEZvbnRGYWNlIiwidXBkYXRlVmFyaWFibGVGb250U2V0dGluZ3MiLCJkZWJvdW5jZWRVcGRhdGVWYXJpYWJsZUZvbnRTZXR0aW5ncyIsImZvbnRMb2FkQ291bnRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/cssGenerator.js\n");

/***/ }),

/***/ "./utils/db.js":
/*!*********************!*\
  !*** ./utils/db.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteAllFontsDB: () => (/* binding */ deleteAllFontsDB),\n/* harmony export */   deleteFontDB: () => (/* binding */ deleteFontDB),\n/* harmony export */   getAllFonts: () => (/* binding */ getAllFonts),\n/* harmony export */   saveFont: () => (/* binding */ saveFont),\n/* harmony export */   updateFontSettings: () => (/* binding */ updateFontSettings)\n/* harmony export */ });\n// utils/db.js\nconst DB_NAME = \"FontGauntletDB\";\nconst DB_VERSION = 1;\nconst STORE_NAME = \"fonts\";\nlet dbPromise = null;\n/**\n * Открывает (или создает/обновляет) базу данных IndexedDB.\n * @returns {Promise<IDBDatabase>} Промис с объектом базы данных.\n */ function openDB() {\n    if (dbPromise) {\n        return dbPromise;\n    }\n    dbPromise = new Promise((resolve, reject)=>{\n        const request = indexedDB.open(DB_NAME, DB_VERSION);\n        request.onerror = (event)=>{\n            console.error(\"Ошибка открытия IndexedDB:\", event.target.error);\n            reject(\"Ошибка открытия IndexedDB\");\n        };\n        request.onsuccess = (event)=>{\n            console.log(\"IndexedDB успешно открыта\");\n            resolve(event.target.result);\n        };\n        // Вызывается при создании БД или обновлении версии\n        request.onupgradeneeded = (event)=>{\n            console.log(\"Обновление схемы IndexedDB...\");\n            const db = event.target.result;\n            if (!db.objectStoreNames.contains(STORE_NAME)) {\n                console.log(`Создание хранилища объектов: ${STORE_NAME}`);\n                // Создаем хранилище объектов для шрифтов\n                // 'id' будет ключом\n                db.createObjectStore(STORE_NAME, {\n                    keyPath: \"id\"\n                });\n            // Можно добавить индексы при необходимости, например:\n            // store.createIndex('name', 'name', { unique: false });\n            }\n        };\n    });\n    return dbPromise;\n}\n/**\n * Сохраняет объект шрифта в IndexedDB.\n * @param {Object} fontObj - Объект шрифта для сохранения (должен содержать Blob в поле file).\n * @returns {Promise<void>}\n */ async function saveFont(fontObj) {\n    if (!fontObj || !fontObj.id || !fontObj.file) {\n        console.warn(\"Попытка сохранить некорректный fontObj в IndexedDB\", fontObj);\n        return;\n    }\n    try {\n        const db = await openDB();\n        const transaction = db.transaction(STORE_NAME, \"readwrite\");\n        const store = transaction.objectStore(STORE_NAME);\n        // Используем put для вставки или обновления\n        const request = store.put(fontObj);\n        return new Promise((resolve, reject)=>{\n            request.onsuccess = ()=>{\n                // console.log(`Шрифт ${fontObj.name} (${fontObj.id}) сохранен в IndexedDB`);\n                resolve();\n            };\n            request.onerror = (event)=>{\n                console.error(\"Ошибка сохранения шрифта в IndexedDB:\", event.target.error);\n                reject(\"Ошибка сохранения шрифта\");\n            };\n        });\n    } catch (error) {\n        console.error(\"Не удалось выполнить транзакцию сохранения в IndexedDB:\", error);\n    }\n}\n/**\n * Получает все объекты шрифтов из IndexedDB.\n * @returns {Promise<Array<Object>>} Промис с массивом объектов шрифтов.\n */ async function getAllFonts() {\n    try {\n        const db = await openDB();\n        const transaction = db.transaction(STORE_NAME, \"readonly\");\n        const store = transaction.objectStore(STORE_NAME);\n        const request = store.getAll();\n        return new Promise((resolve, reject)=>{\n            request.onsuccess = (event)=>{\n                resolve(event.target.result || []);\n            };\n            request.onerror = (event)=>{\n                console.error(\"Ошибка получения всех шрифтов из IndexedDB:\", event.target.error);\n                reject(\"Ошибка получения шрифтов\");\n            };\n        });\n    } catch (error) {\n        console.error(\"Не удалось выполнить транзакцию чтения из IndexedDB:\", error);\n        return []; // Возвращаем пустой массив при ошибке\n    }\n}\n/**\n * Удаляет объект шрифта из IndexedDB по ID.\n * @param {string} fontId - ID шрифта для удаления.\n * @returns {Promise<void>}\n */ async function deleteFontDB(fontId) {\n    if (!fontId) return;\n    try {\n        const db = await openDB();\n        const transaction = db.transaction(STORE_NAME, \"readwrite\");\n        const store = transaction.objectStore(STORE_NAME);\n        const request = store.delete(fontId);\n        return new Promise((resolve, reject)=>{\n            request.onsuccess = ()=>{\n                // console.log(`Шрифт ${fontId} удален из IndexedDB`);\n                resolve();\n            };\n            request.onerror = (event)=>{\n                console.error(\"Ошибка удаления шрифта из IndexedDB:\", event.target.error);\n                reject(\"Ошибка удаления шрифта\");\n            };\n        });\n    } catch (error) {\n        console.error(\"Не удалось выполнить транзакцию удаления из IndexedDB:\", error);\n    }\n}\n/**\n * Удаляет ВСЕ объекты шрифтов из хранилища IndexedDB.\n * @returns {Promise<void>}\n */ async function deleteAllFontsDB() {\n    try {\n        const db = await openDB();\n        const transaction = db.transaction(STORE_NAME, \"readwrite\");\n        const store = transaction.objectStore(STORE_NAME);\n        // Используем clear() для удаления всех записей\n        const request = store.clear();\n        return new Promise((resolve, reject)=>{\n            request.onsuccess = ()=>{\n                console.log(`Все шрифты удалены из IndexedDB (хранилище ${STORE_NAME})`);\n                resolve();\n            };\n            request.onerror = (event)=>{\n                console.error(\"Ошибка очистки хранилища шрифтов в IndexedDB:\", event.target.error);\n                reject(\"Ошибка очистки хранилища шрифтов\");\n            };\n        });\n    } catch (error) {\n        console.error(\"Не удалось выполнить транзакцию очистки хранилища IndexedDB:\", error);\n    // Не пробрасываем ошибку дальше, просто логируем\n    }\n}\n/**\n * Обновляет настройки шрифта в IndexedDB (lastUsedPresetName, lastUsedVariableSettings, currentWeight, currentStyle).\n * @param {string} fontId - ID шрифта для обновления.\n * @param {Object} updates - Объект с обновлениями для шрифта.\n * @returns {Promise<void>}\n */ async function updateFontSettings(fontId, updates) {\n    if (!fontId || !updates) {\n        console.warn(\"updateFontSettings: некорректные параметры\", {\n            fontId,\n            updates\n        });\n        return;\n    }\n    try {\n        const db = await openDB();\n        const transaction = db.transaction(STORE_NAME, \"readwrite\");\n        const store = transaction.objectStore(STORE_NAME);\n        // Сначала получаем существующий объект\n        const getRequest = store.get(fontId);\n        return new Promise((resolve, reject)=>{\n            getRequest.onsuccess = ()=>{\n                const existingFont = getRequest.result;\n                if (!existingFont) {\n                    console.warn(`updateFontSettings: шрифт ${fontId} не найден в IndexedDB`);\n                    resolve();\n                    return;\n                }\n                // Обновляем только нужные поля\n                const updatedFont = {\n                    ...existingFont,\n                    ...updates,\n                    // Обновляем timestamp для отслеживания изменений\n                    lastUpdated: Date.now()\n                };\n                // Сохраняем обновленный объект\n                const putRequest = store.put(updatedFont);\n                putRequest.onsuccess = ()=>{\n                    console.log(`Настройки шрифта ${fontId} обновлены в IndexedDB:`, updates);\n                    resolve();\n                };\n                putRequest.onerror = (event)=>{\n                    console.error(\"Ошибка обновления настроек шрифта в IndexedDB:\", event.target.error);\n                    reject(\"Ошибка обновления настроек шрифта\");\n                };\n            };\n            getRequest.onerror = (event)=>{\n                console.error(\"Ошибка получения шрифта для обновления из IndexedDB:\", event.target.error);\n                reject(\"Ошибка получения шрифта для обновления\");\n            };\n        });\n    } catch (error) {\n        console.error(\"Не удалось выполнить транзакцию обновления в IndexedDB:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxLQUFLLENBQUMsa0RBQWtERixNQUFNRyxNQUFNLENBQUNELEtBQUs7b0JBQ2xGUCxPQUFPO2dCQUNUO1lBQ0Y7WUFFQW9DLFdBQVdoQyxPQUFPLEdBQUcsQ0FBQ0M7Z0JBQ3BCQyxRQUFRQyxLQUFLLENBQUMsd0RBQXdERixNQUFNRyxNQUFNLENBQUNELEtBQUs7Z0JBQ3hGUCxPQUFPO1lBQ1Q7UUFDRjtJQUNGLEVBQUUsT0FBT08sT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsMkRBQTJEQTtJQUMzRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9udC1nYXVudGxldC1jbG9uZS8uL3V0aWxzL2RiLmpzPzdjYjIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdXRpbHMvZGIuanNcblxuY29uc3QgREJfTkFNRSA9ICdGb250R2F1bnRsZXREQic7XG5jb25zdCBEQl9WRVJTSU9OID0gMTtcbmNvbnN0IFNUT1JFX05BTUUgPSAnZm9udHMnO1xuXG5sZXQgZGJQcm9taXNlID0gbnVsbDtcblxuLyoqXG4gKiDQntGC0LrRgNGL0LLQsNC10YIgKNC40LvQuCDRgdC+0LfQtNCw0LXRgi/QvtCx0L3QvtCy0LvRj9C10YIpINCx0LDQt9GDINC00LDQvdC90YvRhSBJbmRleGVkREIuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxJREJEYXRhYmFzZT59INCf0YDQvtC80LjRgSDRgSDQvtCx0YrQtdC60YLQvtC8INCx0LDQt9GLINC00LDQvdC90YvRhS5cbiAqL1xuZnVuY3Rpb24gb3BlbkRCKCkge1xuICBpZiAoZGJQcm9taXNlKSB7XG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcbiAgfVxuICBkYlByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKERCX05BTUUsIERCX1ZFUlNJT04pO1xuXG4gICAgcmVxdWVzdC5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi0J7RiNC40LHQutCwINC+0YLQutGA0YvRgtC40Y8gSW5kZXhlZERCOlwiLCBldmVudC50YXJnZXQuZXJyb3IpO1xuICAgICAgcmVqZWN0KFwi0J7RiNC40LHQutCwINC+0YLQutGA0YvRgtC40Y8gSW5kZXhlZERCXCIpO1xuICAgIH07XG5cbiAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IChldmVudCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJJbmRleGVkREIg0YPRgdC/0LXRiNC90L4g0L7RgtC60YDRi9GC0LBcIik7XG4gICAgICByZXNvbHZlKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xuICAgIH07XG5cbiAgICAvLyDQktGL0LfRi9Cy0LDQtdGC0YHRjyDQv9GA0Lgg0YHQvtC30LTQsNC90LjQuCDQkdCUINC40LvQuCDQvtCx0L3QvtCy0LvQtdC90LjQuCDQstC10YDRgdC40LhcbiAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IChldmVudCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCLQntCx0L3QvtCy0LvQtdC90LjQtSDRgdGF0LXQvNGLIEluZGV4ZWREQi4uLlwiKTtcbiAgICAgIGNvbnN0IGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcbiAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhTVE9SRV9OQU1FKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhg0KHQvtC30LTQsNC90LjQtSDRhdGA0LDQvdC40LvQuNGJ0LAg0L7QsdGK0LXQutGC0L7QsjogJHtTVE9SRV9OQU1FfWApO1xuICAgICAgICAvLyDQodC+0LfQtNCw0LXQvCDRhdGA0LDQvdC40LvQuNGJ0LUg0L7QsdGK0LXQutGC0L7QsiDQtNC70Y8g0YjRgNC40YTRgtC+0LJcbiAgICAgICAgLy8gJ2lkJyDQsdGD0LTQtdGCINC60LvRjtGH0L7QvFxuICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShTVE9SRV9OQU1FLCB7IGtleVBhdGg6ICdpZCcgfSk7XG4gICAgICAgIC8vINCc0L7QttC90L4g0LTQvtCx0LDQstC40YLRjCDQuNC90LTQtdC60YHRiyDQv9GA0Lgg0L3QtdC+0LHRhdC+0LTQuNC80L7RgdGC0LgsINC90LDQv9GA0LjQvNC10YA6XG4gICAgICAgIC8vIHN0b3JlLmNyZWF0ZUluZGV4KCduYW1lJywgJ25hbWUnLCB7IHVuaXF1ZTogZmFsc2UgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiBkYlByb21pc2U7XG59XG5cbi8qKlxuICog0KHQvtGF0YDQsNC90Y/QtdGCINC+0LHRitC10LrRgiDRiNGA0LjRhNGC0LAg0LIgSW5kZXhlZERCLlxuICogQHBhcmFtIHtPYmplY3R9IGZvbnRPYmogLSDQntCx0YrQtdC60YIg0YjRgNC40YTRgtCwINC00LvRjyDRgdC+0YXRgNCw0L3QtdC90LjRjyAo0LTQvtC70LbQtdC9INGB0L7QtNC10YDQttCw0YLRjCBCbG9iINCyINC/0L7Qu9C1IGZpbGUpLlxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlRm9udChmb250T2JqKSB7XG4gIGlmICghZm9udE9iaiB8fCAhZm9udE9iai5pZCB8fCAhZm9udE9iai5maWxlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCLQn9C+0L/Ri9GC0LrQsCDRgdC+0YXRgNCw0L3QuNGC0Ywg0L3QtdC60L7RgNGA0LXQutGC0L3Ri9C5IGZvbnRPYmog0LIgSW5kZXhlZERCXCIsIGZvbnRPYmopO1xuICAgICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBvcGVuREIoKTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcbiAgICBjb25zdCBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xuICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IHB1dCDQtNC70Y8g0LLRgdGC0LDQstC60Lgg0LjQu9C4INC+0LHQvdC+0LLQu9C10L3QuNGPXG4gICAgY29uc3QgcmVxdWVzdCA9IHN0b3JlLnB1dChmb250T2JqKTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYNCo0YDQuNGE0YIgJHtmb250T2JqLm5hbWV9ICgke2ZvbnRPYmouaWR9KSDRgdC+0YXRgNCw0L3QtdC9INCyIEluZGV4ZWREQmApO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLQntGI0LjQsdC60LAg0YHQvtGF0YDQsNC90LXQvdC40Y8g0YjRgNC40YTRgtCwINCyIEluZGV4ZWREQjpcIiwgZXZlbnQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgcmVqZWN0KFwi0J7RiNC40LHQutCwINGB0L7RhdGA0LDQvdC10L3QuNGPINGI0YDQuNGE0YLQsFwiKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi0J3QtSDRg9C00LDQu9C+0YHRjCDQstGL0L/QvtC70L3QuNGC0Ywg0YLRgNCw0L3Qt9Cw0LrRhtC40Y4g0YHQvtGF0YDQsNC90LXQvdC40Y8g0LIgSW5kZXhlZERCOlwiLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiDQn9C+0LvRg9GH0LDQtdGCINCy0YHQtSDQvtCx0YrQtdC60YLRiyDRiNGA0LjRhNGC0L7QsiDQuNC3IEluZGV4ZWREQi5cbiAqIEByZXR1cm5zIHtQcm9taXNlPEFycmF5PE9iamVjdD4+fSDQn9GA0L7QvNC40YEg0YEg0LzQsNGB0YHQuNCy0L7QvCDQvtCx0YrQtdC60YLQvtCyINGI0YDQuNGE0YLQvtCyLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsRm9udHMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBvcGVuREIoKTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkb25seScpO1xuICAgIGNvbnN0IHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XG4gICAgY29uc3QgcmVxdWVzdCA9IHN0b3JlLmdldEFsbCgpO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHJlc29sdmUoZXZlbnQudGFyZ2V0LnJlc3VsdCB8fCBbXSk7XG4gICAgICB9O1xuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLQntGI0LjQsdC60LAg0L/QvtC70YPRh9C10L3QuNGPINCy0YHQtdGFINGI0YDQuNGE0YLQvtCyINC40LcgSW5kZXhlZERCOlwiLCBldmVudC50YXJnZXQuZXJyb3IpO1xuICAgICAgICByZWplY3QoXCLQntGI0LjQsdC60LAg0L/QvtC70YPRh9C10L3QuNGPINGI0YDQuNGE0YLQvtCyXCIpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLQndC1INGD0LTQsNC70L7RgdGMINCy0YvQv9C+0LvQvdC40YLRjCDRgtGA0LDQvdC30LDQutGG0LjRjiDRh9GC0LXQvdC40Y8g0LjQtyBJbmRleGVkREI6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTsgLy8g0JLQvtC30LLRgNCw0YnQsNC10Lwg0L/Rg9GB0YLQvtC5INC80LDRgdGB0LjQsiDQv9GA0Lgg0L7RiNC40LHQutC1XG4gIH1cbn1cblxuLyoqXG4gKiDQo9C00LDQu9GP0LXRgiDQvtCx0YrQtdC60YIg0YjRgNC40YTRgtCwINC40LcgSW5kZXhlZERCINC/0L4gSUQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udElkIC0gSUQg0YjRgNC40YTRgtCwINC00LvRjyDRg9C00LDQu9C10L3QuNGPLlxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVGb250REIoZm9udElkKSB7XG4gIGlmICghZm9udElkKSByZXR1cm47XG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBvcGVuREIoKTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcbiAgICBjb25zdCBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xuICAgIGNvbnN0IHJlcXVlc3QgPSBzdG9yZS5kZWxldGUoZm9udElkKTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYNCo0YDQuNGE0YIgJHtmb250SWR9INGD0LTQsNC70LXQvSDQuNC3IEluZGV4ZWREQmApO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLQntGI0LjQsdC60LAg0YPQtNCw0LvQtdC90LjRjyDRiNGA0LjRhNGC0LAg0LjQtyBJbmRleGVkREI6XCIsIGV2ZW50LnRhcmdldC5lcnJvcik7XG4gICAgICAgIHJlamVjdChcItCe0YjQuNCx0LrQsCDRg9C00LDQu9C10L3QuNGPINGI0YDQuNGE0YLQsFwiKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgY29uc29sZS5lcnJvcihcItCd0LUg0YPQtNCw0LvQvtGB0Ywg0LLRi9C/0L7Qu9C90LjRgtGMINGC0YDQsNC90LfQsNC60YbQuNGOINGD0LTQsNC70LXQvdC40Y8g0LjQtyBJbmRleGVkREI6XCIsIGVycm9yKTtcbiAgfVxufVxuXG4vKipcbiAqINCj0LTQsNC70Y/QtdGCINCS0KHQlSDQvtCx0YrQtdC60YLRiyDRiNGA0LjRhNGC0L7QsiDQuNC3INGF0YDQsNC90LjQu9C40YnQsCBJbmRleGVkREIuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFsbEZvbnRzREIoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBvcGVuREIoKTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcbiAgICBjb25zdCBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xuICAgIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IGNsZWFyKCkg0LTQu9GPINGD0LTQsNC70LXQvdC40Y8g0LLRgdC10YUg0LfQsNC/0LjRgdC10LlcbiAgICBjb25zdCByZXF1ZXN0ID0gc3RvcmUuY2xlYXIoKTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYNCS0YHQtSDRiNGA0LjRhNGC0Ysg0YPQtNCw0LvQtdC90Ysg0LjQtyBJbmRleGVkREIgKNGF0YDQsNC90LjQu9C40YnQtSAke1NUT1JFX05BTUV9KWApO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9O1xuICAgICAgcmVxdWVzdC5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLQntGI0LjQsdC60LAg0L7Rh9C40YHRgtC60Lgg0YXRgNCw0L3QuNC70LjRidCwINGI0YDQuNGE0YLQvtCyINCyIEluZGV4ZWREQjpcIiwgZXZlbnQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgcmVqZWN0KFwi0J7RiNC40LHQutCwINC+0YfQuNGB0YLQutC4INGF0YDQsNC90LjQu9C40YnQsCDRiNGA0LjRhNGC0L7QslwiKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcItCd0LUg0YPQtNCw0LvQvtGB0Ywg0LLRi9C/0L7Qu9C90LjRgtGMINGC0YDQsNC90LfQsNC60YbQuNGOINC+0YfQuNGB0YLQutC4INGF0YDQsNC90LjQu9C40YnQsCBJbmRleGVkREI6XCIsIGVycm9yKTtcbiAgICAvLyDQndC1INC/0YDQvtCx0YDQsNGB0YvQstCw0LXQvCDQvtGI0LjQsdC60YMg0LTQsNC70YzRiNC1LCDQv9GA0L7RgdGC0L4g0LvQvtCz0LjRgNGD0LXQvFxuICB9XG59XG5cbi8qKlxuICog0J7QsdC90L7QstC70Y/QtdGCINC90LDRgdGC0YDQvtC50LrQuCDRiNGA0LjRhNGC0LAg0LIgSW5kZXhlZERCIChsYXN0VXNlZFByZXNldE5hbWUsIGxhc3RVc2VkVmFyaWFibGVTZXR0aW5ncywgY3VycmVudFdlaWdodCwgY3VycmVudFN0eWxlKS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250SWQgLSBJRCDRiNGA0LjRhNGC0LAg0LTQu9GPINC+0LHQvdC+0LLQu9C10L3QuNGPLlxuICogQHBhcmFtIHtPYmplY3R9IHVwZGF0ZXMgLSDQntCx0YrQtdC60YIg0YEg0L7QsdC90L7QstC70LXQvdC40Y/QvNC4INC00LvRjyDRiNGA0LjRhNGC0LAuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUZvbnRTZXR0aW5ncyhmb250SWQsIHVwZGF0ZXMpIHtcbiAgaWYgKCFmb250SWQgfHwgIXVwZGF0ZXMpIHtcbiAgICBjb25zb2xlLndhcm4oXCJ1cGRhdGVGb250U2V0dGluZ3M6INC90LXQutC+0YDRgNC10LrRgtC90YvQtSDQv9Cw0YDQsNC80LXRgtGA0YtcIiwgeyBmb250SWQsIHVwZGF0ZXMgfSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRCKCk7XG4gICAgY29uc3QgdHJhbnNhY3Rpb24gPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XG4gICAgY29uc3Qgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcbiAgICBcbiAgICAvLyDQodC90LDRh9Cw0LvQsCDQv9C+0LvRg9GH0LDQtdC8INGB0YPRidC10YHRgtCy0YPRjtGJ0LjQuSDQvtCx0YrQtdC60YJcbiAgICBjb25zdCBnZXRSZXF1ZXN0ID0gc3RvcmUuZ2V0KGZvbnRJZCk7XG4gICAgXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGdldFJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBleGlzdGluZ0ZvbnQgPSBnZXRSZXF1ZXN0LnJlc3VsdDtcbiAgICAgICAgaWYgKCFleGlzdGluZ0ZvbnQpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYHVwZGF0ZUZvbnRTZXR0aW5nczog0YjRgNC40YTRgiAke2ZvbnRJZH0g0L3QtSDQvdCw0LnQtNC10L0g0LIgSW5kZXhlZERCYCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8INGC0L7Qu9GM0LrQviDQvdGD0LbQvdGL0LUg0L/QvtC70Y9cbiAgICAgICAgY29uc3QgdXBkYXRlZEZvbnQgPSB7XG4gICAgICAgICAgLi4uZXhpc3RpbmdGb250LFxuICAgICAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICAgICAgLy8g0J7QsdC90L7QstC70Y/QtdC8IHRpbWVzdGFtcCDQtNC70Y8g0L7RgtGB0LvQtdC20LjQstCw0L3QuNGPINC40LfQvNC10L3QtdC90LjQuVxuICAgICAgICAgIGxhc3RVcGRhdGVkOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0L7QsdC90L7QstC70LXQvdC90YvQuSDQvtCx0YrQtdC60YJcbiAgICAgICAgY29uc3QgcHV0UmVxdWVzdCA9IHN0b3JlLnB1dCh1cGRhdGVkRm9udCk7XG4gICAgICAgIFxuICAgICAgICBwdXRSZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg0J3QsNGB0YLRgNC+0LnQutC4INGI0YDQuNGE0YLQsCAke2ZvbnRJZH0g0L7QsdC90L7QstC70LXQvdGLINCyIEluZGV4ZWREQjpgLCB1cGRhdGVzKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBwdXRSZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwi0J7RiNC40LHQutCwINC+0LHQvdC+0LLQu9C10L3QuNGPINC90LDRgdGC0YDQvtC10Log0YjRgNC40YTRgtCwINCyIEluZGV4ZWREQjpcIiwgZXZlbnQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICByZWplY3QoXCLQntGI0LjQsdC60LAg0L7QsdC90L7QstC70LXQvdC40Y8g0L3QsNGB0YLRgNC+0LXQuiDRiNGA0LjRhNGC0LBcIik7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgXG4gICAgICBnZXRSZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcItCe0YjQuNCx0LrQsCDQv9C+0LvRg9GH0LXQvdC40Y8g0YjRgNC40YTRgtCwINC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyDQuNC3IEluZGV4ZWREQjpcIiwgZXZlbnQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgcmVqZWN0KFwi0J7RiNC40LHQutCwINC/0L7Qu9GD0YfQtdC90LjRjyDRiNGA0LjRhNGC0LAg0LTQu9GPINC+0LHQvdC+0LLQu9C10L3QuNGPXCIpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi0J3QtSDRg9C00LDQu9C+0YHRjCDQstGL0L/QvtC70L3QuNGC0Ywg0YLRgNCw0L3Qt9Cw0LrRhtC40Y4g0L7QsdC90L7QstC70LXQvdC40Y8g0LIgSW5kZXhlZERCOlwiLCBlcnJvcik7XG4gIH1cbn0gIl0sIm5hbWVzIjpbIkRCX05BTUUiLCJEQl9WRVJTSU9OIiwiU1RPUkVfTkFNRSIsImRiUHJvbWlzZSIsIm9wZW5EQiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVxdWVzdCIsImluZGV4ZWREQiIsIm9wZW4iLCJvbmVycm9yIiwiZXZlbnQiLCJjb25zb2xlIiwiZXJyb3IiLCJ0YXJnZXQiLCJvbnN1Y2Nlc3MiLCJsb2ciLCJyZXN1bHQiLCJvbnVwZ3JhZGVuZWVkZWQiLCJkYiIsIm9iamVjdFN0b3JlTmFtZXMiLCJjb250YWlucyIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsInNhdmVGb250IiwiZm9udE9iaiIsImlkIiwiZmlsZSIsIndhcm4iLCJ0cmFuc2FjdGlvbiIsInN0b3JlIiwib2JqZWN0U3RvcmUiLCJwdXQiLCJnZXRBbGxGb250cyIsImdldEFsbCIsImRlbGV0ZUZvbnREQiIsImZvbnRJZCIsImRlbGV0ZSIsImRlbGV0ZUFsbEZvbnRzREIiLCJjbGVhciIsInVwZGF0ZUZvbnRTZXR0aW5ncyIsInVwZGF0ZXMiLCJnZXRSZXF1ZXN0IiwiZ2V0IiwiZXhpc3RpbmdGb250IiwidXBkYXRlZEZvbnQiLCJsYXN0VXBkYXRlZCIsIkRhdGUiLCJub3ciLCJwdXRSZXF1ZXN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utils/db.js\n");

/***/ }),

/***/ "./utils/fontManagerUtils.js":
/*!***********************************!*\
  !*** ./utils/fontManagerUtils.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   base64ToArrayBuffer: () => (/* binding */ base64ToArrayBuffer)\n/* harmony export */ });\n/**\n * Вспомогательная функция для декодирования Base64 в ArrayBuffer.\n * @param {string} base64 - Строка в формате Base64.\n * @returns {ArrayBuffer} - Декодированный ArrayBuffer.\n * @throws {Error} Если декодирование не удалось.\n */ function base64ToArrayBuffer(base64) {\n    try {\n        const binaryString = window.atob(base64);\n        const len = binaryString.length;\n        const bytes = new Uint8Array(len);\n        for(let i = 0; i < len; i++){\n            bytes[i] = binaryString.charCodeAt(i);\n        }\n        return bytes.buffer;\n    } catch (e) {\n        console.error(\"Ошибка декодирования base64:\", e);\n        throw new Error(\"Не удалось декодировать данные шрифта.\");\n    }\n} // Другие общие утилиты для useFontManager можно будет добавить сюда позже \n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlscy9mb250TWFuYWdlclV0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7Q0FLQyxHQUNNLFNBQVNBLG9CQUFvQkMsTUFBTTtJQUN4QyxJQUFJO1FBQ0YsTUFBTUMsZUFBZUMsT0FBT0MsSUFBSSxDQUFDSDtRQUNqQyxNQUFNSSxNQUFNSCxhQUFhSSxNQUFNO1FBQy9CLE1BQU1DLFFBQVEsSUFBSUMsV0FBV0g7UUFDN0IsSUFBSyxJQUFJSSxJQUFJLEdBQUdBLElBQUlKLEtBQUtJLElBQUs7WUFDNUJGLEtBQUssQ0FBQ0UsRUFBRSxHQUFHUCxhQUFhUSxVQUFVLENBQUNEO1FBQ3JDO1FBQ0EsT0FBT0YsTUFBTUksTUFBTTtJQUNyQixFQUFFLE9BQU9DLEdBQUc7UUFDVkMsUUFBUUMsS0FBSyxDQUFDLGdDQUFnQ0Y7UUFDOUMsTUFBTSxJQUFJRyxNQUFNO0lBQ2xCO0FBQ0YsRUFFQSwyRUFBMkUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb250LWdhdW50bGV0LWNsb25lLy4vdXRpbHMvZm9udE1hbmFnZXJVdGlscy5qcz9lYzIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog0JLRgdC/0L7QvNC+0LPQsNGC0LXQu9GM0L3QsNGPINGE0YPQvdC60YbQuNGPINC00LvRjyDQtNC10LrQvtC00LjRgNC+0LLQsNC90LjRjyBCYXNlNjQg0LIgQXJyYXlCdWZmZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZTY0IC0g0KHRgtGA0L7QutCwINCyINGE0L7RgNC80LDRgtC1IEJhc2U2NC5cbiAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gLSDQlNC10LrQvtC00LjRgNC+0LLQsNC90L3Ri9C5IEFycmF5QnVmZmVyLlxuICogQHRocm93cyB7RXJyb3J9INCV0YHQu9C4INC00LXQutC+0LTQuNGA0L7QstCw0L3QuNC1INC90LUg0YPQtNCw0LvQvtGB0YwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IHdpbmRvdy5hdG9iKGJhc2U2NCk7XG4gICAgY29uc3QgbGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLQntGI0LjQsdC60LAg0LTQtdC60L7QtNC40YDQvtCy0LDQvdC40Y8gYmFzZTY0OlwiLCBlKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCLQndC1INGD0LTQsNC70L7RgdGMINC00LXQutC+0LTQuNGA0L7QstCw0YLRjCDQtNCw0L3QvdGL0LUg0YjRgNC40YTRgtCwLlwiKTtcbiAgfVxufVxuXG4vLyDQlNGA0YPQs9C40LUg0L7QsdGJ0LjQtSDRg9GC0LjQu9C40YLRiyDQtNC70Y8gdXNlRm9udE1hbmFnZXIg0LzQvtC20L3QviDQsdGD0LTQtdGCINC00L7QsdCw0LLQuNGC0Ywg0YHRjtC00LAg0L/QvtC30LbQtSAiXSwibmFtZXMiOlsiYmFzZTY0VG9BcnJheUJ1ZmZlciIsImJhc2U2NCIsImJpbmFyeVN0cmluZyIsIndpbmRvdyIsImF0b2IiLCJsZW4iLCJsZW5ndGgiLCJieXRlcyIsIlVpbnQ4QXJyYXkiLCJpIiwiY2hhckNvZGVBdCIsImJ1ZmZlciIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/fontManagerUtils.js\n");

/***/ }),

/***/ "./utils/fontParser.js":
/*!*****************************!*\
  !*** ./utils/fontParser.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _parseFontBufferDirect: () => (/* binding */ _parseFontBufferDirect),\n/* harmony export */   _parseFontFileDirect: () => (/* binding */ _parseFontFileDirect),\n/* harmony export */   getGlyphDataForFont: () => (/* binding */ getGlyphDataForFont),\n/* harmony export */   isVariableFont: () => (/* binding */ isVariableFont),\n/* harmony export */   parseFontBuffer: () => (/* binding */ parseFontBuffer)\n/* harmony export */ });\n/* harmony import */ var opentype_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! opentype.js */ \"opentype.js\");\n/* harmony import */ var opentype_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(opentype_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var _glyphUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./glyphUtils */ \"./utils/glyphUtils.js\");\n/* harmony import */ var woff2_encoder_decompress__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! woff2-encoder/decompress */ \"woff2-encoder/decompress\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_1__, woff2_encoder_decompress__WEBPACK_IMPORTED_MODULE_3__]);\n([react_toastify__WEBPACK_IMPORTED_MODULE_1__, woff2_encoder_decompress__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// Функции для парсинга файлов шрифтов с использованием opentype.js\n // Оставляем стандартный импорт\n // toast используется в parseFontFile\n\n// --- ИМПОРТИРУЕМ ДЕКОМПРЕССОР ИЗ НОВОГО ПАКЕТА ---\n\n// <<< ЛОГ ПРОВЕРКИ OPENTYPE.JS >>>\ntry {\n    console.log(\"[Main] opentype.js status:\", typeof (opentype_js__WEBPACK_IMPORTED_MODULE_0___default()), \"Version:\", (opentype_js__WEBPACK_IMPORTED_MODULE_0___default())?.version || \"N/A\");\n} catch (e) {\n    console.error(\"[Main] Failed to access opentype object after import:\", e);\n}\n// <<< КОНЕЦ ЛОГА ПРОВЕРКИ >>>\n// <<< ЛОГ ПРОВЕРКИ ДЕКОМПРЕССОРА >>>\ntry {\n    console.log(\"[Main] woff2-encoder/decompress status:\", typeof woff2_encoder_decompress__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\n} catch (e) {\n    console.error(\"[Main] Failed to access decompress function after import:\", e);\n}\n// <<< КОНЕЦ ЛОГА ПРОВЕРКИ >>>\n/**\n * Проверяет первые 4 байта буфера на сигнатуру WOFF2 ('wOF2')\n */ const isWoff2 = (buffer)=>{\n    if (!buffer || buffer.byteLength < 4) return false;\n    if (!(buffer instanceof ArrayBuffer) && typeof buffer.slice !== \"function\") return false;\n    try {\n        const signature = String.fromCharCode(...new Uint8Array(buffer.slice(0, 4)));\n        return signature === \"wOF2\";\n    } catch (e) {\n        console.error(\"Error checking WOFF2 signature:\", e);\n        return false;\n    }\n};\n/**\n * Проверяет, является ли шрифт вариативным (содержит таблицу fvar).\n * @param {opentype.Font} fontData - Объект шрифта, полученный из opentype.parse.\n * @returns {boolean} - true, если шрифт вариативный, иначе false.\n */ const isVariableFont = (fontData)=>{\n    return !!(fontData && fontData.tables && fontData.tables.fvar);\n};\n/**\n * [Только основной поток] Асинхронно парсит ArrayBuffer шрифта.\n * Декомпрессирует WOFF2 при необходимости.\n * Возвращает полный объект opentype.Font или null при ошибке.\n *\n * @param {ArrayBuffer} buffer - ArrayBuffer с данными шрифта.\n * @param {string} [fontName='unknown'] - Имя шрифта для логирования.\n * @returns {Promise<opentype.Font|null>} Промис с объектом шрифта или null.\n */ async function parseFontBuffer(buffer, fontName = \"unknown\") {\n    // Теперь эта функция просто вызывает _parseFontBufferDirect\n    return _parseFontBufferDirect(buffer, fontName);\n}\n/**\n * [Только основной поток] Асинхронно парсит ArrayBuffer файла шрифта с помощью opentype.js\n * Декомпрессирует WOFF2 с помощью woff2-encoder.\n * @param {ArrayBuffer} buffer - Буфер с данными файла шрифта\n * @param {string} fontName - Имя шрифта (для сообщений об ошибках)\n * @returns {Promise<opentype.Font|null>} - Промис с объектом fontData от opentype.js или null в случае ошибки\n */ const _parseFontBufferDirect = async (buffer, fontName = \"font\")=>{\n    if (!buffer || !(buffer instanceof ArrayBuffer) || buffer.byteLength === 0) {\n        console.error(`[${fontName}] Invalid or empty buffer provided for direct parsing.`);\n        return null;\n    }\n    let processedBuffer = buffer;\n    try {\n        if (isWoff2(buffer)) {\n            console.log(`[Main] Detected WOFF2 for ${fontName}, attempting decompression with woff2-encoder...`);\n            try {\n                if (typeof woff2_encoder_decompress__WEBPACK_IMPORTED_MODULE_3__[\"default\"] !== \"function\") {\n                    throw new Error(\"woff2-encoder decompress function is not available. Check import.\");\n                }\n                const decompressedData = await (0,woff2_encoder_decompress__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(new Uint8Array(buffer));\n                if (!decompressedData) {\n                    throw new Error(\"woff2-encoder decompression returned null or undefined.\");\n                }\n                processedBuffer = decompressedData.buffer;\n                console.log(`[Main] WOFF2 decompression successful for ${fontName}`);\n            } catch (decompError) {\n                react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Ошибка декомпрессии WOFF2 для ${fontName}: ${decompError.message}`);\n                console.error(`[Main] WOFF2 decompression failed for ${fontName}:`, decompError);\n                return null;\n            }\n        }\n        if (typeof (opentype_js__WEBPACK_IMPORTED_MODULE_0___default()) === \"undefined\" || typeof (opentype_js__WEBPACK_IMPORTED_MODULE_0___default().parse) !== \"function\") {\n            throw new Error(\"opentype.js is not loaded or parse function is missing.\");\n        }\n        const parsedFont = opentype_js__WEBPACK_IMPORTED_MODULE_0___default().parse(processedBuffer);\n        console.log(`[Main] Parsed ${fontName} successfully.`);\n        return parsedFont;\n    } catch (parseError) {\n        react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Ошибка анализа шрифта ${fontName}: ${parseError.message}`);\n        console.error(`[Main] Font parsing/processing error for ${fontName}:`, parseError);\n        return null;\n    }\n};\n/**\n * [Только основной поток] Читает файл шрифта (Blob) и парсит его.\n */ const _parseFontFileDirect = (file, fontName = \"font\")=>{\n    return new Promise((resolve)=>{\n        if (!(file instanceof Blob)) {\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Недопустимый файл шрифта для ${fontName} (ожидается Blob)`);\n            resolve(null);\n            return;\n        }\n        const reader = new FileReader();\n        reader.onload = async (e)=>{\n            try {\n                const buffer = e.target.result;\n                // Вызываем парсер основного потока\n                const parsedFont = await _parseFontBufferDirect(buffer, fontName);\n                resolve(parsedFont);\n            } catch (error) {\n                console.error(\"Unexpected error during font buffer processing (direct):\", error);\n                resolve(null);\n            }\n        };\n        reader.onerror = (error)=>{\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Ошибка при чтении файла шрифта ${fontName}`);\n            console.error(`FileReader error for ${fontName}:`, error);\n            resolve(null);\n        };\n        try {\n            reader.readAsArrayBuffer(file);\n        } catch (readError) {\n            react_toastify__WEBPACK_IMPORTED_MODULE_1__.toast.error(`Не удалось начать чтение файла ${fontName}`);\n            console.error(`Error calling readAsArrayBuffer for ${fontName}:`, readError);\n            resolve(null);\n        }\n    });\n};\n/**\n * [Только основной поток] Получает данные глифов для шрифта.\n * @param {Object} fontObj - Объект шрифта\n * @returns {Promise<Object|null>} - Промис с данными глифов или null.\n */ const getGlyphDataForFont = async (fontObj)=>{\n    if (!fontObj || !fontObj.file) {\n        console.error(\"getGlyphDataForFont: Invalid fontObj or missing file.\");\n        return null;\n    }\n    const fontId = fontObj.id || fontObj.name;\n    try {\n        // Получаем ArrayBuffer\n        const buffer = await fontObj.file.arrayBuffer();\n        if (!buffer || buffer.byteLength === 0) {\n            console.error(`[fontParser] Font file buffer is empty for ${fontObj.name}`);\n            throw new Error(\"Font file buffer is empty.\");\n        }\n        // --- Используем только основной поток --- \n        console.log(`[fontParser] Processing glyphs in main thread for ${fontObj.name}`);\n        // Парсим буфер в основном потоке\n        const font = await parseFontBuffer(buffer, fontObj.name); // parseFontBuffer теперь вызывает _parseFontBufferDirect\n        if (!font) {\n            console.error(`[fontParser] Main thread: Failed to parse font buffer for ${fontObj.name}`);\n            throw new Error(\"Ошибка при парсинге шрифта в основном потоке\");\n        }\n        // Извлекаем глифы\n        const resultData = (0,_glyphUtils__WEBPACK_IMPORTED_MODULE_2__.extractBasicGlyphData)(font, \"main\");\n        if (!resultData) {\n            console.error(`[fontParser] Main thread: extractBasicGlyphData returned null for ${fontObj.name}.`);\n            throw new Error(\"Ошибка при извлечении данных глифов в основном потоке\");\n        }\n        // --- Конец использования основного потока --- \n        // Логируем ошибки, если они были\n        if (resultData.errors && resultData.errors.length > 0) {\n            console.warn(`[fontParser - main] Found ${resultData.errors.length} errors processing glyphs for ${fontObj.name}.`);\n        }\n        // Проверяем итоговый результат перед возвратом\n        if (!resultData || !Array.isArray(resultData.allGlyphs)) {\n            console.error(`[fontParser - main] Final glyph data result is invalid for ${fontObj.name}`, resultData);\n            return null;\n        }\n        return resultData; // Возвращаем { allGlyphs, names, unicodes, advanceWidths, errors }\n    } catch (error) {\n        console.error(`[fontParser] Error in getGlyphDataForFont for ${fontId}:`, error);\n        // toast.error('Ошибка при загрузке данных о глифах'); // Можно раскомментировать, если нужно\n        return null; // Возвращаем null при критической ошибке\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUl4QixNQUFNO1FBQ3BCO1FBRUosa0JBQWtCO1FBQ2xCLE1BQU0yQixhQUFhbkQsa0VBQXFCQSxDQUFDa0QsTUFBTTtRQUUzQyxJQUFJLENBQUNDLFlBQVk7WUFDZmpELFFBQVFJLEtBQUssQ0FBQyxDQUFDLGtFQUFrRSxFQUFFdUMsUUFBUUcsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNsRyxNQUFNLElBQUl4QixNQUFNO1FBQ2xCO1FBQ0osZ0RBQWdEO1FBRWhELGlDQUFpQztRQUMvQixJQUFJMkIsV0FBV0MsTUFBTSxJQUFJRCxXQUFXQyxNQUFNLENBQUNDLE1BQU0sR0FBRyxHQUFHO1lBQ3ZEbkQsUUFBUW9ELElBQUksQ0FBQyxDQUFDLDBCQUEwQixFQUFFSCxXQUFXQyxNQUFNLENBQUNDLE1BQU0sQ0FBQyw4QkFBOEIsRUFBRVIsUUFBUUcsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNsSDtRQUVBLCtDQUErQztRQUMvQyxJQUFJLENBQUNHLGNBQWMsQ0FBQ0ksTUFBTUMsT0FBTyxDQUFDTCxXQUFXTSxTQUFTLEdBQUc7WUFDdkR2RCxRQUFRSSxLQUFLLENBQUMsQ0FBQywyREFBMkQsRUFBRXVDLFFBQVFHLElBQUksQ0FBQyxDQUFDLEVBQUVHO1lBQzVGLE9BQU87UUFDVDtRQUVGLE9BQU9BLFlBQVksbUVBQW1FO0lBRXhGLEVBQUUsT0FBTzdDLE9BQU87UUFDZEosUUFBUUksS0FBSyxDQUFDLENBQUMsOENBQThDLEVBQUV3QyxPQUFPLENBQUMsQ0FBQyxFQUFFeEM7UUFDMUUsNkZBQTZGO1FBQzdGLE9BQU8sTUFBTSx5Q0FBeUM7SUFDeEQ7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9udC1nYXVudGxldC1jbG9uZS8uL3V0aWxzL2ZvbnRQYXJzZXIuanM/OTE2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDQpNGD0L3QutGG0LjQuCDQtNC70Y8g0L/QsNGA0YHQuNC90LPQsCDRhNCw0LnQu9C+0LIg0YjRgNC40YTRgtC+0LIg0YEg0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40LXQvCBvcGVudHlwZS5qc1xuaW1wb3J0IG9wZW50eXBlIGZyb20gJ29wZW50eXBlLmpzJzsgLy8g0J7RgdGC0LDQstC70Y/QtdC8INGB0YLQsNC90LTQsNGA0YLQvdGL0Lkg0LjQvNC/0L7RgNGCXG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JzsgLy8gdG9hc3Qg0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINCyIHBhcnNlRm9udEZpbGVcbmltcG9ydCB7IGV4dHJhY3RCYXNpY0dseXBoRGF0YSB9IGZyb20gJy4vZ2x5cGhVdGlscyc7XG5cbi8vIC0tLSDQmNCc0J/QntCg0KLQmNCg0KPQldCcINCU0JXQmtCe0JzQn9Cg0JXQodCh0J7QoCDQmNCXINCd0J7QktCe0JPQniDQn9CQ0JrQldCi0JAgLS0tXG5pbXBvcnQgZGVjb21wcmVzcyBmcm9tICd3b2ZmMi1lbmNvZGVyL2RlY29tcHJlc3MnO1xuXG4vLyA8PDwg0JvQntCTINCf0KDQntCS0JXQoNCa0JggT1BFTlRZUEUuSlMgPj4+XG50cnkge1xuICBjb25zb2xlLmxvZygnW01haW5dIG9wZW50eXBlLmpzIHN0YXR1czonLCB0eXBlb2Ygb3BlbnR5cGUsICdWZXJzaW9uOicsIG9wZW50eXBlPy52ZXJzaW9uIHx8ICdOL0EnKTsgXG59IGNhdGNoIChlKSB7XG4gIGNvbnNvbGUuZXJyb3IoJ1tNYWluXSBGYWlsZWQgdG8gYWNjZXNzIG9wZW50eXBlIG9iamVjdCBhZnRlciBpbXBvcnQ6JywgZSk7XG59XG4vLyA8PDwg0JrQntCd0JXQpiDQm9Ce0JPQkCDQn9Cg0J7QktCV0KDQmtCYID4+PlxuXG4vLyA8PDwg0JvQntCTINCf0KDQntCS0JXQoNCa0Jgg0JTQldCa0J7QnNCf0KDQldCh0KHQntCg0JAgPj4+XG50cnkge1xuICBjb25zb2xlLmxvZygnW01haW5dIHdvZmYyLWVuY29kZXIvZGVjb21wcmVzcyBzdGF0dXM6JywgdHlwZW9mIGRlY29tcHJlc3MpO1xufSBjYXRjaCAoZSkge1xuICBjb25zb2xlLmVycm9yKCdbTWFpbl0gRmFpbGVkIHRvIGFjY2VzcyBkZWNvbXByZXNzIGZ1bmN0aW9uIGFmdGVyIGltcG9ydDonLCBlKTtcbn1cbi8vIDw8PCDQmtCe0J3QldCmINCb0J7Qk9CQINCf0KDQntCS0JXQoNCa0JggPj4+XG5cbi8qKlxuICog0J/RgNC+0LLQtdGA0Y/QtdGCINC/0LXRgNCy0YvQtSA0INCx0LDQudGC0LAg0LHRg9GE0LXRgNCwINC90LAg0YHQuNCz0L3QsNGC0YPRgNGDIFdPRkYyICgnd09GMicpXG4gKi9cbmNvbnN0IGlzV29mZjIgPSAoYnVmZmVyKSA9PiB7XG4gIGlmICghYnVmZmVyIHx8IGJ1ZmZlci5ieXRlTGVuZ3RoIDwgNCkgcmV0dXJuIGZhbHNlO1xuICBpZiAoIShidWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgJiYgdHlwZW9mIGJ1ZmZlci5zbGljZSAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlOyBcbiAgdHJ5IHtcbiAgICBjb25zdCBzaWduYXR1cmUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLm5ldyBVaW50OEFycmF5KGJ1ZmZlci5zbGljZSgwLCA0KSkpO1xuICAgIHJldHVybiBzaWduYXR1cmUgPT09ICd3T0YyJztcbiAgfSBjYXRjaCAoZSkge1xuICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2hlY2tpbmcgV09GRjIgc2lnbmF0dXJlOlwiLCBlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG4gIFxuLyoqXG4gKiDQn9GA0L7QstC10YDRj9C10YIsINGP0LLQu9GP0LXRgtGB0Y8g0LvQuCDRiNGA0LjRhNGCINCy0LDRgNC40LDRgtC40LLQvdGL0LwgKNGB0L7QtNC10YDQttC40YIg0YLQsNCx0LvQuNGG0YMgZnZhcikuXG4gKiBAcGFyYW0ge29wZW50eXBlLkZvbnR9IGZvbnREYXRhIC0g0J7QsdGK0LXQutGCINGI0YDQuNGE0YLQsCwg0L/QvtC70YPRh9C10L3QvdGL0Lkg0LjQtyBvcGVudHlwZS5wYXJzZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSAtIHRydWUsINC10YHQu9C4INGI0YDQuNGE0YIg0LLQsNGA0LjQsNGC0LjQstC90YvQuSwg0LjQvdCw0YfQtSBmYWxzZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGlzVmFyaWFibGVGb250ID0gKGZvbnREYXRhKSA9PiB7XG4gIHJldHVybiAhIShmb250RGF0YSAmJiBmb250RGF0YS50YWJsZXMgJiYgZm9udERhdGEudGFibGVzLmZ2YXIpO1xufTtcblxuLyoqXG4gKiBb0KLQvtC70YzQutC+INC+0YHQvdC+0LLQvdC+0Lkg0L/QvtGC0L7Qul0g0JDRgdC40L3RhdGA0L7QvdC90L4g0L/QsNGA0YHQuNGCIEFycmF5QnVmZmVyINGI0YDQuNGE0YLQsC5cbiAqINCU0LXQutC+0LzQv9GA0LXRgdGB0LjRgNGD0LXRgiBXT0ZGMiDQv9GA0Lgg0L3QtdC+0LHRhdC+0LTQuNC80L7RgdGC0LguXG4gKiDQktC+0LfQstGA0LDRidCw0LXRgiDQv9C+0LvQvdGL0Lkg0L7QsdGK0LXQutGCIG9wZW50eXBlLkZvbnQg0LjQu9C4IG51bGwg0L/RgNC4INC+0YjQuNCx0LrQtS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBidWZmZXIgLSBBcnJheUJ1ZmZlciDRgSDQtNCw0L3QvdGL0LzQuCDRiNGA0LjRhNGC0LAuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2ZvbnROYW1lPSd1bmtub3duJ10gLSDQmNC80Y8g0YjRgNC40YTRgtCwINC00LvRjyDQu9C+0LPQuNGA0L7QstCw0L3QuNGPLlxuICogQHJldHVybnMge1Byb21pc2U8b3BlbnR5cGUuRm9udHxudWxsPn0g0J/RgNC+0LzQuNGBINGBINC+0LHRitC10LrRgtC+0Lwg0YjRgNC40YTRgtCwINC40LvQuCBudWxsLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGFyc2VGb250QnVmZmVyKGJ1ZmZlciwgZm9udE5hbWUgPSAndW5rbm93bicpIHtcbiAgLy8g0KLQtdC/0LXRgNGMINGN0YLQsCDRhNGD0L3QutGG0LjRjyDQv9GA0L7RgdGC0L4g0LLRi9C30YvQstCw0LXRgiBfcGFyc2VGb250QnVmZmVyRGlyZWN0XG4gICAgcmV0dXJuIF9wYXJzZUZvbnRCdWZmZXJEaXJlY3QoYnVmZmVyLCBmb250TmFtZSk7XG59XG5cbi8qKlxuICogW9Ci0L7Qu9GM0LrQviDQvtGB0L3QvtCy0L3QvtC5INC/0L7RgtC+0LpdINCQ0YHQuNC90YXRgNC+0L3QvdC+INC/0LDRgNGB0LjRgiBBcnJheUJ1ZmZlciDRhNCw0LnQu9CwINGI0YDQuNGE0YLQsCDRgSDQv9C+0LzQvtGJ0YzRjiBvcGVudHlwZS5qc1xuICog0JTQtdC60L7QvNC/0YDQtdGB0YHQuNGA0YPQtdGCIFdPRkYyINGBINC/0L7QvNC+0YnRjNGOIHdvZmYyLWVuY29kZXIuXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBidWZmZXIgLSDQkdGD0YTQtdGAINGBINC00LDQvdC90YvQvNC4INGE0LDQudC70LAg0YjRgNC40YTRgtCwXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udE5hbWUgLSDQmNC80Y8g0YjRgNC40YTRgtCwICjQtNC70Y8g0YHQvtC+0LHRidC10L3QuNC5INC+0LEg0L7RiNC40LHQutCw0YUpXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxvcGVudHlwZS5Gb250fG51bGw+fSAtINCf0YDQvtC80LjRgSDRgSDQvtCx0YrQtdC60YLQvtC8IGZvbnREYXRhINC+0YIgb3BlbnR5cGUuanMg0LjQu9C4IG51bGwg0LIg0YHQu9GD0YfQsNC1INC+0YjQuNCx0LrQuFxuICovXG5leHBvcnQgY29uc3QgX3BhcnNlRm9udEJ1ZmZlckRpcmVjdCA9IGFzeW5jIChidWZmZXIsIGZvbnROYW1lID0gJ2ZvbnQnKSA9PiB7XG4gIGlmICghYnVmZmVyIHx8ICEoYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHx8IGJ1ZmZlci5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgY29uc29sZS5lcnJvcihgWyR7Zm9udE5hbWV9XSBJbnZhbGlkIG9yIGVtcHR5IGJ1ZmZlciBwcm92aWRlZCBmb3IgZGlyZWN0IHBhcnNpbmcuYCk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgXG4gIGxldCBwcm9jZXNzZWRCdWZmZXIgPSBidWZmZXI7XG4gIFxuICB0cnkge1xuICAgICBpZiAoaXNXb2ZmMihidWZmZXIpKSB7XG4gICAgICAgICBjb25zb2xlLmxvZyhgW01haW5dIERldGVjdGVkIFdPRkYyIGZvciAke2ZvbnROYW1lfSwgYXR0ZW1wdGluZyBkZWNvbXByZXNzaW9uIHdpdGggd29mZjItZW5jb2Rlci4uLmApO1xuICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICBpZiAodHlwZW9mIGRlY29tcHJlc3MgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd3b2ZmMi1lbmNvZGVyIGRlY29tcHJlc3MgZnVuY3Rpb24gaXMgbm90IGF2YWlsYWJsZS4gQ2hlY2sgaW1wb3J0LicpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBjb25zdCBkZWNvbXByZXNzZWREYXRhID0gYXdhaXQgZGVjb21wcmVzcyhuZXcgVWludDhBcnJheShidWZmZXIpKTsgXG4gICAgICAgICAgICAgaWYgKCFkZWNvbXByZXNzZWREYXRhKSB7XG4gICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignd29mZjItZW5jb2RlciBkZWNvbXByZXNzaW9uIHJldHVybmVkIG51bGwgb3IgdW5kZWZpbmVkLicpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBwcm9jZXNzZWRCdWZmZXIgPSBkZWNvbXByZXNzZWREYXRhLmJ1ZmZlcjtcbiAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW01haW5dIFdPRkYyIGRlY29tcHJlc3Npb24gc3VjY2Vzc2Z1bCBmb3IgJHtmb250TmFtZX1gKTtcbiAgICAgICAgIH0gY2F0Y2ggKGRlY29tcEVycm9yKSB7XG4gICAgICAgICAgICAgdG9hc3QuZXJyb3IoYNCe0YjQuNCx0LrQsCDQtNC10LrQvtC80L/RgNC10YHRgdC40LggV09GRjIg0LTQu9GPICR7Zm9udE5hbWV9OiAke2RlY29tcEVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW01haW5dIFdPRkYyIGRlY29tcHJlc3Npb24gZmFpbGVkIGZvciAke2ZvbnROYW1lfTpgLCBkZWNvbXBFcnJvcik7XG4gICAgICAgICAgICAgcmV0dXJuIG51bGw7IFxuICAgICAgICAgfVxuICAgICB9XG4gICAgIFxuICAgIGlmICh0eXBlb2Ygb3BlbnR5cGUgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBvcGVudHlwZS5wYXJzZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29wZW50eXBlLmpzIGlzIG5vdCBsb2FkZWQgb3IgcGFyc2UgZnVuY3Rpb24gaXMgbWlzc2luZy4nKTtcbiAgICB9XG4gICAgIFxuICAgIGNvbnN0IHBhcnNlZEZvbnQgPSBvcGVudHlwZS5wYXJzZShwcm9jZXNzZWRCdWZmZXIpO1xuICAgIGNvbnNvbGUubG9nKGBbTWFpbl0gUGFyc2VkICR7Zm9udE5hbWV9IHN1Y2Nlc3NmdWxseS5gKTtcbiAgICByZXR1cm4gcGFyc2VkRm9udDtcbiAgICBcbiAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgIHRvYXN0LmVycm9yKGDQntGI0LjQsdC60LAg0LDQvdCw0LvQuNC30LAg0YjRgNC40YTRgtCwICR7Zm9udE5hbWV9OiAke3BhcnNlRXJyb3IubWVzc2FnZX1gKTtcbiAgICBjb25zb2xlLmVycm9yKGBbTWFpbl0gRm9udCBwYXJzaW5nL3Byb2Nlc3NpbmcgZXJyb3IgZm9yICR7Zm9udE5hbWV9OmAsIHBhcnNlRXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIFvQotC+0LvRjNC60L4g0L7RgdC90L7QstC90L7QuSDQv9C+0YLQvtC6XSDQp9C40YLQsNC10YIg0YTQsNC50Lsg0YjRgNC40YTRgtCwIChCbG9iKSDQuCDQv9Cw0YDRgdC40YIg0LXQs9C+LlxuICovXG5leHBvcnQgY29uc3QgX3BhcnNlRm9udEZpbGVEaXJlY3QgPSAoZmlsZSwgZm9udE5hbWUgPSAnZm9udCcpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7IFxuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBCbG9iKSkge1xuICAgICAgdG9hc3QuZXJyb3IoYNCd0LXQtNC+0L/Rg9GB0YLQuNC80YvQuSDRhNCw0LnQuyDRiNGA0LjRhNGC0LAg0LTQu9GPICR7Zm9udE5hbWV9ICjQvtC20LjQtNCw0LXRgtGB0Y8gQmxvYilgKTtcbiAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICByZWFkZXIub25sb2FkID0gYXN5bmMgKGUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgLy8g0JLRi9C30YvQstCw0LXQvCDQv9Cw0YDRgdC10YAg0L7RgdC90L7QstC90L7Qs9C+INC/0L7RgtC+0LrQsFxuICAgICAgICBjb25zdCBwYXJzZWRGb250ID0gYXdhaXQgX3BhcnNlRm9udEJ1ZmZlckRpcmVjdChidWZmZXIsIGZvbnROYW1lKTtcbiAgICAgICAgcmVzb2x2ZShwYXJzZWRGb250KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGR1cmluZyBmb250IGJ1ZmZlciBwcm9jZXNzaW5nIChkaXJlY3QpOicsIGVycm9yKTtcbiAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICB9XG4gICAgfTtcbiAgICByZWFkZXIub25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgdG9hc3QuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YfRgtC10L3QuNC4INGE0LDQudC70LAg0YjRgNC40YTRgtCwICR7Zm9udE5hbWV9YCk7XG4gICAgICBjb25zb2xlLmVycm9yKGBGaWxlUmVhZGVyIGVycm9yIGZvciAke2ZvbnROYW1lfTpgLCBlcnJvcik7XG4gICAgICByZXNvbHZlKG51bGwpO1xuICAgIH07XG5cbiAgICB0cnkge1xuICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xuICAgIH0gY2F0Y2ggKHJlYWRFcnJvcikge1xuICAgICAgICB0b2FzdC5lcnJvcihg0J3QtSDRg9C00LDQu9C+0YHRjCDQvdCw0YfQsNGC0Ywg0YfRgtC10L3QuNC1INGE0LDQudC70LAgJHtmb250TmFtZX1gKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY2FsbGluZyByZWFkQXNBcnJheUJ1ZmZlciBmb3IgJHtmb250TmFtZX06YCwgcmVhZEVycm9yKTtcbiAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBb0KLQvtC70YzQutC+INC+0YHQvdC+0LLQvdC+0Lkg0L/QvtGC0L7Qul0g0J/QvtC70YPRh9Cw0LXRgiDQtNCw0L3QvdGL0LUg0LPQu9C40YTQvtCyINC00LvRjyDRiNGA0LjRhNGC0LAuXG4gKiBAcGFyYW0ge09iamVjdH0gZm9udE9iaiAtINCe0LHRitC10LrRgiDRiNGA0LjRhNGC0LBcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gLSDQn9GA0L7QvNC40YEg0YEg0LTQsNC90L3Ri9C80Lgg0LPQu9C40YTQvtCyINC40LvQuCBudWxsLlxuICovXG5leHBvcnQgY29uc3QgZ2V0R2x5cGhEYXRhRm9yRm9udCA9IGFzeW5jIChmb250T2JqKSA9PiB7XG4gIGlmICghZm9udE9iaiB8fCAhZm9udE9iai5maWxlKSB7XG4gICAgY29uc29sZS5lcnJvcignZ2V0R2x5cGhEYXRhRm9yRm9udDogSW52YWxpZCBmb250T2JqIG9yIG1pc3NpbmcgZmlsZS4nKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgY29uc3QgZm9udElkID0gZm9udE9iai5pZCB8fCBmb250T2JqLm5hbWU7XG5cbiAgdHJ5IHtcbiAgICAvLyDQn9C+0LvRg9GH0LDQtdC8IEFycmF5QnVmZmVyXG4gICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZm9udE9iai5maWxlLmFycmF5QnVmZmVyKCk7XG4gICAgaWYgKCFidWZmZXIgfHwgYnVmZmVyLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtmb250UGFyc2VyXSBGb250IGZpbGUgYnVmZmVyIGlzIGVtcHR5IGZvciAke2ZvbnRPYmoubmFtZX1gKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvbnQgZmlsZSBidWZmZXIgaXMgZW1wdHkuXCIpO1xuICAgIH1cblxuICAgIC8vIC0tLSDQmNGB0L/QvtC70YzQt9GD0LXQvCDRgtC+0LvRjNC60L4g0L7RgdC90L7QstC90L7QuSDQv9C+0YLQvtC6IC0tLSBcbiAgICBjb25zb2xlLmxvZyhgW2ZvbnRQYXJzZXJdIFByb2Nlc3NpbmcgZ2x5cGhzIGluIG1haW4gdGhyZWFkIGZvciAke2ZvbnRPYmoubmFtZX1gKTtcbiAgICBcbiAgICAvLyDQn9Cw0YDRgdC40Lwg0LHRg9GE0LXRgCDQsiDQvtGB0L3QvtCy0L3QvtC8INC/0L7RgtC+0LrQtVxuICAgIGNvbnN0IGZvbnQgPSBhd2FpdCBwYXJzZUZvbnRCdWZmZXIoYnVmZmVyLCBmb250T2JqLm5hbWUpOyAvLyBwYXJzZUZvbnRCdWZmZXIg0YLQtdC/0LXRgNGMINCy0YvQt9GL0LLQsNC10YIgX3BhcnNlRm9udEJ1ZmZlckRpcmVjdFxuICAgICAgICBpZiAoIWZvbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtmb250UGFyc2VyXSBNYWluIHRocmVhZDogRmFpbGVkIHRvIHBhcnNlIGZvbnQgYnVmZmVyIGZvciAke2ZvbnRPYmoubmFtZX1gKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign0J7RiNC40LHQutCwINC/0YDQuCDQv9Cw0YDRgdC40L3Qs9C1INGI0YDQuNGE0YLQsCDQsiDQvtGB0L3QvtCy0L3QvtC8INC/0L7RgtC+0LrQtScpO1xuICAgICAgICB9XG5cbiAgICAvLyDQmNC30LLQu9C10LrQsNC10Lwg0LPQu9C40YTRi1xuICAgIGNvbnN0IHJlc3VsdERhdGEgPSBleHRyYWN0QmFzaWNHbHlwaERhdGEoZm9udCwgJ21haW4nKTtcblxuICAgICAgICBpZiAoIXJlc3VsdERhdGEpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbZm9udFBhcnNlcl0gTWFpbiB0aHJlYWQ6IGV4dHJhY3RCYXNpY0dseXBoRGF0YSByZXR1cm5lZCBudWxsIGZvciAke2ZvbnRPYmoubmFtZX0uYCk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfQntGI0LjQsdC60LAg0L/RgNC4INC40LfQstC70LXRh9C10L3QuNC4INC00LDQvdC90YvRhSDQs9C70LjRhNC+0LIg0LIg0L7RgdC90L7QstC90L7QvCDQv9C+0YLQvtC60LUnKTtcbiAgICAgICAgfVxuICAgIC8vIC0tLSDQmtC+0L3QtdGGINC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPINC+0YHQvdC+0LLQvdC+0LPQviDQv9C+0YLQvtC60LAgLS0tIFxuICAgICAgXG4gICAgLy8g0JvQvtCz0LjRgNGD0LXQvCDQvtGI0LjQsdC60LgsINC10YHQu9C4INC+0L3QuCDQsdGL0LvQuFxuICAgICAgaWYgKHJlc3VsdERhdGEuZXJyb3JzICYmIHJlc3VsdERhdGEuZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUud2FybihgW2ZvbnRQYXJzZXIgLSBtYWluXSBGb3VuZCAke3Jlc3VsdERhdGEuZXJyb3JzLmxlbmd0aH0gZXJyb3JzIHByb2Nlc3NpbmcgZ2x5cGhzIGZvciAke2ZvbnRPYmoubmFtZX0uYCk7XG4gICAgICB9XG5cbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDQuNGC0L7Qs9C+0LLRi9C5INGA0LXQt9GD0LvRjNGC0LDRgiDQv9C10YDQtdC0INCy0L7Qt9Cy0YDQsNGC0L7QvFxuICAgICAgaWYgKCFyZXN1bHREYXRhIHx8ICFBcnJheS5pc0FycmF5KHJlc3VsdERhdGEuYWxsR2x5cGhzKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBbZm9udFBhcnNlciAtIG1haW5dIEZpbmFsIGdseXBoIGRhdGEgcmVzdWx0IGlzIGludmFsaWQgZm9yICR7Zm9udE9iai5uYW1lfWAsIHJlc3VsdERhdGEpO1xuICAgICAgICByZXR1cm4gbnVsbDsgXG4gICAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0RGF0YTsgLy8g0JLQvtC30LLRgNCw0YnQsNC10LwgeyBhbGxHbHlwaHMsIG5hbWVzLCB1bmljb2RlcywgYWR2YW5jZVdpZHRocywgZXJyb3JzIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYFtmb250UGFyc2VyXSBFcnJvciBpbiBnZXRHbHlwaERhdGFGb3JGb250IGZvciAke2ZvbnRJZH06YCwgZXJyb3IpO1xuICAgIC8vIHRvYXN0LmVycm9yKCfQntGI0LjQsdC60LAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0LTQsNC90L3Ri9GFINC+INCz0LvQuNGE0LDRhScpOyAvLyDQnNC+0LbQvdC+INGA0LDRgdC60L7QvNC80LXQvdGC0LjRgNC+0LLQsNGC0YwsINC10YHQu9C4INC90YPQttC90L5cbiAgICByZXR1cm4gbnVsbDsgLy8g0JLQvtC30LLRgNCw0YnQsNC10LwgbnVsbCDQv9GA0Lgg0LrRgNC40YLQuNGH0LXRgdC60L7QuSDQvtGI0LjQsdC60LVcbiAgfVxufTsgIl0sIm5hbWVzIjpbIm9wZW50eXBlIiwidG9hc3QiLCJleHRyYWN0QmFzaWNHbHlwaERhdGEiLCJkZWNvbXByZXNzIiwiY29uc29sZSIsImxvZyIsInZlcnNpb24iLCJlIiwiZXJyb3IiLCJpc1dvZmYyIiwiYnVmZmVyIiwiYnl0ZUxlbmd0aCIsIkFycmF5QnVmZmVyIiwic2xpY2UiLCJzaWduYXR1cmUiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJVaW50OEFycmF5IiwiaXNWYXJpYWJsZUZvbnQiLCJmb250RGF0YSIsInRhYmxlcyIsImZ2YXIiLCJwYXJzZUZvbnRCdWZmZXIiLCJmb250TmFtZSIsIl9wYXJzZUZvbnRCdWZmZXJEaXJlY3QiLCJwcm9jZXNzZWRCdWZmZXIiLCJFcnJvciIsImRlY29tcHJlc3NlZERhdGEiLCJkZWNvbXBFcnJvciIsIm1lc3NhZ2UiLCJwYXJzZSIsInBhcnNlZEZvbnQiLCJwYXJzZUVycm9yIiwiX3BhcnNlRm9udEZpbGVEaXJlY3QiLCJmaWxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJCbG9iIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsInRhcmdldCIsInJlc3VsdCIsIm9uZXJyb3IiLCJyZWFkQXNBcnJheUJ1ZmZlciIsInJlYWRFcnJvciIsImdldEdseXBoRGF0YUZvckZvbnQiLCJmb250T2JqIiwiZm9udElkIiwiaWQiLCJuYW1lIiwiYXJyYXlCdWZmZXIiLCJmb250IiwicmVzdWx0RGF0YSIsImVycm9ycyIsImxlbmd0aCIsIndhcm4iLCJBcnJheSIsImlzQXJyYXkiLCJhbGxHbHlwaHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./utils/fontParser.js\n");

/***/ }),

/***/ "./utils/fontUtilsCommon.js":
/*!**********************************!*\
  !*** ./utils/fontUtilsCommon.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PRESET_STYLES: () => (/* binding */ PRESET_STYLES),\n/* harmony export */   findStyleInfoByWeightAndStyle: () => (/* binding */ findStyleInfoByWeightAndStyle),\n/* harmony export */   getAxisName: () => (/* binding */ getAxisName),\n/* harmony export */   getFormatFromExtension: () => (/* binding */ getFormatFromExtension)\n/* harmony export */ });\n// Общие вспомогательные функции для работы со шрифтами\n// Константы пресетов стилей\nconst PRESET_STYLES = [\n    {\n        name: \"Thin\",\n        weight: 100,\n        style: \"normal\"\n    },\n    {\n        name: \"ExtraLight\",\n        weight: 200,\n        style: \"normal\"\n    },\n    {\n        name: \"Light\",\n        weight: 300,\n        style: \"normal\"\n    },\n    {\n        name: \"Regular\",\n        weight: 400,\n        style: \"normal\"\n    },\n    {\n        name: \"Medium\",\n        weight: 500,\n        style: \"normal\"\n    },\n    {\n        name: \"SemiBold\",\n        weight: 600,\n        style: \"normal\"\n    },\n    {\n        name: \"Bold\",\n        weight: 700,\n        style: \"normal\"\n    },\n    {\n        name: \"ExtraBold\",\n        weight: 800,\n        style: \"normal\"\n    },\n    {\n        name: \"Black\",\n        weight: 900,\n        style: \"normal\"\n    },\n    // { name: 'ExtraBlack', weight: 1000, style: 'normal' }, // Редко используется\n    {\n        name: \"Thin Italic\",\n        weight: 100,\n        style: \"italic\"\n    },\n    {\n        name: \"ExtraLight Italic\",\n        weight: 200,\n        style: \"italic\"\n    },\n    {\n        name: \"Light Italic\",\n        weight: 300,\n        style: \"italic\"\n    },\n    {\n        name: \"Italic\",\n        weight: 400,\n        style: \"italic\"\n    },\n    {\n        name: \"Medium Italic\",\n        weight: 500,\n        style: \"italic\"\n    },\n    {\n        name: \"SemiBold Italic\",\n        weight: 600,\n        style: \"italic\"\n    },\n    {\n        name: \"Bold Italic\",\n        weight: 700,\n        style: \"italic\"\n    },\n    {\n        name: \"ExtraBold Italic\",\n        weight: 800,\n        style: \"italic\"\n    },\n    {\n        name: \"Black Italic\",\n        weight: 900,\n        style: \"italic\"\n    }\n];\n/**\n * Находит информацию о стиле по весу и типу шрифта\n * @param {number} weight - Вес шрифта (100-900)\n * @param {string} style - Стиль шрифта ('normal', 'italic')\n * @returns {Object} - Объект с информацией о стиле (имя, вес, стиль)\n */ const findStyleInfoByWeightAndStyle = (weight, style)=>{\n    // Нормализуем вес для поиска\n    if (!weight) weight = 400;\n    if (!style) style = \"normal\";\n    // Ищем соответствие стилю и весу\n    switch(true){\n        case weight <= 100 && style === \"normal\":\n            return {\n                name: \"Thin\",\n                weight: 100,\n                style: \"normal\"\n            };\n        case weight <= 100 && style === \"italic\":\n            return {\n                name: \"Thin Italic\",\n                weight: 100,\n                style: \"italic\"\n            };\n        case weight <= 200 && style === \"normal\":\n            return {\n                name: \"ExtraLight\",\n                weight: 200,\n                style: \"normal\"\n            };\n        case weight <= 200 && style === \"italic\":\n            return {\n                name: \"ExtraLight Italic\",\n                weight: 200,\n                style: \"italic\"\n            };\n        case weight <= 300 && style === \"normal\":\n            return {\n                name: \"Light\",\n                weight: 300,\n                style: \"normal\"\n            };\n        case weight <= 300 && style === \"italic\":\n            return {\n                name: \"Light Italic\",\n                weight: 300,\n                style: \"italic\"\n            };\n        case weight <= 400 && style === \"normal\":\n            return {\n                name: \"Regular\",\n                weight: 400,\n                style: \"normal\"\n            };\n        case weight <= 400 && style === \"italic\":\n            return {\n                name: \"Italic\",\n                weight: 400,\n                style: \"italic\"\n            };\n        case weight <= 500 && style === \"normal\":\n            return {\n                name: \"Medium\",\n                weight: 500,\n                style: \"normal\"\n            };\n        case weight <= 500 && style === \"italic\":\n            return {\n                name: \"Medium Italic\",\n                weight: 500,\n                style: \"italic\"\n            };\n        case weight <= 600 && style === \"normal\":\n            return {\n                name: \"SemiBold\",\n                weight: 600,\n                style: \"normal\"\n            };\n        case weight <= 600 && style === \"italic\":\n            return {\n                name: \"SemiBold Italic\",\n                weight: 600,\n                style: \"italic\"\n            };\n        case weight <= 700 && style === \"normal\":\n            return {\n                name: \"Bold\",\n                weight: 700,\n                style: \"normal\"\n            };\n        case weight <= 700 && style === \"italic\":\n            return {\n                name: \"Bold Italic\",\n                weight: 700,\n                style: \"italic\"\n            };\n        case weight <= 800 && style === \"normal\":\n            return {\n                name: \"ExtraBold\",\n                weight: 800,\n                style: \"normal\"\n            };\n        case weight <= 800 && style === \"italic\":\n            return {\n                name: \"ExtraBold Italic\",\n                weight: 800,\n                style: \"italic\"\n            };\n        case weight <= 900 && style === \"normal\":\n            return {\n                name: \"Black\",\n                weight: 900,\n                style: \"normal\"\n            };\n        case weight <= 900 && style === \"italic\":\n            return {\n                name: \"Black Italic\",\n                weight: 900,\n                style: \"italic\"\n            };\n        default:\n            return {\n                name: \"Regular\",\n                weight: 400,\n                style: \"normal\"\n            };\n    }\n};\n/**\n * Определяет формат шрифта на основе расширения файла\n * @param {string} fileName - Имя файла шрифта\n * @returns {string} - Формат шрифта для @font-face\n */ const getFormatFromExtension = (fileName)=>{\n    const extension = fileName?.toLowerCase().split(\".\").pop() || \"\";\n    switch(extension){\n        case \"ttf\":\n            return \"truetype\";\n        case \"otf\":\n            return \"opentype\";\n        case \"woff\":\n            return \"woff\";\n        case \"woff2\":\n            return \"woff2\";\n        default:\n            // Попытка вернуть truetype по умолчанию, если расширение неизвестно, но есть\n            return extension ? \"truetype\" : \"\";\n    }\n};\n/**\n * Получает читаемое имя для тега оси вариативного шрифта\n * @param {string} tag - Тег оси (например, 'wght', 'wdth')\n * @returns {string} - Читаемое имя (например, 'Weight', 'Width')\n */ const getAxisName = (tag)=>{\n// ... (остальной код)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO1FBQ1Q7WUFDRSw2RUFBNkU7WUFDN0UsT0FBT0EsWUFBWSxhQUFhO0lBQ3BDO0FBQ0YsRUFBRTtBQUVGOzs7O0NBSUMsR0FDTSxNQUFNSSxjQUFjLENBQUNDO0FBQzFCLHNCQUFzQjtBQUN4QixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9udC1nYXVudGxldC1jbG9uZS8uL3V0aWxzL2ZvbnRVdGlsc0NvbW1vbi5qcz9jZWFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vINCe0LHRidC40LUg0LLRgdC/0L7QvNC+0LPQsNGC0LXQu9GM0L3Ri9C1INGE0YPQvdC60YbQuNC4INC00LvRjyDRgNCw0LHQvtGC0Ysg0YHQviDRiNGA0LjRhNGC0LDQvNC4XG5cbi8vINCa0L7QvdGB0YLQsNC90YLRiyDQv9GA0LXRgdC10YLQvtCyINGB0YLQuNC70LXQuVxuZXhwb3J0IGNvbnN0IFBSRVNFVF9TVFlMRVMgPSBbXG4gIHsgbmFtZTogJ1RoaW4nLCB3ZWlnaHQ6IDEwMCwgc3R5bGU6ICdub3JtYWwnIH0sXG4gIHsgbmFtZTogJ0V4dHJhTGlnaHQnLCB3ZWlnaHQ6IDIwMCwgc3R5bGU6ICdub3JtYWwnIH0sXG4gIHsgbmFtZTogJ0xpZ2h0Jywgd2VpZ2h0OiAzMDAsIHN0eWxlOiAnbm9ybWFsJyB9LFxuICB7IG5hbWU6ICdSZWd1bGFyJywgd2VpZ2h0OiA0MDAsIHN0eWxlOiAnbm9ybWFsJyB9LFxuICB7IG5hbWU6ICdNZWRpdW0nLCB3ZWlnaHQ6IDUwMCwgc3R5bGU6ICdub3JtYWwnIH0sXG4gIHsgbmFtZTogJ1NlbWlCb2xkJywgd2VpZ2h0OiA2MDAsIHN0eWxlOiAnbm9ybWFsJyB9LFxuICB7IG5hbWU6ICdCb2xkJywgd2VpZ2h0OiA3MDAsIHN0eWxlOiAnbm9ybWFsJyB9LFxuICB7IG5hbWU6ICdFeHRyYUJvbGQnLCB3ZWlnaHQ6IDgwMCwgc3R5bGU6ICdub3JtYWwnIH0sXG4gIHsgbmFtZTogJ0JsYWNrJywgd2VpZ2h0OiA5MDAsIHN0eWxlOiAnbm9ybWFsJyB9LFxuICAvLyB7IG5hbWU6ICdFeHRyYUJsYWNrJywgd2VpZ2h0OiAxMDAwLCBzdHlsZTogJ25vcm1hbCcgfSwgLy8g0KDQtdC00LrQviDQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y9cbiAgeyBuYW1lOiAnVGhpbiBJdGFsaWMnLCB3ZWlnaHQ6IDEwMCwgc3R5bGU6ICdpdGFsaWMnIH0sXG4gIHsgbmFtZTogJ0V4dHJhTGlnaHQgSXRhbGljJywgd2VpZ2h0OiAyMDAsIHN0eWxlOiAnaXRhbGljJyB9LFxuICB7IG5hbWU6ICdMaWdodCBJdGFsaWMnLCB3ZWlnaHQ6IDMwMCwgc3R5bGU6ICdpdGFsaWMnIH0sXG4gIHsgbmFtZTogJ0l0YWxpYycsIHdlaWdodDogNDAwLCBzdHlsZTogJ2l0YWxpYycgfSxcbiAgeyBuYW1lOiAnTWVkaXVtIEl0YWxpYycsIHdlaWdodDogNTAwLCBzdHlsZTogJ2l0YWxpYycgfSxcbiAgeyBuYW1lOiAnU2VtaUJvbGQgSXRhbGljJywgd2VpZ2h0OiA2MDAsIHN0eWxlOiAnaXRhbGljJyB9LFxuICB7IG5hbWU6ICdCb2xkIEl0YWxpYycsIHdlaWdodDogNzAwLCBzdHlsZTogJ2l0YWxpYycgfSxcbiAgeyBuYW1lOiAnRXh0cmFCb2xkIEl0YWxpYycsIHdlaWdodDogODAwLCBzdHlsZTogJ2l0YWxpYycgfSxcbiAgeyBuYW1lOiAnQmxhY2sgSXRhbGljJywgd2VpZ2h0OiA5MDAsIHN0eWxlOiAnaXRhbGljJyB9LFxuICAvLyB7IG5hbWU6ICdFeHRyYUJsYWNrIEl0YWxpYycsIHdlaWdodDogMTAwMCwgc3R5bGU6ICdpdGFsaWMnIH1cbl07XG5cbi8qKlxuICog0J3QsNGF0L7QtNC40YIg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0YHRgtC40LvQtSDQv9C+INCy0LXRgdGDINC4INGC0LjQv9GDINGI0YDQuNGE0YLQsFxuICogQHBhcmFtIHtudW1iZXJ9IHdlaWdodCAtINCS0LXRgSDRiNGA0LjRhNGC0LAgKDEwMC05MDApXG4gKiBAcGFyYW0ge3N0cmluZ30gc3R5bGUgLSDQodGC0LjQu9GMINGI0YDQuNGE0YLQsCAoJ25vcm1hbCcsICdpdGFsaWMnKVxuICogQHJldHVybnMge09iamVjdH0gLSDQntCx0YrQtdC60YIg0YEg0LjQvdGE0L7RgNC80LDRhtC40LXQuSDQviDRgdGC0LjQu9C1ICjQuNC80Y8sINCy0LXRgSwg0YHRgtC40LvRjClcbiAqL1xuZXhwb3J0IGNvbnN0IGZpbmRTdHlsZUluZm9CeVdlaWdodEFuZFN0eWxlID0gKHdlaWdodCwgc3R5bGUpID0+IHtcbiAgLy8g0J3QvtGA0LzQsNC70LjQt9GD0LXQvCDQstC10YEg0LTQu9GPINC/0L7QuNGB0LrQsFxuICBpZiAoIXdlaWdodCkgd2VpZ2h0ID0gNDAwO1xuICBpZiAoIXN0eWxlKSBzdHlsZSA9ICdub3JtYWwnO1xuXG4gIC8vINCY0YnQtdC8INGB0L7QvtGC0LLQtdGC0YHRgtCy0LjQtSDRgdGC0LjQu9GOINC4INCy0LXRgdGDXG4gIHN3aXRjaCAodHJ1ZSkge1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDEwMCAmJiBzdHlsZSA9PT0gJ25vcm1hbCc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnVGhpbicsIHdlaWdodDogMTAwLCBzdHlsZTogJ25vcm1hbCcgfTtcbiAgICBjYXNlIHdlaWdodCA8PSAxMDAgJiYgc3R5bGUgPT09ICdpdGFsaWMnOlxuICAgICAgcmV0dXJuIHsgbmFtZTogJ1RoaW4gSXRhbGljJywgd2VpZ2h0OiAxMDAsIHN0eWxlOiAnaXRhbGljJyB9O1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDIwMCAmJiBzdHlsZSA9PT0gJ25vcm1hbCc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnRXh0cmFMaWdodCcsIHdlaWdodDogMjAwLCBzdHlsZTogJ25vcm1hbCcgfTtcbiAgICBjYXNlIHdlaWdodCA8PSAyMDAgJiYgc3R5bGUgPT09ICdpdGFsaWMnOlxuICAgICAgcmV0dXJuIHsgbmFtZTogJ0V4dHJhTGlnaHQgSXRhbGljJywgd2VpZ2h0OiAyMDAsIHN0eWxlOiAnaXRhbGljJyB9O1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDMwMCAmJiBzdHlsZSA9PT0gJ25vcm1hbCc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnTGlnaHQnLCB3ZWlnaHQ6IDMwMCwgc3R5bGU6ICdub3JtYWwnIH07XG4gICAgY2FzZSB3ZWlnaHQgPD0gMzAwICYmIHN0eWxlID09PSAnaXRhbGljJzpcbiAgICAgIHJldHVybiB7IG5hbWU6ICdMaWdodCBJdGFsaWMnLCB3ZWlnaHQ6IDMwMCwgc3R5bGU6ICdpdGFsaWMnIH07XG4gICAgY2FzZSB3ZWlnaHQgPD0gNDAwICYmIHN0eWxlID09PSAnbm9ybWFsJzpcbiAgICAgIHJldHVybiB7IG5hbWU6ICdSZWd1bGFyJywgd2VpZ2h0OiA0MDAsIHN0eWxlOiAnbm9ybWFsJyB9O1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDQwMCAmJiBzdHlsZSA9PT0gJ2l0YWxpYyc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnSXRhbGljJywgd2VpZ2h0OiA0MDAsIHN0eWxlOiAnaXRhbGljJyB9O1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDUwMCAmJiBzdHlsZSA9PT0gJ25vcm1hbCc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnTWVkaXVtJywgd2VpZ2h0OiA1MDAsIHN0eWxlOiAnbm9ybWFsJyB9O1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDUwMCAmJiBzdHlsZSA9PT0gJ2l0YWxpYyc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnTWVkaXVtIEl0YWxpYycsIHdlaWdodDogNTAwLCBzdHlsZTogJ2l0YWxpYycgfTtcbiAgICBjYXNlIHdlaWdodCA8PSA2MDAgJiYgc3R5bGUgPT09ICdub3JtYWwnOlxuICAgICAgcmV0dXJuIHsgbmFtZTogJ1NlbWlCb2xkJywgd2VpZ2h0OiA2MDAsIHN0eWxlOiAnbm9ybWFsJyB9O1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDYwMCAmJiBzdHlsZSA9PT0gJ2l0YWxpYyc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnU2VtaUJvbGQgSXRhbGljJywgd2VpZ2h0OiA2MDAsIHN0eWxlOiAnaXRhbGljJyB9O1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDcwMCAmJiBzdHlsZSA9PT0gJ25vcm1hbCc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnQm9sZCcsIHdlaWdodDogNzAwLCBzdHlsZTogJ25vcm1hbCcgfTtcbiAgICBjYXNlIHdlaWdodCA8PSA3MDAgJiYgc3R5bGUgPT09ICdpdGFsaWMnOlxuICAgICAgcmV0dXJuIHsgbmFtZTogJ0JvbGQgSXRhbGljJywgd2VpZ2h0OiA3MDAsIHN0eWxlOiAnaXRhbGljJyB9O1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDgwMCAmJiBzdHlsZSA9PT0gJ25vcm1hbCc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnRXh0cmFCb2xkJywgd2VpZ2h0OiA4MDAsIHN0eWxlOiAnbm9ybWFsJyB9O1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDgwMCAmJiBzdHlsZSA9PT0gJ2l0YWxpYyc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnRXh0cmFCb2xkIEl0YWxpYycsIHdlaWdodDogODAwLCBzdHlsZTogJ2l0YWxpYycgfTtcbiAgICBjYXNlIHdlaWdodCA8PSA5MDAgJiYgc3R5bGUgPT09ICdub3JtYWwnOlxuICAgICAgcmV0dXJuIHsgbmFtZTogJ0JsYWNrJywgd2VpZ2h0OiA5MDAsIHN0eWxlOiAnbm9ybWFsJyB9O1xuICAgIGNhc2Ugd2VpZ2h0IDw9IDkwMCAmJiBzdHlsZSA9PT0gJ2l0YWxpYyc6XG4gICAgICByZXR1cm4geyBuYW1lOiAnQmxhY2sgSXRhbGljJywgd2VpZ2h0OiA5MDAsIHN0eWxlOiAnaXRhbGljJyB9O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4geyBuYW1lOiAnUmVndWxhcicsIHdlaWdodDogNDAwLCBzdHlsZTogJ25vcm1hbCcgfTtcbiAgfVxufTtcblxuLyoqXG4gKiDQntC/0YDQtdC00LXQu9GP0LXRgiDRhNC+0YDQvNCw0YIg0YjRgNC40YTRgtCwINC90LAg0L7RgdC90L7QstC1INGA0LDRgdGI0LjRgNC10L3QuNGPINGE0LDQudC70LBcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlTmFtZSAtINCY0LzRjyDRhNCw0LnQu9CwINGI0YDQuNGE0YLQsFxuICogQHJldHVybnMge3N0cmluZ30gLSDQpNC+0YDQvNCw0YIg0YjRgNC40YTRgtCwINC00LvRjyBAZm9udC1mYWNlXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRGb3JtYXRGcm9tRXh0ZW5zaW9uID0gKGZpbGVOYW1lKSA9PiB7XG4gIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGVOYW1lPy50b0xvd2VyQ2FzZSgpLnNwbGl0KCcuJykucG9wKCkgfHwgJyc7XG4gIHN3aXRjaCAoZXh0ZW5zaW9uKSB7XG4gICAgY2FzZSAndHRmJzpcbiAgICAgIHJldHVybiAndHJ1ZXR5cGUnO1xuICAgIGNhc2UgJ290Zic6XG4gICAgICByZXR1cm4gJ29wZW50eXBlJztcbiAgICBjYXNlICd3b2ZmJzpcbiAgICAgIHJldHVybiAnd29mZic7XG4gICAgY2FzZSAnd29mZjInOlxuICAgICAgcmV0dXJuICd3b2ZmMic7XG4gICAgZGVmYXVsdDpcbiAgICAgIC8vINCf0L7Qv9GL0YLQutCwINCy0LXRgNC90YPRgtGMIHRydWV0eXBlINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOLCDQtdGB0LvQuCDRgNCw0YHRiNC40YDQtdC90LjQtSDQvdC10LjQt9Cy0LXRgdGC0L3Qviwg0L3QviDQtdGB0YLRjFxuICAgICAgcmV0dXJuIGV4dGVuc2lvbiA/ICd0cnVldHlwZScgOiAnJztcbiAgfVxufTtcblxuLyoqXG4gKiDQn9C+0LvRg9GH0LDQtdGCINGH0LjRgtCw0LXQvNC+0LUg0LjQvNGPINC00LvRjyDRgtC10LPQsCDQvtGB0Lgg0LLQsNGA0LjQsNGC0LjQstC90L7Qs9C+INGI0YDQuNGE0YLQsFxuICogQHBhcmFtIHtzdHJpbmd9IHRhZyAtINCi0LXQsyDQvtGB0LggKNC90LDQv9GA0LjQvNC10YAsICd3Z2h0JywgJ3dkdGgnKVxuICogQHJldHVybnMge3N0cmluZ30gLSDQp9C40YLQsNC10LzQvtC1INC40LzRjyAo0L3QsNC/0YDQuNC80LXRgCwgJ1dlaWdodCcsICdXaWR0aCcpXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRBeGlzTmFtZSA9ICh0YWcpID0+IHtcbiAgLy8gLi4uICjQvtGB0YLQsNC70YzQvdC+0Lkg0LrQvtC0KVxufTsgIl0sIm5hbWVzIjpbIlBSRVNFVF9TVFlMRVMiLCJuYW1lIiwid2VpZ2h0Iiwic3R5bGUiLCJmaW5kU3R5bGVJbmZvQnlXZWlnaHRBbmRTdHlsZSIsImdldEZvcm1hdEZyb21FeHRlbnNpb24iLCJmaWxlTmFtZSIsImV4dGVuc2lvbiIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJwb3AiLCJnZXRBeGlzTmFtZSIsInRhZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/fontUtilsCommon.js\n");

/***/ }),

/***/ "./utils/glyphUtils.js":
/*!*****************************!*\
  !*** ./utils/glyphUtils.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractBasicGlyphData: () => (/* binding */ extractBasicGlyphData),\n/* harmony export */   getAllGlyphsFromFont: () => (/* binding */ getAllGlyphsFromFont),\n/* harmony export */   getCharUnicode: () => (/* binding */ getCharUnicode),\n/* harmony export */   getGlyphAlternatives: () => (/* binding */ getGlyphAlternatives),\n/* harmony export */   getGlyphNameFromFont: () => (/* binding */ getGlyphNameFromFont),\n/* harmony export */   getLigatures: () => (/* binding */ getLigatures),\n/* harmony export */   getSimpleCharName: () => (/* binding */ getSimpleCharName)\n/* harmony export */ });\n// Функции для работы с глифами, лигатурами, альтернативными символами шрифта\n// import { getCharUnicode } from './fontUtilsCommon'; // Удаляем этот лишний импорт\n// Вспомогательные функции для работы с глифами и структурами opentype.js\n// --- НОВАЯ ОБЩАЯ ФУНКЦИЯ ---\n/**\n * Извлекает базовые данные глифов из объекта шрифта opentype.js\n * Эта функция будет использоваться как в основном потоке (fallback), так и в веб-воркере.\n * \n * @param {object} font - Распарсенный объект шрифта opentype.js\n * @param {string} [source='unknown'] - Источник вызова ('worker' или 'main') для логирования\n * @returns {object|null} - Объект с данными глифов: { allGlyphs: Array, names: Object, unicodes: Object, advanceWidths: Object, errors: Array }\n *                   или null в случае ошибки.\n */ const extractBasicGlyphData = (font, source = \"unknown\")=>{\n    if (!font || !font.glyphs || typeof font.glyphs.get !== \"function\") {\n        console.error(`[extractBasicGlyphData - ${source}] Invalid font object provided.`);\n        return null;\n    }\n    const allGlyphs = [];\n    const glyphNames = {};\n    const glyphUnicodes = {};\n    const advanceWidths = {};\n    const errors = []; // Собираем ошибки\n    const numGlyphs = font.numGlyphs;\n    // console.log(`[extractBasicGlyphData - ${source}] Processing ${numGlyphs} glyphs.`);\n    for(let i = 0; i < numGlyphs; i++){\n        try {\n            const glyph = font.glyphs.get(i);\n            // Пропускаем невалидные глифы и .notdef\n            if (!glyph || glyph.name === \".notdef\") {\n                continue;\n            }\n            // Основная информация\n            const glyphInfo = {\n                id: glyph.index,\n                name: glyph.name || `glyph_${glyph.index}`,\n                unicode: glyph.unicode || null,\n                unicodes: glyph.unicodes || [],\n                advanceWidth: Math.round(glyph.advanceWidth) || 0\n            };\n            allGlyphs.push(glyphInfo);\n            // Сохраняем имя и Unicode для быстрого доступа\n            glyphNames[glyphInfo.id] = glyphInfo.name;\n            if (glyphInfo.unicode) {\n                glyphUnicodes[glyphInfo.id] = `U+${glyphInfo.unicode.toString(16).toUpperCase().padStart(4, \"0\")}`;\n            }\n            advanceWidths[glyphInfo.id] = glyphInfo.advanceWidth;\n        } catch (glyphError) {\n            // Логируем ошибку обработки конкретного глифа\n            console.warn(`[extractBasicGlyphData - ${source}] Error processing glyph index ${i}:`, glyphError);\n            errors.push({\n                index: i,\n                message: glyphError.message\n            }); // Сохраняем ошибку\n        }\n    }\n    // console.log(`[extractBasicGlyphData - ${source}] Successfully extracted ${allGlyphs.length} glyphs.`);\n    return {\n        allGlyphs: allGlyphs,\n        names: glyphNames,\n        unicodes: glyphUnicodes,\n        advanceWidths: advanceWidths,\n        errors: errors // Возвращаем ошибки\n    };\n};\n// --- КОНЕЦ НОВОЙ ОБЩЕЙ ФУНКЦИИ ---\n/**\n * Получает имя глифа из шрифта с помощью opentype.js\n * @param {Object} font - Объект шрифта из opentype.js\n * @param {string} char - Символ для поиска имени глифа\n * @returns {string|null} - Имя глифа из шрифта или null, если не найдено или ошибка\n */ const getGlyphNameFromFont = (font, char)=>{\n    if (!font || typeof font.charToGlyph !== \"function\" || !char || typeof char !== \"string\") {\n        return null;\n    }\n    try {\n        const glyph = font.charToGlyph(char);\n        return glyph ? glyph.name : null;\n    } catch (error) {\n        // console.error(`Error getting glyph name for char \"${char}\":`, error);\n        return null;\n    }\n};\n/**\n * Получает упрощенное название символа\n * @param {string} char - Символ для получения названия\n * @returns {string} - Упрощенное название символа\n */ const getSimpleCharName = (char)=>{\n    if (!char || typeof char !== \"string\" || !char.length) {\n        return \"unknown\";\n    }\n    // Используем специальный словарь для латинских букв\n    const latinNames = {\n        \"a\": \"a (lowercase)\",\n        \"b\": \"b (lowercase)\",\n        \"c\": \"c (lowercase)\",\n        \"d\": \"d (lowercase)\",\n        \"e\": \"e (lowercase)\",\n        \"f\": \"f (lowercase)\",\n        \"g\": \"g (lowercase)\",\n        \"h\": \"h (lowercase)\",\n        \"i\": \"i (lowercase)\",\n        \"j\": \"j (lowercase)\",\n        \"k\": \"k (lowercase)\",\n        \"l\": \"l (lowercase)\",\n        \"m\": \"m (lowercase)\",\n        \"n\": \"n (lowercase)\",\n        \"o\": \"o (lowercase)\",\n        \"p\": \"p (lowercase)\",\n        \"q\": \"q (lowercase)\",\n        \"r\": \"r (lowercase)\",\n        \"s\": \"s (lowercase)\",\n        \"t\": \"t (lowercase)\",\n        \"u\": \"u (lowercase)\",\n        \"v\": \"v (lowercase)\",\n        \"w\": \"w (lowercase)\",\n        \"x\": \"x (lowercase)\",\n        \"y\": \"y (lowercase)\",\n        \"z\": \"z (lowercase)\",\n        \"A\": \"A (uppercase)\",\n        \"B\": \"B (uppercase)\",\n        \"C\": \"C (uppercase)\",\n        \"D\": \"D (uppercase)\",\n        \"E\": \"E (uppercase)\",\n        \"F\": \"F (uppercase)\",\n        \"G\": \"G (uppercase)\",\n        \"H\": \"H (uppercase)\",\n        \"I\": \"I (uppercase)\",\n        \"J\": \"J (uppercase)\",\n        \"K\": \"K (uppercase)\",\n        \"L\": \"L (uppercase)\",\n        \"M\": \"M (uppercase)\",\n        \"N\": \"N (uppercase)\",\n        \"O\": \"O (uppercase)\",\n        \"P\": \"P (uppercase)\",\n        \"Q\": \"Q (uppercase)\",\n        \"R\": \"R (uppercase)\",\n        \"S\": \"S (uppercase)\",\n        \"T\": \"T (uppercase)\",\n        \"U\": \"U (uppercase)\",\n        \"V\": \"V (uppercase)\",\n        \"W\": \"W (uppercase)\",\n        \"X\": \"X (uppercase)\",\n        \"Y\": \"Y (uppercase)\",\n        \"Z\": \"Z (uppercase)\",\n        \"0\": \"zero\",\n        \"1\": \"one\",\n        \"2\": \"two\",\n        \"3\": \"three\",\n        \"4\": \"four\",\n        \"5\": \"five\",\n        \"6\": \"six\",\n        \"7\": \"seven\",\n        \"8\": \"eight\",\n        \"9\": \"nine\",\n        \".\": \"period\",\n        \",\": \"comma\",\n        \":\": \"colon\",\n        \";\": \"semicolon\",\n        \"-\": \"hyphen\",\n        \"_\": \"underscore\",\n        \"!\": \"exclamation\",\n        \"?\": \"question\",\n        '\"': \"quotation mark\",\n        \"'\": \"apostrophe\",\n        \"(\": \"left parenthesis\",\n        \")\": \"right parenthesis\",\n        \"[\": \"left bracket\",\n        \"]\": \"right bracket\",\n        \"{\": \"left brace\",\n        \"}\": \"right brace\",\n        \"/\": \"slash\",\n        \"\\\\\": \"backslash\",\n        \"|\": \"vertical bar\",\n        \"@\": \"at sign\",\n        \"#\": \"number sign\",\n        \"$\": \"dollar sign\",\n        \"%\": \"percent\",\n        \"^\": \"caret\",\n        \"&\": \"ampersand\",\n        \"*\": \"asterisk\",\n        \"+\": \"plus\",\n        \"=\": \"equals\",\n        \"<\": \"less than\",\n        \">\": \"greater than\",\n        \"~\": \"tilde\",\n        \"`\": \"grave accent\",\n        \"№\": \"numero\",\n        \"€\": \"euro sign\",\n        \"\\xa3\": \"pound sign\",\n        \"\\xa5\": \"yen sign\",\n        \"\\xa9\": \"copyright\",\n        \"\\xae\": \"registered\",\n        \"™\": \"trademark\",\n        \"\\xb0\": \"degree\",\n        \"\\xb1\": \"plus-minus\",\n        \"\\xd7\": \"multiply\",\n        \"\\xf7\": \"divide\",\n        \"≠\": \"not equal\",\n        \"≈\": \"approximately equal\",\n        \" \": \"space\"\n    };\n    // Используем словарь для кириллицы\n    const cyrillicNames = {\n        \"А\": \"А (заглавная)\",\n        \"Б\": \"Б (заглавная)\",\n        \"В\": \"В (заглавная)\",\n        \"Г\": \"Г (заглавная)\",\n        \"Д\": \"Д (заглавная)\",\n        \"Е\": \"Е (заглавная)\",\n        \"Ё\": \"Ё (заглавная)\",\n        \"Ж\": \"Ж (заглавная)\",\n        \"З\": \"З (заглавная)\",\n        \"И\": \"И (заглавная)\",\n        \"Й\": \"Й (заглавная)\",\n        \"К\": \"К (заглавная)\",\n        \"Л\": \"Л (заглавная)\",\n        \"М\": \"М (заглавная)\",\n        \"Н\": \"Н (заглавная)\",\n        \"О\": \"О (заглавная)\",\n        \"П\": \"П (заглавная)\",\n        \"Р\": \"Р (заглавная)\",\n        \"С\": \"С (заглавная)\",\n        \"Т\": \"Т (заглавная)\",\n        \"У\": \"У (заглавная)\",\n        \"Ф\": \"Ф (заглавная)\",\n        \"Х\": \"Х (заглавная)\",\n        \"Ц\": \"Ц (заглавная)\",\n        \"Ч\": \"Ч (заглавная)\",\n        \"Ш\": \"Ш (заглавная)\",\n        \"Щ\": \"Щ (заглавная)\",\n        \"Ъ\": \"Ъ (заглавная)\",\n        \"Ы\": \"Ы (заглавная)\",\n        \"Ь\": \"Ь (заглавная)\",\n        \"Э\": \"Э (заглавная)\",\n        \"Ю\": \"Ю (заглавная)\",\n        \"Я\": \"Я (заглавная)\",\n        \"а\": \"а (строчная)\",\n        \"б\": \"б (строчная)\",\n        \"в\": \"в (строчная)\",\n        \"г\": \"г (строчная)\",\n        \"д\": \"д (строчная)\",\n        \"е\": \"е (строчная)\",\n        \"ё\": \"ё (строчная)\",\n        \"ж\": \"ж (строчная)\",\n        \"з\": \"з (строчная)\",\n        \"и\": \"и (строчная)\",\n        \"й\": \"й (строчная)\",\n        \"к\": \"к (строчная)\",\n        \"л\": \"л (строчная)\",\n        \"м\": \"м (строчная)\",\n        \"н\": \"н (строчная)\",\n        \"о\": \"о (строчная)\",\n        \"п\": \"п (строчная)\",\n        \"р\": \"р (строчная)\",\n        \"с\": \"с (строчная)\",\n        \"т\": \"т (строчная)\",\n        \"у\": \"у (строчная)\",\n        \"ф\": \"ф (строчная)\",\n        \"х\": \"х (строчная)\",\n        \"ц\": \"ц (строчная)\",\n        \"ч\": \"ч (строчная)\",\n        \"ш\": \"ш (строчная)\",\n        \"щ\": \"щ (строчная)\",\n        \"ъ\": \"ъ (строчная)\",\n        \"ы\": \"ы (строчная)\",\n        \"ь\": \"ь (строчная)\",\n        \"э\": \"э (строчная)\",\n        \"ю\": \"ю (строчная)\",\n        \"я\": \"я (строчная)\"\n    };\n    // Сначала проверяем в словарях\n    if (latinNames[char]) return latinNames[char];\n    if (cyrillicNames[char]) return cyrillicNames[char];\n    // Если не нашли, пытаемся определить категорию символа по Unicode блоку\n    try {\n        const code = char.codePointAt(0);\n        if (isNaN(code)) return \"unknown\";\n        if (code >= 0x2600 && code <= 0x26FF) return \"Miscellaneous Symbols\";\n        if (code >= 0x2700 && code <= 0x27BF) return \"Dingbats\";\n        if (code >= 0x1F300 && code <= 0x1F5FF) return \"Miscellaneous Symbols and Pictographs\";\n        if (code >= 0x1F600 && code <= 0x1F64F) return \"Emoticons\";\n        if (code >= 0x1F680 && code <= 0x1F6FF) return \"Transport and Map Symbols\";\n        if (code >= 0x1F700 && code <= 0x1F77F) return \"Alchemical Symbols\";\n    // Добавить другие блоки по необходимости\n    } catch (error) {\n        // Ошибка при получении codePoint (например, для суррогатных пар)\n        return \"unknown\";\n    }\n    // Если не смогли классифицировать, возвращаем generic name\n    return \"character\";\n};\n/**\n * Получает все доступные глифы из шрифта\n * @param {Object} font - Объект шрифта из opentype.js\n * @returns {Array<{character: string, unicode: string, name: string, index: number}>} - Массив объектов глифов\n */ const getAllGlyphsFromFont = (font)=>{\n    if (!font || !font.glyphs || typeof font.glyphs.get !== \"function\" || typeof font.numGlyphs !== \"number\") {\n        return [];\n    }\n    try {\n        const glyphs = [];\n        const numGlyphs = font.numGlyphs;\n        for(let i = 0; i < numGlyphs; i++){\n            const glyph = font.glyphs.get(i);\n            // Пропускаем .notdef и глифы без Unicode\n            if (!glyph || glyph.name === \".notdef\" || !glyph.unicode) continue;\n            // Получаем символ (может быть несколько Unicode для одного глифа)\n            // Берем первый Unicode для простоты\n            const charCode = glyph.unicode;\n            const char = String.fromCodePoint(charCode);\n            // Добавляем только уникальные символы (не глифы)\n            if (!glyphs.some((g)=>g.character === char)) {\n                glyphs.push({\n                    character: char,\n                    unicode: getCharUnicode(char),\n                    name: glyph.name || \"\",\n                    index: i // Сохраняем индекс глифа\n                });\n            }\n        }\n        // Можно добавить сортировку по Unicode\n        glyphs.sort((a, b)=>a.unicode.localeCompare(b.unicode));\n        return glyphs;\n    } catch (error) {\n        console.error(\"Error getting all glyphs from font:\", error);\n        return [];\n    }\n};\n/**\n * Получает альтернативные формы глифа (если они есть в шрифте)\n * Реализация требует глубокого понимания таблицы GSUB 'aalt' и других фич.\n * Эта функция является заглушкой или требует значительной доработки.\n * @param {Object} font - Объект шрифта из opentype.js\n * @param {string} char - Символ для поиска альтернативных форм\n * @returns {Array<{name: string, unicode: string, index: number}>} - Массив объектов альтернативных глифов\n */ const getGlyphAlternatives = (font, char)=>{\n    if (!font || !char || !font.tables || !font.tables.gsub || !font.glyphs) return [];\n    try {\n        const alternatives = [];\n        const mainGlyph = font.charToGlyph(char);\n        if (!mainGlyph || !mainGlyph.index) return [];\n        const mainGlyphIndex = mainGlyph.index;\n        const gsub = font.tables.gsub;\n        // Поиск альтернатив в таблицах GSUB (упрощенный пример для lookupType 3)\n        if (gsub.lookups) {\n            for (const lookup of gsub.lookups){\n                // LookupType 3: Alternate Substitution Subtable\n                if (lookup.lookupType === 3) {\n                    for (const subtable of lookup.subtables){\n                        if (subtable.coverage && subtable.coverage.glyphs) {\n                            const coverageIndex = subtable.coverage.glyphs.indexOf(mainGlyphIndex);\n                            if (coverageIndex !== -1 && subtable.alternateSets && subtable.alternateSets[coverageIndex]) {\n                                const alternateIndices = subtable.alternateSets[coverageIndex];\n                                alternateIndices.forEach((altIndex)=>{\n                                    const altGlyph = font.glyphs.get(altIndex);\n                                    if (altGlyph) {\n                                        alternatives.push({\n                                            name: altGlyph.name || \"\",\n                                            unicode: altGlyph.unicode ? getCharUnicode(String.fromCodePoint(altGlyph.unicode)) : \"\",\n                                            index: altIndex\n                                        });\n                                    }\n                                });\n                            }\n                        }\n                    }\n                }\n            // Можно добавить поддержку других lookupTypes (e.g., lookupType 1)\n            }\n        }\n        // Удаляем дубликаты и основной глиф из альтернатив\n        const uniqueAlternatives = alternatives.filter((alt, index, self)=>alt.index !== mainGlyphIndex && index === self.findIndex((t)=>t.index === alt.index));\n        return uniqueAlternatives;\n    } catch (error) {\n        console.error(\"Error getting glyph alternatives:\", error);\n        return [];\n    }\n};\n/**\n * Получает лигатуры для последовательности символов (если они есть в шрифте)\n * Реализация требует глубокого понимания таблицы GSUB 'liga', 'clig' и др.\n * Эта функция является заглушкой или требует значительной доработки.\n * @param {Object} font - Объект шрифта из opentype.js\n * @param {string} chars - Последовательность символов для поиска лигатур\n * @returns {Array<{original: string, ligature: string, unicode: string}>} - Массив объектов лигатур\n */ const getLigatures = (font, chars)=>{\n    if (!font || !chars || chars.length < 2 || !font.tables || !font.tables.gsub) return [];\n    try {\n        const ligatures = [];\n        // const gsub = font.tables.gsub;\n        // TODO: Реализовать сложную логику поиска лигатур в GSUB таблицах (lookupType 4)\n        // Это требует рекурсивного обхода или сложного сопоставления последовательностей глифов.\n        // Добавляем базовые лигатуры для распространенных сочетаний как запасной вариант\n        const commonLigatures = {\n            \"ff\": \"ﬀ\",\n            \"fi\": \"ﬁ\",\n            \"fl\": \"ﬂ\",\n            \"ffi\": \"ﬃ\",\n            \"ffl\": \"ﬄ\"\n        };\n        if (commonLigatures[chars]) {\n            const ligChar = commonLigatures[chars];\n            ligatures.push({\n                original: chars,\n                ligature: ligChar,\n                unicode: getCharUnicode(ligChar)\n            });\n        }\n        return ligatures;\n    } catch (error) {\n        console.error(\"Error getting ligatures:\", error);\n        return [];\n    }\n};\n// Добавляем функцию getCharUnicode, перенесенную из fontUtilsCommon.js\n/**\n * Получает Unicode-код символа в формате \"U+XXXX\"\n * @param {string} char - Символ для получения Unicode\n * @returns {string} - Unicode-код в формате \"U+XXXX\"\n */ const getCharUnicode = (char)=>{\n    if (!char || typeof char !== \"string\" || !char.length) {\n        return \"U+????\";\n    }\n    try {\n        const codePoint = char.codePointAt(0);\n        // Проверка на NaN, чтобы избежать \"U+NAN\"\n        if (isNaN(codePoint)) {\n            return \"U+????\";\n        }\n        return `U+${codePoint.toString(16).toUpperCase().padStart(4, \"0\")}`;\n    } catch (error) {\n        return \"U+????\";\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsT0FBTyxFQUFFO0lBQ1g7QUFDRixFQUFFO0FBRUYsdUVBQXVFO0FBQ3ZFOzs7O0NBSUMsR0FDTSxNQUFNMkMsaUJBQWlCLENBQUNoQjtJQUM3QixJQUFJLENBQUNBLFFBQVEsT0FBT0EsU0FBUyxZQUFZLENBQUNBLEtBQUtHLE1BQU0sRUFBRTtRQUNyRCxPQUFPO0lBQ1Q7SUFFQSxJQUFJO1FBQ0YsTUFBTWtELFlBQVlyRCxLQUFLTyxXQUFXLENBQUM7UUFDbkMsMENBQTBDO1FBQzFDLElBQUlDLE1BQU02QyxZQUFZO1lBQ2xCLE9BQU87UUFDWDtRQUNBLE9BQU8sQ0FBQyxFQUFFLEVBQUVBLFVBQVU3RCxRQUFRLENBQUMsSUFBSUMsV0FBVyxHQUFHQyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUM7SUFDckUsRUFBRSxPQUFPckIsT0FBTztRQUNkLE9BQU87SUFDVDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb250LWdhdW50bGV0LWNsb25lLy4vdXRpbHMvZ2x5cGhVdGlscy5qcz8wOTA0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vINCk0YPQvdC60YbQuNC4INC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0LPQu9C40YTQsNC80LgsINC70LjQs9Cw0YLRg9GA0LDQvNC4LCDQsNC70YzRgtC10YDQvdCw0YLQuNCy0L3Ri9C80Lgg0YHQuNC80LLQvtC70LDQvNC4INGI0YDQuNGE0YLQsFxuLy8gaW1wb3J0IHsgZ2V0Q2hhclVuaWNvZGUgfSBmcm9tICcuL2ZvbnRVdGlsc0NvbW1vbic7IC8vINCj0LTQsNC70Y/QtdC8INGN0YLQvtGCINC70LjRiNC90LjQuSDQuNC80L/QvtGA0YJcblxuLy8g0JLRgdC/0L7QvNC+0LPQsNGC0LXQu9GM0L3Ri9C1INGE0YPQvdC60YbQuNC4INC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0LPQu9C40YTQsNC80Lgg0Lgg0YHRgtGA0YPQutGC0YPRgNCw0LzQuCBvcGVudHlwZS5qc1xuXG4vLyAtLS0g0J3QntCS0JDQryDQntCR0KnQkNCvINCk0KPQndCa0KbQmNCvIC0tLVxuLyoqXG4gKiDQmNC30LLQu9C10LrQsNC10YIg0LHQsNC30L7QstGL0LUg0LTQsNC90L3Ri9C1INCz0LvQuNGE0L7QsiDQuNC3INC+0LHRitC10LrRgtCwINGI0YDQuNGE0YLQsCBvcGVudHlwZS5qc1xuICog0K3RgtCwINGE0YPQvdC60YbQuNGPINCx0YPQtNC10YIg0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGM0YHRjyDQutCw0Log0LIg0L7RgdC90L7QstC90L7QvCDQv9C+0YLQvtC60LUgKGZhbGxiYWNrKSwg0YLQsNC6INC4INCyINCy0LXQsS3QstC+0YDQutC10YDQtS5cbiAqIFxuICogQHBhcmFtIHtvYmplY3R9IGZvbnQgLSDQoNCw0YHQv9Cw0YDRgdC10L3QvdGL0Lkg0L7QsdGK0LXQutGCINGI0YDQuNGE0YLQsCBvcGVudHlwZS5qc1xuICogQHBhcmFtIHtzdHJpbmd9IFtzb3VyY2U9J3Vua25vd24nXSAtINCY0YHRgtC+0YfQvdC40Log0LLRi9C30L7QstCwICgnd29ya2VyJyDQuNC70LggJ21haW4nKSDQtNC70Y8g0LvQvtCz0LjRgNC+0LLQsNC90LjRj1xuICogQHJldHVybnMge29iamVjdHxudWxsfSAtINCe0LHRitC10LrRgiDRgSDQtNCw0L3QvdGL0LzQuCDQs9C70LjRhNC+0LI6IHsgYWxsR2x5cGhzOiBBcnJheSwgbmFtZXM6IE9iamVjdCwgdW5pY29kZXM6IE9iamVjdCwgYWR2YW5jZVdpZHRoczogT2JqZWN0LCBlcnJvcnM6IEFycmF5IH1cbiAqICAgICAgICAgICAgICAgICAgINC40LvQuCBudWxsINCyINGB0LvRg9GH0LDQtSDQvtGI0LjQsdC60LguXG4gKi9cbmV4cG9ydCBjb25zdCBleHRyYWN0QmFzaWNHbHlwaERhdGEgPSAoZm9udCwgc291cmNlID0gJ3Vua25vd24nKSA9PiB7XG4gIGlmICghZm9udCB8fCAhZm9udC5nbHlwaHMgfHwgdHlwZW9mIGZvbnQuZ2x5cGhzLmdldCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnNvbGUuZXJyb3IoYFtleHRyYWN0QmFzaWNHbHlwaERhdGEgLSAke3NvdXJjZX1dIEludmFsaWQgZm9udCBvYmplY3QgcHJvdmlkZWQuYCk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBhbGxHbHlwaHMgPSBbXTtcbiAgY29uc3QgZ2x5cGhOYW1lcyA9IHt9O1xuICBjb25zdCBnbHlwaFVuaWNvZGVzID0ge307XG4gIGNvbnN0IGFkdmFuY2VXaWR0aHMgPSB7fTtcbiAgY29uc3QgZXJyb3JzID0gW107IC8vINCh0L7QsdC40YDQsNC10Lwg0L7RiNC40LHQutC4XG4gIGNvbnN0IG51bUdseXBocyA9IGZvbnQubnVtR2x5cGhzO1xuXG4gIC8vIGNvbnNvbGUubG9nKGBbZXh0cmFjdEJhc2ljR2x5cGhEYXRhIC0gJHtzb3VyY2V9XSBQcm9jZXNzaW5nICR7bnVtR2x5cGhzfSBnbHlwaHMuYCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1HbHlwaHM7IGkrKykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBnbHlwaCA9IGZvbnQuZ2x5cGhzLmdldChpKTtcblxuICAgICAgLy8g0J/RgNC+0L/Rg9GB0LrQsNC10Lwg0L3QtdCy0LDQu9C40LTQvdGL0LUg0LPQu9C40YTRiyDQuCAubm90ZGVmXG4gICAgICBpZiAoIWdseXBoIHx8IGdseXBoLm5hbWUgPT09ICcubm90ZGVmJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8g0J7RgdC90L7QstC90LDRjyDQuNC90YTQvtGA0LzQsNGG0LjRj1xuICAgICAgY29uc3QgZ2x5cGhJbmZvID0ge1xuICAgICAgICBpZDogZ2x5cGguaW5kZXgsIFxuICAgICAgICBuYW1lOiBnbHlwaC5uYW1lIHx8IGBnbHlwaF8ke2dseXBoLmluZGV4fWAsXG4gICAgICAgIHVuaWNvZGU6IGdseXBoLnVuaWNvZGUgfHwgbnVsbCxcbiAgICAgICAgdW5pY29kZXM6IGdseXBoLnVuaWNvZGVzIHx8IFtdLFxuICAgICAgICBhZHZhbmNlV2lkdGg6IE1hdGgucm91bmQoZ2x5cGguYWR2YW5jZVdpZHRoKSB8fCAwLFxuICAgICAgfTtcblxuICAgICAgYWxsR2x5cGhzLnB1c2goZ2x5cGhJbmZvKTtcblxuICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC40LzRjyDQuCBVbmljb2RlINC00LvRjyDQsdGL0YHRgtGA0L7Qs9C+INC00L7RgdGC0YPQv9CwXG4gICAgICBnbHlwaE5hbWVzW2dseXBoSW5mby5pZF0gPSBnbHlwaEluZm8ubmFtZTtcbiAgICAgIGlmIChnbHlwaEluZm8udW5pY29kZSkge1xuICAgICAgICBnbHlwaFVuaWNvZGVzW2dseXBoSW5mby5pZF0gPSBgVSske2dseXBoSW5mby51bmljb2RlLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLnBhZFN0YXJ0KDQsICcwJyl9YDtcbiAgICAgIH1cbiAgICAgIGFkdmFuY2VXaWR0aHNbZ2x5cGhJbmZvLmlkXSA9IGdseXBoSW5mby5hZHZhbmNlV2lkdGg7XG5cbiAgICB9IGNhdGNoIChnbHlwaEVycm9yKSB7XG4gICAgICAvLyDQm9C+0LPQuNGA0YPQtdC8INC+0YjQuNCx0LrRgyDQvtCx0YDQsNCx0L7RgtC60Lgg0LrQvtC90LrRgNC10YLQvdC+0LPQviDQs9C70LjRhNCwXG4gICAgICBjb25zb2xlLndhcm4oYFtleHRyYWN0QmFzaWNHbHlwaERhdGEgLSAke3NvdXJjZX1dIEVycm9yIHByb2Nlc3NpbmcgZ2x5cGggaW5kZXggJHtpfTpgLCBnbHlwaEVycm9yKTtcbiAgICAgIGVycm9ycy5wdXNoKHsgaW5kZXg6IGksIG1lc3NhZ2U6IGdseXBoRXJyb3IubWVzc2FnZSB9KTsgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC+0YjQuNCx0LrRg1xuICAgIH1cbiAgfVxuXG4gIC8vIGNvbnNvbGUubG9nKGBbZXh0cmFjdEJhc2ljR2x5cGhEYXRhIC0gJHtzb3VyY2V9XSBTdWNjZXNzZnVsbHkgZXh0cmFjdGVkICR7YWxsR2x5cGhzLmxlbmd0aH0gZ2x5cGhzLmApO1xuXG4gIHJldHVybiB7XG4gICAgYWxsR2x5cGhzOiBhbGxHbHlwaHMsXG4gICAgbmFtZXM6IGdseXBoTmFtZXMsXG4gICAgdW5pY29kZXM6IGdseXBoVW5pY29kZXMsXG4gICAgYWR2YW5jZVdpZHRoczogYWR2YW5jZVdpZHRocyxcbiAgICBlcnJvcnM6IGVycm9ycyAvLyDQktC+0LfQstGA0LDRidCw0LXQvCDQvtGI0LjQsdC60LhcbiAgfTtcbn07XG4vLyAtLS0g0JrQntCd0JXQpiDQndCe0JLQntCZINCe0JHQqdCV0Jkg0KTQo9Cd0JrQptCY0JggLS0tXG5cbi8qKlxuICog0J/QvtC70YPRh9Cw0LXRgiDQuNC80Y8g0LPQu9C40YTQsCDQuNC3INGI0YDQuNGE0YLQsCDRgSDQv9C+0LzQvtGJ0YzRjiBvcGVudHlwZS5qc1xuICogQHBhcmFtIHtPYmplY3R9IGZvbnQgLSDQntCx0YrQtdC60YIg0YjRgNC40YTRgtCwINC40Lcgb3BlbnR5cGUuanNcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyIC0g0KHQuNC80LLQvtC7INC00LvRjyDQv9C+0LjRgdC60LAg0LjQvNC10L3QuCDQs9C70LjRhNCwXG4gKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9IC0g0JjQvNGPINCz0LvQuNGE0LAg0LjQtyDRiNGA0LjRhNGC0LAg0LjQu9C4IG51bGwsINC10YHQu9C4INC90LUg0L3QsNC50LTQtdC90L4g0LjQu9C4INC+0YjQuNCx0LrQsFxuICovXG5leHBvcnQgY29uc3QgZ2V0R2x5cGhOYW1lRnJvbUZvbnQgPSAoZm9udCwgY2hhcikgPT4ge1xuICBpZiAoIWZvbnQgfHwgdHlwZW9mIGZvbnQuY2hhclRvR2x5cGggIT09ICdmdW5jdGlvbicgfHwgIWNoYXIgfHwgdHlwZW9mIGNoYXIgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGdseXBoID0gZm9udC5jaGFyVG9HbHlwaChjaGFyKTtcbiAgICByZXR1cm4gZ2x5cGggPyBnbHlwaC5uYW1lIDogbnVsbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBjb25zb2xlLmVycm9yKGBFcnJvciBnZXR0aW5nIGdseXBoIG5hbWUgZm9yIGNoYXIgXCIke2NoYXJ9XCI6YCwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqINCf0L7Qu9GD0YfQsNC10YIg0YPQv9GA0L7RidC10L3QvdC+0LUg0L3QsNC30LLQsNC90LjQtSDRgdC40LzQstC+0LvQsFxuICogQHBhcmFtIHtzdHJpbmd9IGNoYXIgLSDQodC40LzQstC+0Lsg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDQvdCw0LfQstCw0L3QuNGPXG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtINCj0L/RgNC+0YnQtdC90L3QvtC1INC90LDQt9Cy0LDQvdC40LUg0YHQuNC80LLQvtC70LBcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFNpbXBsZUNoYXJOYW1lID0gKGNoYXIpID0+IHtcbiAgaWYgKCFjaGFyIHx8IHR5cGVvZiBjaGFyICE9PSAnc3RyaW5nJyB8fCAhY2hhci5sZW5ndGgpIHtcbiAgICByZXR1cm4gJ3Vua25vd24nO1xuICB9XG5cbiAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0YHQv9C10YbQuNCw0LvRjNC90YvQuSDRgdC70L7QstCw0YDRjCDQtNC70Y8g0LvQsNGC0LjQvdGB0LrQuNGFINCx0YPQutCyXG4gIGNvbnN0IGxhdGluTmFtZXMgPSB7XG4gICAgJ2EnOiAnYSAobG93ZXJjYXNlKScsICdiJzogJ2IgKGxvd2VyY2FzZSknLCAnYyc6ICdjIChsb3dlcmNhc2UpJywgJ2QnOiAnZCAobG93ZXJjYXNlKScsXG4gICAgJ2UnOiAnZSAobG93ZXJjYXNlKScsICdmJzogJ2YgKGxvd2VyY2FzZSknLCAnZyc6ICdnIChsb3dlcmNhc2UpJywgJ2gnOiAnaCAobG93ZXJjYXNlKScsXG4gICAgJ2knOiAnaSAobG93ZXJjYXNlKScsICdqJzogJ2ogKGxvd2VyY2FzZSknLCAnayc6ICdrIChsb3dlcmNhc2UpJywgJ2wnOiAnbCAobG93ZXJjYXNlKScsXG4gICAgJ20nOiAnbSAobG93ZXJjYXNlKScsICduJzogJ24gKGxvd2VyY2FzZSknLCAnbyc6ICdvIChsb3dlcmNhc2UpJywgJ3AnOiAncCAobG93ZXJjYXNlKScsXG4gICAgJ3EnOiAncSAobG93ZXJjYXNlKScsICdyJzogJ3IgKGxvd2VyY2FzZSknLCAncyc6ICdzIChsb3dlcmNhc2UpJywgJ3QnOiAndCAobG93ZXJjYXNlKScsXG4gICAgJ3UnOiAndSAobG93ZXJjYXNlKScsICd2JzogJ3YgKGxvd2VyY2FzZSknLCAndyc6ICd3IChsb3dlcmNhc2UpJywgJ3gnOiAneCAobG93ZXJjYXNlKScsXG4gICAgJ3knOiAneSAobG93ZXJjYXNlKScsICd6JzogJ3ogKGxvd2VyY2FzZSknLFxuICAgICdBJzogJ0EgKHVwcGVyY2FzZSknLCAnQic6ICdCICh1cHBlcmNhc2UpJywgJ0MnOiAnQyAodXBwZXJjYXNlKScsICdEJzogJ0QgKHVwcGVyY2FzZSknLFxuICAgICdFJzogJ0UgKHVwcGVyY2FzZSknLCAnRic6ICdGICh1cHBlcmNhc2UpJywgJ0cnOiAnRyAodXBwZXJjYXNlKScsICdIJzogJ0ggKHVwcGVyY2FzZSknLFxuICAgICdJJzogJ0kgKHVwcGVyY2FzZSknLCAnSic6ICdKICh1cHBlcmNhc2UpJywgJ0snOiAnSyAodXBwZXJjYXNlKScsICdMJzogJ0wgKHVwcGVyY2FzZSknLFxuICAgICdNJzogJ00gKHVwcGVyY2FzZSknLCAnTic6ICdOICh1cHBlcmNhc2UpJywgJ08nOiAnTyAodXBwZXJjYXNlKScsICdQJzogJ1AgKHVwcGVyY2FzZSknLFxuICAgICdRJzogJ1EgKHVwcGVyY2FzZSknLCAnUic6ICdSICh1cHBlcmNhc2UpJywgJ1MnOiAnUyAodXBwZXJjYXNlKScsICdUJzogJ1QgKHVwcGVyY2FzZSknLFxuICAgICdVJzogJ1UgKHVwcGVyY2FzZSknLCAnVic6ICdWICh1cHBlcmNhc2UpJywgJ1cnOiAnVyAodXBwZXJjYXNlKScsICdYJzogJ1ggKHVwcGVyY2FzZSknLFxuICAgICdZJzogJ1kgKHVwcGVyY2FzZSknLCAnWic6ICdaICh1cHBlcmNhc2UpJyxcbiAgICAnMCc6ICd6ZXJvJywgJzEnOiAnb25lJywgJzInOiAndHdvJywgJzMnOiAndGhyZWUnLCAnNCc6ICdmb3VyJyxcbiAgICAnNSc6ICdmaXZlJywgJzYnOiAnc2l4JywgJzcnOiAnc2V2ZW4nLCAnOCc6ICdlaWdodCcsICc5JzogJ25pbmUnLFxuICAgICcuJzogJ3BlcmlvZCcsICcsJzogJ2NvbW1hJywgJzonOiAnY29sb24nLCAnOyc6ICdzZW1pY29sb24nLCAnLSc6ICdoeXBoZW4nLCAnXyc6ICd1bmRlcnNjb3JlJyxcbiAgICAnISc6ICdleGNsYW1hdGlvbicsICc/JzogJ3F1ZXN0aW9uJywgJ1wiJzogJ3F1b3RhdGlvbiBtYXJrJywgXCInXCI6ICdhcG9zdHJvcGhlJyxcbiAgICAnKCc6ICdsZWZ0IHBhcmVudGhlc2lzJywgJyknOiAncmlnaHQgcGFyZW50aGVzaXMnLCAnWyc6ICdsZWZ0IGJyYWNrZXQnLCAnXSc6ICdyaWdodCBicmFja2V0JyxcbiAgICAneyc6ICdsZWZ0IGJyYWNlJywgJ30nOiAncmlnaHQgYnJhY2UnLCAnLyc6ICdzbGFzaCcsICdcXFxcJzogJ2JhY2tzbGFzaCcsICd8JzogJ3ZlcnRpY2FsIGJhcicsXG4gICAgJ0AnOiAnYXQgc2lnbicsICcjJzogJ251bWJlciBzaWduJywgJyQnOiAnZG9sbGFyIHNpZ24nLCAnJSc6ICdwZXJjZW50JywgJ14nOiAnY2FyZXQnLFxuICAgICcmJzogJ2FtcGVyc2FuZCcsICcqJzogJ2FzdGVyaXNrJywgJysnOiAncGx1cycsICc9JzogJ2VxdWFscycsICc8JzogJ2xlc3MgdGhhbicsICc+JzogJ2dyZWF0ZXIgdGhhbicsXG4gICAgJ34nOiAndGlsZGUnLCAnYCc6ICdncmF2ZSBhY2NlbnQnLCAn4oSWJzogJ251bWVybycsICfigqwnOiAnZXVybyBzaWduJywgJ8KjJzogJ3BvdW5kIHNpZ24nLFxuICAgICfCpSc6ICd5ZW4gc2lnbicsICfCqSc6ICdjb3B5cmlnaHQnLCAnwq4nOiAncmVnaXN0ZXJlZCcsICfihKInOiAndHJhZGVtYXJrJywgJ8KwJzogJ2RlZ3JlZScsXG4gICAgJ8KxJzogJ3BsdXMtbWludXMnLCAnw5cnOiAnbXVsdGlwbHknLCAnw7cnOiAnZGl2aWRlJywgJ+KJoCc6ICdub3QgZXF1YWwnLCAn4omIJzogJ2FwcHJveGltYXRlbHkgZXF1YWwnLFxuICAgICcgJzogJ3NwYWNlJ1xuICB9O1xuXG4gIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8INGB0LvQvtCy0LDRgNGMINC00LvRjyDQutC40YDQuNC70LvQuNGG0YtcbiAgY29uc3QgY3lyaWxsaWNOYW1lcyA9IHtcbiAgICAn0JAnOiAn0JAgKNC30LDQs9C70LDQstC90LDRjyknLCAn0JEnOiAn0JEgKNC30LDQs9C70LDQstC90LDRjyknLCAn0JInOiAn0JIgKNC30LDQs9C70LDQstC90LDRjyknLCAn0JMnOiAn0JMgKNC30LDQs9C70LDQstC90LDRjyknLFxuICAgICfQlCc6ICfQlCAo0LfQsNCz0LvQsNCy0L3QsNGPKScsICfQlSc6ICfQlSAo0LfQsNCz0LvQsNCy0L3QsNGPKScsICfQgSc6ICfQgSAo0LfQsNCz0LvQsNCy0L3QsNGPKScsICfQlic6ICfQliAo0LfQsNCz0LvQsNCy0L3QsNGPKScsXG4gICAgJ9CXJzogJ9CXICjQt9Cw0LPQu9Cw0LLQvdCw0Y8pJywgJ9CYJzogJ9CYICjQt9Cw0LPQu9Cw0LLQvdCw0Y8pJywgJ9CZJzogJ9CZICjQt9Cw0LPQu9Cw0LLQvdCw0Y8pJywgJ9CaJzogJ9CaICjQt9Cw0LPQu9Cw0LLQvdCw0Y8pJyxcbiAgICAn0JsnOiAn0JsgKNC30LDQs9C70LDQstC90LDRjyknLCAn0JwnOiAn0JwgKNC30LDQs9C70LDQstC90LDRjyknLCAn0J0nOiAn0J0gKNC30LDQs9C70LDQstC90LDRjyknLCAn0J4nOiAn0J4gKNC30LDQs9C70LDQstC90LDRjyknLFxuICAgICfQnyc6ICfQnyAo0LfQsNCz0LvQsNCy0L3QsNGPKScsICfQoCc6ICfQoCAo0LfQsNCz0LvQsNCy0L3QsNGPKScsICfQoSc6ICfQoSAo0LfQsNCz0LvQsNCy0L3QsNGPKScsICfQoic6ICfQoiAo0LfQsNCz0LvQsNCy0L3QsNGPKScsXG4gICAgJ9CjJzogJ9CjICjQt9Cw0LPQu9Cw0LLQvdCw0Y8pJywgJ9CkJzogJ9CkICjQt9Cw0LPQu9Cw0LLQvdCw0Y8pJywgJ9ClJzogJ9ClICjQt9Cw0LPQu9Cw0LLQvdCw0Y8pJywgJ9CmJzogJ9CmICjQt9Cw0LPQu9Cw0LLQvdCw0Y8pJyxcbiAgICAn0KcnOiAn0KcgKNC30LDQs9C70LDQstC90LDRjyknLCAn0KgnOiAn0KggKNC30LDQs9C70LDQstC90LDRjyknLCAn0KknOiAn0KkgKNC30LDQs9C70LDQstC90LDRjyknLCAn0KonOiAn0KogKNC30LDQs9C70LDQstC90LDRjyknLFxuICAgICfQqyc6ICfQqyAo0LfQsNCz0LvQsNCy0L3QsNGPKScsICfQrCc6ICfQrCAo0LfQsNCz0LvQsNCy0L3QsNGPKScsICfQrSc6ICfQrSAo0LfQsNCz0LvQsNCy0L3QsNGPKScsICfQric6ICfQriAo0LfQsNCz0LvQsNCy0L3QsNGPKScsXG4gICAgJ9CvJzogJ9CvICjQt9Cw0LPQu9Cw0LLQvdCw0Y8pJyxcbiAgICAn0LAnOiAn0LAgKNGB0YLRgNC+0YfQvdCw0Y8pJywgJ9CxJzogJ9CxICjRgdGC0YDQvtGH0L3QsNGPKScsICfQsic6ICfQsiAo0YHRgtGA0L7Rh9C90LDRjyknLCAn0LMnOiAn0LMgKNGB0YLRgNC+0YfQvdCw0Y8pJyxcbiAgICAn0LQnOiAn0LQgKNGB0YLRgNC+0YfQvdCw0Y8pJywgJ9C1JzogJ9C1ICjRgdGC0YDQvtGH0L3QsNGPKScsICfRkSc6ICfRkSAo0YHRgtGA0L7Rh9C90LDRjyknLCAn0LYnOiAn0LYgKNGB0YLRgNC+0YfQvdCw0Y8pJyxcbiAgICAn0LcnOiAn0LcgKNGB0YLRgNC+0YfQvdCw0Y8pJywgJ9C4JzogJ9C4ICjRgdGC0YDQvtGH0L3QsNGPKScsICfQuSc6ICfQuSAo0YHRgtGA0L7Rh9C90LDRjyknLCAn0LonOiAn0LogKNGB0YLRgNC+0YfQvdCw0Y8pJyxcbiAgICAn0LsnOiAn0LsgKNGB0YLRgNC+0YfQvdCw0Y8pJywgJ9C8JzogJ9C8ICjRgdGC0YDQvtGH0L3QsNGPKScsICfQvSc6ICfQvSAo0YHRgtGA0L7Rh9C90LDRjyknLCAn0L4nOiAn0L4gKNGB0YLRgNC+0YfQvdCw0Y8pJyxcbiAgICAn0L8nOiAn0L8gKNGB0YLRgNC+0YfQvdCw0Y8pJywgJ9GAJzogJ9GAICjRgdGC0YDQvtGH0L3QsNGPKScsICfRgSc6ICfRgSAo0YHRgtGA0L7Rh9C90LDRjyknLCAn0YInOiAn0YIgKNGB0YLRgNC+0YfQvdCw0Y8pJyxcbiAgICAn0YMnOiAn0YMgKNGB0YLRgNC+0YfQvdCw0Y8pJywgJ9GEJzogJ9GEICjRgdGC0YDQvtGH0L3QsNGPKScsICfRhSc6ICfRhSAo0YHRgtGA0L7Rh9C90LDRjyknLCAn0YYnOiAn0YYgKNGB0YLRgNC+0YfQvdCw0Y8pJyxcbiAgICAn0YcnOiAn0YcgKNGB0YLRgNC+0YfQvdCw0Y8pJywgJ9GIJzogJ9GIICjRgdGC0YDQvtGH0L3QsNGPKScsICfRiSc6ICfRiSAo0YHRgtGA0L7Rh9C90LDRjyknLCAn0YonOiAn0YogKNGB0YLRgNC+0YfQvdCw0Y8pJyxcbiAgICAn0YsnOiAn0YsgKNGB0YLRgNC+0YfQvdCw0Y8pJywgJ9GMJzogJ9GMICjRgdGC0YDQvtGH0L3QsNGPKScsICfRjSc6ICfRjSAo0YHRgtGA0L7Rh9C90LDRjyknLCAn0Y4nOiAn0Y4gKNGB0YLRgNC+0YfQvdCw0Y8pJyxcbiAgICAn0Y8nOiAn0Y8gKNGB0YLRgNC+0YfQvdCw0Y8pJ1xuICB9O1xuXG4gIC8vINCh0L3QsNGH0LDQu9CwINC/0YDQvtCy0LXRgNGP0LXQvCDQsiDRgdC70L7QstCw0YDRj9GFXG4gIGlmIChsYXRpbk5hbWVzW2NoYXJdKSByZXR1cm4gbGF0aW5OYW1lc1tjaGFyXTtcbiAgaWYgKGN5cmlsbGljTmFtZXNbY2hhcl0pIHJldHVybiBjeXJpbGxpY05hbWVzW2NoYXJdO1xuXG4gIC8vINCV0YHQu9C4INC90LUg0L3QsNGI0LvQuCwg0L/Ri9GC0LDQtdC80YHRjyDQvtC/0YDQtdC00LXQu9C40YLRjCDQutCw0YLQtdCz0L7RgNC40Y4g0YHQuNC80LLQvtC70LAg0L/QviBVbmljb2RlINCx0LvQvtC60YNcbiAgdHJ5IHtcbiAgICBjb25zdCBjb2RlID0gY2hhci5jb2RlUG9pbnRBdCgwKTtcbiAgICBpZiAoaXNOYU4oY29kZSkpIHJldHVybiAndW5rbm93bic7XG5cbiAgICBpZiAoY29kZSA+PSAweDI2MDAgJiYgY29kZSA8PSAweDI2RkYpIHJldHVybiAnTWlzY2VsbGFuZW91cyBTeW1ib2xzJztcbiAgICBpZiAoY29kZSA+PSAweDI3MDAgJiYgY29kZSA8PSAweDI3QkYpIHJldHVybiAnRGluZ2JhdHMnO1xuICAgIGlmIChjb2RlID49IDB4MUYzMDAgJiYgY29kZSA8PSAweDFGNUZGKSByZXR1cm4gJ01pc2NlbGxhbmVvdXMgU3ltYm9scyBhbmQgUGljdG9ncmFwaHMnO1xuICAgIGlmIChjb2RlID49IDB4MUY2MDAgJiYgY29kZSA8PSAweDFGNjRGKSByZXR1cm4gJ0Vtb3RpY29ucyc7XG4gICAgaWYgKGNvZGUgPj0gMHgxRjY4MCAmJiBjb2RlIDw9IDB4MUY2RkYpIHJldHVybiAnVHJhbnNwb3J0IGFuZCBNYXAgU3ltYm9scyc7XG4gICAgaWYgKGNvZGUgPj0gMHgxRjcwMCAmJiBjb2RlIDw9IDB4MUY3N0YpIHJldHVybiAnQWxjaGVtaWNhbCBTeW1ib2xzJztcbiAgICAvLyDQlNC+0LHQsNCy0LjRgtGMINC00YDRg9Cz0LjQtSDQsdC70L7QutC4INC/0L4g0L3QtdC+0LHRhdC+0LTQuNC80L7RgdGC0LhcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vINCe0YjQuNCx0LrQsCDQv9GA0Lgg0L/QvtC70YPRh9C10L3QuNC4IGNvZGVQb2ludCAo0L3QsNC/0YDQuNC80LXRgCwg0LTQu9GPINGB0YPRgNGA0L7Qs9Cw0YLQvdGL0YUg0L/QsNGAKVxuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICAvLyDQldGB0LvQuCDQvdC1INGB0LzQvtCz0LvQuCDQutC70LDRgdGB0LjRhNC40YbQuNGA0L7QstCw0YLRjCwg0LLQvtC30LLRgNCw0YnQsNC10LwgZ2VuZXJpYyBuYW1lXG4gIHJldHVybiAnY2hhcmFjdGVyJztcbn07XG5cbi8qKlxuICog0J/QvtC70YPRh9Cw0LXRgiDQstGB0LUg0LTQvtGB0YLRg9C/0L3Ri9C1INCz0LvQuNGE0Ysg0LjQtyDRiNGA0LjRhNGC0LBcbiAqIEBwYXJhbSB7T2JqZWN0fSBmb250IC0g0J7QsdGK0LXQutGCINGI0YDQuNGE0YLQsCDQuNC3IG9wZW50eXBlLmpzXG4gKiBAcmV0dXJucyB7QXJyYXk8e2NoYXJhY3Rlcjogc3RyaW5nLCB1bmljb2RlOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgaW5kZXg6IG51bWJlcn0+fSAtINCc0LDRgdGB0LjQsiDQvtCx0YrQtdC60YLQvtCyINCz0LvQuNGE0L7QslxuICovXG5leHBvcnQgY29uc3QgZ2V0QWxsR2x5cGhzRnJvbUZvbnQgPSAoZm9udCkgPT4ge1xuICBpZiAoIWZvbnQgfHwgIWZvbnQuZ2x5cGhzIHx8IHR5cGVvZiBmb250LmdseXBocy5nZXQgIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGZvbnQubnVtR2x5cGhzICE9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZ2x5cGhzID0gW107XG4gICAgY29uc3QgbnVtR2x5cGhzID0gZm9udC5udW1HbHlwaHM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUdseXBoczsgaSsrKSB7XG4gICAgICBjb25zdCBnbHlwaCA9IGZvbnQuZ2x5cGhzLmdldChpKTtcblxuICAgICAgLy8g0J/RgNC+0L/Rg9GB0LrQsNC10LwgLm5vdGRlZiDQuCDQs9C70LjRhNGLINCx0LXQtyBVbmljb2RlXG4gICAgICBpZiAoIWdseXBoIHx8IGdseXBoLm5hbWUgPT09ICcubm90ZGVmJyB8fCAhZ2x5cGgudW5pY29kZSkgY29udGludWU7XG5cbiAgICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0YHQuNC80LLQvtC7ICjQvNC+0LbQtdGCINCx0YvRgtGMINC90LXRgdC60L7Qu9GM0LrQviBVbmljb2RlINC00LvRjyDQvtC00L3QvtCz0L4g0LPQu9C40YTQsClcbiAgICAgIC8vINCR0LXRgNC10Lwg0L/QtdGA0LLRi9C5IFVuaWNvZGUg0LTQu9GPINC/0YDQvtGB0YLQvtGC0YtcbiAgICAgIGNvbnN0IGNoYXJDb2RlID0gZ2x5cGgudW5pY29kZTtcbiAgICAgIGNvbnN0IGNoYXIgPSBTdHJpbmcuZnJvbUNvZGVQb2ludChjaGFyQ29kZSk7XG5cbiAgICAgIC8vINCU0L7QsdCw0LLQu9GP0LXQvCDRgtC+0LvRjNC60L4g0YPQvdC40LrQsNC70YzQvdGL0LUg0YHQuNC80LLQvtC70YsgKNC90LUg0LPQu9C40YTRiylcbiAgICAgIGlmICghZ2x5cGhzLnNvbWUoZyA9PiBnLmNoYXJhY3RlciA9PT0gY2hhcikpIHtcbiAgICAgICAgIGdseXBocy5wdXNoKHtcbiAgICAgICAgICAgY2hhcmFjdGVyOiBjaGFyLFxuICAgICAgICAgICB1bmljb2RlOiBnZXRDaGFyVW5pY29kZShjaGFyKSxcbiAgICAgICAgICAgbmFtZTogZ2x5cGgubmFtZSB8fCAnJyxcbiAgICAgICAgICAgaW5kZXg6IGkgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC40L3QtNC10LrRgSDQs9C70LjRhNCwXG4gICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDQnNC+0LbQvdC+INC00L7QsdCw0LLQuNGC0Ywg0YHQvtGA0YLQuNGA0L7QstC60YMg0L/QviBVbmljb2RlXG4gICAgZ2x5cGhzLnNvcnQoKGEsIGIpID0+IGEudW5pY29kZS5sb2NhbGVDb21wYXJlKGIudW5pY29kZSkpO1xuXG4gICAgcmV0dXJuIGdseXBocztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGFsbCBnbHlwaHMgZnJvbSBmb250OicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn07XG5cbi8qKlxuICog0J/QvtC70YPRh9Cw0LXRgiDQsNC70YzRgtC10YDQvdCw0YLQuNCy0L3Ri9C1INGE0L7RgNC80Ysg0LPQu9C40YTQsCAo0LXRgdC70Lgg0L7QvdC4INC10YHRgtGMINCyINGI0YDQuNGE0YLQtSlcbiAqINCg0LXQsNC70LjQt9Cw0YbQuNGPINGC0YDQtdCx0YPQtdGCINCz0LvRg9Cx0L7QutC+0LPQviDQv9C+0L3QuNC80LDQvdC40Y8g0YLQsNCx0LvQuNGG0YsgR1NVQiAnYWFsdCcg0Lgg0LTRgNGD0LPQuNGFINGE0LjRhy5cbiAqINCt0YLQsCDRhNGD0L3QutGG0LjRjyDRj9Cy0LvRj9C10YLRgdGPINC30LDQs9C70YPRiNC60L7QuSDQuNC70Lgg0YLRgNC10LHRg9C10YIg0LfQvdCw0YfQuNGC0LXQu9GM0L3QvtC5INC00L7RgNCw0LHQvtGC0LrQuC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBmb250IC0g0J7QsdGK0LXQutGCINGI0YDQuNGE0YLQsCDQuNC3IG9wZW50eXBlLmpzXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hhciAtINCh0LjQvNCy0L7QuyDQtNC70Y8g0L/QvtC40YHQutCwINCw0LvRjNGC0LXRgNC90LDRgtC40LLQvdGL0YUg0YTQvtGA0LxcbiAqIEByZXR1cm5zIHtBcnJheTx7bmFtZTogc3RyaW5nLCB1bmljb2RlOiBzdHJpbmcsIGluZGV4OiBudW1iZXJ9Pn0gLSDQnNCw0YHRgdC40LIg0L7QsdGK0LXQutGC0L7QsiDQsNC70YzRgtC10YDQvdCw0YLQuNCy0L3Ri9GFINCz0LvQuNGE0L7QslxuICovXG5leHBvcnQgY29uc3QgZ2V0R2x5cGhBbHRlcm5hdGl2ZXMgPSAoZm9udCwgY2hhcikgPT4ge1xuICBpZiAoIWZvbnQgfHwgIWNoYXIgfHwgIWZvbnQudGFibGVzIHx8ICFmb250LnRhYmxlcy5nc3ViIHx8ICFmb250LmdseXBocykgcmV0dXJuIFtdO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgYWx0ZXJuYXRpdmVzID0gW107XG4gICAgY29uc3QgbWFpbkdseXBoID0gZm9udC5jaGFyVG9HbHlwaChjaGFyKTtcbiAgICBpZiAoIW1haW5HbHlwaCB8fCAhbWFpbkdseXBoLmluZGV4KSByZXR1cm4gW107XG5cbiAgICBjb25zdCBtYWluR2x5cGhJbmRleCA9IG1haW5HbHlwaC5pbmRleDtcbiAgICBjb25zdCBnc3ViID0gZm9udC50YWJsZXMuZ3N1YjtcblxuICAgIC8vINCf0L7QuNGB0Log0LDQu9GM0YLQtdGA0L3QsNGC0LjQsiDQsiDRgtCw0LHQu9C40YbQsNGFIEdTVUIgKNGD0L/RgNC+0YnQtdC90L3Ri9C5INC/0YDQuNC80LXRgCDQtNC70Y8gbG9va3VwVHlwZSAzKVxuICAgIGlmIChnc3ViLmxvb2t1cHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBsb29rdXAgb2YgZ3N1Yi5sb29rdXBzKSB7XG4gICAgICAgICAgICAvLyBMb29rdXBUeXBlIDM6IEFsdGVybmF0ZSBTdWJzdGl0dXRpb24gU3VidGFibGVcbiAgICAgICAgICAgIGlmIChsb29rdXAubG9va3VwVHlwZSA9PT0gMykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3VidGFibGUgb2YgbG9va3VwLnN1YnRhYmxlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3VidGFibGUuY292ZXJhZ2UgJiYgc3VidGFibGUuY292ZXJhZ2UuZ2x5cGhzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3ZlcmFnZUluZGV4ID0gc3VidGFibGUuY292ZXJhZ2UuZ2x5cGhzLmluZGV4T2YobWFpbkdseXBoSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdmVyYWdlSW5kZXggIT09IC0xICYmIHN1YnRhYmxlLmFsdGVybmF0ZVNldHMgJiYgc3VidGFibGUuYWx0ZXJuYXRlU2V0c1tjb3ZlcmFnZUluZGV4XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsdGVybmF0ZUluZGljZXMgPSBzdWJ0YWJsZS5hbHRlcm5hdGVTZXRzW2NvdmVyYWdlSW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdGVybmF0ZUluZGljZXMuZm9yRWFjaChhbHRJbmRleCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsdEdseXBoID0gZm9udC5nbHlwaHMuZ2V0KGFsdEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsdEdseXBoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0ZXJuYXRpdmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYWx0R2x5cGgubmFtZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaWNvZGU6IGFsdEdseXBoLnVuaWNvZGUgPyBnZXRDaGFyVW5pY29kZShTdHJpbmcuZnJvbUNvZGVQb2ludChhbHRHbHlwaC51bmljb2RlKSkgOiAnJyAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogYWx0SW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIC8vINCc0L7QttC90L4g0LTQvtCx0LDQstC40YLRjCDQv9C+0LTQtNC10YDQttC60YMg0LTRgNGD0LPQuNGFIGxvb2t1cFR5cGVzIChlLmcuLCBsb29rdXBUeXBlIDEpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDQo9C00LDQu9GP0LXQvCDQtNGD0LHQu9C40LrQsNGC0Ysg0Lgg0L7RgdC90L7QstC90L7QuSDQs9C70LjRhCDQuNC3INCw0LvRjNGC0LXRgNC90LDRgtC40LJcbiAgICBjb25zdCB1bmlxdWVBbHRlcm5hdGl2ZXMgPSBhbHRlcm5hdGl2ZXMuZmlsdGVyKChhbHQsIGluZGV4LCBzZWxmKSA9PlxuICAgICAgICBhbHQuaW5kZXggIT09IG1haW5HbHlwaEluZGV4ICYmXG4gICAgICAgIGluZGV4ID09PSBzZWxmLmZpbmRJbmRleCgodCkgPT4gdC5pbmRleCA9PT0gYWx0LmluZGV4KVxuICAgICk7XG5cbiAgICByZXR1cm4gdW5pcXVlQWx0ZXJuYXRpdmVzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgZ2x5cGggYWx0ZXJuYXRpdmVzOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn07XG5cbi8qKlxuICog0J/QvtC70YPRh9Cw0LXRgiDQu9C40LPQsNGC0YPRgNGLINC00LvRjyDQv9C+0YHQu9C10LTQvtCy0LDRgtC10LvRjNC90L7RgdGC0Lgg0YHQuNC80LLQvtC70L7QsiAo0LXRgdC70Lgg0L7QvdC4INC10YHRgtGMINCyINGI0YDQuNGE0YLQtSlcbiAqINCg0LXQsNC70LjQt9Cw0YbQuNGPINGC0YDQtdCx0YPQtdGCINCz0LvRg9Cx0L7QutC+0LPQviDQv9C+0L3QuNC80LDQvdC40Y8g0YLQsNCx0LvQuNGG0YsgR1NVQiAnbGlnYScsICdjbGlnJyDQuCDQtNGALlxuICog0K3RgtCwINGE0YPQvdC60YbQuNGPINGP0LLQu9GP0LXRgtGB0Y8g0LfQsNCz0LvRg9GI0LrQvtC5INC40LvQuCDRgtGA0LXQsdGD0LXRgiDQt9C90LDRh9C40YLQtdC70YzQvdC+0Lkg0LTQvtGA0LDQsdC+0YLQutC4LlxuICogQHBhcmFtIHtPYmplY3R9IGZvbnQgLSDQntCx0YrQtdC60YIg0YjRgNC40YTRgtCwINC40Lcgb3BlbnR5cGUuanNcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFycyAtINCf0L7RgdC70LXQtNC+0LLQsNGC0LXQu9GM0L3QvtGB0YLRjCDRgdC40LzQstC+0LvQvtCyINC00LvRjyDQv9C+0LjRgdC60LAg0LvQuNCz0LDRgtGD0YBcbiAqIEByZXR1cm5zIHtBcnJheTx7b3JpZ2luYWw6IHN0cmluZywgbGlnYXR1cmU6IHN0cmluZywgdW5pY29kZTogc3RyaW5nfT59IC0g0JzQsNGB0YHQuNCyINC+0LHRitC10LrRgtC+0LIg0LvQuNCz0LDRgtGD0YBcbiAqL1xuZXhwb3J0IGNvbnN0IGdldExpZ2F0dXJlcyA9IChmb250LCBjaGFycykgPT4ge1xuICBpZiAoIWZvbnQgfHwgIWNoYXJzIHx8IGNoYXJzLmxlbmd0aCA8IDIgfHwgIWZvbnQudGFibGVzIHx8ICFmb250LnRhYmxlcy5nc3ViKSByZXR1cm4gW107XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBsaWdhdHVyZXMgPSBbXTtcbiAgICAvLyBjb25zdCBnc3ViID0gZm9udC50YWJsZXMuZ3N1YjtcblxuICAgIC8vIFRPRE86INCg0LXQsNC70LjQt9C+0LLQsNGC0Ywg0YHQu9C+0LbQvdGD0Y4g0LvQvtCz0LjQutGDINC/0L7QuNGB0LrQsCDQu9C40LPQsNGC0YPRgCDQsiBHU1VCINGC0LDQsdC70LjRhtCw0YUgKGxvb2t1cFR5cGUgNClcbiAgICAvLyDQrdGC0L4g0YLRgNC10LHRg9C10YIg0YDQtdC60YPRgNGB0LjQstC90L7Qs9C+INC+0LHRhdC+0LTQsCDQuNC70Lgg0YHQu9C+0LbQvdC+0LPQviDRgdC+0L/QvtGB0YLQsNCy0LvQtdC90LjRjyDQv9C+0YHQu9C10LTQvtCy0LDRgtC10LvRjNC90L7RgdGC0LXQuSDQs9C70LjRhNC+0LIuXG5cbiAgICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0LHQsNC30L7QstGL0LUg0LvQuNCz0LDRgtGD0YDRiyDQtNC70Y8g0YDQsNGB0L/RgNC+0YHRgtGA0LDQvdC10L3QvdGL0YUg0YHQvtGH0LXRgtCw0L3QuNC5INC60LDQuiDQt9Cw0L/QsNGB0L3QvtC5INCy0LDRgNC40LDQvdGCXG4gICAgY29uc3QgY29tbW9uTGlnYXR1cmVzID0ge1xuICAgICAgJ2ZmJzogJ++sgCcsXG4gICAgICAnZmknOiAn76yBJyxcbiAgICAgICdmbCc6ICfvrIInLFxuICAgICAgJ2ZmaSc6ICfvrIMnLFxuICAgICAgJ2ZmbCc6ICfvrIQnXG4gICAgfTtcblxuICAgIGlmIChjb21tb25MaWdhdHVyZXNbY2hhcnNdKSB7XG4gICAgICAgIGNvbnN0IGxpZ0NoYXIgPSBjb21tb25MaWdhdHVyZXNbY2hhcnNdO1xuICAgICAgICBsaWdhdHVyZXMucHVzaCh7XG4gICAgICAgICAgICBvcmlnaW5hbDogY2hhcnMsXG4gICAgICAgICAgICBsaWdhdHVyZTogbGlnQ2hhcixcbiAgICAgICAgICAgIHVuaWNvZGU6IGdldENoYXJVbmljb2RlKGxpZ0NoYXIpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBsaWdhdHVyZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBsaWdhdHVyZXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufTtcblxuLy8g0JTQvtCx0LDQstC70Y/QtdC8INGE0YPQvdC60YbQuNGOIGdldENoYXJVbmljb2RlLCDQv9C10YDQtdC90LXRgdC10L3QvdGD0Y4g0LjQtyBmb250VXRpbHNDb21tb24uanNcbi8qKlxuICog0J/QvtC70YPRh9Cw0LXRgiBVbmljb2RlLdC60L7QtCDRgdC40LzQstC+0LvQsCDQsiDRhNC+0YDQvNCw0YLQtSBcIlUrWFhYWFwiXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hhciAtINCh0LjQvNCy0L7QuyDQtNC70Y8g0L/QvtC70YPRh9C10L3QuNGPIFVuaWNvZGVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gVW5pY29kZS3QutC+0LQg0LIg0YTQvtGA0LzQsNGC0LUgXCJVK1hYWFhcIlxuICovXG5leHBvcnQgY29uc3QgZ2V0Q2hhclVuaWNvZGUgPSAoY2hhcikgPT4ge1xuICBpZiAoIWNoYXIgfHwgdHlwZW9mIGNoYXIgIT09ICdzdHJpbmcnIHx8ICFjaGFyLmxlbmd0aCkge1xuICAgIHJldHVybiAnVSs/Pz8/JztcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgY29kZVBvaW50ID0gY2hhci5jb2RlUG9pbnRBdCgwKTtcbiAgICAvLyDQn9GA0L7QstC10YDQutCwINC90LAgTmFOLCDRh9GC0L7QsdGLINC40LfQsdC10LbQsNGC0YwgXCJVK05BTlwiXG4gICAgaWYgKGlzTmFOKGNvZGVQb2ludCkpIHtcbiAgICAgICAgcmV0dXJuICdVKz8/Pz8nO1xuICAgIH1cbiAgICByZXR1cm4gYFUrJHtjb2RlUG9pbnQudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkucGFkU3RhcnQoNCwgJzAnKX1gO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiAnVSs/Pz8/JztcbiAgfVxufTsgIl0sIm5hbWVzIjpbImV4dHJhY3RCYXNpY0dseXBoRGF0YSIsImZvbnQiLCJzb3VyY2UiLCJnbHlwaHMiLCJnZXQiLCJjb25zb2xlIiwiZXJyb3IiLCJhbGxHbHlwaHMiLCJnbHlwaE5hbWVzIiwiZ2x5cGhVbmljb2RlcyIsImFkdmFuY2VXaWR0aHMiLCJlcnJvcnMiLCJudW1HbHlwaHMiLCJpIiwiZ2x5cGgiLCJuYW1lIiwiZ2x5cGhJbmZvIiwiaWQiLCJpbmRleCIsInVuaWNvZGUiLCJ1bmljb2RlcyIsImFkdmFuY2VXaWR0aCIsIk1hdGgiLCJyb3VuZCIsInB1c2giLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwicGFkU3RhcnQiLCJnbHlwaEVycm9yIiwid2FybiIsIm1lc3NhZ2UiLCJuYW1lcyIsImdldEdseXBoTmFtZUZyb21Gb250IiwiY2hhciIsImNoYXJUb0dseXBoIiwiZ2V0U2ltcGxlQ2hhck5hbWUiLCJsZW5ndGgiLCJsYXRpbk5hbWVzIiwiY3lyaWxsaWNOYW1lcyIsImNvZGUiLCJjb2RlUG9pbnRBdCIsImlzTmFOIiwiZ2V0QWxsR2x5cGhzRnJvbUZvbnQiLCJjaGFyQ29kZSIsIlN0cmluZyIsImZyb21Db2RlUG9pbnQiLCJzb21lIiwiZyIsImNoYXJhY3RlciIsImdldENoYXJVbmljb2RlIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsImdldEdseXBoQWx0ZXJuYXRpdmVzIiwidGFibGVzIiwiZ3N1YiIsImFsdGVybmF0aXZlcyIsIm1haW5HbHlwaCIsIm1haW5HbHlwaEluZGV4IiwibG9va3VwcyIsImxvb2t1cCIsImxvb2t1cFR5cGUiLCJzdWJ0YWJsZSIsInN1YnRhYmxlcyIsImNvdmVyYWdlIiwiY292ZXJhZ2VJbmRleCIsImluZGV4T2YiLCJhbHRlcm5hdGVTZXRzIiwiYWx0ZXJuYXRlSW5kaWNlcyIsImZvckVhY2giLCJhbHRJbmRleCIsImFsdEdseXBoIiwidW5pcXVlQWx0ZXJuYXRpdmVzIiwiZmlsdGVyIiwiYWx0Iiwic2VsZiIsImZpbmRJbmRleCIsInQiLCJnZXRMaWdhdHVyZXMiLCJjaGFycyIsImxpZ2F0dXJlcyIsImNvbW1vbkxpZ2F0dXJlcyIsImxpZ0NoYXIiLCJvcmlnaW5hbCIsImxpZ2F0dXJlIiwiY29kZVBvaW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utils/glyphUtils.js\n");

/***/ }),

/***/ "./utils/localFontProcessor.js":
/*!*************************************!*\
  !*** ./utils/localFontProcessor.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   processLocalFont: () => (/* binding */ processLocalFont),\n/* harmony export */   revokeObjectURL: () => (/* binding */ revokeObjectURL)\n/* harmony export */ });\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var _fontParser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fontParser */ \"./utils/fontParser.js\");\n/* harmony import */ var _fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fontUtilsCommon */ \"./utils/fontUtilsCommon.js\");\n/* harmony import */ var _cssGenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cssGenerator */ \"./utils/cssGenerator.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_0__, _fontParser__WEBPACK_IMPORTED_MODULE_1__, _cssGenerator__WEBPACK_IMPORTED_MODULE_3__]);\n([react_toastify__WEBPACK_IMPORTED_MODULE_0__, _fontParser__WEBPACK_IMPORTED_MODULE_1__, _cssGenerator__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// Функции для обработки локально загруженных шрифтов (кэширование, FontFace)\n\n\n\n\n/**\n * Кэш для хранения результатов анализа локальных шрифтов\n * Ключ - хеш содержимого шрифта.\n * Значение - объект metadata, полученный из воркера.\n * @type {Object.<string, Object>}\n */ const localFontCache = {};\n/**\n * Освобождает URL, созданный через URL.createObjectURL()\n * @param {string} url - URL для освобождения\n */ const revokeObjectURL = (url)=>{\n    if (url && typeof url === \"string\" && url.startsWith(\"blob:\")) {\n        try {\n            URL.revokeObjectURL(url);\n        } catch (error) {\n            console.warn(\"Failed to revoke Object URL:\", error); // Используем warn вместо error\n        // toast.error('Ошибка при освобождении URL'); // Не спамим пользователя\n        }\n    }\n};\n/**\n * Асинхронно вычисляет SHA-256 хеш для Blob файла.\n * @param {Blob} file - Файл (Blob).\n * @returns {Promise<string|null>} - Промис с HEX-строкой хеша или null в случае ошибки.\n */ const calculateFileHash = async (file)=>{\n    if (!(file instanceof Blob)) {\n        console.error(\"Invalid input for hashing: expected Blob.\");\n        return null;\n    }\n    try {\n        const buffer = await file.arrayBuffer();\n        const hashBuffer = await crypto.subtle.digest(\"SHA-256\", buffer);\n        // Преобразуем ArrayBuffer хеша в HEX-строку\n        const hashArray = Array.from(new Uint8Array(hashBuffer));\n        const hashHex = hashArray.map((b)=>b.toString(16).padStart(2, \"0\")).join(\"\");\n        return hashHex;\n    } catch (error) {\n        console.error(\"Error calculating file hash:\", error);\n        react_toastify__WEBPACK_IMPORTED_MODULE_0__.toast.error(\"Не удалось вычислить хеш файла для кэширования.\");\n        return null;\n    }\n};\n/**\n * Полностью анализирует локальный шрифт (из файла), определяя его характеристики.\n * Включает парсинг, извлечение метаданных, кэширование и добавление @font-face.\n * @param {Object} fontInput - Объект шрифта с file (Blob) и name (string)\n * @returns {Promise<Object|null>} - Промис с обработанным объектом шрифта или null при критической ошибке.\n */ const processLocalFont = async (fontInput)=>{\n    if (!fontInput || !(fontInput.file instanceof Blob) || !fontInput.name) {\n        react_toastify__WEBPACK_IMPORTED_MODULE_0__.toast.error(\"Неверные входные данные для обработки локального шрифта.\");\n        return null;\n    }\n    const { file, name } = fontInput;\n    const fontId = Math.random().toString(36).substring(2, 9); // Короткий ID для читаемости\n    const cleanedName = name.replace(/\\.[^/.]+$/, \"\");\n    let objectUrl = null;\n    let cacheKey = null; // Инициализируем cacheKey\n    try {\n        // 1. Вычисляем хеш файла для использования в качестве ключа кэша\n        cacheKey = await calculateFileHash(file);\n        if (!cacheKey) {\n            // Если хеш не удалось получить, кэширование невозможно, но продолжаем обработку\n            react_toastify__WEBPACK_IMPORTED_MODULE_0__.toast.warning(\"Не удалось создать ключ кэша для шрифта, кэширование будет пропущено.\");\n        }\n        // 2. Проверка кэша (теперь по хешу)\n        if (cacheKey && localFontCache[cacheKey]) {\n            console.log(`Using cached metadata for ${name} (hash: ${cacheKey.substring(0, 8)}...)`); // Лог для отладки\n            objectUrl = URL.createObjectURL(file); // Свежий URL нужен всегда\n            const cachedMetadata = {\n                ...localFontCache[cacheKey]\n            }; // Получаем метаданные из кэша\n            const fontFamilyName = `font-${fontId}`; // Генерируем уникальное имя\n            // Создаем fontObj на основе кэшированных метаданных\n            const fontObj = {\n                id: fontId,\n                name: cachedMetadata.preferredFamily || cachedMetadata.names?.fontFamily || cleanedName,\n                originalName: name,\n                source: \"local\",\n                currentWeight: 400,\n                currentStyle: \"normal\",\n                isVariableFont: cachedMetadata.isVariable || false,\n                variableAxes: {},\n                supportedAxes: [],\n                variationSettings: \"\",\n                availableStyles: [],\n                file: file,\n                url: objectUrl,\n                fontFamily: fontFamilyName\n            };\n            // Восстанавливаем оси и стили из кэшированных метаданных\n            if (fontObj.isVariableFont && cachedMetadata.supportedAxes) {\n                // Заполняем информацию об осях из кэша\n                fontObj.variableAxes = Object.entries(cachedMetadata.supportedAxes).reduce((acc, [tag, axisInfo])=>{\n                    acc[tag] = {\n                        name: axisInfo.name || tag.toUpperCase(),\n                        min: axisInfo.min,\n                        max: axisInfo.max,\n                        default: axisInfo.default\n                    };\n                    return acc;\n                }, {});\n                fontObj.supportedAxes = Object.keys(cachedMetadata.supportedAxes);\n                fontObj.variationSettings = Object.entries(fontObj.variableAxes).map(([tag, value])=>`\\\"${tag}\\\" ${value.default || 400}`) // Запасное значение для веса\n                .join(\", \");\n                // Определяем начальные стили для вариативных шрифтов из кэша (может быть пересмотрено)\n                // Пока оставляем заглушку или определяем на основе дефолтных осей, если возможно\n                // TODO: Уточнить логику availableStyles для вариативных из кэша\n                fontObj.availableStyles = [\n                    {\n                        name: \"Default\",\n                        weight: 400,\n                        style: \"normal\"\n                    }\n                ]; // Заглушка\n            } else if (!fontObj.isVariableFont && cachedMetadata.names) {\n                // Определяем стиль/вес для невариативных из кэша\n                let weight = 400;\n                let style = \"normal\";\n                const subfamily = cachedMetadata.preferredSubfamily || cachedMetadata.names?.fontSubfamily || \"Regular\";\n                const subfamilyLower = subfamily.toLowerCase();\n                style = subfamilyLower.includes(\"italic\") || subfamilyLower.includes(\"oblique\") ? \"italic\" : \"normal\";\n                // ... (логика определения веса из subfamily) ...\n                if (subfamilyLower.includes(\"thin\")) weight = 100;\n                else if (subfamilyLower.includes(\"extralight\") || subfamilyLower.includes(\"ultralight\")) weight = 200;\n                else if (subfamilyLower.includes(\"light\")) weight = 300;\n                else if (subfamilyLower.includes(\"medium\")) weight = 500;\n                else if (subfamilyLower.includes(\"semibold\") || subfamilyLower.includes(\"demibold\")) weight = 600;\n                else if (subfamilyLower.includes(\"bold\")) weight = 700;\n                else if (subfamilyLower.includes(\"extrabold\") || subfamilyLower.includes(\"ultrabold\")) weight = 800;\n                else if (subfamilyLower.includes(\"black\") || subfamilyLower.includes(\"heavy\")) weight = 900;\n                fontObj.currentWeight = weight;\n                fontObj.currentStyle = style;\n                const styleInfo = (0,_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.findStyleInfoByWeightAndStyle)(weight, style);\n                fontObj.availableStyles = [\n                    {\n                        name: styleInfo.name,\n                        weight,\n                        style\n                    }\n                ];\n            } else {\n                // Если стилей нет в кэше (например, старый кэш или ошибка парсинга при кэшировании)\n                fontObj.availableStyles = [\n                    {\n                        name: \"Regular\",\n                        weight: 400,\n                        style: \"normal\"\n                    }\n                ];\n            }\n            // Определяем начальные настройки для вариативных шрифтов из кэша\n            let initialSettings = {};\n            if (fontObj.isVariableFont && fontObj.variableAxes) {\n                initialSettings = Object.entries(fontObj.variableAxes).reduce((acc, [tag, axis])=>{\n                    acc[tag] = axis.default;\n                    return acc;\n                }, {});\n            }\n            // !!! Используем loadFontFaceIfNeeded напрямую !!!\n            try {\n                // Вызываем функцию через именованный импорт\n                await (0,_cssGenerator__WEBPACK_IMPORTED_MODULE_3__.loadFontFaceIfNeeded)(fontFamilyName, objectUrl, initialSettings);\n                console.log(`Font ${fontFamilyName} loaded successfully from cache using FontFace API.`);\n                // Успешно загрузили, возвращаем fontObj\n                revokeObjectURL(objectUrl); // Освобождаем blob URL после успешной загрузки\n                return fontObj;\n            } catch (error) {\n                console.error(`Failed to load font ${fontFamilyName} from cache using FontFace API:`, error);\n                react_toastify__WEBPACK_IMPORTED_MODULE_0__.toast.error(`Ошибка при загрузке шрифта ${fontObj.name} из кэша.`);\n                revokeObjectURL(objectUrl); // Освобождаем blob URL при ошибке\n                fontObj.error = \"Failed to load via FontFace API\";\n                return fontObj; // Возвращаем объект с ошибкой\n            }\n        // --- Конец обработки кэша ---\n        }\n        // --- Конец проверки кэша ---\n        // 3. Создание URL (если не из кэша)\n        if (!objectUrl) {\n            objectUrl = URL.createObjectURL(file);\n        }\n        // 4. Парсинг файла -> получение полного объекта шрифта через parseFontBuffer\n        // parseFontFile теперь возвращает объект metadata или null\n        let parsedFontData = null;\n        try {\n            const buffer = await file.arrayBuffer();\n            parsedFontData = await (0,_fontParser__WEBPACK_IMPORTED_MODULE_1__.parseFontBuffer)(buffer); // Используем parseFontBuffer\n        } catch (e) {\n            console.error(`Error reading or parsing font buffer for ${name}:`, e);\n            react_toastify__WEBPACK_IMPORTED_MODULE_0__.toast.error(`Ошибка чтения или анализа файла шрифта ${name}.`);\n        // Не возвращаем null сразу, т.к. addFontFace может работать с базовым fontObj\n        }\n        // Создаем базовый объект шрифта (как и раньше)\n        const fontObj = {\n            id: fontId,\n            name: cleanedName,\n            originalName: name,\n            source: \"local\",\n            currentWeight: 400,\n            currentStyle: \"normal\",\n            isVariableFont: false,\n            variableAxes: {},\n            supportedAxes: [],\n            variationSettings: \"\",\n            availableStyles: [],\n            file: file,\n            // url: objectUrl, // Устанавливаем ниже, после создания fontFamilyName\n            fontFamily: null\n        };\n        // Установим fontObj.url и fontObj.fontFamily\n        const fontFamilyName = `font-${fontId}`;\n        fontObj.url = objectUrl;\n        fontObj.fontFamily = fontFamilyName;\n        // 5. Заполнение fontObj из данных парсинга, если парсинг успешен\n        if (parsedFontData) {\n            // Используем данные из объекта parsedFontData (результат opentype.parse)\n            // Получаем имена (предпочитаем английские)\n            const names = parsedFontData.names || {};\n            const preferredFamily = names.preferredFamily?.en || names.fontFamily?.en;\n            const preferredSubfamily = names.preferredSubfamily?.en || names.fontSubfamily?.en || \"Regular\";\n            fontObj.name = preferredFamily || fontObj.name;\n            fontObj.isVariableFont = (0,_fontParser__WEBPACK_IMPORTED_MODULE_1__.isVariableFont)(parsedFontData); // Используем isVariableFont\n            if (fontObj.isVariableFont && parsedFontData.tables?.fvar?.axes) {\n                // Заполняем информацию об осях из parsedFontData.tables.fvar.axes\n                fontObj.variableAxes = parsedFontData.tables.fvar.axes.reduce((acc, axis)=>{\n                    const tag = axis.tag;\n                    // Используем имя из axis.name?.en, если оно есть\n                    const axisName = axis.name?.en || tag.toUpperCase();\n                    acc[tag] = {\n                        name: axisName,\n                        min: axis.minValue,\n                        max: axis.maxValue,\n                        default: axis.defaultValue\n                    };\n                    return acc;\n                }, {});\n                fontObj.supportedAxes = Object.keys(fontObj.variableAxes);\n                fontObj.variationSettings = Object.entries(fontObj.variableAxes).map(([tag, value])=>`\\\"${tag}\\\" ${value.default || 400}`) // Запасное значение для веса\n                .join(\", \");\n                fontObj.availableStyles = [\n                    {\n                        name: \"Default\",\n                        weight: 400,\n                        style: \"normal\"\n                    }\n                ]; // Заглушка\n            } else if (fontObj.isVariableFont && !parsedFontData.tables?.fvar?.axes) {\n                // Вариативный, но оси не извлеклись\n                console.warn(`Variable font ${name} parsed without axes info.`);\n                fontObj.isVariableFont = false; // Считаем невариативным\n                fontObj.availableStyles = [\n                    {\n                        name: \"Regular\",\n                        weight: 400,\n                        style: \"normal\"\n                    }\n                ];\n            } else {\n                // НЕвариативный шрифт - определяем стиль из имен\n                let weight = 400;\n                let style = \"normal\";\n                if (names) {\n                    const subfamily = preferredSubfamily; // Используем извлеченное имя\n                    const subfamilyLower = subfamily.toLowerCase();\n                    style = subfamilyLower.includes(\"italic\") || subfamilyLower.includes(\"oblique\") ? \"italic\" : \"normal\";\n                    // ... (логика определения веса из subfamily - без изменений) ...\n                    if (subfamilyLower.includes(\"thin\")) weight = 100;\n                    else if (subfamilyLower.includes(\"extralight\") || subfamilyLower.includes(\"ultralight\")) weight = 200;\n                    else if (subfamilyLower.includes(\"light\")) weight = 300;\n                    else if (subfamilyLower.includes(\"medium\")) weight = 500;\n                    else if (subfamilyLower.includes(\"semibold\") || subfamilyLower.includes(\"demibold\")) weight = 600;\n                    else if (subfamilyLower.includes(\"bold\")) weight = 700;\n                    else if (subfamilyLower.includes(\"extrabold\") || subfamilyLower.includes(\"ultrabold\")) weight = 800;\n                    else if (subfamilyLower.includes(\"black\") || subfamilyLower.includes(\"heavy\")) weight = 900;\n                }\n                fontObj.currentWeight = weight;\n                fontObj.currentStyle = style;\n                const styleInfo = (0,_fontUtilsCommon__WEBPACK_IMPORTED_MODULE_2__.findStyleInfoByWeightAndStyle)(weight, style);\n                fontObj.availableStyles = [\n                    {\n                        name: styleInfo.name,\n                        weight,\n                        style\n                    }\n                ];\n            }\n            // 6. Кэширование результата (метаданных - извлекаем из parsedFontData для совместимости кэша)\n            if (cacheKey && parsedFontData) {\n                // Кэшируем объект, похожий на старый metadata, для обратной совместимости?\n                // Или кэшировать весь parsedFontData? Пока оставим как было, извлекая нужное\n                const metadataToCache = {\n                    names: parsedFontData.names,\n                    preferredFamily: preferredFamily,\n                    preferredSubfamily: preferredSubfamily,\n                    isVariable: fontObj.isVariableFont,\n                    supportedAxes: fontObj.isVariableFont ? parsedFontData.tables.fvar.axes.reduce((acc, axis)=>{\n                        acc[axis.tag] = {\n                            name: axis.name?.en,\n                            min: axis.minValue,\n                            max: axis.maxValue,\n                            default: axis.defaultValue\n                        };\n                        return acc;\n                    }, {}) : null\n                };\n                localFontCache[cacheKey] = metadataToCache;\n            // console.log(`Metadata cached for ${name} (hash: ${cacheKey.substring(0, 8)}...)`); // Удаляем лог\n            }\n        } else {\n            // Парсинг не удался (parsedFontData is null)\n            react_toastify__WEBPACK_IMPORTED_MODULE_0__.toast.warning(`Не удалось проанализировать шрифт ${name}. Используются значения по умолчанию.`);\n            fontObj.availableStyles = [\n                {\n                    name: \"Regular\",\n                    weight: 400,\n                    style: \"normal\"\n                }\n            ];\n        }\n        // Определяем начальные настройки для вариативных шрифтов\n        let initialSettings = {};\n        if (fontObj.isVariableFont && fontObj.variableAxes) {\n            initialSettings = Object.entries(fontObj.variableAxes).reduce((acc, [tag, axis])=>{\n                acc[tag] = axis.default;\n                return acc;\n            }, {});\n        }\n        // !!! Используем loadFontFaceIfNeeded напрямую !!!\n        try {\n            // Вызываем функцию через именованный импорт\n            await (0,_cssGenerator__WEBPACK_IMPORTED_MODULE_3__.loadFontFaceIfNeeded)(fontFamilyName, objectUrl, initialSettings);\n            console.log(`Font ${fontFamilyName} loaded successfully using FontFace API.`);\n            // Успешно загрузили, возвращаем fontObj\n            revokeObjectURL(objectUrl); // Освобождаем blob URL после успешной загрузки\n            return fontObj;\n        } catch (error) {\n            console.error(`Failed to load font ${fontFamilyName} using FontFace API:`, error);\n            react_toastify__WEBPACK_IMPORTED_MODULE_0__.toast.error(`Ошибка при загрузке шрифта ${fontObj.name}.`);\n            revokeObjectURL(objectUrl); // Освобождаем blob URL при ошибке\n            fontObj.error = \"Failed to load via FontFace API\";\n            return fontObj; // Возвращаем объект с ошибкой\n        }\n    } catch (error) {\n        console.error(`Critical error processing font ${name}:`, error);\n        react_toastify__WEBPACK_IMPORTED_MODULE_0__.toast.error(`Критическая ошибка при обработке шрифта ${name}.`);\n        if (objectUrl) {\n            revokeObjectURL(objectUrl); // Освобождаем URL при любой критической ошибке\n        }\n        return null; // Возвращаем null при критической ошибке\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZXNzb3IuanM/NWMzMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDQpNGD0L3QutGG0LjQuCDQtNC70Y8g0L7QsdGA0LDQsdC+0YLQutC4INC70L7QutCw0LvRjNC90L4g0LfQsNCz0YDRg9C20LXQvdC90YvRhSDRiNGA0LjRhNGC0L7QsiAo0LrRjdGI0LjRgNC+0LLQsNC90LjQtSwgRm9udEZhY2UpXG5pbXBvcnQgeyB0b2FzdCB9IGZyb20gJ3JlYWN0LXRvYXN0aWZ5JztcbmltcG9ydCB7IHBhcnNlRm9udEJ1ZmZlciwgaXNWYXJpYWJsZUZvbnQgfSBmcm9tICcuL2ZvbnRQYXJzZXInO1xuaW1wb3J0IHsgZmluZFN0eWxlSW5mb0J5V2VpZ2h0QW5kU3R5bGUsIGdldEZvcm1hdEZyb21FeHRlbnNpb24gfSBmcm9tICcuL2ZvbnRVdGlsc0NvbW1vbic7XG5pbXBvcnQgeyBsb2FkRm9udEZhY2VJZk5lZWRlZCB9IGZyb20gJy4vY3NzR2VuZXJhdG9yJztcblxuLyoqXG4gKiDQmtGN0Ygg0LTQu9GPINGF0YDQsNC90LXQvdC40Y8g0YDQtdC30YPQu9GM0YLQsNGC0L7QsiDQsNC90LDQu9C40LfQsCDQu9C+0LrQsNC70YzQvdGL0YUg0YjRgNC40YTRgtC+0LJcbiAqINCa0LvRjtGHIC0g0YXQtdGIINGB0L7QtNC10YDQttC40LzQvtCz0L4g0YjRgNC40YTRgtCwLlxuICog0JfQvdCw0YfQtdC90LjQtSAtINC+0LHRitC10LrRgiBtZXRhZGF0YSwg0L/QvtC70YPRh9C10L3QvdGL0Lkg0LjQtyDQstC+0YDQutC10YDQsC5cbiAqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgT2JqZWN0Pn1cbiAqL1xuY29uc3QgbG9jYWxGb250Q2FjaGUgPSB7fTtcblxuLyoqXG4gKiDQntGB0LLQvtCx0L7QttC00LDQtdGCIFVSTCwg0YHQvtC30LTQsNC90L3Ri9C5INGH0LXRgNC10LcgVVJMLmNyZWF0ZU9iamVjdFVSTCgpXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVVJMINC00LvRjyDQvtGB0LLQvtCx0L7QttC00LXQvdC40Y9cbiAqL1xuZXhwb3J0IGNvbnN0IHJldm9rZU9iamVjdFVSTCA9ICh1cmwpID0+IHtcbiAgaWYgKHVybCAmJiB0eXBlb2YgdXJsID09PSAnc3RyaW5nJyAmJiB1cmwuc3RhcnRzV2l0aCgnYmxvYjonKSkge1xuICAgIHRyeSB7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHJldm9rZSBPYmplY3QgVVJMOicsIGVycm9yKTsgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwgd2FybiDQstC80LXRgdGC0L4gZXJyb3JcbiAgICAgIC8vIHRvYXN0LmVycm9yKCfQntGI0LjQsdC60LAg0L/RgNC4INC+0YHQstC+0LHQvtC20LTQtdC90LjQuCBVUkwnKTsgLy8g0J3QtSDRgdC/0LDQvNC40Lwg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqINCQ0YHQuNC90YXRgNC+0L3QvdC+INCy0YvRh9C40YHQu9GP0LXRgiBTSEEtMjU2INGF0LXRiCDQtNC70Y8gQmxvYiDRhNCw0LnQu9CwLlxuICogQHBhcmFtIHtCbG9ifSBmaWxlIC0g0KTQsNC50LsgKEJsb2IpLlxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nfG51bGw+fSAtINCf0YDQvtC80LjRgSDRgSBIRVgt0YHRgtGA0L7QutC+0Lkg0YXQtdGI0LAg0LjQu9C4IG51bGwg0LIg0YHQu9GD0YfQsNC1INC+0YjQuNCx0LrQuC5cbiAqL1xuY29uc3QgY2FsY3VsYXRlRmlsZUhhc2ggPSBhc3luYyAoZmlsZSkgPT4ge1xuICBpZiAoIShmaWxlIGluc3RhbmNlb2YgQmxvYikpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGlucHV0IGZvciBoYXNoaW5nOiBleHBlY3RlZCBCbG9iLicpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xuICAgIGNvbnN0IGhhc2hCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGJ1ZmZlcik7XG4gICAgLy8g0J/RgNC10L7QsdGA0LDQt9GD0LXQvCBBcnJheUJ1ZmZlciDRhdC10YjQsCDQsiBIRVgt0YHRgtGA0L7QutGDXG4gICAgY29uc3QgaGFzaEFycmF5ID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShoYXNoQnVmZmVyKSk7XG4gICAgY29uc3QgaGFzaEhleCA9IGhhc2hBcnJheS5tYXAoYiA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpKS5qb2luKCcnKTtcbiAgICByZXR1cm4gaGFzaEhleDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxjdWxhdGluZyBmaWxlIGhhc2g6JywgZXJyb3IpO1xuICAgIHRvYXN0LmVycm9yKCfQndC1INGD0LTQsNC70L7RgdGMINCy0YvRh9C40YHQu9C40YLRjCDRhdC10Ygg0YTQsNC50LvQsCDQtNC70Y8g0LrRjdGI0LjRgNC+0LLQsNC90LjRjy4nKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiDQn9C+0LvQvdC+0YHRgtGM0Y4g0LDQvdCw0LvQuNC30LjRgNGD0LXRgiDQu9C+0LrQsNC70YzQvdGL0Lkg0YjRgNC40YTRgiAo0LjQtyDRhNCw0LnQu9CwKSwg0L7Qv9GA0LXQtNC10LvRj9GPINC10LPQviDRhdCw0YDQsNC60YLQtdGA0LjRgdGC0LjQutC4LlxuICog0JLQutC70Y7Rh9Cw0LXRgiDQv9Cw0YDRgdC40L3Qsywg0LjQt9Cy0LvQtdGH0LXQvdC40LUg0LzQtdGC0LDQtNCw0L3QvdGL0YUsINC60Y3RiNC40YDQvtCy0LDQvdC40LUg0Lgg0LTQvtCx0LDQstC70LXQvdC40LUgQGZvbnQtZmFjZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBmb250SW5wdXQgLSDQntCx0YrQtdC60YIg0YjRgNC40YTRgtCwINGBIGZpbGUgKEJsb2IpINC4IG5hbWUgKHN0cmluZylcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdHxudWxsPn0gLSDQn9GA0L7QvNC40YEg0YEg0L7QsdGA0LDQsdC+0YLQsNC90L3Ri9C8INC+0LHRitC10LrRgtC+0Lwg0YjRgNC40YTRgtCwINC40LvQuCBudWxsINC/0YDQuCDQutGA0LjRgtC40YfQtdGB0LrQvtC5INC+0YjQuNCx0LrQtS5cbiAqL1xuZXhwb3J0IGNvbnN0IHByb2Nlc3NMb2NhbEZvbnQgPSBhc3luYyAoZm9udElucHV0KSA9PiB7XG4gIGlmICghZm9udElucHV0IHx8ICEoZm9udElucHV0LmZpbGUgaW5zdGFuY2VvZiBCbG9iKSB8fCAhZm9udElucHV0Lm5hbWUpIHtcbiAgICB0b2FzdC5lcnJvcign0J3QtdCy0LXRgNC90YvQtSDQstGF0L7QtNC90YvQtSDQtNCw0L3QvdGL0LUg0LTQu9GPINC+0LHRgNCw0LHQvtGC0LrQuCDQu9C+0LrQsNC70YzQvdC+0LPQviDRiNGA0LjRhNGC0LAuJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCB7IGZpbGUsIG5hbWUgfSA9IGZvbnRJbnB1dDtcbiAgY29uc3QgZm9udElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDkpOyAvLyDQmtC+0YDQvtGC0LrQuNC5IElEINC00LvRjyDRh9C40YLQsNC10LzQvtGB0YLQuFxuICBjb25zdCBjbGVhbmVkTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwuW14vLl0rJC8sICcnKTtcbiAgbGV0IG9iamVjdFVybCA9IG51bGw7XG4gIGxldCBjYWNoZUtleSA9IG51bGw7IC8vINCY0L3QuNGG0LjQsNC70LjQt9C40YDRg9C10LwgY2FjaGVLZXlcblxuICB0cnkge1xuICAgIC8vIDEuINCS0YvRh9C40YHQu9GP0LXQvCDRhdC10Ygg0YTQsNC50LvQsCDQtNC70Y8g0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40Y8g0LIg0LrQsNGH0LXRgdGC0LLQtSDQutC70Y7Rh9CwINC60Y3RiNCwXG4gICAgY2FjaGVLZXkgPSBhd2FpdCBjYWxjdWxhdGVGaWxlSGFzaChmaWxlKTtcbiAgICBpZiAoIWNhY2hlS2V5KSB7XG4gICAgICAvLyDQldGB0LvQuCDRhdC10Ygg0L3QtSDRg9C00LDQu9C+0YHRjCDQv9C+0LvRg9GH0LjRgtGMLCDQutGN0YjQuNGA0L7QstCw0L3QuNC1INC90LXQstC+0LfQvNC+0LbQvdC+LCDQvdC+INC/0YDQvtC00L7Qu9C20LDQtdC8INC+0LHRgNCw0LHQvtGC0LrRg1xuICAgICAgdG9hc3Qud2FybmluZygn0J3QtSDRg9C00LDQu9C+0YHRjCDRgdC+0LfQtNCw0YLRjCDQutC70Y7RhyDQutGN0YjQsCDQtNC70Y8g0YjRgNC40YTRgtCwLCDQutGN0YjQuNGA0L7QstCw0L3QuNC1INCx0YPQtNC10YIg0L/RgNC+0L/Rg9GJ0LXQvdC+LicpO1xuICAgIH1cblxuICAgIC8vIDIuINCf0YDQvtCy0LXRgNC60LAg0LrRjdGI0LAgKNGC0LXQv9C10YDRjCDQv9C+INGF0LXRiNGDKVxuICAgIGlmIChjYWNoZUtleSAmJiBsb2NhbEZvbnRDYWNoZVtjYWNoZUtleV0pIHtcbiAgICAgIGNvbnNvbGUubG9nKGBVc2luZyBjYWNoZWQgbWV0YWRhdGEgZm9yICR7bmFtZX0gKGhhc2g6ICR7Y2FjaGVLZXkuc3Vic3RyaW5nKDAsIDgpfS4uLilgKTsgLy8g0JvQvtCzINC00LvRjyDQvtGC0LvQsNC00LrQuFxuICAgICAgb2JqZWN0VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsgLy8g0KHQstC10LbQuNC5IFVSTCDQvdGD0LbQtdC9INCy0YHQtdCz0LTQsFxuICAgICAgY29uc3QgY2FjaGVkTWV0YWRhdGEgPSB7IC4uLmxvY2FsRm9udENhY2hlW2NhY2hlS2V5XSB9OyAvLyDQn9C+0LvRg9GH0LDQtdC8INC80LXRgtCw0LTQsNC90L3Ri9C1INC40Lcg0LrRjdGI0LBcblxuICAgICAgY29uc3QgZm9udEZhbWlseU5hbWUgPSBgZm9udC0ke2ZvbnRJZH1gOyAvLyDQk9C10L3QtdGA0LjRgNGD0LXQvCDRg9C90LjQutCw0LvRjNC90L7QtSDQuNC80Y9cblxuICAgICAgLy8g0KHQvtC30LTQsNC10LwgZm9udE9iaiDQvdCwINC+0YHQvdC+0LLQtSDQutGN0YjQuNGA0L7QstCw0L3QvdGL0YUg0LzQtdGC0LDQtNCw0L3QvdGL0YVcbiAgICAgIGNvbnN0IGZvbnRPYmogPSB7XG4gICAgICAgIGlkOiBmb250SWQsXG4gICAgICAgIG5hbWU6IGNhY2hlZE1ldGFkYXRhLnByZWZlcnJlZEZhbWlseSB8fCBjYWNoZWRNZXRhZGF0YS5uYW1lcz8uZm9udEZhbWlseSB8fCBjbGVhbmVkTmFtZSwgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0LjQvNC10L3QsCDQuNC3INC60Y3RiNCwXG4gICAgICAgIG9yaWdpbmFsTmFtZTogbmFtZSxcbiAgICAgICAgc291cmNlOiAnbG9jYWwnLFxuICAgICAgICBjdXJyZW50V2VpZ2h0OiA0MDAsIC8vINCR0YPQtNC10YIg0YPRgtC+0YfQvdC10L3QviDQvdC40LbQtVxuICAgICAgICBjdXJyZW50U3R5bGU6ICdub3JtYWwnLCAvLyDQkdGD0LTQtdGCINGD0YLQvtGH0L3QtdC90L4g0L3QuNC20LVcbiAgICAgICAgaXNWYXJpYWJsZUZvbnQ6IGNhY2hlZE1ldGFkYXRhLmlzVmFyaWFibGUgfHwgZmFsc2UsIC8vINCY0YHQv9C+0LvRjNC30YPQtdC8INGE0LvQsNCzINC40Lcg0LrRjdGI0LBcbiAgICAgICAgdmFyaWFibGVBeGVzOiB7fSxcbiAgICAgICAgc3VwcG9ydGVkQXhlczogW10sXG4gICAgICAgIHZhcmlhdGlvblNldHRpbmdzOiAnJyxcbiAgICAgICAgYXZhaWxhYmxlU3R5bGVzOiBbXSxcbiAgICAgICAgZmlsZTogZmlsZSwgLy8g0J7RgdGC0LDQstC70Y/QtdC8INGE0LDQudC7INC00LvRjyDQstC+0LfQvNC+0LbQvdC+0LPQviDQv9C+0LLRgtC+0YDQvdC+0LPQviDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjRj1xuICAgICAgICB1cmw6IG9iamVjdFVybCwgLy8g0KHQvtGF0YDQsNC90Y/QtdC8IGJsb2IgVVJMINC00LvRjyBGb250RmFjZSBBUElcbiAgICAgICAgZm9udEZhbWlseTogZm9udEZhbWlseU5hbWUsIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDRgdCz0LXQvdC10YDQuNGA0L7QstCw0L3QvdC+0LUg0LjQvNGPIVxuICAgICAgfTtcblxuICAgICAgLy8g0JLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC+0YHQuCDQuCDRgdGC0LjQu9C4INC40Lcg0LrRjdGI0LjRgNC+0LLQsNC90L3Ri9GFINC80LXRgtCw0LTQsNC90L3Ri9GFXG4gICAgICBpZiAoZm9udE9iai5pc1ZhcmlhYmxlRm9udCAmJiBjYWNoZWRNZXRhZGF0YS5zdXBwb3J0ZWRBeGVzKSB7XG4gICAgICAgICAvLyDQl9Cw0L/QvtC70L3Rj9C10Lwg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L7QsSDQvtGB0Y/RhSDQuNC3INC60Y3RiNCwXG4gICAgICAgICBmb250T2JqLnZhcmlhYmxlQXhlcyA9IE9iamVjdC5lbnRyaWVzKGNhY2hlZE1ldGFkYXRhLnN1cHBvcnRlZEF4ZXMpLnJlZHVjZSgoYWNjLCBbdGFnLCBheGlzSW5mb10pID0+IHtcbiAgICAgICAgICAgICAgICBhY2NbdGFnXSA9IHsgbmFtZTogYXhpc0luZm8ubmFtZSB8fCB0YWcudG9VcHBlckNhc2UoKSwgbWluOiBheGlzSW5mby5taW4sIG1heDogYXhpc0luZm8ubWF4LCBkZWZhdWx0OiBheGlzSW5mby5kZWZhdWx0IH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgIGZvbnRPYmouc3VwcG9ydGVkQXhlcyA9IE9iamVjdC5rZXlzKGNhY2hlZE1ldGFkYXRhLnN1cHBvcnRlZEF4ZXMpO1xuICAgICAgICAgZm9udE9iai52YXJpYXRpb25TZXR0aW5ncyA9IE9iamVjdC5lbnRyaWVzKGZvbnRPYmoudmFyaWFibGVBeGVzKVxuICAgICAgICAgICAgLm1hcCgoW3RhZywgdmFsdWVdKSA9PiBgXFxcIiR7dGFnfVxcXCIgJHt2YWx1ZS5kZWZhdWx0IHx8IDQwMH1gKSAvLyDQl9Cw0L/QsNGB0L3QvtC1INC30L3QsNGH0LXQvdC40LUg0LTQu9GPINCy0LXRgdCwXG4gICAgICAgICAgICAuam9pbignLCAnKTtcbiAgICAgICAgIC8vINCe0L/RgNC10LTQtdC70Y/QtdC8INC90LDRh9Cw0LvRjNC90YvQtSDRgdGC0LjQu9C4INC00LvRjyDQstCw0YDQuNCw0YLQuNCy0L3Ri9GFINGI0YDQuNGE0YLQvtCyINC40Lcg0LrRjdGI0LAgKNC80L7QttC10YIg0LHRi9GC0Ywg0L/QtdGA0LXRgdC80L7RgtGA0LXQvdC+KVxuICAgICAgICAgLy8g0J/QvtC60LAg0L7RgdGC0LDQstC70Y/QtdC8INC30LDQs9C70YPRiNC60YMg0LjQu9C4INC+0L/RgNC10LTQtdC70Y/QtdC8INC90LAg0L7RgdC90L7QstC1INC00LXRhNC+0LvRgtC90YvRhSDQvtGB0LXQuSwg0LXRgdC70Lgg0LLQvtC30LzQvtC20L3QvlxuICAgICAgICAgLy8gVE9ETzog0KPRgtC+0YfQvdC40YLRjCDQu9C+0LPQuNC60YMgYXZhaWxhYmxlU3R5bGVzINC00LvRjyDQstCw0YDQuNCw0YLQuNCy0L3Ri9GFINC40Lcg0LrRjdGI0LBcbiAgICAgICAgIGZvbnRPYmouYXZhaWxhYmxlU3R5bGVzID0gW3sgbmFtZTogJ0RlZmF1bHQnLCB3ZWlnaHQ6IDQwMCwgc3R5bGU6ICdub3JtYWwnIH1dOyAvLyDQl9Cw0LPQu9GD0YjQutCwXG4gICAgICB9IGVsc2UgaWYgKCFmb250T2JqLmlzVmFyaWFibGVGb250ICYmIGNhY2hlZE1ldGFkYXRhLm5hbWVzKSB7XG4gICAgICAgICAvLyDQntC/0YDQtdC00LXQu9GP0LXQvCDRgdGC0LjQu9GML9Cy0LXRgSDQtNC70Y8g0L3QtdCy0LDRgNC40LDRgtC40LLQvdGL0YUg0LjQtyDQutGN0YjQsFxuICAgICAgICAgbGV0IHdlaWdodCA9IDQwMDtcbiAgICAgICAgIGxldCBzdHlsZSA9ICdub3JtYWwnO1xuICAgICAgICAgY29uc3Qgc3ViZmFtaWx5ID0gY2FjaGVkTWV0YWRhdGEucHJlZmVycmVkU3ViZmFtaWx5IHx8IGNhY2hlZE1ldGFkYXRhLm5hbWVzPy5mb250U3ViZmFtaWx5IHx8ICdSZWd1bGFyJztcbiAgICAgICAgIGNvbnN0IHN1YmZhbWlseUxvd2VyID0gc3ViZmFtaWx5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICBzdHlsZSA9IChzdWJmYW1pbHlMb3dlci5pbmNsdWRlcygnaXRhbGljJykgfHwgc3ViZmFtaWx5TG93ZXIuaW5jbHVkZXMoJ29ibGlxdWUnKSkgPyAnaXRhbGljJyA6ICdub3JtYWwnO1xuICAgICAgICAgLy8gLi4uICjQu9C+0LPQuNC60LAg0L7Qv9GA0LXQtNC10LvQtdC90LjRjyDQstC10YHQsCDQuNC3IHN1YmZhbWlseSkgLi4uXG4gICAgICAgICAgaWYgKHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCd0aGluJykpIHdlaWdodCA9IDEwMDtcbiAgICAgICAgICBlbHNlIGlmIChzdWJmYW1pbHlMb3dlci5pbmNsdWRlcygnZXh0cmFsaWdodCcpIHx8IHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCd1bHRyYWxpZ2h0JykpIHdlaWdodCA9IDIwMDtcbiAgICAgICAgICBlbHNlIGlmIChzdWJmYW1pbHlMb3dlci5pbmNsdWRlcygnbGlnaHQnKSkgd2VpZ2h0ID0gMzAwO1xuICAgICAgICAgIGVsc2UgaWYgKHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCdtZWRpdW0nKSkgd2VpZ2h0ID0gNTAwO1xuICAgICAgICAgIGVsc2UgaWYgKHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCdzZW1pYm9sZCcpIHx8IHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCdkZW1pYm9sZCcpKSB3ZWlnaHQgPSA2MDA7XG4gICAgICAgICAgZWxzZSBpZiAoc3ViZmFtaWx5TG93ZXIuaW5jbHVkZXMoJ2JvbGQnKSkgd2VpZ2h0ID0gNzAwO1xuICAgICAgICAgIGVsc2UgaWYgKHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCdleHRyYWJvbGQnKSB8fCBzdWJmYW1pbHlMb3dlci5pbmNsdWRlcygndWx0cmFib2xkJykpIHdlaWdodCA9IDgwMDtcbiAgICAgICAgICBlbHNlIGlmIChzdWJmYW1pbHlMb3dlci5pbmNsdWRlcygnYmxhY2snKSB8fCBzdWJmYW1pbHlMb3dlci5pbmNsdWRlcygnaGVhdnknKSkgd2VpZ2h0ID0gOTAwO1xuXG4gICAgICAgICBmb250T2JqLmN1cnJlbnRXZWlnaHQgPSB3ZWlnaHQ7XG4gICAgICAgICBmb250T2JqLmN1cnJlbnRTdHlsZSA9IHN0eWxlO1xuICAgICAgICAgY29uc3Qgc3R5bGVJbmZvID0gZmluZFN0eWxlSW5mb0J5V2VpZ2h0QW5kU3R5bGUod2VpZ2h0LCBzdHlsZSk7XG4gICAgICAgICBmb250T2JqLmF2YWlsYWJsZVN0eWxlcyA9IFt7IG5hbWU6IHN0eWxlSW5mby5uYW1lLCB3ZWlnaHQsIHN0eWxlIH1dO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDQldGB0LvQuCDRgdGC0LjQu9C10Lkg0L3QtdGCINCyINC60Y3RiNC1ICjQvdCw0L/RgNC40LzQtdGALCDRgdGC0LDRgNGL0Lkg0LrRjdGIINC40LvQuCDQvtGI0LjQsdC60LAg0L/QsNGA0YHQuNC90LPQsCDQv9GA0Lgg0LrRjdGI0LjRgNC+0LLQsNC90LjQuClcbiAgICAgICAgICBmb250T2JqLmF2YWlsYWJsZVN0eWxlcyA9IFt7IG5hbWU6ICdSZWd1bGFyJywgd2VpZ2h0OiA0MDAsIHN0eWxlOiAnbm9ybWFsJyB9XTtcbiAgICAgIH1cblxuICAgICAgLy8g0J7Qv9GA0LXQtNC10LvRj9C10Lwg0L3QsNGH0LDQu9GM0L3Ri9C1INC90LDRgdGC0YDQvtC50LrQuCDQtNC70Y8g0LLQsNGA0LjQsNGC0LjQstC90YvRhSDRiNGA0LjRhNGC0L7QsiDQuNC3INC60Y3RiNCwXG4gICAgICBsZXQgaW5pdGlhbFNldHRpbmdzID0ge307XG4gICAgICBpZiAoZm9udE9iai5pc1ZhcmlhYmxlRm9udCAmJiBmb250T2JqLnZhcmlhYmxlQXhlcykge1xuICAgICAgICBpbml0aWFsU2V0dGluZ3MgPSBPYmplY3QuZW50cmllcyhmb250T2JqLnZhcmlhYmxlQXhlcykucmVkdWNlKChhY2MsIFt0YWcsIGF4aXNdKSA9PiB7XG4gICAgICAgICAgYWNjW3RhZ10gPSBheGlzLmRlZmF1bHQ7XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgICAgfVxuXG4gICAgICAvLyAhISEg0JjRgdC/0L7Qu9GM0LfRg9C10LwgbG9hZEZvbnRGYWNlSWZOZWVkZWQg0L3QsNC/0YDRj9C80YPRjiAhISFcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vINCS0YvQt9GL0LLQsNC10Lwg0YTRg9C90LrRhtC40Y4g0YfQtdGA0LXQtyDQuNC80LXQvdC+0LLQsNC90L3Ri9C5INC40LzQv9C+0YDRglxuICAgICAgICBhd2FpdCBsb2FkRm9udEZhY2VJZk5lZWRlZChmb250RmFtaWx5TmFtZSwgb2JqZWN0VXJsLCBpbml0aWFsU2V0dGluZ3MpO1xuICAgICAgICBjb25zb2xlLmxvZyhgRm9udCAke2ZvbnRGYW1pbHlOYW1lfSBsb2FkZWQgc3VjY2Vzc2Z1bGx5IGZyb20gY2FjaGUgdXNpbmcgRm9udEZhY2UgQVBJLmApO1xuICAgICAgICAvLyDQo9GB0L/QtdGI0L3QviDQt9Cw0LPRgNGD0LfQuNC70LgsINCy0L7Qt9Cy0YDQsNGJ0LDQtdC8IGZvbnRPYmpcbiAgICAgICAgcmV2b2tlT2JqZWN0VVJMKG9iamVjdFVybCk7IC8vINCe0YHQstC+0LHQvtC20LTQsNC10LwgYmxvYiBVUkwg0L/QvtGB0LvQtSDRg9GB0L/QtdGI0L3QvtC5INC30LDQs9GA0YPQt9C60LhcbiAgICAgICAgcmV0dXJuIGZvbnRPYmo7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBmb250ICR7Zm9udEZhbWlseU5hbWV9IGZyb20gY2FjaGUgdXNpbmcgRm9udEZhY2UgQVBJOmAsIGVycm9yKTtcbiAgICAgICAgdG9hc3QuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRiNGA0LjRhNGC0LAgJHtmb250T2JqLm5hbWV9INC40Lcg0LrRjdGI0LAuYCk7XG4gICAgICAgIHJldm9rZU9iamVjdFVSTChvYmplY3RVcmwpOyAvLyDQntGB0LLQvtCx0L7QttC00LDQtdC8IGJsb2IgVVJMINC/0YDQuCDQvtGI0LjQsdC60LVcbiAgICAgICAgZm9udE9iai5lcnJvciA9ICdGYWlsZWQgdG8gbG9hZCB2aWEgRm9udEZhY2UgQVBJJztcbiAgICAgICAgcmV0dXJuIGZvbnRPYmo7IC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdC8INC+0LHRitC10LrRgiDRgSDQvtGI0LjQsdC60L7QuVxuICAgIH1cbiAgICAvLyAtLS0g0JrQvtC90LXRhiDQvtCx0YDQsNCx0L7RgtC60Lgg0LrRjdGI0LAgLS0tXG4gICAgfVxuICAgIC8vIC0tLSDQmtC+0L3QtdGGINC/0YDQvtCy0LXRgNC60Lgg0LrRjdGI0LAgLS0tXG5cblxuICAgIC8vIDMuINCh0L7Qt9C00LDQvdC40LUgVVJMICjQtdGB0LvQuCDQvdC1INC40Lcg0LrRjdGI0LApXG4gICAgaWYgKCFvYmplY3RVcmwpIHtcbiAgICAgICAgb2JqZWN0VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICB9XG5cbiAgICAvLyA0LiDQn9Cw0YDRgdC40L3QsyDRhNCw0LnQu9CwIC0+INC/0L7Qu9GD0YfQtdC90LjQtSDQv9C+0LvQvdC+0LPQviDQvtCx0YrQtdC60YLQsCDRiNGA0LjRhNGC0LAg0YfQtdGA0LXQtyBwYXJzZUZvbnRCdWZmZXJcbiAgICAvLyBwYXJzZUZvbnRGaWxlINGC0LXQv9C10YDRjCDQstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0YrQtdC60YIgbWV0YWRhdGEg0LjQu9C4IG51bGxcbiAgICBsZXQgcGFyc2VkRm9udERhdGEgPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xuICAgICAgIHBhcnNlZEZvbnREYXRhID0gYXdhaXQgcGFyc2VGb250QnVmZmVyKGJ1ZmZlcik7IC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IHBhcnNlRm9udEJ1ZmZlclxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVhZGluZyBvciBwYXJzaW5nIGZvbnQgYnVmZmVyIGZvciAke25hbWV9OmAsIGUpO1xuICAgICAgICB0b2FzdC5lcnJvcihg0J7RiNC40LHQutCwINGH0YLQtdC90LjRjyDQuNC70Lgg0LDQvdCw0LvQuNC30LAg0YTQsNC50LvQsCDRiNGA0LjRhNGC0LAgJHtuYW1lfS5gKTtcbiAgICAgICAgLy8g0J3QtSDQstC+0LfQstGA0LDRidCw0LXQvCBudWxsINGB0YDQsNC30YMsINGCLtC6LiBhZGRGb250RmFjZSDQvNC+0LbQtdGCINGA0LDQsdC+0YLQsNGC0Ywg0YEg0LHQsNC30L7QstGL0LwgZm9udE9ialxuICAgIH1cblxuICAgIC8vINCh0L7Qt9C00LDQtdC8INCx0LDQt9C+0LLRi9C5INC+0LHRitC10LrRgiDRiNGA0LjRhNGC0LAgKNC60LDQuiDQuCDRgNCw0L3RjNGI0LUpXG4gICAgY29uc3QgZm9udE9iaiA9IHtcbiAgICAgIGlkOiBmb250SWQsXG4gICAgICBuYW1lOiBjbGVhbmVkTmFtZSwgLy8g0KPRgtC+0YfQvdC40Lwg0LjQtyBtZXRhZGF0YVxuICAgICAgb3JpZ2luYWxOYW1lOiBuYW1lLFxuICAgICAgc291cmNlOiAnbG9jYWwnLFxuICAgICAgY3VycmVudFdlaWdodDogNDAwLFxuICAgICAgY3VycmVudFN0eWxlOiAnbm9ybWFsJyxcbiAgICAgIGlzVmFyaWFibGVGb250OiBmYWxzZSwgLy8g0KPRgtC+0YfQvdC40Lwg0LjQtyBtZXRhZGF0YVxuICAgICAgdmFyaWFibGVBeGVzOiB7fSxcbiAgICAgIHN1cHBvcnRlZEF4ZXM6IFtdLFxuICAgICAgdmFyaWF0aW9uU2V0dGluZ3M6ICcnLFxuICAgICAgYXZhaWxhYmxlU3R5bGVzOiBbXSxcbiAgICAgIGZpbGU6IGZpbGUsXG4gICAgICAvLyB1cmw6IG9iamVjdFVybCwgLy8g0KPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0L3QuNC20LUsINC/0L7RgdC70LUg0YHQvtC30LTQsNC90LjRjyBmb250RmFtaWx5TmFtZVxuICAgICAgZm9udEZhbWlseTogbnVsbCwgLy8g0KPRgdGC0LDQvdC+0LLQuNC8INC90LjQttC1XG4gICAgfTtcblxuICAgIC8vINCj0YHRgtCw0L3QvtCy0LjQvCBmb250T2JqLnVybCDQuCBmb250T2JqLmZvbnRGYW1pbHlcbiAgICBjb25zdCBmb250RmFtaWx5TmFtZSA9IGBmb250LSR7Zm9udElkfWA7XG4gICAgZm9udE9iai51cmwgPSBvYmplY3RVcmw7XG4gICAgZm9udE9iai5mb250RmFtaWx5ID0gZm9udEZhbWlseU5hbWU7XG5cbiAgICAvLyA1LiDQl9Cw0L/QvtC70L3QtdC90LjQtSBmb250T2JqINC40Lcg0LTQsNC90L3Ri9GFINC/0LDRgNGB0LjQvdCz0LAsINC10YHQu9C4INC/0LDRgNGB0LjQvdCzINGD0YHQv9C10YjQtdC9XG4gICAgaWYgKHBhcnNlZEZvbnREYXRhKSB7IC8vINCd0L7QstCw0Y8g0L/RgNC+0LLQtdGA0LrQsFxuICAgICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0LTQsNC90L3Ri9C1INC40Lcg0L7QsdGK0LXQutGC0LAgcGFyc2VkRm9udERhdGEgKNGA0LXQt9GD0LvRjNGC0LDRgiBvcGVudHlwZS5wYXJzZSlcbiAgICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LjQvNC10L3QsCAo0L/RgNC10LTQv9C+0YfQuNGC0LDQtdC8INCw0L3Qs9C70LjQudGB0LrQuNC1KVxuICAgICAgY29uc3QgbmFtZXMgPSBwYXJzZWRGb250RGF0YS5uYW1lcyB8fCB7fTtcbiAgICAgIGNvbnN0IHByZWZlcnJlZEZhbWlseSA9IG5hbWVzLnByZWZlcnJlZEZhbWlseT8uZW4gfHwgbmFtZXMuZm9udEZhbWlseT8uZW47XG4gICAgICBjb25zdCBwcmVmZXJyZWRTdWJmYW1pbHkgPSBuYW1lcy5wcmVmZXJyZWRTdWJmYW1pbHk/LmVuIHx8IG5hbWVzLmZvbnRTdWJmYW1pbHk/LmVuIHx8ICdSZWd1bGFyJztcblxuICAgICAgZm9udE9iai5uYW1lID0gcHJlZmVycmVkRmFtaWx5IHx8IGZvbnRPYmoubmFtZTtcbiAgICAgIGZvbnRPYmouaXNWYXJpYWJsZUZvbnQgPSBpc1ZhcmlhYmxlRm9udChwYXJzZWRGb250RGF0YSk7IC8vINCY0YHQv9C+0LvRjNC30YPQtdC8IGlzVmFyaWFibGVGb250XG5cbiAgICAgIGlmIChmb250T2JqLmlzVmFyaWFibGVGb250ICYmIHBhcnNlZEZvbnREYXRhLnRhYmxlcz8uZnZhcj8uYXhlcykge1xuICAgICAgICAgLy8g0JfQsNC/0L7Qu9C90Y/QtdC8INC40L3RhNC+0YDQvNCw0YbQuNGOINC+0LEg0L7RgdGP0YUg0LjQtyBwYXJzZWRGb250RGF0YS50YWJsZXMuZnZhci5heGVzXG4gICAgICAgICBmb250T2JqLnZhcmlhYmxlQXhlcyA9IHBhcnNlZEZvbnREYXRhLnRhYmxlcy5mdmFyLmF4ZXMucmVkdWNlKChhY2MsIGF4aXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWcgPSBheGlzLnRhZztcbiAgICAgICAgICAgICAgICAvLyDQmNGB0L/QvtC70YzQt9GD0LXQvCDQuNC80Y8g0LjQtyBheGlzLm5hbWU/LmVuLCDQtdGB0LvQuCDQvtC90L4g0LXRgdGC0YxcbiAgICAgICAgICAgICAgICBjb25zdCBheGlzTmFtZSA9IGF4aXMubmFtZT8uZW4gfHwgdGFnLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgIGFjY1t0YWddID0geyBuYW1lOiBheGlzTmFtZSwgbWluOiBheGlzLm1pblZhbHVlLCBtYXg6IGF4aXMubWF4VmFsdWUsIGRlZmF1bHQ6IGF4aXMuZGVmYXVsdFZhbHVlIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgIGZvbnRPYmouc3VwcG9ydGVkQXhlcyA9IE9iamVjdC5rZXlzKGZvbnRPYmoudmFyaWFibGVBeGVzKTtcbiAgICAgICAgIGZvbnRPYmoudmFyaWF0aW9uU2V0dGluZ3MgPSBPYmplY3QuZW50cmllcyhmb250T2JqLnZhcmlhYmxlQXhlcylcbiAgICAgICAgICAgIC5tYXAoKFt0YWcsIHZhbHVlXSkgPT4gYFxcXCIke3RhZ31cXFwiICR7dmFsdWUuZGVmYXVsdCB8fCA0MDB9YCkgLy8g0JfQsNC/0LDRgdC90L7QtSDQt9C90LDRh9C10L3QuNC1INC00LvRjyDQstC10YHQsFxuICAgICAgICAgICAgLmpvaW4oJywgJyk7XG4gICAgICAgICBmb250T2JqLmF2YWlsYWJsZVN0eWxlcyA9IFt7IG5hbWU6ICdEZWZhdWx0Jywgd2VpZ2h0OiA0MDAsIHN0eWxlOiAnbm9ybWFsJyB9XTsgLy8g0JfQsNCz0LvRg9GI0LrQsFxuICAgICAgfSBlbHNlIGlmIChmb250T2JqLmlzVmFyaWFibGVGb250ICYmICFwYXJzZWRGb250RGF0YS50YWJsZXM/LmZ2YXI/LmF4ZXMpIHtcbiAgICAgICAgIC8vINCS0LDRgNC40LDRgtC40LLQvdGL0LksINC90L4g0L7RgdC4INC90LUg0LjQt9Cy0LvQtdC60LvQuNGB0YxcbiAgICAgICAgIGNvbnNvbGUud2FybihgVmFyaWFibGUgZm9udCAke25hbWV9IHBhcnNlZCB3aXRob3V0IGF4ZXMgaW5mby5gKTtcbiAgICAgICAgIGZvbnRPYmouaXNWYXJpYWJsZUZvbnQgPSBmYWxzZTsgLy8g0KHRh9C40YLQsNC10Lwg0L3QtdCy0LDRgNC40LDRgtC40LLQvdGL0LxcbiAgICAgICAgIGZvbnRPYmouYXZhaWxhYmxlU3R5bGVzID0gW3sgbmFtZTogJ1JlZ3VsYXInLCB3ZWlnaHQ6IDQwMCwgc3R5bGU6ICdub3JtYWwnIH1dO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g0J3QldCy0LDRgNC40LDRgtC40LLQvdGL0Lkg0YjRgNC40YTRgiAtINC+0L/RgNC10LTQtdC70Y/QtdC8INGB0YLQuNC70Ywg0LjQtyDQuNC80LXQvVxuICAgICAgICBsZXQgd2VpZ2h0ID0gNDAwO1xuICAgICAgICBsZXQgc3R5bGUgPSAnbm9ybWFsJztcbiAgICAgICAgaWYgKG5hbWVzKSB7IC8vINCd0L7QstCw0Y8g0L/RgNC+0LLQtdGA0LrQsFxuICAgICAgICAgICBjb25zdCBzdWJmYW1pbHkgPSBwcmVmZXJyZWRTdWJmYW1pbHk7IC8vINCY0YHQv9C+0LvRjNC30YPQtdC8INC40LfQstC70LXRh9C10L3QvdC+0LUg0LjQvNGPXG4gICAgICAgICAgIGNvbnN0IHN1YmZhbWlseUxvd2VyID0gc3ViZmFtaWx5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBzdHlsZSA9IChzdWJmYW1pbHlMb3dlci5pbmNsdWRlcygnaXRhbGljJykgfHwgc3ViZmFtaWx5TG93ZXIuaW5jbHVkZXMoJ29ibGlxdWUnKSkgPyAnaXRhbGljJyA6ICdub3JtYWwnO1xuICAgICAgICAgICAgLy8gLi4uICjQu9C+0LPQuNC60LAg0L7Qv9GA0LXQtNC10LvQtdC90LjRjyDQstC10YHQsCDQuNC3IHN1YmZhbWlseSAtINCx0LXQtyDQuNC30LzQtdC90LXQvdC40LkpIC4uLlxuICAgICAgICAgICAgaWYgKHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCd0aGluJykpIHdlaWdodCA9IDEwMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCdleHRyYWxpZ2h0JykgfHwgc3ViZmFtaWx5TG93ZXIuaW5jbHVkZXMoJ3VsdHJhbGlnaHQnKSkgd2VpZ2h0ID0gMjAwO1xuICAgICAgICAgICAgZWxzZSBpZiAoc3ViZmFtaWx5TG93ZXIuaW5jbHVkZXMoJ2xpZ2h0JykpIHdlaWdodCA9IDMwMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCdtZWRpdW0nKSkgd2VpZ2h0ID0gNTAwO1xuICAgICAgICAgICAgZWxzZSBpZiAoc3ViZmFtaWx5TG93ZXIuaW5jbHVkZXMoJ3NlbWlib2xkJykgfHwgc3ViZmFtaWx5TG93ZXIuaW5jbHVkZXMoJ2RlbWlib2xkJykpIHdlaWdodCA9IDYwMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCdib2xkJykpIHdlaWdodCA9IDcwMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCdleHRyYWJvbGQnKSB8fCBzdWJmYW1pbHlMb3dlci5pbmNsdWRlcygndWx0cmFib2xkJykpIHdlaWdodCA9IDgwMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCdibGFjaycpIHx8IHN1YmZhbWlseUxvd2VyLmluY2x1ZGVzKCdoZWF2eScpKSB3ZWlnaHQgPSA5MDA7XG4gICAgICAgIH1cbiAgICAgICAgIGZvbnRPYmouY3VycmVudFdlaWdodCA9IHdlaWdodDtcbiAgICAgICAgIGZvbnRPYmouY3VycmVudFN0eWxlID0gc3R5bGU7XG4gICAgICAgIGNvbnN0IHN0eWxlSW5mbyA9IGZpbmRTdHlsZUluZm9CeVdlaWdodEFuZFN0eWxlKHdlaWdodCwgc3R5bGUpO1xuICAgICAgICBmb250T2JqLmF2YWlsYWJsZVN0eWxlcyA9IFt7IG5hbWU6IHN0eWxlSW5mby5uYW1lLCB3ZWlnaHQsIHN0eWxlIH1dO1xuICAgICAgfVxuXG4gICAgICAvLyA2LiDQmtGN0YjQuNGA0L7QstCw0L3QuNC1INGA0LXQt9GD0LvRjNGC0LDRgtCwICjQvNC10YLQsNC00LDQvdC90YvRhSAtINC40LfQstC70LXQutCw0LXQvCDQuNC3IHBhcnNlZEZvbnREYXRhINC00LvRjyDRgdC+0LLQvNC10YHRgtC40LzQvtGB0YLQuCDQutGN0YjQsClcbiAgICAgIGlmIChjYWNoZUtleSAmJiBwYXJzZWRGb250RGF0YSkgeyAvLyDQlNC+0LHQsNCy0LjQu9C4INC/0YDQvtCy0LXRgNC60YMgcGFyc2VkRm9udERhdGFcbiAgICAgICAgLy8g0JrRjdGI0LjRgNGD0LXQvCDQvtCx0YrQtdC60YIsINC/0L7RhdC+0LbQuNC5INC90LAg0YHRgtCw0YDRi9C5IG1ldGFkYXRhLCDQtNC70Y8g0L7QsdGA0LDRgtC90L7QuSDRgdC+0LLQvNC10YHRgtC40LzQvtGB0YLQuD9cbiAgICAgICAgLy8g0JjQu9C4INC60Y3RiNC40YDQvtCy0LDRgtGMINCy0LXRgdGMIHBhcnNlZEZvbnREYXRhPyDQn9C+0LrQsCDQvtGB0YLQsNCy0LjQvCDQutCw0Log0LHRi9C70L4sINC40LfQstC70LXQutCw0Y8g0L3Rg9C20L3QvtC1XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhVG9DYWNoZSA9IHtcbiAgICAgICAgICAgIG5hbWVzOiBwYXJzZWRGb250RGF0YS5uYW1lcyxcbiAgICAgICAgICAgIHByZWZlcnJlZEZhbWlseTogcHJlZmVycmVkRmFtaWx5LFxuICAgICAgICAgICAgcHJlZmVycmVkU3ViZmFtaWx5OiBwcmVmZXJyZWRTdWJmYW1pbHksXG4gICAgICAgICAgICBpc1ZhcmlhYmxlOiBmb250T2JqLmlzVmFyaWFibGVGb250LFxuICAgICAgICAgICAgc3VwcG9ydGVkQXhlczogZm9udE9iai5pc1ZhcmlhYmxlRm9udCA/IHBhcnNlZEZvbnREYXRhLnRhYmxlcy5mdmFyLmF4ZXMucmVkdWNlKChhY2MsIGF4aXMpID0+IHtcbiAgICAgICAgICAgICAgICAgYWNjW2F4aXMudGFnXSA9IHsgbmFtZTogYXhpcy5uYW1lPy5lbiwgbWluOiBheGlzLm1pblZhbHVlLCBtYXg6IGF4aXMubWF4VmFsdWUsIGRlZmF1bHQ6IGF4aXMuZGVmYXVsdFZhbHVlIH07XG4gICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgICAgfSwge30pIDogbnVsbCwgLy8g0KHQvtGF0YDQsNC90Y/QtdC8IG51bGwg0LXRgdC70Lgg0L3QtSDQstCw0YDQuNCw0YLQuNCy0L3Ri9C5XG4gICAgICAgICAgICAvLyDQlNC+0LHQsNCy0LjRgtGMINC00YDRg9Cz0LjQtSDQvdGD0LbQvdGL0LUg0L/QvtC70Y8g0LXRgdC70Lgg0L3QtdC+0LHRhdC+0LTQuNC80L5cbiAgICAgICAgfTtcbiAgICAgICAgbG9jYWxGb250Q2FjaGVbY2FjaGVLZXldID0gbWV0YWRhdGFUb0NhY2hlO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgTWV0YWRhdGEgY2FjaGVkIGZvciAke25hbWV9IChoYXNoOiAke2NhY2hlS2V5LnN1YnN0cmluZygwLCA4KX0uLi4pYCk7IC8vINCj0LTQsNC70Y/QtdC8INC70L7Qs1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vINCf0LDRgNGB0LjQvdCzINC90LUg0YPQtNCw0LvRgdGPIChwYXJzZWRGb250RGF0YSBpcyBudWxsKVxuICAgICAgdG9hc3Qud2FybmluZyhg0J3QtSDRg9C00LDQu9C+0YHRjCDQv9GA0L7QsNC90LDQu9C40LfQuNGA0L7QstCw0YLRjCDRiNGA0LjRhNGCICR7bmFtZX0uINCY0YHQv9C+0LvRjNC30YPRjtGC0YHRjyDQt9C90LDRh9C10L3QuNGPINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOLmApO1xuICAgICAgZm9udE9iai5hdmFpbGFibGVTdHlsZXMgPSBbeyBuYW1lOiAnUmVndWxhcicsIHdlaWdodDogNDAwLCBzdHlsZTogJ25vcm1hbCcgfV07XG4gICAgfVxuXG4gICAgLy8g0J7Qv9GA0LXQtNC10LvRj9C10Lwg0L3QsNGH0LDQu9GM0L3Ri9C1INC90LDRgdGC0YDQvtC50LrQuCDQtNC70Y8g0LLQsNGA0LjQsNGC0LjQstC90YvRhSDRiNGA0LjRhNGC0L7QslxuICAgIGxldCBpbml0aWFsU2V0dGluZ3MgPSB7fTtcbiAgICBpZiAoZm9udE9iai5pc1ZhcmlhYmxlRm9udCAmJiBmb250T2JqLnZhcmlhYmxlQXhlcykge1xuICAgICAgaW5pdGlhbFNldHRpbmdzID0gT2JqZWN0LmVudHJpZXMoZm9udE9iai52YXJpYWJsZUF4ZXMpLnJlZHVjZSgoYWNjLCBbdGFnLCBheGlzXSkgPT4ge1xuICAgICAgICBhY2NbdGFnXSA9IGF4aXMuZGVmYXVsdDtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIHt9KTtcbiAgICB9XG5cbiAgICAvLyAhISEg0JjRgdC/0L7Qu9GM0LfRg9C10LwgbG9hZEZvbnRGYWNlSWZOZWVkZWQg0L3QsNC/0YDRj9C80YPRjiAhISFcbiAgICB0cnkge1xuICAgICAgLy8g0JLRi9C30YvQstCw0LXQvCDRhNGD0L3QutGG0LjRjiDRh9C10YDQtdC3INC40LzQtdC90L7QstCw0L3QvdGL0Lkg0LjQvNC/0L7RgNGCXG4gICAgICBhd2FpdCBsb2FkRm9udEZhY2VJZk5lZWRlZChmb250RmFtaWx5TmFtZSwgb2JqZWN0VXJsLCBpbml0aWFsU2V0dGluZ3MpO1xuICAgICAgY29uc29sZS5sb2coYEZvbnQgJHtmb250RmFtaWx5TmFtZX0gbG9hZGVkIHN1Y2Nlc3NmdWxseSB1c2luZyBGb250RmFjZSBBUEkuYCk7XG4gICAgICAvLyDQo9GB0L/QtdGI0L3QviDQt9Cw0LPRgNGD0LfQuNC70LgsINCy0L7Qt9Cy0YDQsNGJ0LDQtdC8IGZvbnRPYmpcbiAgICAgIHJldm9rZU9iamVjdFVSTChvYmplY3RVcmwpOyAvLyDQntGB0LLQvtCx0L7QttC00LDQtdC8IGJsb2IgVVJMINC/0L7RgdC70LUg0YPRgdC/0LXRiNC90L7QuSDQt9Cw0LPRgNGD0LfQutC4XG4gICAgICByZXR1cm4gZm9udE9iajtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIGZvbnQgJHtmb250RmFtaWx5TmFtZX0gdXNpbmcgRm9udEZhY2UgQVBJOmAsIGVycm9yKTtcbiAgICAgIHRvYXN0LmVycm9yKGDQntGI0LjQsdC60LAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0YjRgNC40YTRgtCwICR7Zm9udE9iai5uYW1lfS5gKTtcbiAgICAgIHJldm9rZU9iamVjdFVSTChvYmplY3RVcmwpOyAvLyDQntGB0LLQvtCx0L7QttC00LDQtdC8IGJsb2IgVVJMINC/0YDQuCDQvtGI0LjQsdC60LVcbiAgICAgIGZvbnRPYmouZXJyb3IgPSAnRmFpbGVkIHRvIGxvYWQgdmlhIEZvbnRGYWNlIEFQSSc7XG4gICAgICByZXR1cm4gZm9udE9iajsgLy8g0JLQvtC30LLRgNCw0YnQsNC10Lwg0L7QsdGK0LXQutGCINGBINC+0YjQuNCx0LrQvtC5XG4gICAgfVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7IC8vINCT0LvQvtCx0LDQu9GM0L3Ri9C5IHRyeS4uLmNhdGNoINC00LvRjyBwcm9jZXNzTG9jYWxGb250XG4gICAgY29uc29sZS5lcnJvcihgQ3JpdGljYWwgZXJyb3IgcHJvY2Vzc2luZyBmb250ICR7bmFtZX06YCwgZXJyb3IpO1xuICAgIHRvYXN0LmVycm9yKGDQmtGA0LjRgtC40YfQtdGB0LrQsNGPINC+0YjQuNCx0LrQsCDQv9GA0Lgg0L7QsdGA0LDQsdC+0YLQutC1INGI0YDQuNGE0YLQsCAke25hbWV9LmApO1xuICAgIGlmIChvYmplY3RVcmwpIHtcbiAgICAgICAgcmV2b2tlT2JqZWN0VVJMKG9iamVjdFVybCk7IC8vINCe0YHQstC+0LHQvtC20LTQsNC10LwgVVJMINC/0YDQuCDQu9GO0LHQvtC5INC60YDQuNGC0LjRh9C10YHQutC+0Lkg0L7RiNC40LHQutC1XG4gICAgfVxuICAgIHJldHVybiBudWxsOyAvLyDQktC+0LfQstGA0LDRidCw0LXQvCBudWxsINC/0YDQuCDQutGA0LjRgtC40YfQtdGB0LrQvtC5INC+0YjQuNCx0LrQtVxuICB9XG59OyAiXSwibmFtZXMiOlsidG9hc3QiLCJwYXJzZUZvbnRCdWZmZXIiLCJpc1ZhcmlhYmxlRm9udCIsImZpbmRTdHlsZUluZm9CeVdlaWdodEFuZFN0eWxlIiwiZ2V0Rm9ybWF0RnJvbUV4dGVuc2lvbiIsImxvYWRGb250RmFjZUlmTmVlZGVkIiwibG9jYWxGb250Q2FjaGUiLCJyZXZva2VPYmplY3RVUkwiLCJ1cmwiLCJzdGFydHNXaXRoIiwiVVJMIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsImNhbGN1bGF0ZUZpbGVIYXNoIiwiZmlsZSIsIkJsb2IiLCJidWZmZXIiLCJhcnJheUJ1ZmZlciIsImhhc2hCdWZmZXIiLCJjcnlwdG8iLCJzdWJ0bGUiLCJkaWdlc3QiLCJoYXNoQXJyYXkiLCJBcnJheSIsImZyb20iLCJVaW50OEFycmF5IiwiaGFzaEhleCIsIm1hcCIsImIiLCJ0b1N0cmluZyIsInBhZFN0YXJ0Iiwiam9pbiIsInByb2Nlc3NMb2NhbEZvbnQiLCJmb250SW5wdXQiLCJuYW1lIiwiZm9udElkIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0cmluZyIsImNsZWFuZWROYW1lIiwicmVwbGFjZSIsIm9iamVjdFVybCIsImNhY2hlS2V5Iiwid2FybmluZyIsImxvZyIsImNyZWF0ZU9iamVjdFVSTCIsImNhY2hlZE1ldGFkYXRhIiwiZm9udEZhbWlseU5hbWUiLCJmb250T2JqIiwiaWQiLCJwcmVmZXJyZWRGYW1pbHkiLCJuYW1lcyIsImZvbnRGYW1pbHkiLCJvcmlnaW5hbE5hbWUiLCJzb3VyY2UiLCJjdXJyZW50V2VpZ2h0IiwiY3VycmVudFN0eWxlIiwiaXNWYXJpYWJsZSIsInZhcmlhYmxlQXhlcyIsInN1cHBvcnRlZEF4ZXMiLCJ2YXJpYXRpb25TZXR0aW5ncyIsImF2YWlsYWJsZVN0eWxlcyIsIk9iamVjdCIsImVudHJpZXMiLCJyZWR1Y2UiLCJhY2MiLCJ0YWciLCJheGlzSW5mbyIsInRvVXBwZXJDYXNlIiwibWluIiwibWF4IiwiZGVmYXVsdCIsImtleXMiLCJ2YWx1ZSIsIndlaWdodCIsInN0eWxlIiwic3ViZmFtaWx5IiwicHJlZmVycmVkU3ViZmFtaWx5IiwiZm9udFN1YmZhbWlseSIsInN1YmZhbWlseUxvd2VyIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInN0eWxlSW5mbyIsImluaXRpYWxTZXR0aW5ncyIsImF4aXMiLCJwYXJzZWRGb250RGF0YSIsImUiLCJlbiIsInRhYmxlcyIsImZ2YXIiLCJheGVzIiwiYXhpc05hbWUiLCJtaW5WYWx1ZSIsIm1heFZhbHVlIiwiZGVmYXVsdFZhbHVlIiwibWV0YWRhdGFUb0NhY2hlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utils/localFontProcessor.js\n");

/***/ }),

/***/ "./utils/staticFontGenerator.js":
/*!**************************************!*\
  !*** ./utils/staticFontGenerator.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkGenerationCapabilities: () => (/* binding */ checkGenerationCapabilities),\n/* harmony export */   generateStaticFont: () => (/* binding */ generateStaticFont)\n/* harmony export */ });\n/**\n * Утилита для генерации статических шрифтов из вариативных\n * Использует различные подходы в зависимости от доступности инструментов\n */ // Попытка загрузки HarfBuzz WASM (если доступен)\nlet harfbuzzWasm = null;\nconst loadHarfBuzz = async ()=>{\n    if (harfbuzzWasm) return harfbuzzWasm;\n    try {\n        // Пытаемся загрузить HarfBuzz WASM (пакет не установлен, будет fallback)\n        return null;\n    } catch (error) {\n        return null;\n    }\n};\n/**\n * Генерирует статический шрифт с использованием HarfBuzz WASM\n */ const generateWithHarfBuzz = async (fontBuffer, variableSettings)=>{\n    const hb = await loadHarfBuzz();\n    if (!hb) throw new Error(\"HarfBuzz WASM недоступен\");\n    // Создаем blob из font data\n    const blob = hb.createBlob(fontBuffer);\n    const face = hb.createFace(blob, 0);\n    const font = hb.createFont(face);\n    // Применяем вариативные настройки\n    const variations = Object.entries(variableSettings).map(([tag, value])=>({\n            tag: hb.tagFromString(tag),\n            value: parseFloat(value)\n        }));\n    font.setVariations(variations);\n    // Получаем новые данные шрифта\n    const outputBlob = face.reference_table(hb.tagFromString(\"GDEF\")); // Это упрощенный пример\n    const outputBuffer = outputBlob.getData();\n    // Очищаем ресурсы\n    font.destroy();\n    face.destroy();\n    blob.destroy();\n    return outputBuffer;\n};\n/**\n * Генерирует статический шрифт через серверный API\n */ const generateViaAPI = async (fontBuffer, variableSettings, format = \"woff2\")=>{\n    const response = await fetch(\"/api/generate-static-font\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            fontData: Buffer.from(fontBuffer).toString(\"base64\"),\n            variableSettings,\n            format\n        })\n    });\n    if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.details || \"Серверная генерация не удалась\");\n    }\n    const result = await response.json();\n    return Buffer.from(result.data, \"base64\");\n};\n/**\n * Fallback: создает \"псевдо-статический\" шрифт с CSS переменными\n */ const generatePseudoStatic = (fontBuffer, variableSettings, fontName)=>{\n    // Возвращаем оригинальный шрифт + CSS с фиксированными настройками\n    const cssVariations = Object.entries(variableSettings).map(([axis, value])=>`\"${axis}\" ${value}`).join(\", \");\n    const css = `\n@font-face {\n  font-family: \"${fontName}-Static\";\n  src: url(data:font/woff2;base64,${Buffer.from(fontBuffer).toString(\"base64\")}) format(\"woff2\");\n  font-variation-settings: ${cssVariations};\n  font-display: swap;\n}\n\n.static-font {\n  font-family: \"${fontName}-Static\", sans-serif;\n  font-variation-settings: ${cssVariations};\n}\n`;\n    return {\n        fontBuffer,\n        css,\n        isPseudoStatic: true\n    };\n};\n/**\n * Основная функция генерации статического шрифта\n * Пробует разные методы в порядке приоритета\n */ const generateStaticFont = async (fontBuffer, variableSettings, options = {})=>{\n    const { format = \"woff2\", fontName = \"VariableFont\", preferredMethod = \"auto\" } = options;\n    // Метод 1: HarfBuzz WASM (наиболее качественный)\n    if (preferredMethod === \"auto\" || preferredMethod === \"harfbuzz\") {\n        try {\n            const result = await generateWithHarfBuzz(fontBuffer, variableSettings);\n            return {\n                buffer: result,\n                method: \"harfbuzz\",\n                isRealStatic: true\n            };\n        } catch (error) {\n        // Переходим к следующему методу\n        }\n    }\n    // Метод 2: Серверный API (второй по качеству)\n    if (preferredMethod === \"auto\" || preferredMethod === \"server\") {\n        try {\n            const result = await generateViaAPI(fontBuffer, variableSettings, format);\n            return {\n                buffer: result,\n                method: \"server\",\n                isRealStatic: true\n            };\n        } catch (error) {\n        // Переходим к следующему методу\n        }\n    }\n    // Метод 3: Псевдо-статический (fallback)\n    const result = generatePseudoStatic(fontBuffer, variableSettings, fontName);\n    return {\n        buffer: result.fontBuffer,\n        css: result.css,\n        method: \"pseudo-static\",\n        isRealStatic: false,\n        warning: \"Создан псевдо-статический шрифт. Для настоящей статической генерации требуется серверная поддержка.\"\n    };\n};\n/**\n * Проверяет доступность различных методов генерации\n */ const checkGenerationCapabilities = async ()=>{\n    const capabilities = {\n        harfbuzz: false,\n        server: false,\n        pseudoStatic: true // Всегда доступен\n    };\n    // Проверяем HarfBuzz\n    try {\n        await loadHarfBuzz();\n        capabilities.harfbuzz = true;\n    } catch (error) {\n    // HarfBuzz недоступен\n    }\n    // Проверяем серверный API\n    try {\n        const response = await fetch(\"/api/generate-static-font\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                test: true\n            })\n        });\n        capabilities.server = response.status !== 404;\n    } catch (error) {\n    // Серверный API недоступен\n    }\n    return capabilities;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UyxDQUFDO2dCQUFFNEIsTUFBTTtZQUFLO1FBQ3BDO1FBQ0FKLGFBQWFFLE1BQU0sR0FBR2hDLFNBQVNtQyxNQUFNLEtBQUs7SUFDNUMsRUFBRSxPQUFPL0QsT0FBTztJQUNkLDJCQUEyQjtJQUM3QjtJQUVBLE9BQU8wRDtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb250LWdhdW50bGV0LWNsb25lLy4vdXRpbHMvc3RhdGljRm9udEdlbmVyYXRvci5qcz8wMzlkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog0KPRgtC40LvQuNGC0LAg0LTQu9GPINCz0LXQvdC10YDQsNGG0LjQuCDRgdGC0LDRgtC40YfQtdGB0LrQuNGFINGI0YDQuNGE0YLQvtCyINC40Lcg0LLQsNGA0LjQsNGC0LjQstC90YvRhVxuICog0JjRgdC/0L7Qu9GM0LfRg9C10YIg0YDQsNC30LvQuNGH0L3Ri9C1INC/0L7QtNGF0L7QtNGLINCyINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDQtNC+0YHRgtGD0L/QvdC+0YHRgtC4INC40L3RgdGC0YDRg9C80LXQvdGC0L7QslxuICovXG5cbi8vINCf0L7Qv9GL0YLQutCwINC30LDQs9GA0YPQt9C60LggSGFyZkJ1enogV0FTTSAo0LXRgdC70Lgg0LTQvtGB0YLRg9C/0LXQvSlcbmxldCBoYXJmYnV6eldhc20gPSBudWxsO1xuXG5jb25zdCBsb2FkSGFyZkJ1enogPSBhc3luYyAoKSA9PiB7XG4gIGlmIChoYXJmYnV6eldhc20pIHJldHVybiBoYXJmYnV6eldhc207XG4gIFxuICB0cnkge1xuICAgIC8vINCf0YvRgtCw0LXQvNGB0Y8g0LfQsNCz0YDRg9C30LjRgtGMIEhhcmZCdXp6IFdBU00gKNC/0LDQutC10YIg0L3QtSDRg9GB0YLQsNC90L7QstC70LXQvSwg0LHRg9C00LXRgiBmYWxsYmFjaylcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiDQk9C10L3QtdGA0LjRgNGD0LXRgiDRgdGC0LDRgtC40YfQtdGB0LrQuNC5INGI0YDQuNGE0YIg0YEg0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40LXQvCBIYXJmQnV6eiBXQVNNXG4gKi9cbmNvbnN0IGdlbmVyYXRlV2l0aEhhcmZCdXp6ID0gYXN5bmMgKGZvbnRCdWZmZXIsIHZhcmlhYmxlU2V0dGluZ3MpID0+IHtcbiAgY29uc3QgaGIgPSBhd2FpdCBsb2FkSGFyZkJ1enooKTtcbiAgaWYgKCFoYikgdGhyb3cgbmV3IEVycm9yKCdIYXJmQnV6eiBXQVNNINC90LXQtNC+0YHRgtGD0L/QtdC9Jyk7XG4gIFxuICAvLyDQodC+0LfQtNCw0LXQvCBibG9iINC40LcgZm9udCBkYXRhXG4gIGNvbnN0IGJsb2IgPSBoYi5jcmVhdGVCbG9iKGZvbnRCdWZmZXIpO1xuICBjb25zdCBmYWNlID0gaGIuY3JlYXRlRmFjZShibG9iLCAwKTtcbiAgY29uc3QgZm9udCA9IGhiLmNyZWF0ZUZvbnQoZmFjZSk7XG4gIFxuICAvLyDQn9GA0LjQvNC10L3Rj9C10Lwg0LLQsNGA0LjQsNGC0LjQstC90YvQtSDQvdCw0YHRgtGA0L7QudC60LhcbiAgY29uc3QgdmFyaWF0aW9ucyA9IE9iamVjdC5lbnRyaWVzKHZhcmlhYmxlU2V0dGluZ3MpLm1hcCgoW3RhZywgdmFsdWVdKSA9PiAoe1xuICAgIHRhZzogaGIudGFnRnJvbVN0cmluZyh0YWcpLFxuICAgIHZhbHVlOiBwYXJzZUZsb2F0KHZhbHVlKVxuICB9KSk7XG4gIFxuICBmb250LnNldFZhcmlhdGlvbnModmFyaWF0aW9ucyk7XG4gIFxuICAvLyDQn9C+0LvRg9GH0LDQtdC8INC90L7QstGL0LUg0LTQsNC90L3Ri9C1INGI0YDQuNGE0YLQsFxuICBjb25zdCBvdXRwdXRCbG9iID0gZmFjZS5yZWZlcmVuY2VfdGFibGUoaGIudGFnRnJvbVN0cmluZygnR0RFRicpKTsgLy8g0K3RgtC+INGD0L/RgNC+0YnQtdC90L3Ri9C5INC/0YDQuNC80LXRgFxuICBjb25zdCBvdXRwdXRCdWZmZXIgPSBvdXRwdXRCbG9iLmdldERhdGEoKTtcbiAgXG4gIC8vINCe0YfQuNGJ0LDQtdC8INGA0LXRgdGD0YDRgdGLXG4gIGZvbnQuZGVzdHJveSgpO1xuICBmYWNlLmRlc3Ryb3koKTtcbiAgYmxvYi5kZXN0cm95KCk7XG4gIFxuICByZXR1cm4gb3V0cHV0QnVmZmVyO1xufTtcblxuLyoqXG4gKiDQk9C10L3QtdGA0LjRgNGD0LXRgiDRgdGC0LDRgtC40YfQtdGB0LrQuNC5INGI0YDQuNGE0YIg0YfQtdGA0LXQtyDRgdC10YDQstC10YDQvdGL0LkgQVBJXG4gKi9cbmNvbnN0IGdlbmVyYXRlVmlhQVBJID0gYXN5bmMgKGZvbnRCdWZmZXIsIHZhcmlhYmxlU2V0dGluZ3MsIGZvcm1hdCA9ICd3b2ZmMicpID0+IHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9nZW5lcmF0ZS1zdGF0aWMtZm9udCcsIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgZm9udERhdGE6IEJ1ZmZlci5mcm9tKGZvbnRCdWZmZXIpLnRvU3RyaW5nKCdiYXNlNjQnKSxcbiAgICAgIHZhcmlhYmxlU2V0dGluZ3MsXG4gICAgICBmb3JtYXRcbiAgICB9KVxuICB9KTtcbiAgXG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IuZGV0YWlscyB8fCAn0KHQtdGA0LLQtdGA0L3QsNGPINCz0LXQvdC10YDQsNGG0LjRjyDQvdC1INGD0LTQsNC70LDRgdGMJyk7XG4gIH1cbiAgXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKHJlc3VsdC5kYXRhLCAnYmFzZTY0Jyk7XG59O1xuXG4vKipcbiAqIEZhbGxiYWNrOiDRgdC+0LfQtNCw0LXRgiBcItC/0YHQtdCy0LTQvi3RgdGC0LDRgtC40YfQtdGB0LrQuNC5XCIg0YjRgNC40YTRgiDRgSBDU1Mg0L/QtdGA0LXQvNC10L3QvdGL0LzQuFxuICovXG5jb25zdCBnZW5lcmF0ZVBzZXVkb1N0YXRpYyA9IChmb250QnVmZmVyLCB2YXJpYWJsZVNldHRpbmdzLCBmb250TmFtZSkgPT4ge1xuICAvLyDQktC+0LfQstGA0LDRidCw0LXQvCDQvtGA0LjQs9C40L3QsNC70YzQvdGL0Lkg0YjRgNC40YTRgiArIENTUyDRgSDRhNC40LrRgdC40YDQvtCy0LDQvdC90YvQvNC4INC90LDRgdGC0YDQvtC50LrQsNC80LhcbiAgY29uc3QgY3NzVmFyaWF0aW9ucyA9IE9iamVjdC5lbnRyaWVzKHZhcmlhYmxlU2V0dGluZ3MpXG4gICAgLm1hcCgoW2F4aXMsIHZhbHVlXSkgPT4gYFwiJHtheGlzfVwiICR7dmFsdWV9YClcbiAgICAuam9pbignLCAnKTtcbiAgXG4gIGNvbnN0IGNzcyA9IGBcbkBmb250LWZhY2Uge1xuICBmb250LWZhbWlseTogXCIke2ZvbnROYW1lfS1TdGF0aWNcIjtcbiAgc3JjOiB1cmwoZGF0YTpmb250L3dvZmYyO2Jhc2U2NCwke0J1ZmZlci5mcm9tKGZvbnRCdWZmZXIpLnRvU3RyaW5nKCdiYXNlNjQnKX0pIGZvcm1hdChcIndvZmYyXCIpO1xuICBmb250LXZhcmlhdGlvbi1zZXR0aW5nczogJHtjc3NWYXJpYXRpb25zfTtcbiAgZm9udC1kaXNwbGF5OiBzd2FwO1xufVxuXG4uc3RhdGljLWZvbnQge1xuICBmb250LWZhbWlseTogXCIke2ZvbnROYW1lfS1TdGF0aWNcIiwgc2Fucy1zZXJpZjtcbiAgZm9udC12YXJpYXRpb24tc2V0dGluZ3M6ICR7Y3NzVmFyaWF0aW9uc307XG59XG5gO1xuICBcbiAgcmV0dXJuIHtcbiAgICBmb250QnVmZmVyLFxuICAgIGNzcyxcbiAgICBpc1BzZXVkb1N0YXRpYzogdHJ1ZVxuICB9O1xufTtcblxuLyoqXG4gKiDQntGB0L3QvtCy0L3QsNGPINGE0YPQvdC60YbQuNGPINCz0LXQvdC10YDQsNGG0LjQuCDRgdGC0LDRgtC40YfQtdGB0LrQvtCz0L4g0YjRgNC40YTRgtCwXG4gKiDQn9GA0L7QsdGD0LXRgiDRgNCw0LfQvdGL0LUg0LzQtdGC0L7QtNGLINCyINC/0L7RgNGP0LTQutC1INC/0YDQuNC+0YDQuNGC0LXRgtCwXG4gKi9cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVN0YXRpY0ZvbnQgPSBhc3luYyAoZm9udEJ1ZmZlciwgdmFyaWFibGVTZXR0aW5ncywgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHsgZm9ybWF0ID0gJ3dvZmYyJywgZm9udE5hbWUgPSAnVmFyaWFibGVGb250JywgcHJlZmVycmVkTWV0aG9kID0gJ2F1dG8nIH0gPSBvcHRpb25zO1xuICBcbiAgLy8g0JzQtdGC0L7QtCAxOiBIYXJmQnV6eiBXQVNNICjQvdCw0LjQsdC+0LvQtdC1INC60LDRh9C10YHRgtCy0LXQvdC90YvQuSlcbiAgaWYgKHByZWZlcnJlZE1ldGhvZCA9PT0gJ2F1dG8nIHx8IHByZWZlcnJlZE1ldGhvZCA9PT0gJ2hhcmZidXp6Jykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW5lcmF0ZVdpdGhIYXJmQnV6eihmb250QnVmZmVyLCB2YXJpYWJsZVNldHRpbmdzKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ1ZmZlcjogcmVzdWx0LFxuICAgICAgICBtZXRob2Q6ICdoYXJmYnV6eicsXG4gICAgICAgIGlzUmVhbFN0YXRpYzogdHJ1ZVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8g0J/QtdGA0LXRhdC+0LTQuNC8INC6INGB0LvQtdC00YPRjtGJ0LXQvNGDINC80LXRgtC+0LTRg1xuICAgIH1cbiAgfVxuICBcbiAgLy8g0JzQtdGC0L7QtCAyOiDQodC10YDQstC10YDQvdGL0LkgQVBJICjQstGC0L7RgNC+0Lkg0L/QviDQutCw0YfQtdGB0YLQstGDKVxuICBpZiAocHJlZmVycmVkTWV0aG9kID09PSAnYXV0bycgfHwgcHJlZmVycmVkTWV0aG9kID09PSAnc2VydmVyJykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW5lcmF0ZVZpYUFQSShmb250QnVmZmVyLCB2YXJpYWJsZVNldHRpbmdzLCBmb3JtYXQpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYnVmZmVyOiByZXN1bHQsXG4gICAgICAgIG1ldGhvZDogJ3NlcnZlcicsXG4gICAgICAgIGlzUmVhbFN0YXRpYzogdHJ1ZVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8g0J/QtdGA0LXRhdC+0LTQuNC8INC6INGB0LvQtdC00YPRjtGJ0LXQvNGDINC80LXRgtC+0LTRg1xuICAgIH1cbiAgfVxuICBcbiAgLy8g0JzQtdGC0L7QtCAzOiDQn9GB0LXQstC00L4t0YHRgtCw0YLQuNGH0LXRgdC60LjQuSAoZmFsbGJhY2spXG4gIGNvbnN0IHJlc3VsdCA9IGdlbmVyYXRlUHNldWRvU3RhdGljKGZvbnRCdWZmZXIsIHZhcmlhYmxlU2V0dGluZ3MsIGZvbnROYW1lKTtcbiAgcmV0dXJuIHtcbiAgICBidWZmZXI6IHJlc3VsdC5mb250QnVmZmVyLFxuICAgIGNzczogcmVzdWx0LmNzcyxcbiAgICBtZXRob2Q6ICdwc2V1ZG8tc3RhdGljJyxcbiAgICBpc1JlYWxTdGF0aWM6IGZhbHNlLFxuICAgIHdhcm5pbmc6ICfQodC+0LfQtNCw0L0g0L/RgdC10LLQtNC+LdGB0YLQsNGC0LjRh9C10YHQutC40Lkg0YjRgNC40YTRgi4g0JTQu9GPINC90LDRgdGC0L7Rj9GJ0LXQuSDRgdGC0LDRgtC40YfQtdGB0LrQvtC5INCz0LXQvdC10YDQsNGG0LjQuCDRgtGA0LXQsdGD0LXRgtGB0Y8g0YHQtdGA0LLQtdGA0L3QsNGPINC/0L7QtNC00LXRgNC20LrQsC4nXG4gIH07XG59O1xuXG4vKipcbiAqINCf0YDQvtCy0LXRgNGP0LXRgiDQtNC+0YHRgtGD0L/QvdC+0YHRgtGMINGA0LDQt9C70LjRh9C90YvRhSDQvNC10YLQvtC00L7QsiDQs9C10L3QtdGA0LDRhtC40LhcbiAqL1xuZXhwb3J0IGNvbnN0IGNoZWNrR2VuZXJhdGlvbkNhcGFiaWxpdGllcyA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgY2FwYWJpbGl0aWVzID0ge1xuICAgIGhhcmZidXp6OiBmYWxzZSxcbiAgICBzZXJ2ZXI6IGZhbHNlLFxuICAgIHBzZXVkb1N0YXRpYzogdHJ1ZSAvLyDQktGB0LXQs9C00LAg0LTQvtGB0YLRg9C/0LXQvVxuICB9O1xuICBcbiAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8IEhhcmZCdXp6XG4gIHRyeSB7XG4gICAgYXdhaXQgbG9hZEhhcmZCdXp6KCk7XG4gICAgY2FwYWJpbGl0aWVzLmhhcmZidXp6ID0gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBIYXJmQnV6eiDQvdC10LTQvtGB0YLRg9C/0LXQvVxuICB9XG4gIFxuICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0YHQtdGA0LLQtdGA0L3Ri9C5IEFQSVxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvZ2VuZXJhdGUtc3RhdGljLWZvbnQnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0ZXN0OiB0cnVlIH0pXG4gICAgfSk7XG4gICAgY2FwYWJpbGl0aWVzLnNlcnZlciA9IHJlc3BvbnNlLnN0YXR1cyAhPT0gNDA0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vINCh0LXRgNCy0LXRgNC90YvQuSBBUEkg0L3QtdC00L7RgdGC0YPQv9C10L1cbiAgfVxuICBcbiAgcmV0dXJuIGNhcGFiaWxpdGllcztcbn07ICJdLCJuYW1lcyI6WyJoYXJmYnV6eldhc20iLCJsb2FkSGFyZkJ1enoiLCJlcnJvciIsImdlbmVyYXRlV2l0aEhhcmZCdXp6IiwiZm9udEJ1ZmZlciIsInZhcmlhYmxlU2V0dGluZ3MiLCJoYiIsIkVycm9yIiwiYmxvYiIsImNyZWF0ZUJsb2IiLCJmYWNlIiwiY3JlYXRlRmFjZSIsImZvbnQiLCJjcmVhdGVGb250IiwidmFyaWF0aW9ucyIsIk9iamVjdCIsImVudHJpZXMiLCJtYXAiLCJ0YWciLCJ2YWx1ZSIsInRhZ0Zyb21TdHJpbmciLCJwYXJzZUZsb2F0Iiwic2V0VmFyaWF0aW9ucyIsIm91dHB1dEJsb2IiLCJyZWZlcmVuY2VfdGFibGUiLCJvdXRwdXRCdWZmZXIiLCJnZXREYXRhIiwiZGVzdHJveSIsImdlbmVyYXRlVmlhQVBJIiwiZm9ybWF0IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZvbnREYXRhIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwib2siLCJqc29uIiwiZGV0YWlscyIsInJlc3VsdCIsImRhdGEiLCJnZW5lcmF0ZVBzZXVkb1N0YXRpYyIsImZvbnROYW1lIiwiY3NzVmFyaWF0aW9ucyIsImF4aXMiLCJqb2luIiwiY3NzIiwiaXNQc2V1ZG9TdGF0aWMiLCJnZW5lcmF0ZVN0YXRpY0ZvbnQiLCJvcHRpb25zIiwicHJlZmVycmVkTWV0aG9kIiwiYnVmZmVyIiwiaXNSZWFsU3RhdGljIiwid2FybmluZyIsImNoZWNrR2VuZXJhdGlvbkNhcGFiaWxpdGllcyIsImNhcGFiaWxpdGllcyIsImhhcmZidXp6Iiwic2VydmVyIiwicHNldWRvU3RhdGljIiwidGVzdCIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/staticFontGenerator.js\n");

/***/ }),

/***/ "./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (() => {



/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "next/head":
/*!****************************!*\
  !*** external "next/head" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/head");

/***/ }),

/***/ "opentype.js":
/*!******************************!*\
  !*** external "opentype.js" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("opentype.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "react-toastify":
/*!*********************************!*\
  !*** external "react-toastify" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = import("react-toastify");;

/***/ }),

/***/ "woff2-encoder/decompress":
/*!*******************************************!*\
  !*** external "woff2-encoder/decompress" ***!
  \*******************************************/
/***/ ((module) => {

"use strict";
module.exports = import("woff2-encoder/decompress");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc","vendor-chunks/react-toastify"], () => (__webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=private-next-pages%2F_error&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();